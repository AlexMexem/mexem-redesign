(()=>{var kz=Object.defineProperty,Fz=Object.defineProperties;var Uz=Object.getOwnPropertyDescriptors;var lT=Object.getOwnPropertySymbols;var Bz=Object.prototype.hasOwnProperty,zz=Object.prototype.propertyIsEnumerable;var T0=Math.pow,w0=(i,e,t)=>e in i?kz(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,gc=(i,e)=>{for(var t in e||(e={}))Bz.call(e,t)&&w0(i,t,e[t]);if(lT)for(var t of lT(e))zz.call(e,t)&&w0(i,t,e[t]);return i},vc=(i,e)=>Fz(i,Uz(e));var E=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Me=(i,e,t)=>(w0(i,typeof e!="symbol"?e+"":e,t),t);var pn=(i,e,t)=>new Promise((n,r)=>{var s=u=>{try{o(t.next(u))}catch(l){r(l)}},a=u=>{try{o(t.throw(u))}catch(l){r(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(i,e)).next())});var R=E(($be,Ho)=>{function Hz(i){return i&&i.__esModule?i:{default:i}}Ho.exports=Hz,Ho.exports.__esModule=!0,Ho.exports.default=Ho.exports});var mn=E((Zbe,mi)=>{function E0(i){return mi.exports=E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi.exports.__esModule=!0,mi.exports.default=mi.exports,E0(i)}mi.exports=E0,mi.exports.__esModule=!0,mi.exports.default=mi.exports});var qe=E((_c,cT)=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.default=Wz;function Wz(i){if(i===null||i===!0||i===!1)return NaN;var e=Number(i);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}cT.exports=_c.default});var F=E((xc,dT)=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.default=Vz;function Vz(i,e){if(e.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+e.length+" present")}dT.exports=xc.default});var ee=E((yc,hT)=>{"use strict";var fT=R().default;Object.defineProperty(yc,"__esModule",{value:!0});yc.default=Yz;var Gz=fT(mn()),jz=fT(F());function Yz(i){(0,jz.default)(1,arguments);var e=Object.prototype.toString.call(i);return i instanceof Date||(0,Gz.default)(i)==="object"&&e==="[object Date]"?new Date(i.getTime()):typeof i=="number"||e==="[object Number]"?new Date(i):((typeof i=="string"||e==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}hT.exports=yc.default});var Zn=E((bc,pT)=>{"use strict";var P0=R().default;Object.defineProperty(bc,"__esModule",{value:!0});bc.default=Jz;var Xz=P0(qe()),$z=P0(ee()),Zz=P0(F());function Jz(i,e){(0,Zz.default)(2,arguments);var t=(0,$z.default)(i),n=(0,Xz.default)(e);return isNaN(n)?new Date(NaN):(n&&t.setDate(t.getDate()+n),t)}pT.exports=bc.default});var Js=E((Mc,mT)=>{"use strict";var A0=R().default;Object.defineProperty(Mc,"__esModule",{value:!0});Mc.default=tH;var Kz=A0(qe()),Qz=A0(ee()),eH=A0(F());function tH(i,e){(0,eH.default)(2,arguments);var t=(0,Qz.default)(i),n=(0,Kz.default)(e);if(isNaN(n))return new Date(NaN);if(!n)return t;var r=t.getDate(),s=new Date(t.getTime());s.setMonth(t.getMonth()+n+1,0);var a=s.getDate();return r>=a?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}mT.exports=Mc.default});var D0=E((Sc,gT)=>{"use strict";var Ks=R().default;Object.defineProperty(Sc,"__esModule",{value:!0});Sc.default=oH;var nH=Ks(mn()),iH=Ks(Zn()),rH=Ks(Js()),sH=Ks(ee()),aH=Ks(F()),Fr=Ks(qe());function oH(i,e){if((0,aH.default)(2,arguments),!e||(0,nH.default)(e)!=="object")return new Date(NaN);var t=e.years?(0,Fr.default)(e.years):0,n=e.months?(0,Fr.default)(e.months):0,r=e.weeks?(0,Fr.default)(e.weeks):0,s=e.days?(0,Fr.default)(e.days):0,a=e.hours?(0,Fr.default)(e.hours):0,o=e.minutes?(0,Fr.default)(e.minutes):0,u=e.seconds?(0,Fr.default)(e.seconds):0,l=(0,sH.default)(i),c=n||t?(0,rH.default)(l,n+t*12):l,d=s||r?(0,iH.default)(c,s+r*7):c,f=o+a*60,h=u+f*60,p=h*1e3,v=new Date(d.getTime()+p);return v}gT.exports=Sc.default});var Wo=E((wc,_T)=>{"use strict";var vT=R().default;Object.defineProperty(wc,"__esModule",{value:!0});wc.default=cH;var uH=vT(ee()),lH=vT(F());function cH(i){(0,lH.default)(1,arguments);var e=(0,uH.default)(i),t=e.getDay();return t===0||t===6}_T.exports=wc.default});var Ec=E((Tc,yT)=>{"use strict";var xT=R().default;Object.defineProperty(Tc,"__esModule",{value:!0});Tc.default=hH;var dH=xT(ee()),fH=xT(F());function hH(i){return(0,fH.default)(1,arguments),(0,dH.default)(i).getDay()===0}yT.exports=Tc.default});var R0=E((Pc,MT)=>{"use strict";var bT=R().default;Object.defineProperty(Pc,"__esModule",{value:!0});Pc.default=gH;var pH=bT(ee()),mH=bT(F());function gH(i){return(0,mH.default)(1,arguments),(0,pH.default)(i).getDay()===6}MT.exports=Pc.default});var O0=E((Ac,wT)=>{"use strict";var Qs=R().default;Object.defineProperty(Ac,"__esModule",{value:!0});Ac.default=bH;var C0=Qs(Wo()),vH=Qs(ee()),ST=Qs(qe()),_H=Qs(F()),xH=Qs(Ec()),yH=Qs(R0());function bH(i,e){(0,_H.default)(2,arguments);var t=(0,vH.default)(i),n=(0,C0.default)(t),r=(0,ST.default)(e);if(isNaN(r))return new Date(NaN);var s=t.getHours(),a=r<0?-1:1,o=(0,ST.default)(r/5);t.setDate(t.getDate()+o*7);for(var u=Math.abs(r%5);u>0;)t.setDate(t.getDate()+a),(0,C0.default)(t)||(u-=1);return n&&(0,C0.default)(t)&&r!==0&&((0,yH.default)(t)&&t.setDate(t.getDate()+(a<0?2:-1)),(0,xH.default)(t)&&t.setDate(t.getDate()+(a<0?1:-2))),t.setHours(s),t}wT.exports=Ac.default});var ea=E((Dc,TT)=>{"use strict";var I0=R().default;Object.defineProperty(Dc,"__esModule",{value:!0});Dc.default=TH;var MH=I0(qe()),SH=I0(ee()),wH=I0(F());function TH(i,e){(0,wH.default)(2,arguments);var t=(0,SH.default)(i).getTime(),n=(0,MH.default)(e);return new Date(t+n)}TT.exports=Dc.default});var Cc=E((Rc,ET)=>{"use strict";var L0=R().default;Object.defineProperty(Rc,"__esModule",{value:!0});Rc.default=RH;var EH=L0(qe()),PH=L0(ea()),AH=L0(F()),DH=36e5;function RH(i,e){(0,AH.default)(2,arguments);var t=(0,EH.default)(e);return(0,PH.default)(i,t*DH)}ET.exports=Rc.default});var Rt=E(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.getDefaultOptions=CH;Oc.setDefaultOptions=OH;var PT={};function CH(){return PT}function OH(i){PT=i}});var gi=E((Ic,AT)=>{"use strict";var q0=R().default;Object.defineProperty(Ic,"__esModule",{value:!0});Ic.default=kH;var IH=q0(ee()),LH=q0(qe()),qH=q0(F()),NH=Rt();function kH(i,e){var t,n,r,s,a,o,u,l;(0,qH.default)(1,arguments);var c=(0,NH.getDefaultOptions)(),d=(0,LH.default)((t=(n=(r=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&r!==void 0?r:c.weekStartsOn)!==null&&n!==void 0?n:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&t!==void 0?t:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=(0,IH.default)(i),h=f.getDay(),p=(h<d?7:0)+h-d;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}AT.exports=Ic.default});var Yi=E((Lc,RT)=>{"use strict";var DT=R().default;Object.defineProperty(Lc,"__esModule",{value:!0});Lc.default=BH;var FH=DT(gi()),UH=DT(F());function BH(i){return(0,UH.default)(1,arguments),(0,FH.default)(i,{weekStartsOn:1})}RT.exports=Lc.default});var Ur=E((qc,OT)=>{"use strict";var N0=R().default;Object.defineProperty(qc,"__esModule",{value:!0});qc.default=WH;var zH=N0(ee()),CT=N0(Yi()),HH=N0(F());function WH(i){(0,HH.default)(1,arguments);var e=(0,zH.default)(i),t=e.getFullYear(),n=new Date(0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);var r=(0,CT.default)(n),s=new Date(0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);var a=(0,CT.default)(s);return e.getTime()>=r.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}OT.exports=qc.default});var ta=E((Nc,IT)=>{"use strict";var k0=R().default;Object.defineProperty(Nc,"__esModule",{value:!0});Nc.default=YH;var VH=k0(Ur()),GH=k0(Yi()),jH=k0(F());function YH(i){(0,jH.default)(1,arguments);var e=(0,VH.default)(i),t=new Date(0);t.setFullYear(e,0,4),t.setHours(0,0,0,0);var n=(0,GH.default)(t);return n}IT.exports=Nc.default});var Jn=E((kc,LT)=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.default=XH;function XH(i){var e=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return e.setUTCFullYear(i.getFullYear()),i.getTime()-e.getTime()}LT.exports=kc.default});var Vo=E((Fc,NT)=>{"use strict";var qT=R().default;Object.defineProperty(Fc,"__esModule",{value:!0});Fc.default=JH;var $H=qT(ee()),ZH=qT(F());function JH(i){(0,ZH.default)(1,arguments);var e=(0,$H.default)(i);return e.setHours(0,0,0,0),e}NT.exports=Fc.default});var vi=E((Uc,UT)=>{"use strict";var F0=R().default;Object.defineProperty(Uc,"__esModule",{value:!0});Uc.default=eW;var kT=F0(Jn()),FT=F0(Vo()),KH=F0(F()),QH=864e5;function eW(i,e){(0,KH.default)(2,arguments);var t=(0,FT.default)(i),n=(0,FT.default)(e),r=t.getTime()-(0,kT.default)(t),s=n.getTime()-(0,kT.default)(n);return Math.round((r-s)/QH)}UT.exports=Uc.default});var U0=E((Bc,zT)=>{"use strict";var Go=R().default;Object.defineProperty(Bc,"__esModule",{value:!0});Bc.default=sW;var tW=Go(qe()),nW=Go(ee()),BT=Go(ta()),iW=Go(vi()),rW=Go(F());function sW(i,e){(0,rW.default)(2,arguments);var t=(0,nW.default)(i),n=(0,tW.default)(e),r=(0,iW.default)(t,(0,BT.default)(t)),s=new Date(0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),t=(0,BT.default)(s),t.setDate(t.getDate()+r),t}zT.exports=Bc.default});var B0=E((Hc,HT)=>{"use strict";var zc=R().default;Object.defineProperty(Hc,"__esModule",{value:!0});Hc.default=cW;var aW=zc(qe()),oW=zc(Ur()),uW=zc(U0()),lW=zc(F());function cW(i,e){(0,lW.default)(2,arguments);var t=(0,aW.default)(e);return(0,uW.default)(i,(0,oW.default)(i)+t)}HT.exports=Hc.default});var Vc=E((Wc,WT)=>{"use strict";var z0=R().default;Object.defineProperty(Wc,"__esModule",{value:!0});Wc.default=mW;var dW=z0(qe()),fW=z0(ea()),hW=z0(F()),pW=6e4;function mW(i,e){(0,hW.default)(2,arguments);var t=(0,dW.default)(e);return(0,fW.default)(i,t*pW)}WT.exports=Wc.default});var jc=E((Gc,VT)=>{"use strict";var H0=R().default;Object.defineProperty(Gc,"__esModule",{value:!0});Gc.default=xW;var gW=H0(qe()),vW=H0(Js()),_W=H0(F());function xW(i,e){(0,_W.default)(2,arguments);var t=(0,gW.default)(e),n=t*3;return(0,vW.default)(i,n)}VT.exports=Gc.default});var V0=E((Yc,GT)=>{"use strict";var W0=R().default;Object.defineProperty(Yc,"__esModule",{value:!0});Yc.default=SW;var yW=W0(qe()),bW=W0(ea()),MW=W0(F());function SW(i,e){(0,MW.default)(2,arguments);var t=(0,yW.default)(e);return(0,bW.default)(i,t*1e3)}GT.exports=Yc.default});var jo=E((Xc,jT)=>{"use strict";var G0=R().default;Object.defineProperty(Xc,"__esModule",{value:!0});Xc.default=PW;var wW=G0(qe()),TW=G0(Zn()),EW=G0(F());function PW(i,e){(0,EW.default)(2,arguments);var t=(0,wW.default)(e),n=t*7;return(0,TW.default)(i,n)}jT.exports=Xc.default});var Y0=E(($c,YT)=>{"use strict";var j0=R().default;Object.defineProperty($c,"__esModule",{value:!0});$c.default=CW;var AW=j0(qe()),DW=j0(Js()),RW=j0(F());function CW(i,e){(0,RW.default)(2,arguments);var t=(0,AW.default)(e);return(0,DW.default)(i,t*12)}YT.exports=$c.default});var ZT=E((Jc,$T)=>{"use strict";var XT=R().default;Object.defineProperty(Jc,"__esModule",{value:!0});Jc.default=IW;var Zc=XT(ee()),OW=XT(F());function IW(i,e,t){(0,OW.default)(2,arguments);var n=(0,Zc.default)(i==null?void 0:i.start).getTime(),r=(0,Zc.default)(i==null?void 0:i.end).getTime(),s=(0,Zc.default)(e==null?void 0:e.start).getTime(),a=(0,Zc.default)(e==null?void 0:e.end).getTime();if(!(n<=r&&s<=a))throw new RangeError("Invalid interval");return t!=null&&t.inclusive?n<=a&&s<=r:n<a&&s<r}$T.exports=Jc.default});var $0=E((Kc,JT)=>{"use strict";var X0=R().default;Object.defineProperty(Kc,"__esModule",{value:!0});Kc.default=kW;var LW=X0(mn()),qW=X0(ee()),NW=X0(F());function kW(i){(0,NW.default)(1,arguments);var e;if(i&&typeof i.forEach=="function")e=i;else if((0,LW.default)(i)==="object"&&i!==null)e=Array.prototype.slice.call(i);else return new Date(NaN);var t;return e.forEach(function(n){var r=(0,qW.default)(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}JT.exports=Kc.default});var J0=E((Qc,KT)=>{"use strict";var Z0=R().default;Object.defineProperty(Qc,"__esModule",{value:!0});Qc.default=zW;var FW=Z0(mn()),UW=Z0(ee()),BW=Z0(F());function zW(i){(0,BW.default)(1,arguments);var e;if(i&&typeof i.forEach=="function")e=i;else if((0,FW.default)(i)==="object"&&i!==null)e=Array.prototype.slice.call(i);else return new Date(NaN);var t;return e.forEach(function(n){var r=(0,UW.default)(n);(t===void 0||t>r||isNaN(r.getDate()))&&(t=r)}),t||new Date(NaN)}KT.exports=Qc.default});var e1=E((ed,QT)=>{"use strict";var K0=R().default;Object.defineProperty(ed,"__esModule",{value:!0});ed.default=GW;var HW=K0($0()),WW=K0(J0()),VW=K0(F());function GW(i,e){var t=e.start,n=e.end;return(0,VW.default)(2,arguments),(0,WW.default)([(0,HW.default)([i,t]),n])}QT.exports=ed.default});var r1=E((td,i1)=>{"use strict";var n1=R().default;Object.defineProperty(td,"__esModule",{value:!0});td.default=YW;var t1=n1(ee()),jW=n1(F());function YW(i,e){(0,jW.default)(2,arguments);var t=(0,t1.default)(i);if(isNaN(Number(t)))return NaN;var n=t.getTime(),r;e==null?r=[]:typeof e.forEach=="function"?r=e:r=Array.prototype.slice.call(e);var s,a;return r.forEach(function(o,u){var l=(0,t1.default)(o);if(isNaN(Number(l))){s=NaN,a=NaN;return}var c=Math.abs(n-l.getTime());(s==null||c<Number(a))&&(s=u,a=c)}),s}i1.exports=td.default});var u1=E((nd,o1)=>{"use strict";var a1=R().default;Object.defineProperty(nd,"__esModule",{value:!0});nd.default=$W;var s1=a1(ee()),XW=a1(F());function $W(i,e){(0,XW.default)(2,arguments);var t=(0,s1.default)(i);if(isNaN(Number(t)))return new Date(NaN);var n=t.getTime(),r;e==null?r=[]:typeof e.forEach=="function"?r=e:r=Array.prototype.slice.call(e);var s,a;return r.forEach(function(o){var u=(0,s1.default)(o);if(isNaN(Number(u))){s=new Date(NaN),a=NaN;return}var l=Math.abs(n-u.getTime());(s==null||l<Number(a))&&(s=u,a=l)}),s}o1.exports=nd.default});var Xi=E((id,d1)=>{"use strict";var c1=R().default;Object.defineProperty(id,"__esModule",{value:!0});id.default=JW;var l1=c1(ee()),ZW=c1(F());function JW(i,e){(0,ZW.default)(2,arguments);var t=(0,l1.default)(i),n=(0,l1.default)(e),r=t.getTime()-n.getTime();return r<0?-1:r>0?1:r}d1.exports=id.default});var m1=E((rd,p1)=>{"use strict";var h1=R().default;Object.defineProperty(rd,"__esModule",{value:!0});rd.default=QW;var f1=h1(ee()),KW=h1(F());function QW(i,e){(0,KW.default)(2,arguments);var t=(0,f1.default)(i),n=(0,f1.default)(e),r=t.getTime()-n.getTime();return r>0?-1:r<0?1:r}p1.exports=rd.default});var St=E(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.secondsInYear=tt.secondsInWeek=tt.secondsInQuarter=tt.secondsInMonth=tt.secondsInMinute=tt.secondsInHour=tt.secondsInDay=tt.quartersInYear=tt.monthsInYear=tt.monthsInQuarter=tt.minutesInHour=tt.minTime=tt.millisecondsInSecond=tt.millisecondsInMinute=tt.millisecondsInHour=tt.maxTime=tt.daysInYear=tt.daysInWeek=void 0;var eV=7;tt.daysInWeek=eV;var g1=365.2425;tt.daysInYear=g1;var v1=Math.pow(10,8)*24*60*60*1e3;tt.maxTime=v1;var tV=6e4;tt.millisecondsInMinute=tV;var nV=36e5;tt.millisecondsInHour=nV;var iV=1e3;tt.millisecondsInSecond=iV;var rV=-v1;tt.minTime=rV;var sV=60;tt.minutesInHour=sV;var aV=3;tt.monthsInQuarter=aV;var oV=12;tt.monthsInYear=oV;var uV=4;tt.quartersInYear=uV;var _1=3600;tt.secondsInHour=_1;var lV=60;tt.secondsInMinute=lV;var Q0=_1*24;tt.secondsInDay=Q0;var cV=Q0*7;tt.secondsInWeek=cV;var x1=Q0*g1;tt.secondsInYear=x1;var y1=x1/12;tt.secondsInMonth=y1;var dV=y1*3;tt.secondsInQuarter=dV});var M1=E((sd,b1)=>{"use strict";var fV=R().default;Object.defineProperty(sd,"__esModule",{value:!0});sd.default=mV;var hV=fV(F()),pV=St();function mV(i){(0,hV.default)(1,arguments);var e=i/pV.daysInWeek;return Math.floor(e)}b1.exports=sd.default});var na=E((ad,T1)=>{"use strict";var w1=R().default;Object.defineProperty(ad,"__esModule",{value:!0});ad.default=vV;var S1=w1(Vo()),gV=w1(F());function vV(i,e){(0,gV.default)(2,arguments);var t=(0,S1.default)(i),n=(0,S1.default)(e);return t.getTime()===n.getTime()}T1.exports=ad.default});var ex=E((od,P1)=>{"use strict";var E1=R().default;Object.defineProperty(od,"__esModule",{value:!0});od.default=yV;var _V=E1(mn()),xV=E1(F());function yV(i){return(0,xV.default)(1,arguments),i instanceof Date||(0,_V.default)(i)==="object"&&Object.prototype.toString.call(i)==="[object Date]"}P1.exports=od.default});var _i=E((ud,A1)=>{"use strict";var tx=R().default;Object.defineProperty(ud,"__esModule",{value:!0});ud.default=wV;var bV=tx(ex()),MV=tx(ee()),SV=tx(F());function wV(i){if((0,SV.default)(1,arguments),!(0,bV.default)(i)&&typeof i!="number")return!1;var e=(0,MV.default)(i);return!isNaN(Number(e))}A1.exports=ud.default});var I1=E((ld,O1)=>{"use strict";var $i=R().default;Object.defineProperty(ld,"__esModule",{value:!0});ld.default=RV;var D1=$i(Zn()),TV=$i(vi()),EV=$i(na()),R1=$i(_i()),PV=$i(Wo()),C1=$i(ee()),AV=$i(F()),DV=$i(qe());function RV(i,e){(0,AV.default)(2,arguments);var t=(0,C1.default)(i),n=(0,C1.default)(e);if(!(0,R1.default)(t)||!(0,R1.default)(n))return NaN;var r=(0,TV.default)(t,n),s=r<0?-1:1,a=(0,DV.default)(r/7),o=a*5;for(n=(0,D1.default)(n,a*7);!(0,EV.default)(t,n);)o+=(0,PV.default)(n)?0:s,n=(0,D1.default)(n,s);return o===0?0:o}O1.exports=ld.default});var nx=E((cd,N1)=>{"use strict";var q1=R().default;Object.defineProperty(cd,"__esModule",{value:!0});cd.default=OV;var L1=q1(Ur()),CV=q1(F());function OV(i,e){return(0,CV.default)(2,arguments),(0,L1.default)(i)-(0,L1.default)(e)}N1.exports=cd.default});var B1=E((dd,U1)=>{"use strict";var ix=R().default;Object.defineProperty(dd,"__esModule",{value:!0});dd.default=qV;var k1=ix(Jn()),F1=ix(Yi()),IV=ix(F()),LV=6048e5;function qV(i,e){(0,IV.default)(2,arguments);var t=(0,F1.default)(i),n=(0,F1.default)(e),r=t.getTime()-(0,k1.default)(t),s=n.getTime()-(0,k1.default)(n);return Math.round((r-s)/LV)}U1.exports=dd.default});var hd=E((fd,W1)=>{"use strict";var H1=R().default;Object.defineProperty(fd,"__esModule",{value:!0});fd.default=kV;var z1=H1(ee()),NV=H1(F());function kV(i,e){(0,NV.default)(2,arguments);var t=(0,z1.default)(i),n=(0,z1.default)(e),r=t.getFullYear()-n.getFullYear(),s=t.getMonth()-n.getMonth();return r*12+s}W1.exports=fd.default});var rx=E((pd,G1)=>{"use strict";var V1=R().default;Object.defineProperty(pd,"__esModule",{value:!0});pd.default=BV;var FV=V1(ee()),UV=V1(F());function BV(i){(0,UV.default)(1,arguments);var e=(0,FV.default)(i),t=Math.floor(e.getMonth()/3)+1;return t}G1.exports=pd.default});var ax=E((md,X1)=>{"use strict";var sx=R().default;Object.defineProperty(md,"__esModule",{value:!0});md.default=HV;var j1=sx(rx()),Y1=sx(ee()),zV=sx(F());function HV(i,e){(0,zV.default)(2,arguments);var t=(0,Y1.default)(i),n=(0,Y1.default)(e),r=t.getFullYear()-n.getFullYear(),s=(0,j1.default)(t)-(0,j1.default)(n);return r*4+s}X1.exports=md.default});var vd=E((gd,J1)=>{"use strict";var ox=R().default;Object.defineProperty(gd,"__esModule",{value:!0});gd.default=GV;var $1=ox(gi()),Z1=ox(Jn()),WV=ox(F()),VV=6048e5;function GV(i,e,t){(0,WV.default)(2,arguments);var n=(0,$1.default)(i,t),r=(0,$1.default)(e,t),s=n.getTime()-(0,Z1.default)(n),a=r.getTime()-(0,Z1.default)(r);return Math.round((s-a)/VV)}J1.exports=gd.default});var xd=E((_d,eE)=>{"use strict";var Q1=R().default;Object.defineProperty(_d,"__esModule",{value:!0});_d.default=YV;var K1=Q1(ee()),jV=Q1(F());function YV(i,e){(0,jV.default)(2,arguments);var t=(0,K1.default)(i),n=(0,K1.default)(e);return t.getFullYear()-n.getFullYear()}eE.exports=_d.default});var bd=E((yd,iE)=>{"use strict";var ux=R().default;Object.defineProperty(yd,"__esModule",{value:!0});yd.default=ZV;var tE=ux(ee()),XV=ux(vi()),$V=ux(F());function nE(i,e){var t=i.getFullYear()-e.getFullYear()||i.getMonth()-e.getMonth()||i.getDate()-e.getDate()||i.getHours()-e.getHours()||i.getMinutes()-e.getMinutes()||i.getSeconds()-e.getSeconds()||i.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function ZV(i,e){(0,$V.default)(2,arguments);var t=(0,tE.default)(i),n=(0,tE.default)(e),r=nE(t,n),s=Math.abs((0,XV.default)(t,n));t.setDate(t.getDate()-r*s);var a=Number(nE(t,n)===-r),o=r*(s-a);return o===0?0:o}iE.exports=yd.default});var Yo=E((Md,aE)=>{"use strict";var sE=R().default;Object.defineProperty(Md,"__esModule",{value:!0});Md.default=KV;var rE=sE(ee()),JV=sE(F());function KV(i,e){return(0,JV.default)(2,arguments),(0,rE.default)(i).getTime()-(0,rE.default)(e).getTime()}aE.exports=Md.default});var Br=E(lx=>{"use strict";Object.defineProperty(lx,"__esModule",{value:!0});lx.getRoundingMethod=e4;var oE={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},QV="trunc";function e4(i){return i?oE[i]:oE[QV]}});var wd=E((Sd,lE)=>{"use strict";var uE=R().default;Object.defineProperty(Sd,"__esModule",{value:!0});Sd.default=s4;var t4=St(),n4=uE(Yo()),i4=uE(F()),r4=Br();function s4(i,e,t){(0,i4.default)(2,arguments);var n=(0,n4.default)(i,e)/t4.millisecondsInHour;return(0,r4.getRoundingMethod)(t==null?void 0:t.roundingMethod)(n)}lE.exports=Sd.default});var dx=E((Td,cE)=>{"use strict";var cx=R().default;Object.defineProperty(Td,"__esModule",{value:!0});Td.default=l4;var a4=cx(B0()),o4=cx(F()),u4=cx(qe());function l4(i,e){(0,o4.default)(2,arguments);var t=(0,u4.default)(e);return(0,a4.default)(i,-t)}cE.exports=Td.default});var pE=E((Ed,hE)=>{"use strict";var Xo=R().default;Object.defineProperty(Ed,"__esModule",{value:!0});Ed.default=h4;var dE=Xo(ee()),c4=Xo(nx()),fE=Xo(Xi()),d4=Xo(dx()),f4=Xo(F());function h4(i,e){(0,f4.default)(2,arguments);var t=(0,dE.default)(i),n=(0,dE.default)(e),r=(0,fE.default)(t,n),s=Math.abs((0,c4.default)(t,n));t=(0,d4.default)(t,r*s);var a=Number((0,fE.default)(t,n)===-r),o=r*(s-a);return o===0?0:o}hE.exports=Ed.default});var Ad=E((Pd,gE)=>{"use strict";var mE=R().default;Object.defineProperty(Pd,"__esModule",{value:!0});Pd.default=_4;var p4=St(),m4=mE(Yo()),g4=mE(F()),v4=Br();function _4(i,e,t){(0,g4.default)(2,arguments);var n=(0,m4.default)(i,e)/p4.millisecondsInMinute;return(0,v4.getRoundingMethod)(t==null?void 0:t.roundingMethod)(n)}gE.exports=Pd.default});var Rd=E((Dd,_E)=>{"use strict";var vE=R().default;Object.defineProperty(Dd,"__esModule",{value:!0});Dd.default=b4;var x4=vE(ee()),y4=vE(F());function b4(i){(0,y4.default)(1,arguments);var e=(0,x4.default)(i);return e.setHours(23,59,59,999),e}_E.exports=Dd.default});var Od=E((Cd,yE)=>{"use strict";var xE=R().default;Object.defineProperty(Cd,"__esModule",{value:!0});Cd.default=w4;var M4=xE(ee()),S4=xE(F());function w4(i){(0,S4.default)(1,arguments);var e=(0,M4.default)(i),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}yE.exports=Cd.default});var fx=E((Ld,bE)=>{"use strict";var Id=R().default;Object.defineProperty(Ld,"__esModule",{value:!0});Ld.default=D4;var T4=Id(ee()),E4=Id(Rd()),P4=Id(Od()),A4=Id(F());function D4(i){(0,A4.default)(1,arguments);var e=(0,T4.default)(i);return(0,E4.default)(e).getTime()===(0,P4.default)(e).getTime()}bE.exports=Ld.default});var Zo=E((qd,ME)=>{"use strict";var $o=R().default;Object.defineProperty(qd,"__esModule",{value:!0});qd.default=I4;var hx=$o(ee()),R4=$o(hd()),px=$o(Xi()),C4=$o(F()),O4=$o(fx());function I4(i,e){(0,C4.default)(2,arguments);var t=(0,hx.default)(i),n=(0,hx.default)(e),r=(0,px.default)(t,n),s=Math.abs((0,R4.default)(t,n)),a;if(s<1)a=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-r*s);var o=(0,px.default)(t,n)===-r;(0,O4.default)((0,hx.default)(i))&&s===1&&(0,px.default)(i,n)===1&&(o=!1),a=r*(s-Number(o))}return a===0?0:a}ME.exports=qd.default});var TE=E((Nd,wE)=>{"use strict";var SE=R().default;Object.defineProperty(Nd,"__esModule",{value:!0});Nd.default=k4;var L4=SE(Zo()),q4=SE(F()),N4=Br();function k4(i,e,t){(0,q4.default)(2,arguments);var n=(0,L4.default)(i,e)/3;return(0,N4.getRoundingMethod)(t==null?void 0:t.roundingMethod)(n)}wE.exports=Nd.default});var Jo=E((kd,PE)=>{"use strict";var EE=R().default;Object.defineProperty(kd,"__esModule",{value:!0});kd.default=z4;var F4=EE(Yo()),U4=EE(F()),B4=Br();function z4(i,e,t){(0,U4.default)(2,arguments);var n=(0,F4.default)(i,e)/1e3;return(0,B4.getRoundingMethod)(t==null?void 0:t.roundingMethod)(n)}PE.exports=kd.default});var RE=E((Fd,DE)=>{"use strict";var AE=R().default;Object.defineProperty(Fd,"__esModule",{value:!0});Fd.default=G4;var H4=AE(bd()),W4=AE(F()),V4=Br();function G4(i,e,t){(0,W4.default)(2,arguments);var n=(0,H4.default)(i,e)/7;return(0,V4.getRoundingMethod)(t==null?void 0:t.roundingMethod)(n)}DE.exports=Fd.default});var mx=E((Bd,IE)=>{"use strict";var Ud=R().default;Object.defineProperty(Bd,"__esModule",{value:!0});Bd.default=X4;var CE=Ud(ee()),j4=Ud(xd()),OE=Ud(Xi()),Y4=Ud(F());function X4(i,e){(0,Y4.default)(2,arguments);var t=(0,CE.default)(i),n=(0,CE.default)(e),r=(0,OE.default)(t,n),s=Math.abs((0,j4.default)(t,n));t.setFullYear(1584),n.setFullYear(1584);var a=(0,OE.default)(t,n)===-r,o=r*(s-Number(a));return o===0?0:o}IE.exports=Bd.default});var vx=E((zd,qE)=>{"use strict";var LE=R().default;Object.defineProperty(zd,"__esModule",{value:!0});zd.default=Z4;var gx=LE(ee()),$4=LE(F());function Z4(i,e){var t;(0,$4.default)(1,arguments);var n=i||{},r=(0,gx.default)(n.start),s=(0,gx.default)(n.end),a=s.getTime();if(!(r.getTime()<=a))throw new RangeError("Invalid interval");var o=[],u=r;u.setHours(0,0,0,0);var l=Number((t=e==null?void 0:e.step)!==null&&t!==void 0?t:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;u.getTime()<=a;)o.push((0,gx.default)(u)),u.setDate(u.getDate()+l),u.setHours(0,0,0,0);return o}qE.exports=zd.default});var kE=E((Hd,NE)=>{"use strict";var xx=R().default;Object.defineProperty(Hd,"__esModule",{value:!0});Hd.default=Q4;var J4=xx(Cc()),_x=xx(ee()),K4=xx(F());function Q4(i,e){var t;(0,K4.default)(1,arguments);var n=i||{},r=(0,_x.default)(n.start),s=(0,_x.default)(n.end),a=r.getTime(),o=s.getTime();if(!(a<=o))throw new RangeError("Invalid interval");var u=[],l=r;l.setMinutes(0,0,0);var c=Number((t=e==null?void 0:e.step)!==null&&t!==void 0?t:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)u.push((0,_x.default)(l)),l=(0,J4.default)(l,c);return u}NE.exports=Hd.default});var Vd=E((Wd,UE)=>{"use strict";var FE=R().default;Object.defineProperty(Wd,"__esModule",{value:!0});Wd.default=n5;var e5=FE(ee()),t5=FE(F());function n5(i){(0,t5.default)(1,arguments);var e=(0,e5.default)(i);return e.setSeconds(0,0),e}UE.exports=Wd.default});var zE=E((jd,BE)=>{"use strict";var Gd=R().default;Object.defineProperty(jd,"__esModule",{value:!0});jd.default=a5;var i5=Gd(Vc()),yx=Gd(ee()),r5=Gd(Vd()),s5=Gd(F());function a5(i,e){var t;(0,s5.default)(1,arguments);var n=(0,r5.default)((0,yx.default)(i.start)),r=(0,yx.default)(i.end),s=n.getTime(),a=r.getTime();if(s>=a)throw new RangeError("Invalid interval");var o=[],u=n,l=Number((t=e==null?void 0:e.step)!==null&&t!==void 0?t:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number equal to or greater than 1");for(;u.getTime()<=a;)o.push((0,yx.default)(u)),u=(0,i5.default)(u,l);return o}BE.exports=jd.default});var VE=E((Yd,WE)=>{"use strict";var HE=R().default;Object.defineProperty(Yd,"__esModule",{value:!0});Yd.default=u5;var bx=HE(ee()),o5=HE(F());function u5(i){(0,o5.default)(1,arguments);var e=i||{},t=(0,bx.default)(e.start),n=(0,bx.default)(e.end),r=n.getTime(),s=[];if(!(t.getTime()<=r))throw new RangeError("Invalid interval");var a=t;for(a.setHours(0,0,0,0),a.setDate(1);a.getTime()<=r;)s.push((0,bx.default)(a)),a.setMonth(a.getMonth()+1);return s}WE.exports=Yd.default});var $d=E((Xd,jE)=>{"use strict";var GE=R().default;Object.defineProperty(Xd,"__esModule",{value:!0});Xd.default=d5;var l5=GE(ee()),c5=GE(F());function d5(i){(0,c5.default)(1,arguments);var e=(0,l5.default)(i),t=e.getMonth(),n=t-t%3;return e.setMonth(n,1),e.setHours(0,0,0,0),e}jE.exports=Xd.default});var $E=E((Jd,XE)=>{"use strict";var Zd=R().default;Object.defineProperty(Jd,"__esModule",{value:!0});Jd.default=p5;var f5=Zd(jc()),YE=Zd($d()),Mx=Zd(ee()),h5=Zd(F());function p5(i){(0,h5.default)(1,arguments);var e=i||{},t=(0,Mx.default)(e.start),n=(0,Mx.default)(e.end),r=n.getTime();if(!(t.getTime()<=r))throw new RangeError("Invalid interval");var s=(0,YE.default)(t),a=(0,YE.default)(n);r=a.getTime();for(var o=[],u=s;u.getTime()<=r;)o.push((0,Mx.default)(u)),u=(0,f5.default)(u,1);return o}XE.exports=Jd.default});var KE=E((Qd,JE)=>{"use strict";var Kd=R().default;Object.defineProperty(Qd,"__esModule",{value:!0});Qd.default=v5;var m5=Kd(jo()),ZE=Kd(gi()),Sx=Kd(ee()),g5=Kd(F());function v5(i,e){(0,g5.default)(1,arguments);var t=i||{},n=(0,Sx.default)(t.start),r=(0,Sx.default)(t.end),s=r.getTime();if(!(n.getTime()<=s))throw new RangeError("Invalid interval");var a=(0,ZE.default)(n,e),o=(0,ZE.default)(r,e);a.setHours(15),o.setHours(15),s=o.getTime();for(var u=[],l=a;l.getTime()<=s;)l.setHours(0),u.push((0,Sx.default)(l)),l=(0,m5.default)(l,1),l.setHours(15);return u}JE.exports=Qd.default});var nf=E((tf,QE)=>{"use strict";var ef=R().default;Object.defineProperty(tf,"__esModule",{value:!0});tf.default=M5;var _5=ef(vx()),x5=ef(Ec()),y5=ef(Wo()),b5=ef(F());function M5(i){(0,b5.default)(1,arguments);for(var e=(0,_5.default)(i),t=[],n=0;n<e.length;){var r=e[n++];(0,y5.default)(r)&&(t.push(r),(0,x5.default)(r)&&(n=n+5))}return t}QE.exports=tf.default});var Ko=E((rf,tP)=>{"use strict";var eP=R().default;Object.defineProperty(rf,"__esModule",{value:!0});rf.default=T5;var S5=eP(ee()),w5=eP(F());function T5(i){(0,w5.default)(1,arguments);var e=(0,S5.default)(i);return e.setDate(1),e.setHours(0,0,0,0),e}tP.exports=rf.default});var iP=E((af,nP)=>{"use strict";var sf=R().default;Object.defineProperty(af,"__esModule",{value:!0});af.default=R5;var E5=sf(nf()),P5=sf(Ko()),A5=sf(Od()),D5=sf(F());function R5(i){(0,D5.default)(1,arguments);var e=(0,P5.default)(i);if(isNaN(e.getTime()))throw new RangeError("The passed date is invalid");var t=(0,A5.default)(i);return(0,E5.default)({start:e,end:t})}nP.exports=af.default});var wx=E((of,sP)=>{"use strict";var rP=R().default;Object.defineProperty(of,"__esModule",{value:!0});of.default=I5;var C5=rP(ee()),O5=rP(F());function I5(i){(0,O5.default)(1,arguments);var e=(0,C5.default)(i),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}sP.exports=of.default});var lf=E((uf,oP)=>{"use strict";var aP=R().default;Object.defineProperty(uf,"__esModule",{value:!0});uf.default=N5;var L5=aP(ee()),q5=aP(F());function N5(i){(0,q5.default)(1,arguments);var e=(0,L5.default)(i),t=new Date(0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}oP.exports=uf.default});var lP=E((df,uP)=>{"use strict";var cf=R().default;Object.defineProperty(df,"__esModule",{value:!0});df.default=z5;var k5=cf(nf()),F5=cf(wx()),U5=cf(lf()),B5=cf(F());function z5(i){(0,B5.default)(1,arguments);var e=(0,U5.default)(i),t=(0,F5.default)(i);return(0,k5.default)({start:e,end:t})}uP.exports=df.default});var fP=E((ff,dP)=>{"use strict";var cP=R().default;Object.defineProperty(ff,"__esModule",{value:!0});ff.default=W5;var Tx=cP(ee()),H5=cP(F());function W5(i){(0,H5.default)(1,arguments);var e=i||{},t=(0,Tx.default)(e.start),n=(0,Tx.default)(e.end),r=n.getTime();if(!(t.getTime()<=r))throw new RangeError("Invalid interval");var s=[],a=t;for(a.setHours(0,0,0,0),a.setMonth(0,1);a.getTime()<=r;)s.push((0,Tx.default)(a)),a.setFullYear(a.getFullYear()+1);return s}dP.exports=ff.default});var mP=E((hf,pP)=>{"use strict";var hP=R().default;Object.defineProperty(hf,"__esModule",{value:!0});hf.default=j5;var V5=hP(ee()),G5=hP(F());function j5(i){(0,G5.default)(1,arguments);var e=(0,V5.default)(i),t=e.getFullYear(),n=9+Math.floor(t/10)*10;return e.setFullYear(n,11,31),e.setHours(23,59,59,999),e}pP.exports=hf.default});var _P=E((pf,vP)=>{"use strict";var gP=R().default;Object.defineProperty(pf,"__esModule",{value:!0});pf.default=$5;var Y5=gP(ee()),X5=gP(F());function $5(i){(0,X5.default)(1,arguments);var e=(0,Y5.default)(i);return e.setMinutes(59,59,999),e}vP.exports=pf.default});var Px=E((mf,xP)=>{"use strict";var Ex=R().default;Object.defineProperty(mf,"__esModule",{value:!0});mf.default=eG;var Z5=Rt(),J5=Ex(ee()),K5=Ex(qe()),Q5=Ex(F());function eG(i,e){var t,n,r,s,a,o,u,l;(0,Q5.default)(1,arguments);var c=(0,Z5.getDefaultOptions)(),d=(0,K5.default)((t=(n=(r=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&r!==void 0?r:c.weekStartsOn)!==null&&n!==void 0?n:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&t!==void 0?t:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=(0,J5.default)(i),h=f.getDay(),p=(h<d?-7:0)+6-(h-d);return f.setDate(f.getDate()+p),f.setHours(23,59,59,999),f}xP.exports=mf.default});var MP=E((gf,bP)=>{"use strict";var yP=R().default;Object.defineProperty(gf,"__esModule",{value:!0});gf.default=iG;var tG=yP(Px()),nG=yP(F());function iG(i){return(0,nG.default)(1,arguments),(0,tG.default)(i,{weekStartsOn:1})}bP.exports=gf.default});var wP=E((vf,SP)=>{"use strict";var Ax=R().default;Object.defineProperty(vf,"__esModule",{value:!0});vf.default=oG;var rG=Ax(Ur()),sG=Ax(Yi()),aG=Ax(F());function oG(i){(0,aG.default)(1,arguments);var e=(0,rG.default)(i),t=new Date(0);t.setFullYear(e+1,0,4),t.setHours(0,0,0,0);var n=(0,sG.default)(t);return n.setMilliseconds(n.getMilliseconds()-1),n}SP.exports=vf.default});var PP=E((_f,EP)=>{"use strict";var TP=R().default;Object.defineProperty(_f,"__esModule",{value:!0});_f.default=cG;var uG=TP(ee()),lG=TP(F());function cG(i){(0,lG.default)(1,arguments);var e=(0,uG.default)(i);return e.setSeconds(59,999),e}EP.exports=_f.default});var RP=E((xf,DP)=>{"use strict";var AP=R().default;Object.defineProperty(xf,"__esModule",{value:!0});xf.default=hG;var dG=AP(ee()),fG=AP(F());function hG(i){(0,fG.default)(1,arguments);var e=(0,dG.default)(i),t=e.getMonth(),n=t-t%3+3;return e.setMonth(n,0),e.setHours(23,59,59,999),e}DP.exports=xf.default});var IP=E((yf,OP)=>{"use strict";var CP=R().default;Object.defineProperty(yf,"__esModule",{value:!0});yf.default=gG;var pG=CP(ee()),mG=CP(F());function gG(i){(0,mG.default)(1,arguments);var e=(0,pG.default)(i);return e.setMilliseconds(999),e}OP.exports=yf.default});var qP=E((bf,LP)=>{"use strict";var vG=R().default;Object.defineProperty(bf,"__esModule",{value:!0});bf.default=xG;var _G=vG(Rd());function xG(){return(0,_G.default)(Date.now())}LP.exports=bf.default});var kP=E((Mf,NP)=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.default=yG;function yG(){var i=new Date,e=i.getFullYear(),t=i.getMonth(),n=i.getDate(),r=new Date(0);return r.setFullYear(e,t,n+1),r.setHours(23,59,59,999),r}NP.exports=Mf.default});var UP=E((Sf,FP)=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.default=bG;function bG(){var i=new Date,e=i.getFullYear(),t=i.getMonth(),n=i.getDate(),r=new Date(0);return r.setFullYear(e,t,n-1),r.setHours(23,59,59,999),r}FP.exports=Sf.default});var ia=E((wf,BP)=>{"use strict";var Dx=R().default;Object.defineProperty(wf,"__esModule",{value:!0});wf.default=TG;var MG=Dx(ea()),SG=Dx(F()),wG=Dx(qe());function TG(i,e){(0,SG.default)(2,arguments);var t=(0,wG.default)(e);return(0,MG.default)(i,-t)}BP.exports=wf.default});var WP=E((Tf,HP)=>{"use strict";var zP=R().default;Object.defineProperty(Tf,"__esModule",{value:!0});Tf.default=DG;var EG=zP(ee()),PG=zP(F()),AG=864e5;function DG(i){(0,PG.default)(1,arguments);var e=(0,EG.default)(i),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),r=t-n;return Math.floor(r/AG)+1}HP.exports=Tf.default});var ra=E((Ef,GP)=>{"use strict";var VP=R().default;Object.defineProperty(Ef,"__esModule",{value:!0});Ef.default=OG;var RG=VP(ee()),CG=VP(F());function OG(i){(0,CG.default)(1,arguments);var e=1,t=(0,RG.default)(i),n=t.getUTCDay(),r=(n<e?7:0)+n-e;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}GP.exports=Ef.default});var Cx=E((Pf,YP)=>{"use strict";var Rx=R().default;Object.defineProperty(Pf,"__esModule",{value:!0});Pf.default=qG;var IG=Rx(ee()),LG=Rx(F()),jP=Rx(ra());function qG(i){(0,LG.default)(1,arguments);var e=(0,IG.default)(i),t=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(t+1,0,4),n.setUTCHours(0,0,0,0);var r=(0,jP.default)(n),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var a=(0,jP.default)(s);return e.getTime()>=r.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}YP.exports=Pf.default});var $P=E((Af,XP)=>{"use strict";var Ox=R().default;Object.defineProperty(Af,"__esModule",{value:!0});Af.default=UG;var NG=Ox(Cx()),kG=Ox(ra()),FG=Ox(F());function UG(i){(0,FG.default)(1,arguments);var e=(0,NG.default)(i),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var n=(0,kG.default)(t);return n}XP.exports=Af.default});var Ix=E((Rf,ZP)=>{"use strict";var Df=R().default;Object.defineProperty(Rf,"__esModule",{value:!0});Rf.default=GG;var BG=Df(ee()),zG=Df(ra()),HG=Df($P()),WG=Df(F()),VG=6048e5;function GG(i){(0,WG.default)(1,arguments);var e=(0,BG.default)(i),t=(0,zG.default)(e).getTime()-(0,HG.default)(e).getTime();return Math.round(t/VG)+1}ZP.exports=Rf.default});var sa=E((Cf,JP)=>{"use strict";var Lx=R().default;Object.defineProperty(Cf,"__esModule",{value:!0});Cf.default=ZG;var jG=Lx(ee()),YG=Lx(F()),XG=Lx(qe()),$G=Rt();function ZG(i,e){var t,n,r,s,a,o,u,l;(0,YG.default)(1,arguments);var c=(0,$G.getDefaultOptions)(),d=(0,XG.default)((t=(n=(r=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&r!==void 0?r:c.weekStartsOn)!==null&&n!==void 0?n:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&t!==void 0?t:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=(0,jG.default)(i),h=f.getUTCDay(),p=(h<d?7:0)+h-d;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}JP.exports=Cf.default});var Lf=E((If,QP)=>{"use strict";var Of=R().default;Object.defineProperty(If,"__esModule",{value:!0});If.default=tj;var JG=Of(ee()),KG=Of(F()),KP=Of(sa()),QG=Of(qe()),ej=Rt();function tj(i,e){var t,n,r,s,a,o,u,l;(0,KG.default)(1,arguments);var c=(0,JG.default)(i),d=c.getUTCFullYear(),f=(0,ej.getDefaultOptions)(),h=(0,QG.default)((t=(n=(r=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&n!==void 0?n:(u=f.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,h),p.setUTCHours(0,0,0,0);var v=(0,KP.default)(p,e),g=new Date(0);g.setUTCFullYear(d,0,h),g.setUTCHours(0,0,0,0);var m=(0,KP.default)(g,e);return c.getTime()>=v.getTime()?d+1:c.getTime()>=m.getTime()?d:d-1}QP.exports=If.default});var tA=E((Nf,eA)=>{"use strict";var qf=R().default;Object.defineProperty(Nf,"__esModule",{value:!0});Nf.default=oj;var nj=qf(Lf()),ij=qf(F()),rj=qf(sa()),sj=qf(qe()),aj=Rt();function oj(i,e){var t,n,r,s,a,o,u,l;(0,ij.default)(1,arguments);var c=(0,aj.getDefaultOptions)(),d=(0,sj.default)((t=(n=(r=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&r!==void 0?r:c.firstWeekContainsDate)!==null&&n!==void 0?n:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&t!==void 0?t:1),f=(0,nj.default)(i,e),h=new Date(0);h.setUTCFullYear(f,0,d),h.setUTCHours(0,0,0,0);var p=(0,rj.default)(h,e);return p}eA.exports=Nf.default});var qx=E((Ff,nA)=>{"use strict";var kf=R().default;Object.defineProperty(Ff,"__esModule",{value:!0});Ff.default=hj;var uj=kf(ee()),lj=kf(sa()),cj=kf(tA()),dj=kf(F()),fj=6048e5;function hj(i,e){(0,dj.default)(1,arguments);var t=(0,uj.default)(i),n=(0,lj.default)(t,e).getTime()-(0,cj.default)(t,e).getTime();return Math.round(n/fj)+1}nA.exports=Ff.default});var zr=E((Uf,iA)=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.default=pj;function pj(i,e){for(var t=i<0?"-":"",n=Math.abs(i).toString();n.length<e;)n="0"+n;return t+n}iA.exports=Uf.default});var Nx=E((Qo,rA)=>{"use strict";var mj=R().default;Object.defineProperty(Qo,"__esModule",{value:!0});Qo.default=void 0;var Zi=mj(zr()),gj={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return(0,Zi.default)(t==="yy"?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return t==="M"?String(n+1):(0,Zi.default)(n+1,2)},d:function(e,t){return(0,Zi.default)(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,t){return(0,Zi.default)(e.getUTCHours()%12||12,t.length)},H:function(e,t){return(0,Zi.default)(e.getUTCHours(),t.length)},m:function(e,t){return(0,Zi.default)(e.getUTCMinutes(),t.length)},s:function(e,t){return(0,Zi.default)(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds(),s=Math.floor(r*Math.pow(10,n-3));return(0,Zi.default)(s,t.length)}},vj=gj;Qo.default=vj;rA.exports=Qo.default});var uA=E((eu,oA)=>{"use strict";var Wr=R().default;Object.defineProperty(eu,"__esModule",{value:!0});eu.default=void 0;var _j=Wr(WP()),xj=Wr(Ix()),yj=Wr(Cx()),bj=Wr(qx()),Mj=Wr(Lf()),Ct=Wr(zr()),Ji=Wr(Nx()),aa={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Sj={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){var r=e.getUTCFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ji.default.y(e,t)},Y:function(e,t,n,r){var s=(0,Mj.default)(e,r),a=s>0?s:1-s;if(t==="YY"){var o=a%100;return(0,Ct.default)(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):(0,Ct.default)(a,t.length)},R:function(e,t){var n=(0,yj.default)(e);return(0,Ct.default)(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return(0,Ct.default)(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return(0,Ct.default)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return(0,Ct.default)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Ji.default.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return(0,Ct.default)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var s=(0,bj.default)(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):(0,Ct.default)(s,t.length)},I:function(e,t,n){var r=(0,xj.default)(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):(0,Ct.default)(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ji.default.d(e,t)},D:function(e,t,n){var r=(0,_j.default)(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):(0,Ct.default)(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var s=e.getUTCDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return(0,Ct.default)(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var s=e.getUTCDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return(0,Ct.default)(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return(0,Ct.default)(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours(),s=r/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r=e.getUTCHours(),s;switch(r===12?s=aa.noon:r===0?s=aa.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r=e.getUTCHours(),s;switch(r>=17?s=aa.evening:r>=12?s=aa.afternoon:r>=4?s=aa.morning:s=aa.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){var r=e.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ji.default.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ji.default.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):(0,Ct.default)(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):(0,Ct.default)(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ji.default.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ji.default.s(e,t)},S:function(e,t){return Ji.default.S(e,t)},X:function(e,t,n,r){var s=r._originalDate||e,a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return aA(a);case"XXXX":case"XX":return Hr(a);case"XXXXX":case"XXX":default:return Hr(a,":")}},x:function(e,t,n,r){var s=r._originalDate||e,a=s.getTimezoneOffset();switch(t){case"x":return aA(a);case"xxxx":case"xx":return Hr(a);case"xxxxx":case"xxx":default:return Hr(a,":")}},O:function(e,t,n,r){var s=r._originalDate||e,a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+sA(a,":");case"OOOO":default:return"GMT"+Hr(a,":")}},z:function(e,t,n,r){var s=r._originalDate||e,a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+sA(a,":");case"zzzz":default:return"GMT"+Hr(a,":")}},t:function(e,t,n,r){var s=r._originalDate||e,a=Math.floor(s.getTime()/1e3);return(0,Ct.default)(a,t.length)},T:function(e,t,n,r){var s=r._originalDate||e,a=s.getTime();return(0,Ct.default)(a,t.length)}};function sA(i,e){var t=i>0?"-":"+",n=Math.abs(i),r=Math.floor(n/60),s=n%60;if(s===0)return t+String(r);var a=e||"";return t+String(r)+a+(0,Ct.default)(s,2)}function aA(i,e){if(i%60===0){var t=i>0?"-":"+";return t+(0,Ct.default)(Math.abs(i)/60,2)}return Hr(i,e)}function Hr(i,e){var t=e||"",n=i>0?"-":"+",r=Math.abs(i),s=(0,Ct.default)(Math.floor(r/60),2),a=(0,Ct.default)(r%60,2);return n+s+t+a}var wj=Sj;eu.default=wj;oA.exports=eu.default});var kx=E((tu,dA)=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.default=void 0;var lA=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},cA=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Tj=function(e,t){var n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return lA(e,t);var a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",lA(r,t)).replace("{{time}}",cA(s,t))},Ej={p:cA,P:Tj},Pj=Ej;tu.default=Pj;dA.exports=tu.default});var Fx=E(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.isProtectedDayOfYearToken=Rj;nu.isProtectedWeekYearToken=Cj;nu.throwProtectedError=Oj;var Aj=["D","DD"],Dj=["YY","YYYY"];function Rj(i){return Aj.indexOf(i)!==-1}function Cj(i){return Dj.indexOf(i)!==-1}function Oj(i,e,t){if(i==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}});var hA=E((iu,fA)=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.default=void 0;var Ij={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Lj=function(e,t,n){var r,s=Ij[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},qj=Lj;iu.default=qj;fA.exports=iu.default});var mA=E((Bf,pA)=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.default=Nj;function Nj(i){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):i.defaultWidth,n=i.formats[t]||i.formats[i.defaultWidth];return n}}pA.exports=Bf.default});var vA=E((ru,gA)=>{"use strict";var kj=R().default;Object.defineProperty(ru,"__esModule",{value:!0});ru.default=void 0;var Ux=kj(mA()),Fj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Uj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Bj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zj={date:(0,Ux.default)({formats:Fj,defaultWidth:"full"}),time:(0,Ux.default)({formats:Uj,defaultWidth:"full"}),dateTime:(0,Ux.default)({formats:Bj,defaultWidth:"full"})},Hj=zj;ru.default=Hj;gA.exports=ru.default});var xA=E((su,_A)=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.default=void 0;var Wj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vj=function(e,t,n,r){return Wj[e]},Gj=Vj;su.default=Gj;_A.exports=su.default});var bA=E((zf,yA)=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.default=jj;function jj(i){return function(e,t){var n=t!=null&&t.context?String(t.context):"standalone",r;if(n==="formatting"&&i.formattingValues){var s=i.defaultFormattingWidth||i.defaultWidth,a=t!=null&&t.width?String(t.width):s;r=i.formattingValues[a]||i.formattingValues[s]}else{var o=i.defaultWidth,u=t!=null&&t.width?String(t.width):i.defaultWidth;r=i.values[u]||i.values[o]}var l=i.argumentCallback?i.argumentCallback(e):e;return r[l]}}yA.exports=zf.default});var SA=E((ou,MA)=>{"use strict";var Yj=R().default;Object.defineProperty(ou,"__esModule",{value:!0});ou.default=void 0;var au=Yj(bA()),Xj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$j={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Zj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Kj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eY=function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},tY={ordinalNumber:eY,era:(0,au.default)({values:Xj,defaultWidth:"wide"}),quarter:(0,au.default)({values:$j,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,au.default)({values:Zj,defaultWidth:"wide"}),day:(0,au.default)({values:Jj,defaultWidth:"wide"}),dayPeriod:(0,au.default)({values:Kj,defaultWidth:"wide",formattingValues:Qj,defaultFormattingWidth:"wide"})},nY=tY;ou.default=nY;MA.exports=ou.default});var TA=E((Hf,wA)=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.default=iY;function iY(i){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.width,r=n&&i.matchPatterns[n]||i.matchPatterns[i.defaultMatchWidth],s=e.match(r);if(!s)return null;var a=s[0],o=n&&i.parsePatterns[n]||i.parsePatterns[i.defaultParseWidth],u=Array.isArray(o)?sY(o,function(d){return d.test(a)}):rY(o,function(d){return d.test(a)}),l;l=i.valueCallback?i.valueCallback(u):u,l=t.valueCallback?t.valueCallback(l):l;var c=e.slice(a.length);return{value:l,rest:c}}}function rY(i,e){for(var t in i)if(i.hasOwnProperty(t)&&e(i[t]))return t}function sY(i,e){for(var t=0;t<i.length;t++)if(e(i[t]))return t}wA.exports=Hf.default});var PA=E((Wf,EA)=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.default=aY;function aY(i){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(i.matchPattern);if(!n)return null;var r=n[0],s=e.match(i.parsePattern);if(!s)return null;var a=i.valueCallback?i.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;var o=e.slice(r.length);return{value:a,rest:o}}}EA.exports=Wf.default});var RA=E((lu,DA)=>{"use strict";var AA=R().default;Object.defineProperty(lu,"__esModule",{value:!0});lu.default=void 0;var uu=AA(TA()),oY=AA(PA()),uY=/^(\d+)(th|st|nd|rd)?/i,lY=/\d+/i,cY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dY={any:[/^b/i,/^(a|c)/i]},fY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hY={any:[/1/i,/2/i,/3/i,/4/i]},pY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},_Y={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yY={ordinalNumber:(0,oY.default)({matchPattern:uY,parsePattern:lY,valueCallback:function(e){return parseInt(e,10)}}),era:(0,uu.default)({matchPatterns:cY,defaultMatchWidth:"wide",parsePatterns:dY,defaultParseWidth:"any"}),quarter:(0,uu.default)({matchPatterns:fY,defaultMatchWidth:"wide",parsePatterns:hY,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,uu.default)({matchPatterns:pY,defaultMatchWidth:"wide",parsePatterns:mY,defaultParseWidth:"any"}),day:(0,uu.default)({matchPatterns:gY,defaultMatchWidth:"wide",parsePatterns:vY,defaultParseWidth:"any"}),dayPeriod:(0,uu.default)({matchPatterns:_Y,defaultMatchWidth:"any",parsePatterns:xY,defaultParseWidth:"any"})},bY=yY;lu.default=bY;DA.exports=lu.default});var OA=E((du,CA)=>{"use strict";var cu=R().default;Object.defineProperty(du,"__esModule",{value:!0});du.default=void 0;var MY=cu(hA()),SY=cu(vA()),wY=cu(xA()),TY=cu(SA()),EY=cu(RA()),PY={code:"en-US",formatDistance:MY.default,formatLong:SY.default,formatRelative:wY.default,localize:TY.default,match:EY.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},AY=PY;du.default=AY;CA.exports=du.default});var Vr=E((fu,IA)=>{"use strict";var DY=R().default;Object.defineProperty(fu,"__esModule",{value:!0});fu.default=void 0;var RY=DY(OA()),CY=RY.default;fu.default=CY;IA.exports=fu.default});var Bx=E((Gf,qA)=>{"use strict";var xi=R().default;Object.defineProperty(Gf,"__esModule",{value:!0});Gf.default=jY;var OY=xi(_i()),IY=xi(ia()),LY=xi(ee()),qY=xi(uA()),NY=xi(kx()),kY=xi(Jn()),Vf=Fx(),LA=xi(qe()),FY=xi(F()),UY=Rt(),BY=xi(Vr()),zY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,HY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,WY=/^'([^]*?)'?$/,VY=/''/g,GY=/[a-zA-Z]/;function jY(i,e,t){var n,r,s,a,o,u,l,c,d,f,h,p,v,g,m,y,_,b;(0,FY.default)(2,arguments);var M=String(e),T=(0,UY.getDefaultOptions)(),P=(n=(r=t==null?void 0:t.locale)!==null&&r!==void 0?r:T.locale)!==null&&n!==void 0?n:BY.default,C=(0,LA.default)((s=(a=(o=(u=t==null?void 0:t.firstWeekContainsDate)!==null&&u!==void 0?u:t==null||(l=t.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&o!==void 0?o:T.firstWeekContainsDate)!==null&&a!==void 0?a:(d=T.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=(0,LA.default)((h=(p=(v=(g=t==null?void 0:t.weekStartsOn)!==null&&g!==void 0?g:t==null||(m=t.locale)===null||m===void 0||(y=m.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&v!==void 0?v:T.weekStartsOn)!==null&&p!==void 0?p:(_=T.locale)===null||_===void 0||(b=_.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&h!==void 0?h:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!P.localize)throw new RangeError("locale must contain localize property");if(!P.formatLong)throw new RangeError("locale must contain formatLong property");var A=(0,LY.default)(i);if(!(0,OY.default)(A))throw new RangeError("Invalid time value");var z=(0,kY.default)(A),j=(0,IY.default)(A,z),W={firstWeekContainsDate:C,weekStartsOn:S,locale:P,_originalDate:A},G=M.match(HY).map(function(V){var J=V[0];if(J==="p"||J==="P"){var Z=NY.default[J];return Z(V,P.formatLong)}return V}).join("").match(zY).map(function(V){if(V==="''")return"'";var J=V[0];if(J==="'")return YY(V);var Z=qY.default[J];if(Z)return!(t!=null&&t.useAdditionalWeekYearTokens)&&(0,Vf.isProtectedWeekYearToken)(V)&&(0,Vf.throwProtectedError)(V,e,String(i)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&(0,Vf.isProtectedDayOfYearToken)(V)&&(0,Vf.throwProtectedError)(V,e,String(i)),Z(j,V,P.localize,W);if(J.match(GY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+J+"`");return V}).join("");return G}function YY(i){var e=i.match(WY);return e?e[1].replace(VY,"'"):i}qA.exports=Gf.default});var oa=E((jf,NA)=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.default=XY;function XY(i,e){if(i==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t]);return i}NA.exports=jf.default});var zx=E((Yf,kA)=>{"use strict";var $Y=R().default;Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=JY;var ZY=$Y(oa());function JY(i){return(0,ZY.default)({},i)}kA.exports=Yf.default});var Wx=E(($f,BA)=>{"use strict";var yi=R().default;Object.defineProperty($f,"__esModule",{value:!0});$f.default=u8;var KY=Rt(),QY=yi(Xi()),e8=yi(Zo()),t8=yi(Jo()),n8=yi(Vr()),Xf=yi(ee()),i8=yi(zx()),r8=yi(oa()),FA=yi(Jn()),s8=yi(F()),UA=1440,a8=2520,Hx=43200,o8=86400;function u8(i,e,t){var n,r;(0,s8.default)(2,arguments);var s=(0,KY.getDefaultOptions)(),a=(n=(r=t==null?void 0:t.locale)!==null&&r!==void 0?r:s.locale)!==null&&n!==void 0?n:n8.default;if(!a.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=(0,QY.default)(i,e);if(isNaN(o))throw new RangeError("Invalid time value");var u=(0,r8.default)((0,i8.default)(t),{addSuffix:Boolean(t==null?void 0:t.addSuffix),comparison:o}),l,c;o>0?(l=(0,Xf.default)(e),c=(0,Xf.default)(i)):(l=(0,Xf.default)(i),c=(0,Xf.default)(e));var d=(0,t8.default)(c,l),f=((0,FA.default)(c)-(0,FA.default)(l))/1e3,h=Math.round((d-f)/60),p;if(h<2)return t!=null&&t.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,u):d<10?a.formatDistance("lessThanXSeconds",10,u):d<20?a.formatDistance("lessThanXSeconds",20,u):d<40?a.formatDistance("halfAMinute",0,u):d<60?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",1,u):h===0?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",h,u);if(h<45)return a.formatDistance("xMinutes",h,u);if(h<90)return a.formatDistance("aboutXHours",1,u);if(h<UA){var v=Math.round(h/60);return a.formatDistance("aboutXHours",v,u)}else{if(h<a8)return a.formatDistance("xDays",1,u);if(h<Hx){var g=Math.round(h/UA);return a.formatDistance("xDays",g,u)}else if(h<o8)return p=Math.round(h/Hx),a.formatDistance("aboutXMonths",p,u)}if(p=(0,e8.default)(c,l),p<12){var m=Math.round(h/Hx);return a.formatDistance("xMonths",m,u)}else{var y=p%12,_=Math.floor(p/12);return y<3?a.formatDistance("aboutXYears",_,u):y<9?a.formatDistance("overXYears",_,u):a.formatDistance("almostXYears",_+1,u)}}BA.exports=$f.default});var Vx=E((Kf,GA)=>{"use strict";var Gr=R().default;Object.defineProperty(Kf,"__esModule",{value:!0});Kf.default=m8;var l8=Rt(),zA=Gr(Jn()),c8=Gr(Xi()),Zf=Gr(ee()),d8=Gr(zx()),f8=Gr(oa()),h8=Gr(Vr()),p8=Gr(F()),HA=1e3*60,Jf=60*24,WA=Jf*30,VA=Jf*365;function m8(i,e,t){var n,r,s;(0,p8.default)(2,arguments);var a=(0,l8.getDefaultOptions)(),o=(n=(r=t==null?void 0:t.locale)!==null&&r!==void 0?r:a.locale)!==null&&n!==void 0?n:h8.default;if(!o.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var u=(0,c8.default)(i,e);if(isNaN(u))throw new RangeError("Invalid time value");var l=(0,f8.default)((0,d8.default)(t),{addSuffix:Boolean(t==null?void 0:t.addSuffix),comparison:u}),c,d;u>0?(c=(0,Zf.default)(e),d=(0,Zf.default)(i)):(c=(0,Zf.default)(i),d=(0,Zf.default)(e));var f=String((s=t==null?void 0:t.roundingMethod)!==null&&s!==void 0?s:"round"),h;if(f==="floor")h=Math.floor;else if(f==="ceil")h=Math.ceil;else if(f==="round")h=Math.round;else throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var p=d.getTime()-c.getTime(),v=p/HA,g=(0,zA.default)(d)-(0,zA.default)(c),m=(p-g)/HA,y=t==null?void 0:t.unit,_;if(y?_=String(y):v<1?_="second":v<60?_="minute":v<Jf?_="hour":m<WA?_="day":m<VA?_="month":_="year",_==="second"){var b=h(p/1e3);return o.formatDistance("xSeconds",b,l)}else if(_==="minute"){var M=h(v);return o.formatDistance("xMinutes",M,l)}else if(_==="hour"){var T=h(v/60);return o.formatDistance("xHours",T,l)}else if(_==="day"){var P=h(m/Jf);return o.formatDistance("xDays",P,l)}else if(_==="month"){var C=h(m/WA);return C===12&&y!=="month"?o.formatDistance("xYears",1,l):o.formatDistance("xMonths",C,l)}else if(_==="year"){var S=h(m/VA);return o.formatDistance("xYears",S,l)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}GA.exports=Kf.default});var XA=E((Qf,YA)=>{"use strict";var jA=R().default;Object.defineProperty(Qf,"__esModule",{value:!0});Qf.default=_8;var g8=jA(Wx()),v8=jA(F());function _8(i,e){return(0,v8.default)(1,arguments),(0,g8.default)(i,Date.now(),e)}YA.exports=Qf.default});var JA=E((eh,ZA)=>{"use strict";var $A=R().default;Object.defineProperty(eh,"__esModule",{value:!0});eh.default=b8;var x8=$A(Vx()),y8=$A(F());function b8(i,e){return(0,y8.default)(1,arguments),(0,x8.default)(i,Date.now(),e)}ZA.exports=eh.default});var QA=E((th,KA)=>{"use strict";var M8=R().default;Object.defineProperty(th,"__esModule",{value:!0});th.default=E8;var S8=Rt(),w8=M8(Vr()),T8=["years","months","weeks","days","hours","minutes","seconds"];function E8(i,e){var t,n,r,s,a;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var o=(0,S8.getDefaultOptions)(),u=(t=(n=e==null?void 0:e.locale)!==null&&n!==void 0?n:o.locale)!==null&&t!==void 0?t:w8.default,l=(r=e==null?void 0:e.format)!==null&&r!==void 0?r:T8,c=(s=e==null?void 0:e.zero)!==null&&s!==void 0?s:!1,d=(a=e==null?void 0:e.delimiter)!==null&&a!==void 0?a:" ";if(!u.formatDistance)return"";var f=l.reduce(function(h,p){var v="x".concat(p.replace(/(^.)/,function(m){return m.toUpperCase()})),g=i[p];return typeof g=="number"&&(c||i[p])?h.concat(u.formatDistance(v,g)):h},[]).join(d);return f}KA.exports=th.default});var tD=E((nh,eD)=>{"use strict";var Gx=R().default;Object.defineProperty(nh,"__esModule",{value:!0});nh.default=D8;var P8=Gx(ee()),Ki=Gx(zr()),A8=Gx(F());function D8(i,e){var t,n;(0,A8.default)(1,arguments);var r=(0,P8.default)(i);if(isNaN(r.getTime()))throw new RangeError("Invalid time value");var s=String((t=e==null?void 0:e.format)!==null&&t!==void 0?t:"extended"),a=String((n=e==null?void 0:e.representation)!==null&&n!==void 0?n:"complete");if(s!=="extended"&&s!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(a!=="date"&&a!=="time"&&a!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var o="",u="",l=s==="extended"?"-":"",c=s==="extended"?":":"";if(a!=="time"){var d=(0,Ki.default)(r.getDate(),2),f=(0,Ki.default)(r.getMonth()+1,2),h=(0,Ki.default)(r.getFullYear(),4);o="".concat(h).concat(l).concat(f).concat(l).concat(d)}if(a!=="date"){var p=r.getTimezoneOffset();if(p!==0){var v=Math.abs(p),g=(0,Ki.default)(Math.floor(v/60),2),m=(0,Ki.default)(v%60,2),y=p<0?"+":"-";u="".concat(y).concat(g,":").concat(m)}else u="Z";var _=(0,Ki.default)(r.getHours(),2),b=(0,Ki.default)(r.getMinutes(),2),M=(0,Ki.default)(r.getSeconds(),2),T=o===""?"":"T",P=[_,b,M].join(c);o="".concat(o).concat(T).concat(P).concat(u)}return o}eD.exports=nh.default});var iD=E((ih,nD)=>{"use strict";var jx=R().default;Object.defineProperty(ih,"__esModule",{value:!0});ih.default=O8;var R8=jx(ee()),C8=jx(_i()),ua=jx(zr());function O8(i,e){var t,n;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var r=(0,R8.default)(i);if(!(0,C8.default)(r))throw new RangeError("Invalid time value");var s=String((t=e==null?void 0:e.format)!==null&&t!==void 0?t:"extended"),a=String((n=e==null?void 0:e.representation)!==null&&n!==void 0?n:"complete");if(s!=="extended"&&s!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(a!=="date"&&a!=="time"&&a!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var o="",u=s==="extended"?"-":"",l=s==="extended"?":":"";if(a!=="time"){var c=(0,ua.default)(r.getDate(),2),d=(0,ua.default)(r.getMonth()+1,2),f=(0,ua.default)(r.getFullYear(),4);o="".concat(f).concat(u).concat(d).concat(u).concat(c)}if(a!=="date"){var h=(0,ua.default)(r.getHours(),2),p=(0,ua.default)(r.getMinutes(),2),v=(0,ua.default)(r.getSeconds(),2),g=o===""?"":" ";o="".concat(o).concat(g).concat(h).concat(l).concat(p).concat(l).concat(v)}return o}nD.exports=ih.default});var aD=E((rh,sD)=>{"use strict";var rD=R().default;Object.defineProperty(rh,"__esModule",{value:!0});rh.default=q8;var I8=rD(mn()),L8=rD(F());function q8(i){if((0,L8.default)(1,arguments),(0,I8.default)(i)!=="object")throw new Error("Duration must be an object");var e=i.years,t=e===void 0?0:e,n=i.months,r=n===void 0?0:n,s=i.days,a=s===void 0?0:s,o=i.hours,u=o===void 0?0:o,l=i.minutes,c=l===void 0?0:l,d=i.seconds,f=d===void 0?0:d;return"P".concat(t,"Y").concat(r,"M").concat(a,"DT").concat(u,"H").concat(c,"M").concat(f,"S")}sD.exports=rh.default});var uD=E((ah,oD)=>{"use strict";var sh=R().default;Object.defineProperty(ah,"__esModule",{value:!0});ah.default=U8;var N8=sh(ee()),k8=sh(_i()),Qi=sh(zr()),F8=sh(qe());function U8(i,e){var t;if(arguments.length<1)throw new TypeError("1 arguments required, but only ".concat(arguments.length," present"));var n=(0,N8.default)(i);if(!(0,k8.default)(n))throw new RangeError("Invalid time value");var r=Number((t=e==null?void 0:e.fractionDigits)!==null&&t!==void 0?t:0);if(!(r>=0&&r<=3))throw new RangeError("fractionDigits must be between 0 and 3 inclusively");var s=(0,Qi.default)(n.getDate(),2),a=(0,Qi.default)(n.getMonth()+1,2),o=n.getFullYear(),u=(0,Qi.default)(n.getHours(),2),l=(0,Qi.default)(n.getMinutes(),2),c=(0,Qi.default)(n.getSeconds(),2),d="";if(r>0){var f=n.getMilliseconds(),h=Math.floor(f*Math.pow(10,r-3));d="."+(0,Qi.default)(h,r)}var p="",v=n.getTimezoneOffset();if(v!==0){var g=Math.abs(v),m=(0,Qi.default)((0,F8.default)(g/60),2),y=(0,Qi.default)(g%60,2),_=v<0?"+":"-";p="".concat(_).concat(m,":").concat(y)}else p="Z";return"".concat(o,"-").concat(a,"-").concat(s,"T").concat(u,":").concat(l,":").concat(c).concat(d).concat(p)}oD.exports=ah.default});var cD=E((uh,lD)=>{"use strict";var Yx=R().default;Object.defineProperty(uh,"__esModule",{value:!0});uh.default=V8;var B8=Yx(ee()),z8=Yx(_i()),oh=Yx(zr()),H8=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],W8=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function V8(i){if(arguments.length<1)throw new TypeError("1 arguments required, but only ".concat(arguments.length," present"));var e=(0,B8.default)(i);if(!(0,z8.default)(e))throw new RangeError("Invalid time value");var t=H8[e.getUTCDay()],n=(0,oh.default)(e.getUTCDate(),2),r=W8[e.getUTCMonth()],s=e.getUTCFullYear(),a=(0,oh.default)(e.getUTCHours(),2),o=(0,oh.default)(e.getUTCMinutes(),2),u=(0,oh.default)(e.getUTCSeconds(),2);return"".concat(t,", ").concat(n," ").concat(r," ").concat(s," ").concat(a,":").concat(o,":").concat(u," GMT")}lD.exports=uh.default});var mD=E((lh,pD)=>{"use strict";var er=R().default;Object.defineProperty(lh,"__esModule",{value:!0});lh.default=J8;var G8=Rt(),j8=er(vi()),Y8=er(Bx()),X8=er(Vr()),dD=er(ia()),fD=er(ee()),hD=er(Jn()),$8=er(F()),Z8=er(qe());function J8(i,e,t){var n,r,s,a,o,u,l,c,d,f;(0,$8.default)(2,arguments);var h=(0,fD.default)(i),p=(0,fD.default)(e),v=(0,G8.getDefaultOptions)(),g=(n=(r=t==null?void 0:t.locale)!==null&&r!==void 0?r:v.locale)!==null&&n!==void 0?n:X8.default,m=(0,Z8.default)((s=(a=(o=(u=t==null?void 0:t.weekStartsOn)!==null&&u!==void 0?u:t==null||(l=t.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&o!==void 0?o:v.weekStartsOn)!==null&&a!==void 0?a:(d=v.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&s!==void 0?s:0);if(!g.localize)throw new RangeError("locale must contain localize property");if(!g.formatLong)throw new RangeError("locale must contain formatLong property");if(!g.formatRelative)throw new RangeError("locale must contain formatRelative property");var y=(0,j8.default)(h,p);if(isNaN(y))throw new RangeError("Invalid time value");var _;y<-6?_="other":y<-1?_="lastWeek":y<0?_="yesterday":y<1?_="today":y<2?_="tomorrow":y<7?_="nextWeek":_="other";var b=(0,dD.default)(h,(0,hD.default)(h)),M=(0,dD.default)(p,(0,hD.default)(p)),T=g.formatRelative(_,b,M,{locale:g,weekStartsOn:m});return(0,Y8.default)(h,T,{locale:g,weekStartsOn:m})}pD.exports=lh.default});var vD=E((ch,gD)=>{"use strict";var Xx=R().default;Object.defineProperty(ch,"__esModule",{value:!0});ch.default=t6;var K8=Xx(ee()),Q8=Xx(qe()),e6=Xx(F());function t6(i){(0,e6.default)(1,arguments);var e=(0,Q8.default)(i);return(0,K8.default)(e*1e3)}gD.exports=ch.default});var $x=E((dh,xD)=>{"use strict";var _D=R().default;Object.defineProperty(dh,"__esModule",{value:!0});dh.default=r6;var n6=_D(ee()),i6=_D(F());function r6(i){(0,i6.default)(1,arguments);var e=(0,n6.default)(i),t=e.getDate();return t}xD.exports=dh.default});var hu=E((fh,bD)=>{"use strict";var yD=R().default;Object.defineProperty(fh,"__esModule",{value:!0});fh.default=o6;var s6=yD(ee()),a6=yD(F());function o6(i){(0,a6.default)(1,arguments);var e=(0,s6.default)(i),t=e.getDay();return t}bD.exports=fh.default});var SD=E((ph,MD)=>{"use strict";var hh=R().default;Object.defineProperty(ph,"__esModule",{value:!0});ph.default=f6;var u6=hh(ee()),l6=hh(lf()),c6=hh(vi()),d6=hh(F());function f6(i){(0,d6.default)(1,arguments);var e=(0,u6.default)(i),t=(0,c6.default)(e,(0,l6.default)(e)),n=t+1;return n}MD.exports=ph.default});var Zx=E((mh,TD)=>{"use strict";var wD=R().default;Object.defineProperty(mh,"__esModule",{value:!0});mh.default=m6;var h6=wD(ee()),p6=wD(F());function m6(i){(0,p6.default)(1,arguments);var e=(0,h6.default)(i),t=e.getFullYear(),n=e.getMonth(),r=new Date(0);return r.setFullYear(t,n+1,0),r.setHours(0,0,0,0),r.getDate()}TD.exports=mh.default});var Jx=E((gh,PD)=>{"use strict";var ED=R().default;Object.defineProperty(gh,"__esModule",{value:!0});gh.default=_6;var g6=ED(ee()),v6=ED(F());function _6(i){(0,v6.default)(1,arguments);var e=(0,g6.default)(i),t=e.getFullYear();return t%400===0||t%4===0&&t%100!==0}PD.exports=gh.default});var DD=E((vh,AD)=>{"use strict";var Kx=R().default;Object.defineProperty(vh,"__esModule",{value:!0});vh.default=M6;var x6=Kx(ee()),y6=Kx(Jx()),b6=Kx(F());function M6(i){(0,b6.default)(1,arguments);var e=(0,x6.default)(i);return String(new Date(e))==="Invalid Date"?NaN:(0,y6.default)(e)?366:365}AD.exports=vh.default});var OD=E((_h,CD)=>{"use strict";var RD=R().default;Object.defineProperty(_h,"__esModule",{value:!0});_h.default=T6;var S6=RD(ee()),w6=RD(F());function T6(i){(0,w6.default)(1,arguments);var e=(0,S6.default)(i),t=e.getFullYear(),n=Math.floor(t/10)*10;return n}CD.exports=_h.default});var LD=E((xh,ID)=>{"use strict";var E6=R().default;Object.defineProperty(xh,"__esModule",{value:!0});xh.default=D6;var P6=Rt(),A6=E6(oa());function D6(){return(0,A6.default)({},(0,P6.getDefaultOptions)())}ID.exports=xh.default});var kD=E((yh,ND)=>{"use strict";var qD=R().default;Object.defineProperty(yh,"__esModule",{value:!0});yh.default=O6;var R6=qD(ee()),C6=qD(F());function O6(i){(0,C6.default)(1,arguments);var e=(0,R6.default)(i),t=e.getHours();return t}ND.exports=yh.default});var Qx=E((bh,UD)=>{"use strict";var FD=R().default;Object.defineProperty(bh,"__esModule",{value:!0});bh.default=q6;var I6=FD(ee()),L6=FD(F());function q6(i){(0,L6.default)(1,arguments);var e=(0,I6.default)(i),t=e.getDay();return t===0&&(t=7),t}UD.exports=bh.default});var ey=E((Sh,BD)=>{"use strict";var Mh=R().default;Object.defineProperty(Sh,"__esModule",{value:!0});Sh.default=z6;var N6=Mh(ee()),k6=Mh(Yi()),F6=Mh(ta()),U6=Mh(F()),B6=6048e5;function z6(i){(0,U6.default)(1,arguments);var e=(0,N6.default)(i),t=(0,k6.default)(e).getTime()-(0,F6.default)(e).getTime();return Math.round(t/B6)+1}BD.exports=Sh.default});var WD=E((wh,HD)=>{"use strict";var ty=R().default;Object.defineProperty(wh,"__esModule",{value:!0});wh.default=G6;var zD=ty(ta()),H6=ty(jo()),W6=ty(F()),V6=6048e5;function G6(i){(0,W6.default)(1,arguments);var e=(0,zD.default)(i),t=(0,zD.default)((0,H6.default)(e,60)),n=t.valueOf()-e.valueOf();return Math.round(n/V6)}HD.exports=wh.default});var jD=E((Th,GD)=>{"use strict";var VD=R().default;Object.defineProperty(Th,"__esModule",{value:!0});Th.default=X6;var j6=VD(ee()),Y6=VD(F());function X6(i){(0,Y6.default)(1,arguments);var e=(0,j6.default)(i),t=e.getMilliseconds();return t}GD.exports=Th.default});var $D=E((Eh,XD)=>{"use strict";var YD=R().default;Object.defineProperty(Eh,"__esModule",{value:!0});Eh.default=J6;var $6=YD(ee()),Z6=YD(F());function J6(i){(0,Z6.default)(1,arguments);var e=(0,$6.default)(i),t=e.getMinutes();return t}XD.exports=Eh.default});var KD=E((Ph,JD)=>{"use strict";var ZD=R().default;Object.defineProperty(Ph,"__esModule",{value:!0});Ph.default=eX;var K6=ZD(ee()),Q6=ZD(F());function eX(i){(0,Q6.default)(1,arguments);var e=(0,K6.default)(i),t=e.getMonth();return t}JD.exports=Ph.default});var tR=E((Dh,eR)=>{"use strict";var QD=R().default;Object.defineProperty(Dh,"__esModule",{value:!0});Dh.default=iX;var Ah=QD(ee()),tX=QD(F()),nX=24*60*60*1e3;function iX(i,e){(0,tX.default)(2,arguments);var t=i||{},n=e||{},r=(0,Ah.default)(t.start).getTime(),s=(0,Ah.default)(t.end).getTime(),a=(0,Ah.default)(n.start).getTime(),o=(0,Ah.default)(n.end).getTime();if(!(r<=s&&a<=o))throw new RangeError("Invalid interval");var u=r<o&&a<s;if(!u)return 0;var l=a<r?r:a,c=o>s?s:o,d=c-l;return Math.ceil(d/nX)}eR.exports=Dh.default});var rR=E((Rh,iR)=>{"use strict";var nR=R().default;Object.defineProperty(Rh,"__esModule",{value:!0});Rh.default=aX;var rX=nR(ee()),sX=nR(F());function aX(i){(0,sX.default)(1,arguments);var e=(0,rX.default)(i),t=e.getSeconds();return t}iR.exports=Rh.default});var ny=E((Ch,aR)=>{"use strict";var sR=R().default;Object.defineProperty(Ch,"__esModule",{value:!0});Ch.default=lX;var oX=sR(ee()),uX=sR(F());function lX(i){(0,uX.default)(1,arguments);var e=(0,oX.default)(i),t=e.getTime();return t}aR.exports=Ch.default});var lR=E((Oh,uR)=>{"use strict";var oR=R().default;Object.defineProperty(Oh,"__esModule",{value:!0});Oh.default=fX;var cX=oR(ny()),dX=oR(F());function fX(i){return(0,dX.default)(1,arguments),Math.floor((0,cX.default)(i)/1e3)}uR.exports=Oh.default});var iy=E((Lh,dR)=>{"use strict";var Ih=R().default;Object.defineProperty(Lh,"__esModule",{value:!0});Lh.default=vX;var cR=Ih(gi()),hX=Ih(ee()),pX=Ih(qe()),mX=Ih(F()),gX=Rt();function vX(i,e){var t,n,r,s,a,o,u,l;(0,mX.default)(1,arguments);var c=(0,hX.default)(i),d=c.getFullYear(),f=(0,gX.getDefaultOptions)(),h=(0,pX.default)((t=(n=(r=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&n!==void 0?n:(u=f.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setFullYear(d+1,0,h),p.setHours(0,0,0,0);var v=(0,cR.default)(p,e),g=new Date(0);g.setFullYear(d,0,h),g.setHours(0,0,0,0);var m=(0,cR.default)(g,e);return c.getTime()>=v.getTime()?d+1:c.getTime()>=m.getTime()?d:d-1}dR.exports=Lh.default});var kh=E((Nh,fR)=>{"use strict";var qh=R().default;Object.defineProperty(Nh,"__esModule",{value:!0});Nh.default=SX;var _X=qh(iy()),xX=qh(gi()),yX=qh(qe()),bX=qh(F()),MX=Rt();function SX(i,e){var t,n,r,s,a,o,u,l;(0,bX.default)(1,arguments);var c=(0,MX.getDefaultOptions)(),d=(0,yX.default)((t=(n=(r=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&r!==void 0?r:c.firstWeekContainsDate)!==null&&n!==void 0?n:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&t!==void 0?t:1),f=(0,_X.default)(i,e),h=new Date(0);h.setFullYear(f,0,d),h.setHours(0,0,0,0);var p=(0,xX.default)(h,e);return p}fR.exports=Nh.default});var ry=E((Uh,hR)=>{"use strict";var Fh=R().default;Object.defineProperty(Uh,"__esModule",{value:!0});Uh.default=DX;var wX=Fh(gi()),TX=Fh(kh()),EX=Fh(ee()),PX=Fh(F()),AX=6048e5;function DX(i,e){(0,PX.default)(1,arguments);var t=(0,EX.default)(i),n=(0,wX.default)(t,e).getTime()-(0,TX.default)(t,e).getTime();return Math.round(n/AX)+1}hR.exports=Uh.default});var mR=E((Bh,pR)=>{"use strict";var pu=R().default;Object.defineProperty(Bh,"__esModule",{value:!0});Bh.default=NX;var RX=Rt(),CX=pu($x()),OX=pu(hu()),IX=pu(Ko()),LX=pu(F()),qX=pu(qe());function NX(i,e){var t,n,r,s,a,o,u,l;(0,LX.default)(1,arguments);var c=(0,RX.getDefaultOptions)(),d=(0,qX.default)((t=(n=(r=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&r!==void 0?r:c.weekStartsOn)!==null&&n!==void 0?n:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&t!==void 0?t:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=(0,CX.default)(i);if(isNaN(f))return NaN;var h=(0,OX.default)((0,IX.default)(i)),p=d-h;p<=0&&(p+=7);var v=f-p;return Math.ceil(v/7)+1}pR.exports=Bh.default});var sy=E((zh,vR)=>{"use strict";var gR=R().default;Object.defineProperty(zh,"__esModule",{value:!0});zh.default=UX;var kX=gR(ee()),FX=gR(F());function UX(i){(0,FX.default)(1,arguments);var e=(0,kX.default)(i),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}vR.exports=zh.default});var xR=E((Wh,_R)=>{"use strict";var Hh=R().default;Object.defineProperty(Wh,"__esModule",{value:!0});Wh.default=VX;var BX=Hh(vd()),zX=Hh(sy()),HX=Hh(Ko()),WX=Hh(F());function VX(i,e){return(0,WX.default)(1,arguments),(0,BX.default)((0,zX.default)(i),(0,HX.default)(i),e)+1}_R.exports=Wh.default});var MR=E((Vh,bR)=>{"use strict";var yR=R().default;Object.defineProperty(Vh,"__esModule",{value:!0});Vh.default=YX;var GX=yR(ee()),jX=yR(F());function YX(i){return(0,jX.default)(1,arguments),(0,GX.default)(i).getFullYear()}bR.exports=Vh.default});var wR=E((Gh,SR)=>{"use strict";var XX=R().default;Object.defineProperty(Gh,"__esModule",{value:!0});Gh.default=JX;var $X=XX(F()),ZX=St();function JX(i){return(0,$X.default)(1,arguments),Math.floor(i*ZX.millisecondsInHour)}SR.exports=Gh.default});var ER=E((jh,TR)=>{"use strict";var KX=R().default;Object.defineProperty(jh,"__esModule",{value:!0});jh.default=t9;var QX=KX(F()),e9=St();function t9(i){return(0,QX.default)(1,arguments),Math.floor(i*e9.minutesInHour)}TR.exports=jh.default});var AR=E((Yh,PR)=>{"use strict";var n9=R().default;Object.defineProperty(Yh,"__esModule",{value:!0});Yh.default=s9;var i9=n9(F()),r9=St();function s9(i){return(0,i9.default)(1,arguments),Math.floor(i*r9.secondsInHour)}PR.exports=Yh.default});var CR=E((Xh,RR)=>{"use strict";var Kn=R().default;Object.defineProperty(Xh,"__esModule",{value:!0});Xh.default=p9;var a9=Kn(Xi()),mu=Kn(D0()),o9=Kn(bd()),u9=Kn(wd()),l9=Kn(Ad()),c9=Kn(Zo()),d9=Kn(Jo()),f9=Kn(mx()),DR=Kn(ee()),h9=Kn(F());function p9(i){(0,h9.default)(1,arguments);var e=(0,DR.default)(i.start),t=(0,DR.default)(i.end);if(isNaN(e.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(t.getTime()))throw new RangeError("End Date is invalid");var n={};n.years=Math.abs((0,f9.default)(t,e));var r=(0,a9.default)(t,e),s=(0,mu.default)(e,{years:r*n.years});n.months=Math.abs((0,c9.default)(t,s));var a=(0,mu.default)(s,{months:r*n.months});n.days=Math.abs((0,o9.default)(t,a));var o=(0,mu.default)(a,{days:r*n.days});n.hours=Math.abs((0,u9.default)(t,o));var u=(0,mu.default)(o,{hours:r*n.hours});n.minutes=Math.abs((0,l9.default)(t,u));var l=(0,mu.default)(u,{minutes:r*n.minutes});return n.seconds=Math.abs((0,d9.default)(t,l)),n}RR.exports=Xh.default});var IR=E(($h,OR)=>{"use strict";var m9=R().default;Object.defineProperty($h,"__esModule",{value:!0});$h.default=v9;var g9=m9(F());function v9(i,e,t){var n;(0,g9.default)(1,arguments);var r;return _9(e)?r=e:t=e,new Intl.DateTimeFormat((n=t)===null||n===void 0?void 0:n.locale,r).format(i)}function _9(i){return i!==void 0&&!("locale"in i)}OR.exports=$h.default});var BR=E((Zh,UR)=>{"use strict";var Qn=R().default;Object.defineProperty(Zh,"__esModule",{value:!0});Zh.default=y9;var jr=St(),ay=Qn(vi()),LR=Qn(hd()),oy=Qn(ax()),qR=Qn(vd()),uy=Qn(xd()),NR=Qn(wd()),kR=Qn(Ad()),ly=Qn(Jo()),FR=Qn(ee()),x9=Qn(F());function y9(i,e,t){(0,x9.default)(2,arguments);var n=0,r,s=(0,FR.default)(i),a=(0,FR.default)(e);if(t!=null&&t.unit)r=t==null?void 0:t.unit,r==="second"?n=(0,ly.default)(s,a):r==="minute"?n=(0,kR.default)(s,a):r==="hour"?n=(0,NR.default)(s,a):r==="day"?n=(0,ay.default)(s,a):r==="week"?n=(0,qR.default)(s,a):r==="month"?n=(0,LR.default)(s,a):r==="quarter"?n=(0,oy.default)(s,a):r==="year"&&(n=(0,uy.default)(s,a));else{var o=(0,ly.default)(s,a);Math.abs(o)<jr.secondsInMinute?(n=(0,ly.default)(s,a),r="second"):Math.abs(o)<jr.secondsInHour?(n=(0,kR.default)(s,a),r="minute"):Math.abs(o)<jr.secondsInDay&&Math.abs((0,ay.default)(s,a))<1?(n=(0,NR.default)(s,a),r="hour"):Math.abs(o)<jr.secondsInWeek&&(n=(0,ay.default)(s,a))&&Math.abs(n)<7?r="day":Math.abs(o)<jr.secondsInMonth?(n=(0,qR.default)(s,a),r="week"):Math.abs(o)<jr.secondsInQuarter?(n=(0,LR.default)(s,a),r="month"):Math.abs(o)<jr.secondsInYear&&(0,oy.default)(s,a)<4?(n=(0,oy.default)(s,a),r="quarter"):(n=(0,uy.default)(s,a),r="year")}var u=new Intl.RelativeTimeFormat(t==null?void 0:t.locale,{localeMatcher:t==null?void 0:t.localeMatcher,numeric:(t==null?void 0:t.numeric)||"auto",style:t==null?void 0:t.style});return u.format(n,r)}UR.exports=Zh.default});var VR=E((Jh,WR)=>{"use strict";var HR=R().default;Object.defineProperty(Jh,"__esModule",{value:!0});Jh.default=M9;var zR=HR(ee()),b9=HR(F());function M9(i,e){(0,b9.default)(2,arguments);var t=(0,zR.default)(i),n=(0,zR.default)(e);return t.getTime()>n.getTime()}WR.exports=Jh.default});var XR=E((Kh,YR)=>{"use strict";var jR=R().default;Object.defineProperty(Kh,"__esModule",{value:!0});Kh.default=w9;var GR=jR(ee()),S9=jR(F());function w9(i,e){(0,S9.default)(2,arguments);var t=(0,GR.default)(i),n=(0,GR.default)(e);return t.getTime()<n.getTime()}YR.exports=Kh.default});var KR=E((Qh,JR)=>{"use strict";var ZR=R().default;Object.defineProperty(Qh,"__esModule",{value:!0});Qh.default=E9;var $R=ZR(ee()),T9=ZR(F());function E9(i,e){(0,T9.default)(2,arguments);var t=(0,$R.default)(i),n=(0,$R.default)(e);return t.getTime()===n.getTime()}JR.exports=Qh.default});var e2=E((ep,QR)=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.default=P9;function P9(i,e,t){if(arguments.length<3)throw new TypeError("3 argument required, but only "+arguments.length+" present");var n=new Date(i,e,t);return n.getFullYear()===i&&n.getMonth()===e&&n.getDate()===t}QR.exports=ep.default});var i2=E((tp,n2)=>{"use strict";var t2=R().default;Object.defineProperty(tp,"__esModule",{value:!0});tp.default=R9;var A9=t2(ee()),D9=t2(F());function R9(i){return(0,D9.default)(1,arguments),(0,A9.default)(i).getDate()===1}n2.exports=tp.default});var a2=E((np,s2)=>{"use strict";var r2=R().default;Object.defineProperty(np,"__esModule",{value:!0});np.default=I9;var C9=r2(ee()),O9=r2(F());function I9(i){return(0,O9.default)(1,arguments),(0,C9.default)(i).getDay()===5}s2.exports=np.default});var l2=E((ip,u2)=>{"use strict";var o2=R().default;Object.defineProperty(ip,"__esModule",{value:!0});ip.default=N9;var L9=o2(ee()),q9=o2(F());function N9(i){return(0,q9.default)(1,arguments),(0,L9.default)(i).getTime()>Date.now()}u2.exports=ip.default});var c2=E((tMe,gu)=>{function k9(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}gu.exports=k9,gu.exports.__esModule=!0,gu.exports.default=gu.exports});var f2=E((nMe,vu)=>{var d2=c2();function F9(i,e){if(!!i){if(typeof i=="string")return d2(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d2(i,e)}}vu.exports=F9,vu.exports.__esModule=!0,vu.exports.default=vu.exports});var h2=E((iMe,_u)=>{var U9=f2();function B9(i,e){var t=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=U9(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){t=t.call(i)},n:function(){var l=t.next();return s=l.done,l},e:function(l){a=!0,o=l},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw o}}}}_u.exports=B9,_u.exports.__esModule=!0,_u.exports.default=_u.exports});var ut=E((rMe,xu)=>{function z9(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}xu.exports=z9,xu.exports.__esModule=!0,xu.exports.default=xu.exports});var p2=E((sMe,bi)=>{function cy(i,e){return bi.exports=cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bi.exports.__esModule=!0,bi.exports.default=bi.exports,cy(i,e)}bi.exports=cy,bi.exports.__esModule=!0,bi.exports.default=bi.exports});var ht=E((aMe,yu)=>{var H9=p2();function W9(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&H9(i,e)}yu.exports=W9,yu.exports.__esModule=!0,yu.exports.default=yu.exports});var m2=E((oMe,Mi)=>{function dy(i){return Mi.exports=dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mi.exports.__esModule=!0,Mi.exports.default=Mi.exports,dy(i)}Mi.exports=dy,Mi.exports.__esModule=!0,Mi.exports.default=Mi.exports});var g2=E((uMe,bu)=>{function V9(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}bu.exports=V9,bu.exports.__esModule=!0,bu.exports.default=bu.exports});var v2=E((lMe,Mu)=>{var G9=mn().default,j9=ut();function Y9(i,e){if(e&&(G9(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j9(i)}Mu.exports=Y9,Mu.exports.__esModule=!0,Mu.exports.default=Mu.exports});var pt=E((cMe,Su)=>{var _2=m2(),X9=g2(),$9=v2();function Z9(i){var e=X9();return function(){var n=_2(i),r;if(e){var s=_2(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return $9(this,r)}}Su.exports=Z9,Su.exports.__esModule=!0,Su.exports.default=Su.exports});var lt=E((dMe,wu)=>{function J9(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}wu.exports=J9,wu.exports.__esModule=!0,wu.exports.default=wu.exports});var y2=E((fMe,Tu)=>{var x2=mn().default;function K9(i,e){if(x2(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(x2(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}Tu.exports=K9,Tu.exports.__esModule=!0,Tu.exports.default=Tu.exports});var fy=E((hMe,Eu)=>{var Q9=mn().default,e7=y2();function t7(i){var e=e7(i,"string");return Q9(e)==="symbol"?e:String(e)}Eu.exports=t7,Eu.exports.__esModule=!0,Eu.exports.default=Eu.exports});var ct=E((pMe,Pu)=>{var n7=fy();function b2(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n7(n.key),n)}}function i7(i,e,t){return e&&b2(i.prototype,e),t&&b2(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}Pu.exports=i7,Pu.exports.__esModule=!0,Pu.exports.default=Pu.exports});var dt=E((mMe,Au)=>{var r7=fy();function s7(i,e,t){return e=r7(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}Au.exports=s7,Au.exports.__esModule=!0,Au.exports.default=Au.exports});var gy=E(tr=>{"use strict";var la=R().default;Object.defineProperty(tr,"__esModule",{value:!0});tr.ValueSetter=tr.Setter=tr.DateToSystemTimezoneSetter=void 0;var M2=la(ut()),S2=la(ht()),w2=la(pt()),hy=la(lt()),py=la(ct()),rp=la(dt()),a7=10,my=function(){function i(){(0,hy.default)(this,i),(0,rp.default)(this,"priority",void 0),(0,rp.default)(this,"subPriority",0)}return(0,py.default)(i,[{key:"validate",value:function(t,n){return!0}}]),i}();tr.Setter=my;var o7=function(i){(0,S2.default)(t,i);var e=(0,w2.default)(t);function t(n,r,s,a,o){var u;return(0,hy.default)(this,t),u=e.call(this),u.value=n,u.validateValue=r,u.setValue=s,u.priority=a,o&&(u.subPriority=o),u}return(0,py.default)(t,[{key:"validate",value:function(r,s){return this.validateValue(r,this.value,s)}},{key:"set",value:function(r,s,a){return this.setValue(r,s,this.value,a)}}]),t}(my);tr.ValueSetter=o7;var u7=function(i){(0,S2.default)(t,i);var e=(0,w2.default)(t);function t(){var n;(0,hy.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,rp.default)((0,M2.default)(n),"priority",a7),(0,rp.default)((0,M2.default)(n),"subPriority",-1),n}return(0,py.default)(t,[{key:"set",value:function(r,s){if(s.timestampIsSet)return r;var a=new Date(0);return a.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),a.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),a}}]),t}(my);tr.DateToSystemTimezoneSetter=u7});var mt=E(sp=>{"use strict";var _y=R().default;Object.defineProperty(sp,"__esModule",{value:!0});sp.Parser=void 0;var l7=_y(lt()),c7=_y(ct()),vy=_y(dt()),d7=gy(),f7=function(){function i(){(0,l7.default)(this,i),(0,vy.default)(this,"incompatibleTokens",void 0),(0,vy.default)(this,"priority",void 0),(0,vy.default)(this,"subPriority",void 0)}return(0,c7.default)(i,[{key:"run",value:function(t,n,r,s){var a=this.parse(t,n,r,s);return a?{setter:new d7.ValueSetter(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}},{key:"validate",value:function(t,n,r){return!0}}]),i}();sp.Parser=f7});var P2=E(ap=>{"use strict";var ca=R().default;Object.defineProperty(ap,"__esModule",{value:!0});ap.EraParser=void 0;var h7=ca(lt()),p7=ca(ct()),T2=ca(ut()),m7=ca(ht()),g7=ca(pt()),E2=ca(dt()),v7=mt(),_7=function(i){(0,m7.default)(t,i);var e=(0,g7.default)(t);function t(){var n;(0,h7.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,E2.default)((0,T2.default)(n),"priority",140),(0,E2.default)((0,T2.default)(n),"incompatibleTokens",["R","u","t","T"]),n}return(0,p7.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})||a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"})}}},{key:"set",value:function(r,s,a){return s.era=a,r.setUTCFullYear(a,0,1),r.setUTCHours(0,0,0,0),r}}]),t}(v7.Parser);ap.EraParser=_7});var Yt=E(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.timezonePatterns=da.numericPatterns=void 0;var x7={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/};da.numericPatterns=x7;var y7={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};da.timezonePatterns=y7});var vt=E(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.dayPeriodEnumToHours=E7;Nn.isLeapYearIndex=A7;Nn.mapValue=b7;Nn.normalizeTwoDigitYear=P7;Nn.parseAnyDigitsSigned=S7;Nn.parseNDigits=w7;Nn.parseNDigitsSigned=T7;Nn.parseNumericPattern=Tn;Nn.parseTimezonePattern=M7;var xy=St(),Si=Yt();function b7(i,e){return i&&{value:e(i.value),rest:i.rest}}function Tn(i,e){var t=e.match(i);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function M7(i,e){var t=e.match(i);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var n=t[1]==="+"?1:-1,r=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:n*(r*xy.millisecondsInHour+s*xy.millisecondsInMinute+a*xy.millisecondsInSecond),rest:e.slice(t[0].length)}}function S7(i){return Tn(Si.numericPatterns.anyDigitsSigned,i)}function w7(i,e){switch(i){case 1:return Tn(Si.numericPatterns.singleDigit,e);case 2:return Tn(Si.numericPatterns.twoDigits,e);case 3:return Tn(Si.numericPatterns.threeDigits,e);case 4:return Tn(Si.numericPatterns.fourDigits,e);default:return Tn(new RegExp("^\\d{1,"+i+"}"),e)}}function T7(i,e){switch(i){case 1:return Tn(Si.numericPatterns.singleDigitSigned,e);case 2:return Tn(Si.numericPatterns.twoDigitsSigned,e);case 3:return Tn(Si.numericPatterns.threeDigitsSigned,e);case 4:return Tn(Si.numericPatterns.fourDigitsSigned,e);default:return Tn(new RegExp("^-?\\d{1,"+i+"}"),e)}}function E7(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function P7(i,e){var t=e>0,n=t?e:1-e,r;if(n<=50)r=i||100;else{var s=n+50,a=Math.floor(s/100)*100,o=i>=s%100;r=i+a-(o?100:0)}return t?r:1-r}function A7(i){return i%400===0||i%4===0&&i%100!==0}});var R2=E(op=>{"use strict";var ha=R().default;Object.defineProperty(op,"__esModule",{value:!0});op.YearParser=void 0;var D7=ha(lt()),R7=ha(ct()),A2=ha(ut()),C7=ha(ht()),O7=ha(pt()),D2=ha(dt()),I7=mt(),fa=vt(),L7=function(i){(0,C7.default)(t,i);var e=(0,O7.default)(t);function t(){var n;(0,D7.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,D2.default)((0,A2.default)(n),"priority",130),(0,D2.default)((0,A2.default)(n),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),n}return(0,R7.default)(t,[{key:"parse",value:function(r,s,a){var o=function(l){return{year:l,isTwoDigitYear:s==="yy"}};switch(s){case"y":return(0,fa.mapValue)((0,fa.parseNDigits)(4,r),o);case"yo":return(0,fa.mapValue)(a.ordinalNumber(r,{unit:"year"}),o);default:return(0,fa.mapValue)((0,fa.parseNDigits)(s.length,r),o)}}},{key:"validate",value:function(r,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(r,s,a){var o=r.getUTCFullYear();if(a.isTwoDigitYear){var u=(0,fa.normalizeTwoDigitYear)(a.year,o);return r.setUTCFullYear(u,0,1),r.setUTCHours(0,0,0,0),r}var l=!("era"in s)||s.era===1?a.year:1-a.year;return r.setUTCFullYear(l,0,1),r.setUTCHours(0,0,0,0),r}}]),t}(I7.Parser);op.YearParser=L7});var L2=E(up=>{"use strict";var nr=R().default;Object.defineProperty(up,"__esModule",{value:!0});up.LocalWeekYearParser=void 0;var q7=nr(lt()),N7=nr(ct()),C2=nr(ut()),k7=nr(ht()),F7=nr(pt()),O2=nr(dt()),U7=mt(),pa=vt(),B7=nr(Lf()),I2=nr(sa()),z7=function(i){(0,k7.default)(t,i);var e=(0,F7.default)(t);function t(){var n;(0,q7.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,O2.default)((0,C2.default)(n),"priority",130),(0,O2.default)((0,C2.default)(n),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),n}return(0,N7.default)(t,[{key:"parse",value:function(r,s,a){var o=function(l){return{year:l,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return(0,pa.mapValue)((0,pa.parseNDigits)(4,r),o);case"Yo":return(0,pa.mapValue)(a.ordinalNumber(r,{unit:"year"}),o);default:return(0,pa.mapValue)((0,pa.parseNDigits)(s.length,r),o)}}},{key:"validate",value:function(r,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(r,s,a,o){var u=(0,B7.default)(r,o);if(a.isTwoDigitYear){var l=(0,pa.normalizeTwoDigitYear)(a.year,u);return r.setUTCFullYear(l,0,o.firstWeekContainsDate),r.setUTCHours(0,0,0,0),(0,I2.default)(r,o)}var c=!("era"in s)||s.era===1?a.year:1-a.year;return r.setUTCFullYear(c,0,o.firstWeekContainsDate),r.setUTCHours(0,0,0,0),(0,I2.default)(r,o)}}]),t}(U7.Parser);up.LocalWeekYearParser=z7});var F2=E(lp=>{"use strict";var Yr=R().default;Object.defineProperty(lp,"__esModule",{value:!0});lp.ISOWeekYearParser=void 0;var H7=Yr(lt()),W7=Yr(ct()),q2=Yr(ut()),V7=Yr(ht()),G7=Yr(pt()),N2=Yr(dt()),j7=mt(),k2=vt(),Y7=Yr(ra()),X7=function(i){(0,V7.default)(t,i);var e=(0,G7.default)(t);function t(){var n;(0,H7.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,N2.default)((0,q2.default)(n),"priority",130),(0,N2.default)((0,q2.default)(n),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),n}return(0,W7.default)(t,[{key:"parse",value:function(r,s){return s==="R"?(0,k2.parseNDigitsSigned)(4,r):(0,k2.parseNDigitsSigned)(s.length,r)}},{key:"set",value:function(r,s,a){var o=new Date(0);return o.setUTCFullYear(a,0,4),o.setUTCHours(0,0,0,0),(0,Y7.default)(o)}}]),t}(j7.Parser);lp.ISOWeekYearParser=X7});var H2=E(cp=>{"use strict";var ma=R().default;Object.defineProperty(cp,"__esModule",{value:!0});cp.ExtendedYearParser=void 0;var $7=ma(lt()),Z7=ma(ct()),U2=ma(ut()),J7=ma(ht()),K7=ma(pt()),B2=ma(dt()),Q7=mt(),z2=vt(),e$=function(i){(0,J7.default)(t,i);var e=(0,K7.default)(t);function t(){var n;(0,$7.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,B2.default)((0,U2.default)(n),"priority",130),(0,B2.default)((0,U2.default)(n),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),n}return(0,Z7.default)(t,[{key:"parse",value:function(r,s){return s==="u"?(0,z2.parseNDigitsSigned)(4,r):(0,z2.parseNDigitsSigned)(s.length,r)}},{key:"set",value:function(r,s,a){return r.setUTCFullYear(a,0,1),r.setUTCHours(0,0,0,0),r}}]),t}(Q7.Parser);cp.ExtendedYearParser=e$});var G2=E(dp=>{"use strict";var ga=R().default;Object.defineProperty(dp,"__esModule",{value:!0});dp.QuarterParser=void 0;var t$=ga(lt()),n$=ga(ct()),W2=ga(ut()),i$=ga(ht()),r$=ga(pt()),V2=ga(dt()),s$=mt(),a$=vt(),o$=function(i){(0,i$.default)(t,i);var e=(0,r$.default)(t);function t(){var n;(0,t$.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,V2.default)((0,W2.default)(n),"priority",120),(0,V2.default)((0,W2.default)(n),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),n}return(0,n$.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"Q":case"QQ":return(0,a$.parseNDigits)(s.length,r);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})||a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(r,s){return s>=1&&s<=4}},{key:"set",value:function(r,s,a){return r.setUTCMonth((a-1)*3,1),r.setUTCHours(0,0,0,0),r}}]),t}(s$.Parser);dp.QuarterParser=o$});var X2=E(fp=>{"use strict";var va=R().default;Object.defineProperty(fp,"__esModule",{value:!0});fp.StandAloneQuarterParser=void 0;var u$=va(lt()),l$=va(ct()),j2=va(ut()),c$=va(ht()),d$=va(pt()),Y2=va(dt()),f$=mt(),h$=vt(),p$=function(i){(0,c$.default)(t,i);var e=(0,d$.default)(t);function t(){var n;(0,u$.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,Y2.default)((0,j2.default)(n),"priority",120),(0,Y2.default)((0,j2.default)(n),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),n}return(0,l$.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"q":case"qq":return(0,h$.parseNDigits)(s.length,r);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})||a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(r,s){return s>=1&&s<=4}},{key:"set",value:function(r,s,a){return r.setUTCMonth((a-1)*3,1),r.setUTCHours(0,0,0,0),r}}]),t}(f$.Parser);fp.StandAloneQuarterParser=p$});var J2=E(hp=>{"use strict";var _a=R().default;Object.defineProperty(hp,"__esModule",{value:!0});hp.MonthParser=void 0;var m$=_a(lt()),g$=_a(ct()),$2=_a(ut()),v$=_a(ht()),_$=_a(pt()),Z2=_a(dt()),Du=vt(),x$=mt(),y$=Yt(),b$=function(i){(0,v$.default)(t,i);var e=(0,_$.default)(t);function t(){var n;(0,m$.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,Z2.default)((0,$2.default)(n),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),(0,Z2.default)((0,$2.default)(n),"priority",110),n}return(0,g$.default)(t,[{key:"parse",value:function(r,s,a){var o=function(l){return l-1};switch(s){case"M":return(0,Du.mapValue)((0,Du.parseNumericPattern)(y$.numericPatterns.month,r),o);case"MM":return(0,Du.mapValue)((0,Du.parseNDigits)(2,r),o);case"Mo":return(0,Du.mapValue)(a.ordinalNumber(r,{unit:"month"}),o);case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})||a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(r,s){return s>=0&&s<=11}},{key:"set",value:function(r,s,a){return r.setUTCMonth(a,1),r.setUTCHours(0,0,0,0),r}}]),t}(x$.Parser);hp.MonthParser=b$});var eC=E(pp=>{"use strict";var xa=R().default;Object.defineProperty(pp,"__esModule",{value:!0});pp.StandAloneMonthParser=void 0;var M$=xa(lt()),S$=xa(ct()),K2=xa(ut()),w$=xa(ht()),T$=xa(pt()),Q2=xa(dt()),E$=mt(),P$=Yt(),Ru=vt(),A$=function(i){(0,w$.default)(t,i);var e=(0,T$.default)(t);function t(){var n;(0,M$.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,Q2.default)((0,K2.default)(n),"priority",110),(0,Q2.default)((0,K2.default)(n),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),n}return(0,S$.default)(t,[{key:"parse",value:function(r,s,a){var o=function(l){return l-1};switch(s){case"L":return(0,Ru.mapValue)((0,Ru.parseNumericPattern)(P$.numericPatterns.month,r),o);case"LL":return(0,Ru.mapValue)((0,Ru.parseNDigits)(2,r),o);case"Lo":return(0,Ru.mapValue)(a.ordinalNumber(r,{unit:"month"}),o);case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})||a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(r,s){return s>=0&&s<=11}},{key:"set",value:function(r,s,a){return r.setUTCMonth(a,1),r.setUTCHours(0,0,0,0),r}}]),t}(E$.Parser);pp.StandAloneMonthParser=A$});var nC=E((gp,tC)=>{"use strict";var mp=R().default;Object.defineProperty(gp,"__esModule",{value:!0});gp.default=I$;var D$=mp(qe()),R$=mp(ee()),C$=mp(qx()),O$=mp(F());function I$(i,e,t){(0,O$.default)(2,arguments);var n=(0,R$.default)(i),r=(0,D$.default)(e),s=(0,C$.default)(n,t)-r;return n.setUTCDate(n.getUTCDate()-s*7),n}tC.exports=gp.default});var aC=E(vp=>{"use strict";var ir=R().default;Object.defineProperty(vp,"__esModule",{value:!0});vp.LocalWeekParser=void 0;var L$=ir(lt()),q$=ir(ct()),iC=ir(ut()),N$=ir(ht()),k$=ir(pt()),rC=ir(dt()),F$=mt(),U$=Yt(),sC=vt(),B$=ir(nC()),z$=ir(sa()),H$=function(i){(0,N$.default)(t,i);var e=(0,k$.default)(t);function t(){var n;(0,L$.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,rC.default)((0,iC.default)(n),"priority",100),(0,rC.default)((0,iC.default)(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),n}return(0,q$.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"w":return(0,sC.parseNumericPattern)(U$.numericPatterns.week,r);case"wo":return a.ordinalNumber(r,{unit:"week"});default:return(0,sC.parseNDigits)(s.length,r)}}},{key:"validate",value:function(r,s){return s>=1&&s<=53}},{key:"set",value:function(r,s,a,o){return(0,z$.default)((0,B$.default)(r,a,o),o)}}]),t}(F$.Parser);vp.LocalWeekParser=H$});var uC=E((xp,oC)=>{"use strict";var _p=R().default;Object.defineProperty(xp,"__esModule",{value:!0});xp.default=Y$;var W$=_p(qe()),V$=_p(ee()),G$=_p(Ix()),j$=_p(F());function Y$(i,e){(0,j$.default)(2,arguments);var t=(0,V$.default)(i),n=(0,W$.default)(e),r=(0,G$.default)(t)-n;return t.setUTCDate(t.getUTCDate()-r*7),t}oC.exports=xp.default});var fC=E(yp=>{"use strict";var rr=R().default;Object.defineProperty(yp,"__esModule",{value:!0});yp.ISOWeekParser=void 0;var X$=rr(lt()),$$=rr(ct()),lC=rr(ut()),Z$=rr(ht()),J$=rr(pt()),cC=rr(dt()),K$=mt(),Q$=Yt(),dC=vt(),eZ=rr(uC()),tZ=rr(ra()),nZ=function(i){(0,Z$.default)(t,i);var e=(0,J$.default)(t);function t(){var n;(0,X$.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,cC.default)((0,lC.default)(n),"priority",100),(0,cC.default)((0,lC.default)(n),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),n}return(0,$$.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"I":return(0,dC.parseNumericPattern)(Q$.numericPatterns.week,r);case"Io":return a.ordinalNumber(r,{unit:"week"});default:return(0,dC.parseNDigits)(s.length,r)}}},{key:"validate",value:function(r,s){return s>=1&&s<=53}},{key:"set",value:function(r,s,a){return(0,tZ.default)((0,eZ.default)(r,a))}}]),t}(K$.Parser);yp.ISOWeekParser=nZ});var hC=E(bp=>{"use strict";var ya=R().default;Object.defineProperty(bp,"__esModule",{value:!0});bp.DateParser=void 0;var iZ=ya(lt()),rZ=ya(ct()),yy=ya(ut()),sZ=ya(ht()),aZ=ya(pt()),by=ya(dt()),My=vt(),oZ=mt(),uZ=Yt(),lZ=[31,28,31,30,31,30,31,31,30,31,30,31],cZ=[31,29,31,30,31,30,31,31,30,31,30,31],dZ=function(i){(0,sZ.default)(t,i);var e=(0,aZ.default)(t);function t(){var n;(0,iZ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,by.default)((0,yy.default)(n),"priority",90),(0,by.default)((0,yy.default)(n),"subPriority",1),(0,by.default)((0,yy.default)(n),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),n}return(0,rZ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"d":return(0,My.parseNumericPattern)(uZ.numericPatterns.date,r);case"do":return a.ordinalNumber(r,{unit:"date"});default:return(0,My.parseNDigits)(s.length,r)}}},{key:"validate",value:function(r,s){var a=r.getUTCFullYear(),o=(0,My.isLeapYearIndex)(a),u=r.getUTCMonth();return o?s>=1&&s<=cZ[u]:s>=1&&s<=lZ[u]}},{key:"set",value:function(r,s,a){return r.setUTCDate(a),r.setUTCHours(0,0,0,0),r}}]),t}(oZ.Parser);bp.DateParser=dZ});var pC=E(Mp=>{"use strict";var ba=R().default;Object.defineProperty(Mp,"__esModule",{value:!0});Mp.DayOfYearParser=void 0;var fZ=ba(lt()),hZ=ba(ct()),Sy=ba(ut()),pZ=ba(ht()),mZ=ba(pt()),wy=ba(dt()),gZ=mt(),vZ=Yt(),Ty=vt(),_Z=function(i){(0,pZ.default)(t,i);var e=(0,mZ.default)(t);function t(){var n;(0,fZ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,wy.default)((0,Sy.default)(n),"priority",90),(0,wy.default)((0,Sy.default)(n),"subpriority",1),(0,wy.default)((0,Sy.default)(n),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),n}return(0,hZ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"D":case"DD":return(0,Ty.parseNumericPattern)(vZ.numericPatterns.dayOfYear,r);case"Do":return a.ordinalNumber(r,{unit:"date"});default:return(0,Ty.parseNDigits)(s.length,r)}}},{key:"validate",value:function(r,s){var a=r.getUTCFullYear(),o=(0,Ty.isLeapYearIndex)(a);return o?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(r,s,a){return r.setUTCMonth(0,a),r.setUTCHours(0,0,0,0),r}}]),t}(gZ.Parser);Mp.DayOfYearParser=_Z});var wp=E((Sp,gC)=>{"use strict";var Ey=R().default;Object.defineProperty(Sp,"__esModule",{value:!0});Sp.default=MZ;var xZ=Ey(ee()),yZ=Ey(F()),mC=Ey(qe()),bZ=Rt();function MZ(i,e,t){var n,r,s,a,o,u,l,c;(0,yZ.default)(2,arguments);var d=(0,bZ.getDefaultOptions)(),f=(0,mC.default)((n=(r=(s=(a=t==null?void 0:t.weekStartsOn)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=(0,xZ.default)(i),p=(0,mC.default)(e),v=h.getUTCDay(),g=p%7,m=(g+7)%7,y=(m<f?7:0)+p-v;return h.setUTCDate(h.getUTCDate()+y),h}gC.exports=Sp.default});var xC=E(Tp=>{"use strict";var Xr=R().default;Object.defineProperty(Tp,"__esModule",{value:!0});Tp.DayParser=void 0;var SZ=Xr(lt()),wZ=Xr(ct()),vC=Xr(ut()),TZ=Xr(ht()),EZ=Xr(pt()),_C=Xr(dt()),PZ=mt(),AZ=Xr(wp()),DZ=function(i){(0,TZ.default)(t,i);var e=(0,EZ.default)(t);function t(){var n;(0,SZ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,_C.default)((0,vC.default)(n),"priority",90),(0,_C.default)((0,vC.default)(n),"incompatibleTokens",["D","i","e","c","t","T"]),n}return(0,wZ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(r,s){return s>=0&&s<=6}},{key:"set",value:function(r,s,a,o){return r=(0,AZ.default)(r,a,o),r.setUTCHours(0,0,0,0),r}}]),t}(PZ.Parser);Tp.DayParser=DZ});var MC=E(Ep=>{"use strict";var $r=R().default;Object.defineProperty(Ep,"__esModule",{value:!0});Ep.LocalDayParser=void 0;var RZ=$r(lt()),CZ=$r(ct()),yC=$r(ut()),OZ=$r(ht()),IZ=$r(pt()),bC=$r(dt()),LZ=mt(),Py=vt(),qZ=$r(wp()),NZ=function(i){(0,OZ.default)(t,i);var e=(0,IZ.default)(t);function t(){var n;(0,RZ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,bC.default)((0,yC.default)(n),"priority",90),(0,bC.default)((0,yC.default)(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),n}return(0,CZ.default)(t,[{key:"parse",value:function(r,s,a,o){var u=function(c){var d=Math.floor((c-1)/7)*7;return(c+o.weekStartsOn+6)%7+d};switch(s){case"e":case"ee":return(0,Py.mapValue)((0,Py.parseNDigits)(s.length,r),u);case"eo":return(0,Py.mapValue)(a.ordinalNumber(r,{unit:"day"}),u);case"eee":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(r,s){return s>=0&&s<=6}},{key:"set",value:function(r,s,a,o){return r=(0,qZ.default)(r,a,o),r.setUTCHours(0,0,0,0),r}}]),t}(LZ.Parser);Ep.LocalDayParser=NZ});var TC=E(Pp=>{"use strict";var Zr=R().default;Object.defineProperty(Pp,"__esModule",{value:!0});Pp.StandAloneLocalDayParser=void 0;var kZ=Zr(lt()),FZ=Zr(ct()),SC=Zr(ut()),UZ=Zr(ht()),BZ=Zr(pt()),wC=Zr(dt()),zZ=mt(),Ay=vt(),HZ=Zr(wp()),WZ=function(i){(0,UZ.default)(t,i);var e=(0,BZ.default)(t);function t(){var n;(0,kZ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,wC.default)((0,SC.default)(n),"priority",90),(0,wC.default)((0,SC.default)(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),n}return(0,FZ.default)(t,[{key:"parse",value:function(r,s,a,o){var u=function(c){var d=Math.floor((c-1)/7)*7;return(c+o.weekStartsOn+6)%7+d};switch(s){case"c":case"cc":return(0,Ay.mapValue)((0,Ay.parseNDigits)(s.length,r),u);case"co":return(0,Ay.mapValue)(a.ordinalNumber(r,{unit:"day"}),u);case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})||a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(r,s){return s>=0&&s<=6}},{key:"set",value:function(r,s,a,o){return r=(0,HZ.default)(r,a,o),r.setUTCHours(0,0,0,0),r}}]),t}(zZ.Parser);Pp.StandAloneLocalDayParser=WZ});var PC=E((Ap,EC)=>{"use strict";var Dy=R().default;Object.defineProperty(Ap,"__esModule",{value:!0});Ap.default=YZ;var VZ=Dy(ee()),GZ=Dy(F()),jZ=Dy(qe());function YZ(i,e){(0,GZ.default)(2,arguments);var t=(0,jZ.default)(e);t%7===0&&(t=t-7);var n=1,r=(0,VZ.default)(i),s=r.getUTCDay(),a=t%7,o=(a+7)%7,u=(o<n?7:0)+t-s;return r.setUTCDate(r.getUTCDate()+u),r}EC.exports=Ap.default});var RC=E(Dp=>{"use strict";var Jr=R().default;Object.defineProperty(Dp,"__esModule",{value:!0});Dp.ISODayParser=void 0;var XZ=Jr(lt()),$Z=Jr(ct()),AC=Jr(ut()),ZZ=Jr(ht()),JZ=Jr(pt()),DC=Jr(dt()),KZ=mt(),Cu=vt(),QZ=Jr(PC()),eJ=function(i){(0,ZZ.default)(t,i);var e=(0,JZ.default)(t);function t(){var n;(0,XZ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,DC.default)((0,AC.default)(n),"priority",90),(0,DC.default)((0,AC.default)(n),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),n}return(0,$Z.default)(t,[{key:"parse",value:function(r,s,a){var o=function(l){return l===0?7:l};switch(s){case"i":case"ii":return(0,Cu.parseNDigits)(s.length,r);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return(0,Cu.mapValue)(a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),o);case"iiiii":return(0,Cu.mapValue)(a.day(r,{width:"narrow",context:"formatting"}),o);case"iiiiii":return(0,Cu.mapValue)(a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),o);case"iiii":default:return(0,Cu.mapValue)(a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),o)}}},{key:"validate",value:function(r,s){return s>=1&&s<=7}},{key:"set",value:function(r,s,a){return r=(0,QZ.default)(r,a),r.setUTCHours(0,0,0,0),r}}]),t}(KZ.Parser);Dp.ISODayParser=eJ});var IC=E(Rp=>{"use strict";var Ma=R().default;Object.defineProperty(Rp,"__esModule",{value:!0});Rp.AMPMParser=void 0;var tJ=Ma(lt()),nJ=Ma(ct()),CC=Ma(ut()),iJ=Ma(ht()),rJ=Ma(pt()),OC=Ma(dt()),sJ=mt(),aJ=vt(),oJ=function(i){(0,iJ.default)(t,i);var e=(0,rJ.default)(t);function t(){var n;(0,tJ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,OC.default)((0,CC.default)(n),"priority",80),(0,OC.default)((0,CC.default)(n),"incompatibleTokens",["b","B","H","k","t","T"]),n}return(0,nJ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"a":case"aa":case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(r,s,a){return r.setUTCHours((0,aJ.dayPeriodEnumToHours)(a),0,0,0),r}}]),t}(sJ.Parser);Rp.AMPMParser=oJ});var NC=E(Cp=>{"use strict";var Sa=R().default;Object.defineProperty(Cp,"__esModule",{value:!0});Cp.AMPMMidnightParser=void 0;var uJ=Sa(lt()),lJ=Sa(ct()),LC=Sa(ut()),cJ=Sa(ht()),dJ=Sa(pt()),qC=Sa(dt()),fJ=mt(),hJ=vt(),pJ=function(i){(0,cJ.default)(t,i);var e=(0,dJ.default)(t);function t(){var n;(0,uJ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,qC.default)((0,LC.default)(n),"priority",80),(0,qC.default)((0,LC.default)(n),"incompatibleTokens",["a","B","H","k","t","T"]),n}return(0,lJ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"b":case"bb":case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(r,s,a){return r.setUTCHours((0,hJ.dayPeriodEnumToHours)(a),0,0,0),r}}]),t}(fJ.Parser);Cp.AMPMMidnightParser=pJ});var UC=E(Op=>{"use strict";var wa=R().default;Object.defineProperty(Op,"__esModule",{value:!0});Op.DayPeriodParser=void 0;var mJ=wa(lt()),gJ=wa(ct()),kC=wa(ut()),vJ=wa(ht()),_J=wa(pt()),FC=wa(dt()),xJ=mt(),yJ=vt(),bJ=function(i){(0,vJ.default)(t,i);var e=(0,_J.default)(t);function t(){var n;(0,mJ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,FC.default)((0,kC.default)(n),"priority",80),(0,FC.default)((0,kC.default)(n),"incompatibleTokens",["a","b","t","T"]),n}return(0,gJ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(r,s,a){return r.setUTCHours((0,yJ.dayPeriodEnumToHours)(a),0,0,0),r}}]),t}(xJ.Parser);Op.DayPeriodParser=bJ});var WC=E(Ip=>{"use strict";var Ta=R().default;Object.defineProperty(Ip,"__esModule",{value:!0});Ip.Hour1to12Parser=void 0;var MJ=Ta(lt()),SJ=Ta(ct()),BC=Ta(ut()),wJ=Ta(ht()),TJ=Ta(pt()),zC=Ta(dt()),EJ=mt(),PJ=Yt(),HC=vt(),AJ=function(i){(0,wJ.default)(t,i);var e=(0,TJ.default)(t);function t(){var n;(0,MJ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,zC.default)((0,BC.default)(n),"priority",70),(0,zC.default)((0,BC.default)(n),"incompatibleTokens",["H","K","k","t","T"]),n}return(0,SJ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"h":return(0,HC.parseNumericPattern)(PJ.numericPatterns.hour12h,r);case"ho":return a.ordinalNumber(r,{unit:"hour"});default:return(0,HC.parseNDigits)(s.length,r)}}},{key:"validate",value:function(r,s){return s>=1&&s<=12}},{key:"set",value:function(r,s,a){var o=r.getUTCHours()>=12;return o&&a<12?r.setUTCHours(a+12,0,0,0):!o&&a===12?r.setUTCHours(0,0,0,0):r.setUTCHours(a,0,0,0),r}}]),t}(EJ.Parser);Ip.Hour1to12Parser=AJ});var YC=E(Lp=>{"use strict";var Ea=R().default;Object.defineProperty(Lp,"__esModule",{value:!0});Lp.Hour0to23Parser=void 0;var DJ=Ea(lt()),RJ=Ea(ct()),VC=Ea(ut()),CJ=Ea(ht()),OJ=Ea(pt()),GC=Ea(dt()),IJ=mt(),LJ=Yt(),jC=vt(),qJ=function(i){(0,CJ.default)(t,i);var e=(0,OJ.default)(t);function t(){var n;(0,DJ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,GC.default)((0,VC.default)(n),"priority",70),(0,GC.default)((0,VC.default)(n),"incompatibleTokens",["a","b","h","K","k","t","T"]),n}return(0,RJ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"H":return(0,jC.parseNumericPattern)(LJ.numericPatterns.hour23h,r);case"Ho":return a.ordinalNumber(r,{unit:"hour"});default:return(0,jC.parseNDigits)(s.length,r)}}},{key:"validate",value:function(r,s){return s>=0&&s<=23}},{key:"set",value:function(r,s,a){return r.setUTCHours(a,0,0,0),r}}]),t}(IJ.Parser);Lp.Hour0to23Parser=qJ});var JC=E(qp=>{"use strict";var Pa=R().default;Object.defineProperty(qp,"__esModule",{value:!0});qp.Hour0To11Parser=void 0;var NJ=Pa(lt()),kJ=Pa(ct()),XC=Pa(ut()),FJ=Pa(ht()),UJ=Pa(pt()),$C=Pa(dt()),BJ=mt(),zJ=Yt(),ZC=vt(),HJ=function(i){(0,FJ.default)(t,i);var e=(0,UJ.default)(t);function t(){var n;(0,NJ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,$C.default)((0,XC.default)(n),"priority",70),(0,$C.default)((0,XC.default)(n),"incompatibleTokens",["h","H","k","t","T"]),n}return(0,kJ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"K":return(0,ZC.parseNumericPattern)(zJ.numericPatterns.hour11h,r);case"Ko":return a.ordinalNumber(r,{unit:"hour"});default:return(0,ZC.parseNDigits)(s.length,r)}}},{key:"validate",value:function(r,s){return s>=0&&s<=11}},{key:"set",value:function(r,s,a){var o=r.getUTCHours()>=12;return o&&a<12?r.setUTCHours(a+12,0,0,0):r.setUTCHours(a,0,0,0),r}}]),t}(BJ.Parser);qp.Hour0To11Parser=HJ});var tO=E(Np=>{"use strict";var Aa=R().default;Object.defineProperty(Np,"__esModule",{value:!0});Np.Hour1To24Parser=void 0;var WJ=Aa(lt()),VJ=Aa(ct()),KC=Aa(ut()),GJ=Aa(ht()),jJ=Aa(pt()),QC=Aa(dt()),YJ=mt(),XJ=Yt(),eO=vt(),$J=function(i){(0,GJ.default)(t,i);var e=(0,jJ.default)(t);function t(){var n;(0,WJ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,QC.default)((0,KC.default)(n),"priority",70),(0,QC.default)((0,KC.default)(n),"incompatibleTokens",["a","b","h","H","K","t","T"]),n}return(0,VJ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"k":return(0,eO.parseNumericPattern)(XJ.numericPatterns.hour24h,r);case"ko":return a.ordinalNumber(r,{unit:"hour"});default:return(0,eO.parseNDigits)(s.length,r)}}},{key:"validate",value:function(r,s){return s>=1&&s<=24}},{key:"set",value:function(r,s,a){var o=a<=24?a%24:a;return r.setUTCHours(o,0,0,0),r}}]),t}(YJ.Parser);Np.Hour1To24Parser=$J});var sO=E(kp=>{"use strict";var Da=R().default;Object.defineProperty(kp,"__esModule",{value:!0});kp.MinuteParser=void 0;var ZJ=Da(lt()),JJ=Da(ct()),nO=Da(ut()),KJ=Da(ht()),QJ=Da(pt()),iO=Da(dt()),eK=mt(),tK=Yt(),rO=vt(),nK=function(i){(0,KJ.default)(t,i);var e=(0,QJ.default)(t);function t(){var n;(0,ZJ.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,iO.default)((0,nO.default)(n),"priority",60),(0,iO.default)((0,nO.default)(n),"incompatibleTokens",["t","T"]),n}return(0,JJ.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"m":return(0,rO.parseNumericPattern)(tK.numericPatterns.minute,r);case"mo":return a.ordinalNumber(r,{unit:"minute"});default:return(0,rO.parseNDigits)(s.length,r)}}},{key:"validate",value:function(r,s){return s>=0&&s<=59}},{key:"set",value:function(r,s,a){return r.setUTCMinutes(a,0,0),r}}]),t}(eK.Parser);kp.MinuteParser=nK});var lO=E(Fp=>{"use strict";var Ra=R().default;Object.defineProperty(Fp,"__esModule",{value:!0});Fp.SecondParser=void 0;var iK=Ra(lt()),rK=Ra(ct()),aO=Ra(ut()),sK=Ra(ht()),aK=Ra(pt()),oO=Ra(dt()),oK=mt(),uK=Yt(),uO=vt(),lK=function(i){(0,sK.default)(t,i);var e=(0,aK.default)(t);function t(){var n;(0,iK.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,oO.default)((0,aO.default)(n),"priority",50),(0,oO.default)((0,aO.default)(n),"incompatibleTokens",["t","T"]),n}return(0,rK.default)(t,[{key:"parse",value:function(r,s,a){switch(s){case"s":return(0,uO.parseNumericPattern)(uK.numericPatterns.second,r);case"so":return a.ordinalNumber(r,{unit:"second"});default:return(0,uO.parseNDigits)(s.length,r)}}},{key:"validate",value:function(r,s){return s>=0&&s<=59}},{key:"set",value:function(r,s,a){return r.setUTCSeconds(a,0),r}}]),t}(oK.Parser);Fp.SecondParser=lK});var hO=E(Up=>{"use strict";var Ca=R().default;Object.defineProperty(Up,"__esModule",{value:!0});Up.FractionOfSecondParser=void 0;var cK=Ca(lt()),dK=Ca(ct()),cO=Ca(ut()),fK=Ca(ht()),hK=Ca(pt()),dO=Ca(dt()),pK=mt(),fO=vt(),mK=function(i){(0,fK.default)(t,i);var e=(0,hK.default)(t);function t(){var n;(0,cK.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,dO.default)((0,cO.default)(n),"priority",30),(0,dO.default)((0,cO.default)(n),"incompatibleTokens",["t","T"]),n}return(0,dK.default)(t,[{key:"parse",value:function(r,s){var a=function(u){return Math.floor(u*Math.pow(10,-s.length+3))};return(0,fO.mapValue)((0,fO.parseNDigits)(s.length,r),a)}},{key:"set",value:function(r,s,a){return r.setUTCMilliseconds(a),r}}]),t}(pK.Parser);Up.FractionOfSecondParser=mK});var gO=E(Bp=>{"use strict";var Oa=R().default;Object.defineProperty(Bp,"__esModule",{value:!0});Bp.ISOTimezoneWithZParser=void 0;var gK=Oa(lt()),vK=Oa(ct()),pO=Oa(ut()),_K=Oa(ht()),xK=Oa(pt()),mO=Oa(dt()),yK=mt(),Ou=Yt(),Iu=vt(),bK=function(i){(0,_K.default)(t,i);var e=(0,xK.default)(t);function t(){var n;(0,gK.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,mO.default)((0,pO.default)(n),"priority",10),(0,mO.default)((0,pO.default)(n),"incompatibleTokens",["t","T","x"]),n}return(0,vK.default)(t,[{key:"parse",value:function(r,s){switch(s){case"X":return(0,Iu.parseTimezonePattern)(Ou.timezonePatterns.basicOptionalMinutes,r);case"XX":return(0,Iu.parseTimezonePattern)(Ou.timezonePatterns.basic,r);case"XXXX":return(0,Iu.parseTimezonePattern)(Ou.timezonePatterns.basicOptionalSeconds,r);case"XXXXX":return(0,Iu.parseTimezonePattern)(Ou.timezonePatterns.extendedOptionalSeconds,r);case"XXX":default:return(0,Iu.parseTimezonePattern)(Ou.timezonePatterns.extended,r)}}},{key:"set",value:function(r,s,a){return s.timestampIsSet?r:new Date(r.getTime()-a)}}]),t}(yK.Parser);Bp.ISOTimezoneWithZParser=bK});var xO=E(zp=>{"use strict";var Ia=R().default;Object.defineProperty(zp,"__esModule",{value:!0});zp.ISOTimezoneParser=void 0;var MK=Ia(lt()),SK=Ia(ct()),vO=Ia(ut()),wK=Ia(ht()),TK=Ia(pt()),_O=Ia(dt()),EK=mt(),Lu=Yt(),qu=vt(),PK=function(i){(0,wK.default)(t,i);var e=(0,TK.default)(t);function t(){var n;(0,MK.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,_O.default)((0,vO.default)(n),"priority",10),(0,_O.default)((0,vO.default)(n),"incompatibleTokens",["t","T","X"]),n}return(0,SK.default)(t,[{key:"parse",value:function(r,s){switch(s){case"x":return(0,qu.parseTimezonePattern)(Lu.timezonePatterns.basicOptionalMinutes,r);case"xx":return(0,qu.parseTimezonePattern)(Lu.timezonePatterns.basic,r);case"xxxx":return(0,qu.parseTimezonePattern)(Lu.timezonePatterns.basicOptionalSeconds,r);case"xxxxx":return(0,qu.parseTimezonePattern)(Lu.timezonePatterns.extendedOptionalSeconds,r);case"xxx":default:return(0,qu.parseTimezonePattern)(Lu.timezonePatterns.extended,r)}}},{key:"set",value:function(r,s,a){return s.timestampIsSet?r:new Date(r.getTime()-a)}}]),t}(EK.Parser);zp.ISOTimezoneParser=PK});var MO=E(Hp=>{"use strict";var La=R().default;Object.defineProperty(Hp,"__esModule",{value:!0});Hp.TimestampSecondsParser=void 0;var AK=La(lt()),DK=La(ct()),yO=La(ut()),RK=La(ht()),CK=La(pt()),bO=La(dt()),OK=mt(),IK=vt(),LK=function(i){(0,RK.default)(t,i);var e=(0,CK.default)(t);function t(){var n;(0,AK.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,bO.default)((0,yO.default)(n),"priority",40),(0,bO.default)((0,yO.default)(n),"incompatibleTokens","*"),n}return(0,DK.default)(t,[{key:"parse",value:function(r){return(0,IK.parseAnyDigitsSigned)(r)}},{key:"set",value:function(r,s,a){return[new Date(a*1e3),{timestampIsSet:!0}]}}]),t}(OK.Parser);Hp.TimestampSecondsParser=LK});var TO=E(Wp=>{"use strict";var qa=R().default;Object.defineProperty(Wp,"__esModule",{value:!0});Wp.TimestampMillisecondsParser=void 0;var qK=qa(lt()),NK=qa(ct()),SO=qa(ut()),kK=qa(ht()),FK=qa(pt()),wO=qa(dt()),UK=mt(),BK=vt(),zK=function(i){(0,kK.default)(t,i);var e=(0,FK.default)(t);function t(){var n;(0,qK.default)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s)),(0,wO.default)((0,SO.default)(n),"priority",20),(0,wO.default)((0,SO.default)(n),"incompatibleTokens","*"),n}return(0,NK.default)(t,[{key:"parse",value:function(r){return(0,BK.parseAnyDigitsSigned)(r)}},{key:"set",value:function(r,s,a){return[new Date(a),{timestampIsSet:!0}]}}]),t}(UK.Parser);Wp.TimestampMillisecondsParser=zK});var EO=E(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});Vp.parsers=void 0;var HK=P2(),WK=R2(),VK=L2(),GK=F2(),jK=H2(),YK=G2(),XK=X2(),$K=J2(),ZK=eC(),JK=aC(),KK=fC(),QK=hC(),eQ=pC(),tQ=xC(),nQ=MC(),iQ=TC(),rQ=RC(),sQ=IC(),aQ=NC(),oQ=UC(),uQ=WC(),lQ=YC(),cQ=JC(),dQ=tO(),fQ=sO(),hQ=lO(),pQ=hO(),mQ=gO(),gQ=xO(),vQ=MO(),_Q=TO(),xQ={G:new HK.EraParser,y:new WK.YearParser,Y:new VK.LocalWeekYearParser,R:new GK.ISOWeekYearParser,u:new jK.ExtendedYearParser,Q:new YK.QuarterParser,q:new XK.StandAloneQuarterParser,M:new $K.MonthParser,L:new ZK.StandAloneMonthParser,w:new JK.LocalWeekParser,I:new KK.ISOWeekParser,d:new QK.DateParser,D:new eQ.DayOfYearParser,E:new tQ.DayParser,e:new nQ.LocalDayParser,c:new iQ.StandAloneLocalDayParser,i:new rQ.ISODayParser,a:new sQ.AMPMParser,b:new aQ.AMPMMidnightParser,B:new oQ.DayPeriodParser,h:new uQ.Hour1to12Parser,H:new lQ.Hour0to23Parser,K:new cQ.Hour0To11Parser,k:new dQ.Hour1To24Parser,m:new fQ.MinuteParser,s:new hQ.SecondParser,S:new pQ.FractionOfSecondParser,X:new mQ.ISOTimezoneWithZParser,x:new gQ.ISOTimezoneParser,t:new vQ.TimestampSecondsParser,T:new _Q.TimestampMillisecondsParser};Vp.parsers=xQ});var Ry=E((jp,CO)=>{"use strict";var ei=R().default;Object.defineProperty(jp,"__esModule",{value:!0});jp.default=qQ;var yQ=ei(mn()),PO=ei(h2()),bQ=ei(Vr()),MQ=ei(ia()),AO=ei(ee()),SQ=ei(oa()),DO=ei(kx()),wQ=ei(Jn()),Gp=Fx(),RO=ei(qe()),TQ=ei(F()),EQ=gy(),PQ=EO(),AQ=Rt(),DQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,RQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CQ=/^'([^]*?)'?$/,OQ=/''/g,IQ=/\S/,LQ=/[a-zA-Z]/;function qQ(i,e,t,n){var r,s,a,o,u,l,c,d,f,h,p,v,g,m,y,_,b,M;(0,TQ.default)(3,arguments);var T=String(i),P=String(e),C=(0,AQ.getDefaultOptions)(),S=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:C.locale)!==null&&r!==void 0?r:bQ.default;if(!S.match)throw new RangeError("locale must contain match property");var A=(0,RO.default)((a=(o=(u=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(c=n.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&u!==void 0?u:C.firstWeekContainsDate)!==null&&o!==void 0?o:(f=C.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var z=(0,RO.default)((p=(v=(g=(m=n==null?void 0:n.weekStartsOn)!==null&&m!==void 0?m:n==null||(y=n.locale)===null||y===void 0||(_=y.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&g!==void 0?g:C.weekStartsOn)!==null&&v!==void 0?v:(b=C.locale)===null||b===void 0||(M=b.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&p!==void 0?p:0);if(!(z>=0&&z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(P==="")return T===""?(0,AO.default)(t):new Date(NaN);var j={firstWeekContainsDate:A,weekStartsOn:z,locale:S},W=[new EQ.DateToSystemTimezoneSetter],G=P.match(RQ).map(function(De){var Se=De[0];if(Se in DO.default){var he=DO.default[Se];return he(De,S.formatLong)}return De}).join("").match(DQ),V=[],J=(0,PO.default)(G),Z;try{var ne=function(){var Se=Z.value;!(n!=null&&n.useAdditionalWeekYearTokens)&&(0,Gp.isProtectedWeekYearToken)(Se)&&(0,Gp.throwProtectedError)(Se,P,i),!(n!=null&&n.useAdditionalDayOfYearTokens)&&(0,Gp.isProtectedDayOfYearToken)(Se)&&(0,Gp.throwProtectedError)(Se,P,i);var he=Se[0],Ce=PQ.parsers[he];if(Ce){var fe=Ce.incompatibleTokens;if(Array.isArray(fe)){var L=V.find(function(Q){return fe.includes(Q.token)||Q.token===he});if(L)throw new RangeError("The format string mustn't contain `".concat(L.fullToken,"` and `").concat(Se,"` at the same time"))}else if(Ce.incompatibleTokens==="*"&&V.length>0)throw new RangeError("The format string mustn't contain `".concat(Se,"` and any other token at the same time"));V.push({token:he,fullToken:Se});var N=Ce.run(T,Se,S.match,j);if(!N)return{v:new Date(NaN)};W.push(N.setter),T=N.rest}else{if(he.match(LQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+he+"`");if(Se==="''"?Se="'":he==="'"&&(Se=NQ(Se)),T.indexOf(Se)===0)T=T.slice(Se.length);else return{v:new Date(NaN)}}};for(J.s();!(Z=J.n()).done;){var re=ne();if((0,yQ.default)(re)==="object")return re.v}}catch(De){J.e(De)}finally{J.f()}if(T.length>0&&IQ.test(T))return new Date(NaN);var ce=W.map(function(De){return De.priority}).sort(function(De,Se){return Se-De}).filter(function(De,Se,he){return he.indexOf(De)===Se}).map(function(De){return W.filter(function(Se){return Se.priority===De}).sort(function(Se,he){return he.subPriority-Se.subPriority})}).map(function(De){return De[0]}),Te=(0,AO.default)(t);if(isNaN(Te.getTime()))return new Date(NaN);var xe=(0,MQ.default)(Te,(0,wQ.default)(Te)),K={},ue=(0,PO.default)(ce),_e;try{for(ue.s();!(_e=ue.n()).done;){var be=_e.value;if(!be.validate(xe,j))return new Date(NaN);var B=be.set(xe,K,j);Array.isArray(B)?(xe=B[0],(0,SQ.default)(K,B[1])):xe=B}}catch(De){ue.e(De)}finally{ue.f()}return xe}function NQ(i){return i.match(CQ)[1].replace(OQ,"'")}CO.exports=jp.default});var IO=E((Yp,OO)=>{"use strict";var Cy=R().default;Object.defineProperty(Yp,"__esModule",{value:!0});Yp.default=BQ;var kQ=Cy(Ry()),FQ=Cy(_i()),UQ=Cy(F());function BQ(i,e,t){return(0,UQ.default)(2,arguments),(0,FQ.default)((0,kQ.default)(i,e,new Date,t))}OO.exports=Yp.default});var NO=E((Xp,qO)=>{"use strict";var LO=R().default;Object.defineProperty(Xp,"__esModule",{value:!0});Xp.default=WQ;var zQ=LO(ee()),HQ=LO(F());function WQ(i){return(0,HQ.default)(1,arguments),(0,zQ.default)(i).getDay()===1}qO.exports=Xp.default});var UO=E(($p,FO)=>{"use strict";var kO=R().default;Object.defineProperty($p,"__esModule",{value:!0});$p.default=jQ;var VQ=kO(ee()),GQ=kO(F());function jQ(i){return(0,GQ.default)(1,arguments),(0,VQ.default)(i).getTime()<Date.now()}FO.exports=$p.default});var Oy=E((Zp,zO)=>{"use strict";var BO=R().default;Object.defineProperty(Zp,"__esModule",{value:!0});Zp.default=$Q;var YQ=BO(ee()),XQ=BO(F());function $Q(i){(0,XQ.default)(1,arguments);var e=(0,YQ.default)(i);return e.setMinutes(0,0,0),e}zO.exports=Zp.default});var Iy=E((Jp,VO)=>{"use strict";var WO=R().default;Object.defineProperty(Jp,"__esModule",{value:!0});Jp.default=JQ;var HO=WO(Oy()),ZQ=WO(F());function JQ(i,e){(0,ZQ.default)(2,arguments);var t=(0,HO.default)(i),n=(0,HO.default)(e);return t.getTime()===n.getTime()}VO.exports=Jp.default});var Qp=E((Kp,YO)=>{"use strict";var jO=R().default;Object.defineProperty(Kp,"__esModule",{value:!0});Kp.default=QQ;var GO=jO(gi()),KQ=jO(F());function QQ(i,e,t){(0,KQ.default)(2,arguments);var n=(0,GO.default)(i,t),r=(0,GO.default)(e,t);return n.getTime()===r.getTime()}YO.exports=Kp.default});var Ly=E((em,$O)=>{"use strict";var XO=R().default;Object.defineProperty(em,"__esModule",{value:!0});em.default=nee;var eee=XO(Qp()),tee=XO(F());function nee(i,e){return(0,tee.default)(2,arguments),(0,eee.default)(i,e,{weekStartsOn:1})}$O.exports=em.default});var QO=E((tm,KO)=>{"use strict";var JO=R().default;Object.defineProperty(tm,"__esModule",{value:!0});tm.default=ree;var ZO=JO(ta()),iee=JO(F());function ree(i,e){(0,iee.default)(2,arguments);var t=(0,ZO.default)(i),n=(0,ZO.default)(e);return t.getTime()===n.getTime()}KO.exports=tm.default});var qy=E((nm,nI)=>{"use strict";var tI=R().default;Object.defineProperty(nm,"__esModule",{value:!0});nm.default=aee;var eI=tI(Vd()),see=tI(F());function aee(i,e){(0,see.default)(2,arguments);var t=(0,eI.default)(i),n=(0,eI.default)(e);return t.getTime()===n.getTime()}nI.exports=nm.default});var Ny=E((im,sI)=>{"use strict";var rI=R().default;Object.defineProperty(im,"__esModule",{value:!0});im.default=uee;var iI=rI(ee()),oee=rI(F());function uee(i,e){(0,oee.default)(2,arguments);var t=(0,iI.default)(i),n=(0,iI.default)(e);return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()}sI.exports=im.default});var ky=E((rm,uI)=>{"use strict";var oI=R().default;Object.defineProperty(rm,"__esModule",{value:!0});rm.default=cee;var aI=oI($d()),lee=oI(F());function cee(i,e){(0,lee.default)(2,arguments);var t=(0,aI.default)(i),n=(0,aI.default)(e);return t.getTime()===n.getTime()}uI.exports=rm.default});var Fy=E((sm,cI)=>{"use strict";var lI=R().default;Object.defineProperty(sm,"__esModule",{value:!0});sm.default=hee;var dee=lI(ee()),fee=lI(F());function hee(i){(0,fee.default)(1,arguments);var e=(0,dee.default)(i);return e.setMilliseconds(0),e}cI.exports=sm.default});var Uy=E((am,hI)=>{"use strict";var fI=R().default;Object.defineProperty(am,"__esModule",{value:!0});am.default=mee;var dI=fI(Fy()),pee=fI(F());function mee(i,e){(0,pee.default)(2,arguments);var t=(0,dI.default)(i),n=(0,dI.default)(e);return t.getTime()===n.getTime()}hI.exports=am.default});var By=E((om,gI)=>{"use strict";var mI=R().default;Object.defineProperty(om,"__esModule",{value:!0});om.default=vee;var pI=mI(ee()),gee=mI(F());function vee(i,e){(0,gee.default)(2,arguments);var t=(0,pI.default)(i),n=(0,pI.default)(e);return t.getFullYear()===n.getFullYear()}gI.exports=om.default});var xI=E((um,_I)=>{"use strict";var vI=R().default;Object.defineProperty(um,"__esModule",{value:!0});um.default=yee;var _ee=vI(Iy()),xee=vI(F());function yee(i){return(0,xee.default)(1,arguments),(0,_ee.default)(Date.now(),i)}_I.exports=um.default});var MI=E((lm,bI)=>{"use strict";var yI=R().default;Object.defineProperty(lm,"__esModule",{value:!0});lm.default=See;var bee=yI(Ly()),Mee=yI(F());function See(i){return(0,Mee.default)(1,arguments),(0,bee.default)(i,Date.now())}bI.exports=lm.default});var TI=E((cm,wI)=>{"use strict";var SI=R().default;Object.defineProperty(cm,"__esModule",{value:!0});cm.default=Eee;var wee=SI(qy()),Tee=SI(F());function Eee(i){return(0,Tee.default)(1,arguments),(0,wee.default)(Date.now(),i)}wI.exports=cm.default});var AI=E((dm,PI)=>{"use strict";var EI=R().default;Object.defineProperty(dm,"__esModule",{value:!0});dm.default=Dee;var Pee=EI(Ny()),Aee=EI(F());function Dee(i){return(0,Aee.default)(1,arguments),(0,Pee.default)(Date.now(),i)}PI.exports=dm.default});var CI=E((fm,RI)=>{"use strict";var DI=R().default;Object.defineProperty(fm,"__esModule",{value:!0});fm.default=Oee;var Ree=DI(ky()),Cee=DI(F());function Oee(i){return(0,Cee.default)(1,arguments),(0,Ree.default)(Date.now(),i)}RI.exports=fm.default});var LI=E((hm,II)=>{"use strict";var OI=R().default;Object.defineProperty(hm,"__esModule",{value:!0});hm.default=qee;var Iee=OI(Uy()),Lee=OI(F());function qee(i){return(0,Lee.default)(1,arguments),(0,Iee.default)(Date.now(),i)}II.exports=hm.default});var kI=E((pm,NI)=>{"use strict";var qI=R().default;Object.defineProperty(pm,"__esModule",{value:!0});pm.default=Fee;var Nee=qI(Qp()),kee=qI(F());function Fee(i,e){return(0,kee.default)(1,arguments),(0,Nee.default)(i,Date.now(),e)}NI.exports=pm.default});var BI=E((mm,UI)=>{"use strict";var FI=R().default;Object.defineProperty(mm,"__esModule",{value:!0});mm.default=zee;var Uee=FI(By()),Bee=FI(F());function zee(i){return(0,Bee.default)(1,arguments),(0,Uee.default)(i,Date.now())}UI.exports=mm.default});var WI=E((gm,HI)=>{"use strict";var zI=R().default;Object.defineProperty(gm,"__esModule",{value:!0});gm.default=Vee;var Hee=zI(ee()),Wee=zI(F());function Vee(i){return(0,Wee.default)(1,arguments),(0,Hee.default)(i).getDay()===4}HI.exports=gm.default});var jI=E((vm,GI)=>{"use strict";var VI=R().default;Object.defineProperty(vm,"__esModule",{value:!0});vm.default=Yee;var Gee=VI(na()),jee=VI(F());function Yee(i){return(0,jee.default)(1,arguments),(0,Gee.default)(i,Date.now())}GI.exports=vm.default});var XI=E((_m,YI)=>{"use strict";var zy=R().default;Object.defineProperty(_m,"__esModule",{value:!0});_m.default=Jee;var Xee=zy(Zn()),$ee=zy(na()),Zee=zy(F());function Jee(i){return(0,Zee.default)(1,arguments),(0,$ee.default)(i,(0,Xee.default)(Date.now(),1))}YI.exports=_m.default});var JI=E((xm,ZI)=>{"use strict";var $I=R().default;Object.defineProperty(xm,"__esModule",{value:!0});xm.default=ete;var Kee=$I(ee()),Qee=$I(F());function ete(i){return(0,Qee.default)(1,arguments),(0,Kee.default)(i).getDay()===2}ZI.exports=xm.default});var eL=E((ym,QI)=>{"use strict";var KI=R().default;Object.defineProperty(ym,"__esModule",{value:!0});ym.default=ite;var tte=KI(ee()),nte=KI(F());function ite(i){return(0,nte.default)(1,arguments),(0,tte.default)(i).getDay()===3}QI.exports=ym.default});var iL=E((bm,nL)=>{"use strict";var tL=R().default;Object.defineProperty(bm,"__esModule",{value:!0});bm.default=ste;var Hy=tL(ee()),rte=tL(F());function ste(i,e){(0,rte.default)(2,arguments);var t=(0,Hy.default)(i).getTime(),n=(0,Hy.default)(e.start).getTime(),r=(0,Hy.default)(e.end).getTime();if(!(n<=r))throw new RangeError("Invalid interval");return t>=n&&t<=r}nL.exports=bm.default});var Nu=E((Mm,rL)=>{"use strict";var Wy=R().default;Object.defineProperty(Mm,"__esModule",{value:!0});Mm.default=lte;var ate=Wy(Zn()),ote=Wy(F()),ute=Wy(qe());function lte(i,e){(0,ote.default)(2,arguments);var t=(0,ute.default)(e);return(0,ate.default)(i,-t)}rL.exports=Mm.default});var aL=E((Sm,sL)=>{"use strict";var Vy=R().default;Object.defineProperty(Sm,"__esModule",{value:!0});Sm.default=hte;var cte=Vy(na()),dte=Vy(Nu()),fte=Vy(F());function hte(i){return(0,fte.default)(1,arguments),(0,cte.default)(i,(0,dte.default)(Date.now(),1))}sL.exports=Sm.default});var lL=E((wm,uL)=>{"use strict";var oL=R().default;Object.defineProperty(wm,"__esModule",{value:!0});wm.default=gte;var pte=oL(ee()),mte=oL(F());function gte(i){(0,mte.default)(1,arguments);var e=(0,pte.default)(i),t=e.getFullYear(),n=9+Math.floor(t/10)*10;return e.setFullYear(n+1,0,0),e.setHours(0,0,0,0),e}uL.exports=wm.default});var jy=E((Tm,cL)=>{"use strict";var Gy=R().default;Object.defineProperty(Tm,"__esModule",{value:!0});Tm.default=bte;var vte=Gy(ee()),_te=Gy(qe()),xte=Gy(F()),yte=Rt();function bte(i,e){var t,n,r,s,a,o,u,l;(0,xte.default)(1,arguments);var c=(0,yte.getDefaultOptions)(),d=(0,_te.default)((t=(n=(r=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&r!==void 0?r:c.weekStartsOn)!==null&&n!==void 0?n:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&t!==void 0?t:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var f=(0,vte.default)(i),h=f.getDay(),p=(h<d?-7:0)+6-(h-d);return f.setHours(0,0,0,0),f.setDate(f.getDate()+p),f}cL.exports=Tm.default});var hL=E((Em,fL)=>{"use strict";var dL=R().default;Object.defineProperty(Em,"__esModule",{value:!0});Em.default=wte;var Mte=dL(jy()),Ste=dL(F());function wte(i){return(0,Ste.default)(1,arguments),(0,Mte.default)(i,{weekStartsOn:1})}fL.exports=Em.default});var mL=E((Pm,pL)=>{"use strict";var Yy=R().default;Object.defineProperty(Pm,"__esModule",{value:!0});Pm.default=Ate;var Tte=Yy(Ur()),Ete=Yy(Yi()),Pte=Yy(F());function Ate(i){(0,Pte.default)(1,arguments);var e=(0,Tte.default)(i),t=new Date(0);t.setFullYear(e+1,0,4),t.setHours(0,0,0,0);var n=(0,Ete.default)(t);return n.setDate(n.getDate()-1),n}pL.exports=Pm.default});var _L=E((Am,vL)=>{"use strict";var gL=R().default;Object.defineProperty(Am,"__esModule",{value:!0});Am.default=Cte;var Dte=gL(ee()),Rte=gL(F());function Cte(i){(0,Rte.default)(1,arguments);var e=(0,Dte.default)(i),t=e.getMonth(),n=t-t%3+3;return e.setMonth(n,0),e.setHours(0,0,0,0),e}vL.exports=Am.default});var bL=E((Dm,yL)=>{"use strict";var xL=R().default;Object.defineProperty(Dm,"__esModule",{value:!0});Dm.default=Lte;var Ote=xL(ee()),Ite=xL(F());function Lte(i){(0,Ite.default)(1,arguments);var e=(0,Ote.default)(i),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(0,0,0,0),e}yL.exports=Dm.default});var SL=E((Rm,ML)=>{"use strict";var Na=R().default;Object.defineProperty(Rm,"__esModule",{value:!0});Rm.default=Gte;var qte=Na(ee()),Nte=Na(Nx()),kte=Na(Jn()),Fte=Na(_i()),Ute=Na(ia()),Bte=Na(F()),zte=/(\w)\1*|''|'(''|[^'])+('|$)|./g,Hte=/^'([^]*?)'?$/,Wte=/''/g,Vte=/[a-zA-Z]/;function Gte(i,e){(0,Bte.default)(2,arguments);var t=(0,qte.default)(i);if(!(0,Fte.default)(t))throw new RangeError("Invalid time value");var n=(0,kte.default)(t),r=(0,Ute.default)(t,n),s=e.match(zte);if(!s)return"";var a=s.map(function(o){if(o==="''")return"'";var u=o[0];if(u==="'")return jte(o);var l=Nte.default[u];if(l)return l(r,o);if(u.match(Vte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+u+"`");return o}).join("");return a}function jte(i){var e=i.match(Hte);return e?e[1].replace(Wte,"'"):i}ML.exports=Rm.default});var EL=E((Cm,TL)=>{"use strict";var Yte=R().default;Object.defineProperty(Cm,"__esModule",{value:!0});Cm.default=$te;var Xte=Yte(F()),wL=365.2425;function $te(i){var e=i.years,t=i.months,n=i.weeks,r=i.days,s=i.hours,a=i.minutes,o=i.seconds;(0,Xte.default)(1,arguments);var u=0;e&&(u+=e*wL),t&&(u+=t*(wL/12)),n&&(u+=n*7),r&&(u+=r);var l=u*24*60*60;return s&&(l+=s*60*60),a&&(l+=a*60),o&&(l+=o),Math.round(l*1e3)}TL.exports=Cm.default});var AL=E((Om,PL)=>{"use strict";var Zte=R().default;Object.defineProperty(Om,"__esModule",{value:!0});Om.default=Qte;var Jte=Zte(F()),Kte=St();function Qte(i){(0,Jte.default)(1,arguments);var e=i/Kte.millisecondsInHour;return Math.floor(e)}PL.exports=Om.default});var RL=E((Im,DL)=>{"use strict";var ene=R().default;Object.defineProperty(Im,"__esModule",{value:!0});Im.default=ine;var tne=ene(F()),nne=St();function ine(i){(0,tne.default)(1,arguments);var e=i/nne.millisecondsInMinute;return Math.floor(e)}DL.exports=Im.default});var OL=E((Lm,CL)=>{"use strict";var rne=R().default;Object.defineProperty(Lm,"__esModule",{value:!0});Lm.default=one;var sne=rne(F()),ane=St();function one(i){(0,sne.default)(1,arguments);var e=i/ane.millisecondsInSecond;return Math.floor(e)}CL.exports=Lm.default});var LL=E((qm,IL)=>{"use strict";var une=R().default;Object.defineProperty(qm,"__esModule",{value:!0});qm.default=dne;var lne=une(F()),cne=St();function dne(i){(0,lne.default)(1,arguments);var e=i/cne.minutesInHour;return Math.floor(e)}IL.exports=qm.default});var NL=E((Nm,qL)=>{"use strict";var fne=R().default;Object.defineProperty(Nm,"__esModule",{value:!0});Nm.default=mne;var hne=fne(F()),pne=St();function mne(i){return(0,hne.default)(1,arguments),Math.floor(i*pne.millisecondsInMinute)}qL.exports=Nm.default});var FL=E((km,kL)=>{"use strict";var gne=R().default;Object.defineProperty(km,"__esModule",{value:!0});km.default=xne;var vne=gne(F()),_ne=St();function xne(i){return(0,vne.default)(1,arguments),Math.floor(i*_ne.secondsInMinute)}kL.exports=km.default});var BL=E((Fm,UL)=>{"use strict";var yne=R().default;Object.defineProperty(Fm,"__esModule",{value:!0});Fm.default=Sne;var bne=yne(F()),Mne=St();function Sne(i){(0,bne.default)(1,arguments);var e=i/Mne.monthsInQuarter;return Math.floor(e)}UL.exports=Fm.default});var HL=E((Um,zL)=>{"use strict";var wne=R().default;Object.defineProperty(Um,"__esModule",{value:!0});Um.default=Pne;var Tne=wne(F()),Ene=St();function Pne(i){(0,Tne.default)(1,arguments);var e=i/Ene.monthsInYear;return Math.floor(e)}zL.exports=Um.default});var wi=E((Bm,WL)=>{"use strict";var Xy=R().default;Object.defineProperty(Bm,"__esModule",{value:!0});Bm.default=Cne;var Ane=Xy(Zn()),Dne=Xy(hu()),Rne=Xy(F());function Cne(i,e){(0,Rne.default)(2,arguments);var t=e-(0,Dne.default)(i);return t<=0&&(t+=7),(0,Ane.default)(i,t)}WL.exports=Bm.default});var jL=E((zm,GL)=>{"use strict";var VL=R().default;Object.defineProperty(zm,"__esModule",{value:!0});zm.default=Lne;var One=VL(wi()),Ine=VL(F());function Lne(i){return(0,Ine.default)(1,arguments),(0,One.default)(i,5)}GL.exports=zm.default});var $L=E((Hm,XL)=>{"use strict";var YL=R().default;Object.defineProperty(Hm,"__esModule",{value:!0});Hm.default=kne;var qne=YL(wi()),Nne=YL(F());function kne(i){return(0,Nne.default)(1,arguments),(0,qne.default)(i,1)}XL.exports=Hm.default});var KL=E((Wm,JL)=>{"use strict";var ZL=R().default;Object.defineProperty(Wm,"__esModule",{value:!0});Wm.default=Bne;var Fne=ZL(wi()),Une=ZL(F());function Bne(i){return(0,Une.default)(1,arguments),(0,Fne.default)(i,6)}JL.exports=Wm.default});var tq=E((Vm,eq)=>{"use strict";var QL=R().default;Object.defineProperty(Vm,"__esModule",{value:!0});Vm.default=Wne;var zne=QL(wi()),Hne=QL(F());function Wne(i){return(0,Hne.default)(1,arguments),(0,zne.default)(i,0)}eq.exports=Vm.default});var rq=E((Gm,iq)=>{"use strict";var nq=R().default;Object.defineProperty(Gm,"__esModule",{value:!0});Gm.default=jne;var Vne=nq(wi()),Gne=nq(F());function jne(i){return(0,Gne.default)(1,arguments),(0,Vne.default)(i,4)}iq.exports=Gm.default});var oq=E((jm,aq)=>{"use strict";var sq=R().default;Object.defineProperty(jm,"__esModule",{value:!0});jm.default=$ne;var Yne=sq(wi()),Xne=sq(F());function $ne(i){return(0,Xne.default)(1,arguments),(0,Yne.default)(i,2)}aq.exports=jm.default});var cq=E((Ym,lq)=>{"use strict";var uq=R().default;Object.defineProperty(Ym,"__esModule",{value:!0});Ym.default=Kne;var Zne=uq(wi()),Jne=uq(F());function Kne(i){return(0,Jne.default)(1,arguments),(0,Zne.default)(i,3)}lq.exports=Ym.default});var pq=E((Zm,hq)=>{"use strict";var dq=R().default;Object.defineProperty(Zm,"__esModule",{value:!0});Zm.default=tie;var $m=St(),Qne=dq(F()),eie=dq(qe());function tie(i,e){var t;(0,Qne.default)(1,arguments);var n=(0,eie.default)((t=e==null?void 0:e.additionalDigits)!==null&&t!==void 0?t:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof i=="string"||Object.prototype.toString.call(i)==="[object String]"))return new Date(NaN);var r=sie(i),s;if(r.date){var a=aie(r.date,n);s=oie(a.restDateString,a.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var o=s.getTime(),u=0,l;if(r.time&&(u=uie(r.time),isNaN(u)))return new Date(NaN);if(r.timezone){if(l=lie(r.timezone),isNaN(l))return new Date(NaN)}else{var c=new Date(o+u),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(o+u+l)}var Xm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},nie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,iie=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,rie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function sie(i){var e={},t=i.split(Xm.dateTimeDelimiter),n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],Xm.timeZoneDelimiter.test(e.date)&&(e.date=i.split(Xm.timeZoneDelimiter)[0],n=i.substr(e.date.length,i.length))),n){var r=Xm.timezone.exec(n);r?(e.time=n.replace(r[1],""),e.timezone=r[1]):e.time=n}return e}function aie(i,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=i.match(t);if(!n)return{year:NaN,restDateString:""};var r=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?r:s*100,restDateString:i.slice((n[1]||n[2]).length)}}function oie(i,e){if(e===null)return new Date(NaN);var t=i.match(nie);if(!t)return new Date(NaN);var n=!!t[4],r=ku(t[1]),s=ku(t[2])-1,a=ku(t[3]),o=ku(t[4]),u=ku(t[5])-1;if(n)return pie(e,o,u)?cie(e,o,u):new Date(NaN);var l=new Date(0);return!fie(e,s,a)||!hie(e,r)?new Date(NaN):(l.setUTCFullYear(e,s,Math.max(r,a)),l)}function ku(i){return i?parseInt(i):1}function uie(i){var e=i.match(iie);if(!e)return NaN;var t=$y(e[1]),n=$y(e[2]),r=$y(e[3]);return mie(t,n,r)?t*$m.millisecondsInHour+n*$m.millisecondsInMinute+r*1e3:NaN}function $y(i){return i&&parseFloat(i.replace(",","."))||0}function lie(i){if(i==="Z")return 0;var e=i.match(rie);if(!e)return 0;var t=e[1]==="+"?-1:1,n=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return gie(n,r)?t*(n*$m.millisecondsInHour+r*$m.millisecondsInMinute):NaN}function cie(i,e,t){var n=new Date(0);n.setUTCFullYear(i,0,4);var r=n.getUTCDay()||7,s=(e-1)*7+t+1-r;return n.setUTCDate(n.getUTCDate()+s),n}var die=[31,null,31,30,31,30,31,31,30,31,30,31];function fq(i){return i%400===0||i%4===0&&i%100!==0}function fie(i,e,t){return e>=0&&e<=11&&t>=1&&t<=(die[e]||(fq(i)?29:28))}function hie(i,e){return e>=1&&e<=(fq(i)?366:365)}function pie(i,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function mie(i,e,t){return i===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&i>=0&&i<25}function gie(i,e){return e>=0&&e<=59}hq.exports=Zm.default});var vq=E((Jm,gq)=>{"use strict";var mq=R().default;Object.defineProperty(Jm,"__esModule",{value:!0});Jm.default=xie;var vie=mq(ee()),_ie=mq(F());function xie(i){if((0,_ie.default)(1,arguments),typeof i=="string"){var e=i.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.(\d{0,7}))?(?:Z|(.)(\d{2}):?(\d{2})?)?/);return e?new Date(Date.UTC(+e[1],+e[2]-1,+e[3],+e[4]-(+e[9]||0)*(e[8]=="-"?-1:1),+e[5]-(+e[10]||0)*(e[8]=="-"?-1:1),+e[6],+((e[7]||"0")+"00").substring(0,3))):new Date(NaN)}return(0,vie.default)(i)}gq.exports=Jm.default});var Ti=E((Km,_q)=>{"use strict";var Zy=R().default;Object.defineProperty(Km,"__esModule",{value:!0});Km.default=Sie;var yie=Zy(F()),bie=Zy(hu()),Mie=Zy(Nu());function Sie(i,e){(0,yie.default)(2,arguments);var t=(0,bie.default)(i)-e;return t<=0&&(t+=7),(0,Mie.default)(i,t)}_q.exports=Km.default});var bq=E((Qm,yq)=>{"use strict";var xq=R().default;Object.defineProperty(Qm,"__esModule",{value:!0});Qm.default=Eie;var wie=xq(F()),Tie=xq(Ti());function Eie(i){return(0,wie.default)(1,arguments),(0,Tie.default)(i,5)}yq.exports=Qm.default});var wq=E((eg,Sq)=>{"use strict";var Mq=R().default;Object.defineProperty(eg,"__esModule",{value:!0});eg.default=Die;var Pie=Mq(F()),Aie=Mq(Ti());function Die(i){return(0,Pie.default)(1,arguments),(0,Aie.default)(i,1)}Sq.exports=eg.default});var Pq=E((tg,Eq)=>{"use strict";var Tq=R().default;Object.defineProperty(tg,"__esModule",{value:!0});tg.default=Oie;var Rie=Tq(F()),Cie=Tq(Ti());function Oie(i){return(0,Rie.default)(1,arguments),(0,Cie.default)(i,6)}Eq.exports=tg.default});var Rq=E((ng,Dq)=>{"use strict";var Aq=R().default;Object.defineProperty(ng,"__esModule",{value:!0});ng.default=qie;var Iie=Aq(F()),Lie=Aq(Ti());function qie(i){return(0,Iie.default)(1,arguments),(0,Lie.default)(i,0)}Dq.exports=ng.default});var Iq=E((ig,Oq)=>{"use strict";var Cq=R().default;Object.defineProperty(ig,"__esModule",{value:!0});ig.default=Fie;var Nie=Cq(F()),kie=Cq(Ti());function Fie(i){return(0,Nie.default)(1,arguments),(0,kie.default)(i,4)}Oq.exports=ig.default});var Nq=E((rg,qq)=>{"use strict";var Lq=R().default;Object.defineProperty(rg,"__esModule",{value:!0});rg.default=zie;var Uie=Lq(F()),Bie=Lq(Ti());function zie(i){return(0,Uie.default)(1,arguments),(0,Bie.default)(i,2)}qq.exports=rg.default});var Uq=E((sg,Fq)=>{"use strict";var kq=R().default;Object.defineProperty(sg,"__esModule",{value:!0});sg.default=Vie;var Hie=kq(F()),Wie=kq(Ti());function Vie(i){return(0,Hie.default)(1,arguments),(0,Wie.default)(i,3)}Fq.exports=sg.default});var zq=E((ag,Bq)=>{"use strict";var Gie=R().default;Object.defineProperty(ag,"__esModule",{value:!0});ag.default=Xie;var jie=Gie(F()),Yie=St();function Xie(i){return(0,jie.default)(1,arguments),Math.floor(i*Yie.monthsInQuarter)}Bq.exports=ag.default});var Wq=E((og,Hq)=>{"use strict";var $ie=R().default;Object.defineProperty(og,"__esModule",{value:!0});og.default=Kie;var Zie=$ie(F()),Jie=St();function Kie(i){(0,Zie.default)(1,arguments);var e=i/Jie.quartersInYear;return Math.floor(e)}Hq.exports=og.default});var jq=E((ug,Gq)=>{"use strict";var Vq=R().default;Object.defineProperty(ug,"__esModule",{value:!0});ug.default=nre;var Qie=Vq(ee()),ere=Br(),tre=Vq(qe());function nre(i,e){var t;if(arguments.length<1)throw new TypeError("1 argument required, but only none provided present");var n=(0,tre.default)((t=e==null?void 0:e.nearestTo)!==null&&t!==void 0?t:1);if(n<1||n>30)throw new RangeError("`options.nearestTo` must be between 1 and 30");var r=(0,Qie.default)(i),s=r.getSeconds(),a=r.getMinutes()+s/60,o=(0,ere.getRoundingMethod)(e==null?void 0:e.roundingMethod),u=o(a/n)*n,l=a%n,c=Math.round(l/n)*n;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),u+c)}Gq.exports=ug.default});var Xq=E((lg,Yq)=>{"use strict";var ire=R().default;Object.defineProperty(lg,"__esModule",{value:!0});lg.default=are;var rre=ire(F()),sre=St();function are(i){(0,rre.default)(1,arguments);var e=i/sre.secondsInHour;return Math.floor(e)}Yq.exports=lg.default});var Zq=E((cg,$q)=>{"use strict";var ore=R().default;Object.defineProperty(cg,"__esModule",{value:!0});cg.default=cre;var ure=ore(F()),lre=St();function cre(i){return(0,ure.default)(1,arguments),i*lre.millisecondsInSecond}$q.exports=cg.default});var Kq=E((dg,Jq)=>{"use strict";var dre=R().default;Object.defineProperty(dg,"__esModule",{value:!0});dg.default=pre;var fre=dre(F()),hre=St();function pre(i){(0,fre.default)(1,arguments);var e=i/hre.secondsInMinute;return Math.floor(e)}Jq.exports=dg.default});var pg=E((hg,Qq)=>{"use strict";var fg=R().default;Object.defineProperty(hg,"__esModule",{value:!0});hg.default=xre;var mre=fg(qe()),gre=fg(ee()),vre=fg(Zx()),_re=fg(F());function xre(i,e){(0,_re.default)(2,arguments);var t=(0,gre.default)(i),n=(0,mre.default)(e),r=t.getFullYear(),s=t.getDate(),a=new Date(0);a.setFullYear(r,n,15),a.setHours(0,0,0,0);var o=(0,vre.default)(a);return t.setMonth(n,Math.min(s,o)),t}Qq.exports=hg.default});var tN=E((mg,eN)=>{"use strict";var Uu=R().default;Object.defineProperty(mg,"__esModule",{value:!0});mg.default=wre;var yre=Uu(mn()),bre=Uu(ee()),Mre=Uu(pg()),Fu=Uu(qe()),Sre=Uu(F());function wre(i,e){if((0,Sre.default)(2,arguments),(0,yre.default)(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var t=(0,bre.default)(i);return isNaN(t.getTime())?new Date(NaN):(e.year!=null&&t.setFullYear(e.year),e.month!=null&&(t=(0,Mre.default)(t,e.month)),e.date!=null&&t.setDate((0,Fu.default)(e.date)),e.hours!=null&&t.setHours((0,Fu.default)(e.hours)),e.minutes!=null&&t.setMinutes((0,Fu.default)(e.minutes)),e.seconds!=null&&t.setSeconds((0,Fu.default)(e.seconds)),e.milliseconds!=null&&t.setMilliseconds((0,Fu.default)(e.milliseconds)),t)}eN.exports=mg.default});var iN=E((gg,nN)=>{"use strict";var Jy=R().default;Object.defineProperty(gg,"__esModule",{value:!0});gg.default=Are;var Tre=Jy(qe()),Ere=Jy(ee()),Pre=Jy(F());function Are(i,e){(0,Pre.default)(2,arguments);var t=(0,Ere.default)(i),n=(0,Tre.default)(e);return t.setDate(n),t}nN.exports=gg.default});var aN=E((_g,sN)=>{"use strict";var vg=R().default;Object.defineProperty(_g,"__esModule",{value:!0});_g.default=Ire;var Dre=vg(Zn()),Rre=vg(ee()),rN=vg(qe()),Cre=vg(F()),Ore=Rt();function Ire(i,e,t){var n,r,s,a,o,u,l,c;(0,Cre.default)(2,arguments);var d=(0,Ore.getDefaultOptions)(),f=(0,rN.default)((n=(r=(s=(a=t==null?void 0:t.weekStartsOn)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=(0,Rre.default)(i),p=(0,rN.default)(e),v=h.getDay(),g=p%7,m=(g+7)%7,y=7-f,_=p<0||p>6?p-(v+y)%7:(m+y)%7-(v+y)%7;return(0,Dre.default)(h,_)}sN.exports=_g.default});var uN=E((xg,oN)=>{"use strict";var Ky=R().default;Object.defineProperty(xg,"__esModule",{value:!0});xg.default=kre;var Lre=Ky(qe()),qre=Ky(ee()),Nre=Ky(F());function kre(i,e){(0,Nre.default)(2,arguments);var t=(0,qre.default)(i),n=(0,Lre.default)(e);return t.setMonth(0),t.setDate(n),t}oN.exports=xg.default});var dN=E((yg,cN)=>{"use strict";var Fre=R().default;Object.defineProperty(yg,"__esModule",{value:!0});yg.default=Bre;var lN=Rt(),Ure=Fre(F());function Bre(i){(0,Ure.default)(1,arguments);var e={},t=(0,lN.getDefaultOptions)();for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(i[r]===void 0?delete e[r]:e[r]=i[r]);(0,lN.setDefaultOptions)(e)}cN.exports=yg.default});var hN=E((bg,fN)=>{"use strict";var Qy=R().default;Object.defineProperty(bg,"__esModule",{value:!0});bg.default=Vre;var zre=Qy(qe()),Hre=Qy(ee()),Wre=Qy(F());function Vre(i,e){(0,Wre.default)(2,arguments);var t=(0,Hre.default)(i),n=(0,zre.default)(e);return t.setHours(n),t}fN.exports=bg.default});var mN=E((Mg,pN)=>{"use strict";var Bu=R().default;Object.defineProperty(Mg,"__esModule",{value:!0});Mg.default=Zre;var Gre=Bu(qe()),jre=Bu(ee()),Yre=Bu(Zn()),Xre=Bu(Qx()),$re=Bu(F());function Zre(i,e){(0,$re.default)(2,arguments);var t=(0,jre.default)(i),n=(0,Gre.default)(e),r=(0,Xre.default)(t),s=n-r;return(0,Yre.default)(t,s)}pN.exports=Mg.default});var vN=E((wg,gN)=>{"use strict";var Sg=R().default;Object.defineProperty(wg,"__esModule",{value:!0});wg.default=tse;var Jre=Sg(qe()),Kre=Sg(ee()),Qre=Sg(ey()),ese=Sg(F());function tse(i,e){(0,ese.default)(2,arguments);var t=(0,Kre.default)(i),n=(0,Jre.default)(e),r=(0,Qre.default)(t)-n;return t.setDate(t.getDate()-r*7),t}gN.exports=wg.default});var xN=E((Tg,_N)=>{"use strict";var eb=R().default;Object.defineProperty(Tg,"__esModule",{value:!0});Tg.default=sse;var nse=eb(qe()),ise=eb(ee()),rse=eb(F());function sse(i,e){(0,rse.default)(2,arguments);var t=(0,ise.default)(i),n=(0,nse.default)(e);return t.setMilliseconds(n),t}_N.exports=Tg.default});var bN=E((Eg,yN)=>{"use strict";var tb=R().default;Object.defineProperty(Eg,"__esModule",{value:!0});Eg.default=lse;var ase=tb(qe()),ose=tb(ee()),use=tb(F());function lse(i,e){(0,use.default)(2,arguments);var t=(0,ose.default)(i),n=(0,ase.default)(e);return t.setMinutes(n),t}yN.exports=Eg.default});var SN=E((Ag,MN)=>{"use strict";var Pg=R().default;Object.defineProperty(Ag,"__esModule",{value:!0});Ag.default=pse;var cse=Pg(qe()),dse=Pg(ee()),fse=Pg(pg()),hse=Pg(F());function pse(i,e){(0,hse.default)(2,arguments);var t=(0,dse.default)(i),n=(0,cse.default)(e),r=Math.floor(t.getMonth()/3)+1,s=n-r;return(0,fse.default)(t,t.getMonth()+s*3)}MN.exports=Ag.default});var TN=E((Dg,wN)=>{"use strict";var nb=R().default;Object.defineProperty(Dg,"__esModule",{value:!0});Dg.default=_se;var mse=nb(qe()),gse=nb(ee()),vse=nb(F());function _se(i,e){(0,vse.default)(2,arguments);var t=(0,gse.default)(i),n=(0,mse.default)(e);return t.setSeconds(n),t}wN.exports=Dg.default});var PN=E((Cg,EN)=>{"use strict";var Rg=R().default;Object.defineProperty(Cg,"__esModule",{value:!0});Cg.default=Sse;var xse=Rg(ry()),yse=Rg(ee()),bse=Rg(F()),Mse=Rg(qe());function Sse(i,e,t){(0,bse.default)(2,arguments);var n=(0,yse.default)(i),r=(0,Mse.default)(e),s=(0,xse.default)(n,t)-r;return n.setDate(n.getDate()-s*7),n}EN.exports=Cg.default});var CN=E((Og,RN)=>{"use strict";var zu=R().default;Object.defineProperty(Og,"__esModule",{value:!0});Og.default=Ase;var wse=zu(vi()),AN=zu(kh()),Tse=zu(ee()),DN=zu(qe()),Ese=zu(F()),Pse=Rt();function Ase(i,e,t){var n,r,s,a,o,u,l,c;(0,Ese.default)(2,arguments);var d=(0,Pse.getDefaultOptions)(),f=(0,DN.default)((n=(r=(s=(a=t==null?void 0:t.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=(0,Tse.default)(i),p=(0,DN.default)(e),v=(0,wse.default)(h,(0,AN.default)(h,t)),g=new Date(0);return g.setFullYear(p,0,f),g.setHours(0,0,0,0),h=(0,AN.default)(g,t),h.setDate(h.getDate()+v),h}RN.exports=Og.default});var IN=E((Ig,ON)=>{"use strict";var ib=R().default;Object.defineProperty(Ig,"__esModule",{value:!0});Ig.default=Ose;var Dse=ib(qe()),Rse=ib(ee()),Cse=ib(F());function Ose(i,e){(0,Cse.default)(2,arguments);var t=(0,Rse.default)(i),n=(0,Dse.default)(e);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(n),t)}ON.exports=Ig.default});var NN=E((Lg,qN)=>{"use strict";var LN=R().default;Object.defineProperty(Lg,"__esModule",{value:!0});Lg.default=qse;var Ise=LN(ee()),Lse=LN(F());function qse(i){(0,Lse.default)(1,arguments);var e=(0,Ise.default)(i),t=e.getFullYear(),n=Math.floor(t/10)*10;return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}qN.exports=Lg.default});var FN=E((qg,kN)=>{"use strict";var Nse=R().default;Object.defineProperty(qg,"__esModule",{value:!0});qg.default=Fse;var kse=Nse(Vo());function Fse(){return(0,kse.default)(Date.now())}kN.exports=qg.default});var BN=E((Ng,UN)=>{"use strict";Object.defineProperty(Ng,"__esModule",{value:!0});Ng.default=Use;function Use(){var i=new Date,e=i.getFullYear(),t=i.getMonth(),n=i.getDate(),r=new Date(0);return r.setFullYear(e,t,n+1),r.setHours(0,0,0,0),r}UN.exports=Ng.default});var HN=E((kg,zN)=>{"use strict";Object.defineProperty(kg,"__esModule",{value:!0});kg.default=Bse;function Bse(){var i=new Date,e=i.getFullYear(),t=i.getMonth(),n=i.getDate(),r=new Date(0);return r.setFullYear(e,t,n-1),r.setHours(0,0,0,0),r}zN.exports=kg.default});var sb=E((Fg,WN)=>{"use strict";var rb=R().default;Object.defineProperty(Fg,"__esModule",{value:!0});Fg.default=Vse;var zse=rb(qe()),Hse=rb(Js()),Wse=rb(F());function Vse(i,e){(0,Wse.default)(2,arguments);var t=(0,zse.default)(e);return(0,Hse.default)(i,-t)}WN.exports=Fg.default});var GN=E((Ug,VN)=>{"use strict";var Hu=R().default;Object.defineProperty(Ug,"__esModule",{value:!0});Ug.default=$se;var Gse=Hu(mn()),jse=Hu(Nu()),Yse=Hu(sb()),Xse=Hu(F()),Kr=Hu(qe());function $se(i,e){if((0,Xse.default)(2,arguments),!e||(0,Gse.default)(e)!=="object")return new Date(NaN);var t=e.years?(0,Kr.default)(e.years):0,n=e.months?(0,Kr.default)(e.months):0,r=e.weeks?(0,Kr.default)(e.weeks):0,s=e.days?(0,Kr.default)(e.days):0,a=e.hours?(0,Kr.default)(e.hours):0,o=e.minutes?(0,Kr.default)(e.minutes):0,u=e.seconds?(0,Kr.default)(e.seconds):0,l=(0,Yse.default)(i,n+t*12),c=(0,jse.default)(l,s+r*7),d=o+a*60,f=u+d*60,h=f*1e3,p=new Date(c.getTime()-h);return p}VN.exports=Ug.default});var YN=E((Bg,jN)=>{"use strict";var ab=R().default;Object.defineProperty(Bg,"__esModule",{value:!0});Bg.default=Qse;var Zse=ab(O0()),Jse=ab(F()),Kse=ab(qe());function Qse(i,e){(0,Jse.default)(2,arguments);var t=(0,Kse.default)(e);return(0,Zse.default)(i,-t)}jN.exports=Bg.default});var $N=E((zg,XN)=>{"use strict";var ob=R().default;Object.defineProperty(zg,"__esModule",{value:!0});zg.default=iae;var eae=ob(Cc()),tae=ob(F()),nae=ob(qe());function iae(i,e){(0,tae.default)(2,arguments);var t=(0,nae.default)(e);return(0,eae.default)(i,-t)}XN.exports=zg.default});var JN=E((Hg,ZN)=>{"use strict";var ub=R().default;Object.defineProperty(Hg,"__esModule",{value:!0});Hg.default=oae;var rae=ub(Vc()),sae=ub(F()),aae=ub(qe());function oae(i,e){(0,sae.default)(2,arguments);var t=(0,aae.default)(e);return(0,rae.default)(i,-t)}ZN.exports=Hg.default});var QN=E((Wg,KN)=>{"use strict";var lb=R().default;Object.defineProperty(Wg,"__esModule",{value:!0});Wg.default=dae;var uae=lb(qe()),lae=lb(jc()),cae=lb(F());function dae(i,e){(0,cae.default)(2,arguments);var t=(0,uae.default)(e);return(0,lae.default)(i,-t)}KN.exports=Wg.default});var tk=E((Vg,ek)=>{"use strict";var cb=R().default;Object.defineProperty(Vg,"__esModule",{value:!0});Vg.default=mae;var fae=cb(qe()),hae=cb(V0()),pae=cb(F());function mae(i,e){(0,pae.default)(2,arguments);var t=(0,fae.default)(e);return(0,hae.default)(i,-t)}ek.exports=Vg.default});var ik=E((Gg,nk)=>{"use strict";var db=R().default;Object.defineProperty(Gg,"__esModule",{value:!0});Gg.default=xae;var gae=db(qe()),vae=db(jo()),_ae=db(F());function xae(i,e){(0,_ae.default)(2,arguments);var t=(0,gae.default)(e);return(0,vae.default)(i,-t)}nk.exports=Gg.default});var sk=E((jg,rk)=>{"use strict";var fb=R().default;Object.defineProperty(jg,"__esModule",{value:!0});jg.default=Sae;var yae=fb(qe()),bae=fb(Y0()),Mae=fb(F());function Sae(i,e){(0,Mae.default)(2,arguments);var t=(0,yae.default)(e);return(0,bae.default)(i,-t)}rk.exports=jg.default});var ok=E((Yg,ak)=>{"use strict";var wae=R().default;Object.defineProperty(Yg,"__esModule",{value:!0});Yg.default=Pae;var Tae=wae(F()),Eae=St();function Pae(i){return(0,Tae.default)(1,arguments),Math.floor(i*Eae.daysInWeek)}ak.exports=Yg.default});var lk=E((Xg,uk)=>{"use strict";var Aae=R().default;Object.defineProperty(Xg,"__esModule",{value:!0});Xg.default=Cae;var Dae=Aae(F()),Rae=St();function Cae(i){return(0,Dae.default)(1,arguments),Math.floor(i*Rae.monthsInYear)}uk.exports=Xg.default});var dk=E(($g,ck)=>{"use strict";var Oae=R().default;Object.defineProperty($g,"__esModule",{value:!0});$g.default=qae;var Iae=Oae(F()),Lae=St();function qae(i){return(0,Iae.default)(1,arguments),Math.floor(i*Lae.quartersInYear)}ck.exports=$g.default});var fk=E(k=>{"use strict";var U=R().default;Object.defineProperty(k,"__esModule",{value:!0});var Nae={add:!0,addBusinessDays:!0,addDays:!0,addHours:!0,addISOWeekYears:!0,addMilliseconds:!0,addMinutes:!0,addMonths:!0,addQuarters:!0,addSeconds:!0,addWeeks:!0,addYears:!0,areIntervalsOverlapping:!0,clamp:!0,closestIndexTo:!0,closestTo:!0,compareAsc:!0,compareDesc:!0,daysToWeeks:!0,differenceInBusinessDays:!0,differenceInCalendarDays:!0,differenceInCalendarISOWeekYears:!0,differenceInCalendarISOWeeks:!0,differenceInCalendarMonths:!0,differenceInCalendarQuarters:!0,differenceInCalendarWeeks:!0,differenceInCalendarYears:!0,differenceInDays:!0,differenceInHours:!0,differenceInISOWeekYears:!0,differenceInMilliseconds:!0,differenceInMinutes:!0,differenceInMonths:!0,differenceInQuarters:!0,differenceInSeconds:!0,differenceInWeeks:!0,differenceInYears:!0,eachDayOfInterval:!0,eachHourOfInterval:!0,eachMinuteOfInterval:!0,eachMonthOfInterval:!0,eachQuarterOfInterval:!0,eachWeekOfInterval:!0,eachWeekendOfInterval:!0,eachWeekendOfMonth:!0,eachWeekendOfYear:!0,eachYearOfInterval:!0,endOfDay:!0,endOfDecade:!0,endOfHour:!0,endOfISOWeek:!0,endOfISOWeekYear:!0,endOfMinute:!0,endOfMonth:!0,endOfQuarter:!0,endOfSecond:!0,endOfToday:!0,endOfTomorrow:!0,endOfWeek:!0,endOfYear:!0,endOfYesterday:!0,format:!0,formatDistance:!0,formatDistanceStrict:!0,formatDistanceToNow:!0,formatDistanceToNowStrict:!0,formatDuration:!0,formatISO:!0,formatISO9075:!0,formatISODuration:!0,formatRFC3339:!0,formatRFC7231:!0,formatRelative:!0,fromUnixTime:!0,getDate:!0,getDay:!0,getDayOfYear:!0,getDaysInMonth:!0,getDaysInYear:!0,getDecade:!0,getDefaultOptions:!0,getHours:!0,getISODay:!0,getISOWeek:!0,getISOWeekYear:!0,getISOWeeksInYear:!0,getMilliseconds:!0,getMinutes:!0,getMonth:!0,getOverlappingDaysInIntervals:!0,getQuarter:!0,getSeconds:!0,getTime:!0,getUnixTime:!0,getWeek:!0,getWeekOfMonth:!0,getWeekYear:!0,getWeeksInMonth:!0,getYear:!0,hoursToMilliseconds:!0,hoursToMinutes:!0,hoursToSeconds:!0,intervalToDuration:!0,intlFormat:!0,intlFormatDistance:!0,isAfter:!0,isBefore:!0,isDate:!0,isEqual:!0,isExists:!0,isFirstDayOfMonth:!0,isFriday:!0,isFuture:!0,isLastDayOfMonth:!0,isLeapYear:!0,isMatch:!0,isMonday:!0,isPast:!0,isSameDay:!0,isSameHour:!0,isSameISOWeek:!0,isSameISOWeekYear:!0,isSameMinute:!0,isSameMonth:!0,isSameQuarter:!0,isSameSecond:!0,isSameWeek:!0,isSameYear:!0,isSaturday:!0,isSunday:!0,isThisHour:!0,isThisISOWeek:!0,isThisMinute:!0,isThisMonth:!0,isThisQuarter:!0,isThisSecond:!0,isThisWeek:!0,isThisYear:!0,isThursday:!0,isToday:!0,isTomorrow:!0,isTuesday:!0,isValid:!0,isWednesday:!0,isWeekend:!0,isWithinInterval:!0,isYesterday:!0,lastDayOfDecade:!0,lastDayOfISOWeek:!0,lastDayOfISOWeekYear:!0,lastDayOfMonth:!0,lastDayOfQuarter:!0,lastDayOfWeek:!0,lastDayOfYear:!0,lightFormat:!0,max:!0,milliseconds:!0,millisecondsToHours:!0,millisecondsToMinutes:!0,millisecondsToSeconds:!0,min:!0,minutesToHours:!0,minutesToMilliseconds:!0,minutesToSeconds:!0,monthsToQuarters:!0,monthsToYears:!0,nextDay:!0,nextFriday:!0,nextMonday:!0,nextSaturday:!0,nextSunday:!0,nextThursday:!0,nextTuesday:!0,nextWednesday:!0,parse:!0,parseISO:!0,parseJSON:!0,previousDay:!0,previousFriday:!0,previousMonday:!0,previousSaturday:!0,previousSunday:!0,previousThursday:!0,previousTuesday:!0,previousWednesday:!0,quartersToMonths:!0,quartersToYears:!0,roundToNearestMinutes:!0,secondsToHours:!0,secondsToMilliseconds:!0,secondsToMinutes:!0,set:!0,setDate:!0,setDay:!0,setDayOfYear:!0,setDefaultOptions:!0,setHours:!0,setISODay:!0,setISOWeek:!0,setISOWeekYear:!0,setMilliseconds:!0,setMinutes:!0,setMonth:!0,setQuarter:!0,setSeconds:!0,setWeek:!0,setWeekYear:!0,setYear:!0,startOfDay:!0,startOfDecade:!0,startOfHour:!0,startOfISOWeek:!0,startOfISOWeekYear:!0,startOfMinute:!0,startOfMonth:!0,startOfQuarter:!0,startOfSecond:!0,startOfToday:!0,startOfTomorrow:!0,startOfWeek:!0,startOfWeekYear:!0,startOfYear:!0,startOfYesterday:!0,sub:!0,subBusinessDays:!0,subDays:!0,subHours:!0,subISOWeekYears:!0,subMilliseconds:!0,subMinutes:!0,subMonths:!0,subQuarters:!0,subSeconds:!0,subWeeks:!0,subYears:!0,toDate:!0,weeksToDays:!0,yearsToMonths:!0,yearsToQuarters:!0};Object.defineProperty(k,"add",{enumerable:!0,get:function(){return kae.default}});Object.defineProperty(k,"addBusinessDays",{enumerable:!0,get:function(){return Fae.default}});Object.defineProperty(k,"addDays",{enumerable:!0,get:function(){return Uae.default}});Object.defineProperty(k,"addHours",{enumerable:!0,get:function(){return Bae.default}});Object.defineProperty(k,"addISOWeekYears",{enumerable:!0,get:function(){return zae.default}});Object.defineProperty(k,"addMilliseconds",{enumerable:!0,get:function(){return Hae.default}});Object.defineProperty(k,"addMinutes",{enumerable:!0,get:function(){return Wae.default}});Object.defineProperty(k,"addMonths",{enumerable:!0,get:function(){return Vae.default}});Object.defineProperty(k,"addQuarters",{enumerable:!0,get:function(){return Gae.default}});Object.defineProperty(k,"addSeconds",{enumerable:!0,get:function(){return jae.default}});Object.defineProperty(k,"addWeeks",{enumerable:!0,get:function(){return Yae.default}});Object.defineProperty(k,"addYears",{enumerable:!0,get:function(){return Xae.default}});Object.defineProperty(k,"areIntervalsOverlapping",{enumerable:!0,get:function(){return $ae.default}});Object.defineProperty(k,"clamp",{enumerable:!0,get:function(){return Zae.default}});Object.defineProperty(k,"closestIndexTo",{enumerable:!0,get:function(){return Jae.default}});Object.defineProperty(k,"closestTo",{enumerable:!0,get:function(){return Kae.default}});Object.defineProperty(k,"compareAsc",{enumerable:!0,get:function(){return Qae.default}});Object.defineProperty(k,"compareDesc",{enumerable:!0,get:function(){return eoe.default}});Object.defineProperty(k,"daysToWeeks",{enumerable:!0,get:function(){return toe.default}});Object.defineProperty(k,"differenceInBusinessDays",{enumerable:!0,get:function(){return noe.default}});Object.defineProperty(k,"differenceInCalendarDays",{enumerable:!0,get:function(){return ioe.default}});Object.defineProperty(k,"differenceInCalendarISOWeekYears",{enumerable:!0,get:function(){return roe.default}});Object.defineProperty(k,"differenceInCalendarISOWeeks",{enumerable:!0,get:function(){return soe.default}});Object.defineProperty(k,"differenceInCalendarMonths",{enumerable:!0,get:function(){return aoe.default}});Object.defineProperty(k,"differenceInCalendarQuarters",{enumerable:!0,get:function(){return ooe.default}});Object.defineProperty(k,"differenceInCalendarWeeks",{enumerable:!0,get:function(){return uoe.default}});Object.defineProperty(k,"differenceInCalendarYears",{enumerable:!0,get:function(){return loe.default}});Object.defineProperty(k,"differenceInDays",{enumerable:!0,get:function(){return coe.default}});Object.defineProperty(k,"differenceInHours",{enumerable:!0,get:function(){return doe.default}});Object.defineProperty(k,"differenceInISOWeekYears",{enumerable:!0,get:function(){return foe.default}});Object.defineProperty(k,"differenceInMilliseconds",{enumerable:!0,get:function(){return hoe.default}});Object.defineProperty(k,"differenceInMinutes",{enumerable:!0,get:function(){return poe.default}});Object.defineProperty(k,"differenceInMonths",{enumerable:!0,get:function(){return moe.default}});Object.defineProperty(k,"differenceInQuarters",{enumerable:!0,get:function(){return goe.default}});Object.defineProperty(k,"differenceInSeconds",{enumerable:!0,get:function(){return voe.default}});Object.defineProperty(k,"differenceInWeeks",{enumerable:!0,get:function(){return _oe.default}});Object.defineProperty(k,"differenceInYears",{enumerable:!0,get:function(){return xoe.default}});Object.defineProperty(k,"eachDayOfInterval",{enumerable:!0,get:function(){return yoe.default}});Object.defineProperty(k,"eachHourOfInterval",{enumerable:!0,get:function(){return boe.default}});Object.defineProperty(k,"eachMinuteOfInterval",{enumerable:!0,get:function(){return Moe.default}});Object.defineProperty(k,"eachMonthOfInterval",{enumerable:!0,get:function(){return Soe.default}});Object.defineProperty(k,"eachQuarterOfInterval",{enumerable:!0,get:function(){return woe.default}});Object.defineProperty(k,"eachWeekOfInterval",{enumerable:!0,get:function(){return Toe.default}});Object.defineProperty(k,"eachWeekendOfInterval",{enumerable:!0,get:function(){return Eoe.default}});Object.defineProperty(k,"eachWeekendOfMonth",{enumerable:!0,get:function(){return Poe.default}});Object.defineProperty(k,"eachWeekendOfYear",{enumerable:!0,get:function(){return Aoe.default}});Object.defineProperty(k,"eachYearOfInterval",{enumerable:!0,get:function(){return Doe.default}});Object.defineProperty(k,"endOfDay",{enumerable:!0,get:function(){return Roe.default}});Object.defineProperty(k,"endOfDecade",{enumerable:!0,get:function(){return Coe.default}});Object.defineProperty(k,"endOfHour",{enumerable:!0,get:function(){return Ooe.default}});Object.defineProperty(k,"endOfISOWeek",{enumerable:!0,get:function(){return Ioe.default}});Object.defineProperty(k,"endOfISOWeekYear",{enumerable:!0,get:function(){return Loe.default}});Object.defineProperty(k,"endOfMinute",{enumerable:!0,get:function(){return qoe.default}});Object.defineProperty(k,"endOfMonth",{enumerable:!0,get:function(){return Noe.default}});Object.defineProperty(k,"endOfQuarter",{enumerable:!0,get:function(){return koe.default}});Object.defineProperty(k,"endOfSecond",{enumerable:!0,get:function(){return Foe.default}});Object.defineProperty(k,"endOfToday",{enumerable:!0,get:function(){return Uoe.default}});Object.defineProperty(k,"endOfTomorrow",{enumerable:!0,get:function(){return Boe.default}});Object.defineProperty(k,"endOfWeek",{enumerable:!0,get:function(){return zoe.default}});Object.defineProperty(k,"endOfYear",{enumerable:!0,get:function(){return Hoe.default}});Object.defineProperty(k,"endOfYesterday",{enumerable:!0,get:function(){return Woe.default}});Object.defineProperty(k,"format",{enumerable:!0,get:function(){return Voe.default}});Object.defineProperty(k,"formatDistance",{enumerable:!0,get:function(){return Goe.default}});Object.defineProperty(k,"formatDistanceStrict",{enumerable:!0,get:function(){return joe.default}});Object.defineProperty(k,"formatDistanceToNow",{enumerable:!0,get:function(){return Yoe.default}});Object.defineProperty(k,"formatDistanceToNowStrict",{enumerable:!0,get:function(){return Xoe.default}});Object.defineProperty(k,"formatDuration",{enumerable:!0,get:function(){return $oe.default}});Object.defineProperty(k,"formatISO",{enumerable:!0,get:function(){return Zoe.default}});Object.defineProperty(k,"formatISO9075",{enumerable:!0,get:function(){return Joe.default}});Object.defineProperty(k,"formatISODuration",{enumerable:!0,get:function(){return Koe.default}});Object.defineProperty(k,"formatRFC3339",{enumerable:!0,get:function(){return Qoe.default}});Object.defineProperty(k,"formatRFC7231",{enumerable:!0,get:function(){return eue.default}});Object.defineProperty(k,"formatRelative",{enumerable:!0,get:function(){return tue.default}});Object.defineProperty(k,"fromUnixTime",{enumerable:!0,get:function(){return nue.default}});Object.defineProperty(k,"getDate",{enumerable:!0,get:function(){return iue.default}});Object.defineProperty(k,"getDay",{enumerable:!0,get:function(){return rue.default}});Object.defineProperty(k,"getDayOfYear",{enumerable:!0,get:function(){return sue.default}});Object.defineProperty(k,"getDaysInMonth",{enumerable:!0,get:function(){return aue.default}});Object.defineProperty(k,"getDaysInYear",{enumerable:!0,get:function(){return oue.default}});Object.defineProperty(k,"getDecade",{enumerable:!0,get:function(){return uue.default}});Object.defineProperty(k,"getDefaultOptions",{enumerable:!0,get:function(){return lue.default}});Object.defineProperty(k,"getHours",{enumerable:!0,get:function(){return cue.default}});Object.defineProperty(k,"getISODay",{enumerable:!0,get:function(){return due.default}});Object.defineProperty(k,"getISOWeek",{enumerable:!0,get:function(){return fue.default}});Object.defineProperty(k,"getISOWeekYear",{enumerable:!0,get:function(){return hue.default}});Object.defineProperty(k,"getISOWeeksInYear",{enumerable:!0,get:function(){return pue.default}});Object.defineProperty(k,"getMilliseconds",{enumerable:!0,get:function(){return mue.default}});Object.defineProperty(k,"getMinutes",{enumerable:!0,get:function(){return gue.default}});Object.defineProperty(k,"getMonth",{enumerable:!0,get:function(){return vue.default}});Object.defineProperty(k,"getOverlappingDaysInIntervals",{enumerable:!0,get:function(){return _ue.default}});Object.defineProperty(k,"getQuarter",{enumerable:!0,get:function(){return xue.default}});Object.defineProperty(k,"getSeconds",{enumerable:!0,get:function(){return yue.default}});Object.defineProperty(k,"getTime",{enumerable:!0,get:function(){return bue.default}});Object.defineProperty(k,"getUnixTime",{enumerable:!0,get:function(){return Mue.default}});Object.defineProperty(k,"getWeek",{enumerable:!0,get:function(){return Sue.default}});Object.defineProperty(k,"getWeekOfMonth",{enumerable:!0,get:function(){return wue.default}});Object.defineProperty(k,"getWeekYear",{enumerable:!0,get:function(){return Tue.default}});Object.defineProperty(k,"getWeeksInMonth",{enumerable:!0,get:function(){return Eue.default}});Object.defineProperty(k,"getYear",{enumerable:!0,get:function(){return Pue.default}});Object.defineProperty(k,"hoursToMilliseconds",{enumerable:!0,get:function(){return Aue.default}});Object.defineProperty(k,"hoursToMinutes",{enumerable:!0,get:function(){return Due.default}});Object.defineProperty(k,"hoursToSeconds",{enumerable:!0,get:function(){return Rue.default}});Object.defineProperty(k,"intervalToDuration",{enumerable:!0,get:function(){return Cue.default}});Object.defineProperty(k,"intlFormat",{enumerable:!0,get:function(){return Oue.default}});Object.defineProperty(k,"intlFormatDistance",{enumerable:!0,get:function(){return Iue.default}});Object.defineProperty(k,"isAfter",{enumerable:!0,get:function(){return Lue.default}});Object.defineProperty(k,"isBefore",{enumerable:!0,get:function(){return que.default}});Object.defineProperty(k,"isDate",{enumerable:!0,get:function(){return Nue.default}});Object.defineProperty(k,"isEqual",{enumerable:!0,get:function(){return kue.default}});Object.defineProperty(k,"isExists",{enumerable:!0,get:function(){return Fue.default}});Object.defineProperty(k,"isFirstDayOfMonth",{enumerable:!0,get:function(){return Uue.default}});Object.defineProperty(k,"isFriday",{enumerable:!0,get:function(){return Bue.default}});Object.defineProperty(k,"isFuture",{enumerable:!0,get:function(){return zue.default}});Object.defineProperty(k,"isLastDayOfMonth",{enumerable:!0,get:function(){return Hue.default}});Object.defineProperty(k,"isLeapYear",{enumerable:!0,get:function(){return Wue.default}});Object.defineProperty(k,"isMatch",{enumerable:!0,get:function(){return Vue.default}});Object.defineProperty(k,"isMonday",{enumerable:!0,get:function(){return Gue.default}});Object.defineProperty(k,"isPast",{enumerable:!0,get:function(){return jue.default}});Object.defineProperty(k,"isSameDay",{enumerable:!0,get:function(){return Yue.default}});Object.defineProperty(k,"isSameHour",{enumerable:!0,get:function(){return Xue.default}});Object.defineProperty(k,"isSameISOWeek",{enumerable:!0,get:function(){return $ue.default}});Object.defineProperty(k,"isSameISOWeekYear",{enumerable:!0,get:function(){return Zue.default}});Object.defineProperty(k,"isSameMinute",{enumerable:!0,get:function(){return Jue.default}});Object.defineProperty(k,"isSameMonth",{enumerable:!0,get:function(){return Kue.default}});Object.defineProperty(k,"isSameQuarter",{enumerable:!0,get:function(){return Que.default}});Object.defineProperty(k,"isSameSecond",{enumerable:!0,get:function(){return ele.default}});Object.defineProperty(k,"isSameWeek",{enumerable:!0,get:function(){return tle.default}});Object.defineProperty(k,"isSameYear",{enumerable:!0,get:function(){return nle.default}});Object.defineProperty(k,"isSaturday",{enumerable:!0,get:function(){return ile.default}});Object.defineProperty(k,"isSunday",{enumerable:!0,get:function(){return rle.default}});Object.defineProperty(k,"isThisHour",{enumerable:!0,get:function(){return sle.default}});Object.defineProperty(k,"isThisISOWeek",{enumerable:!0,get:function(){return ale.default}});Object.defineProperty(k,"isThisMinute",{enumerable:!0,get:function(){return ole.default}});Object.defineProperty(k,"isThisMonth",{enumerable:!0,get:function(){return ule.default}});Object.defineProperty(k,"isThisQuarter",{enumerable:!0,get:function(){return lle.default}});Object.defineProperty(k,"isThisSecond",{enumerable:!0,get:function(){return cle.default}});Object.defineProperty(k,"isThisWeek",{enumerable:!0,get:function(){return dle.default}});Object.defineProperty(k,"isThisYear",{enumerable:!0,get:function(){return fle.default}});Object.defineProperty(k,"isThursday",{enumerable:!0,get:function(){return hle.default}});Object.defineProperty(k,"isToday",{enumerable:!0,get:function(){return ple.default}});Object.defineProperty(k,"isTomorrow",{enumerable:!0,get:function(){return mle.default}});Object.defineProperty(k,"isTuesday",{enumerable:!0,get:function(){return gle.default}});Object.defineProperty(k,"isValid",{enumerable:!0,get:function(){return vle.default}});Object.defineProperty(k,"isWednesday",{enumerable:!0,get:function(){return _le.default}});Object.defineProperty(k,"isWeekend",{enumerable:!0,get:function(){return xle.default}});Object.defineProperty(k,"isWithinInterval",{enumerable:!0,get:function(){return yle.default}});Object.defineProperty(k,"isYesterday",{enumerable:!0,get:function(){return ble.default}});Object.defineProperty(k,"lastDayOfDecade",{enumerable:!0,get:function(){return Mle.default}});Object.defineProperty(k,"lastDayOfISOWeek",{enumerable:!0,get:function(){return Sle.default}});Object.defineProperty(k,"lastDayOfISOWeekYear",{enumerable:!0,get:function(){return wle.default}});Object.defineProperty(k,"lastDayOfMonth",{enumerable:!0,get:function(){return Tle.default}});Object.defineProperty(k,"lastDayOfQuarter",{enumerable:!0,get:function(){return Ele.default}});Object.defineProperty(k,"lastDayOfWeek",{enumerable:!0,get:function(){return Ple.default}});Object.defineProperty(k,"lastDayOfYear",{enumerable:!0,get:function(){return Ale.default}});Object.defineProperty(k,"lightFormat",{enumerable:!0,get:function(){return Dle.default}});Object.defineProperty(k,"max",{enumerable:!0,get:function(){return Rle.default}});Object.defineProperty(k,"milliseconds",{enumerable:!0,get:function(){return Cle.default}});Object.defineProperty(k,"millisecondsToHours",{enumerable:!0,get:function(){return Ole.default}});Object.defineProperty(k,"millisecondsToMinutes",{enumerable:!0,get:function(){return Ile.default}});Object.defineProperty(k,"millisecondsToSeconds",{enumerable:!0,get:function(){return Lle.default}});Object.defineProperty(k,"min",{enumerable:!0,get:function(){return qle.default}});Object.defineProperty(k,"minutesToHours",{enumerable:!0,get:function(){return Nle.default}});Object.defineProperty(k,"minutesToMilliseconds",{enumerable:!0,get:function(){return kle.default}});Object.defineProperty(k,"minutesToSeconds",{enumerable:!0,get:function(){return Fle.default}});Object.defineProperty(k,"monthsToQuarters",{enumerable:!0,get:function(){return Ule.default}});Object.defineProperty(k,"monthsToYears",{enumerable:!0,get:function(){return Ble.default}});Object.defineProperty(k,"nextDay",{enumerable:!0,get:function(){return zle.default}});Object.defineProperty(k,"nextFriday",{enumerable:!0,get:function(){return Hle.default}});Object.defineProperty(k,"nextMonday",{enumerable:!0,get:function(){return Wle.default}});Object.defineProperty(k,"nextSaturday",{enumerable:!0,get:function(){return Vle.default}});Object.defineProperty(k,"nextSunday",{enumerable:!0,get:function(){return Gle.default}});Object.defineProperty(k,"nextThursday",{enumerable:!0,get:function(){return jle.default}});Object.defineProperty(k,"nextTuesday",{enumerable:!0,get:function(){return Yle.default}});Object.defineProperty(k,"nextWednesday",{enumerable:!0,get:function(){return Xle.default}});Object.defineProperty(k,"parse",{enumerable:!0,get:function(){return $le.default}});Object.defineProperty(k,"parseISO",{enumerable:!0,get:function(){return Zle.default}});Object.defineProperty(k,"parseJSON",{enumerable:!0,get:function(){return Jle.default}});Object.defineProperty(k,"previousDay",{enumerable:!0,get:function(){return Kle.default}});Object.defineProperty(k,"previousFriday",{enumerable:!0,get:function(){return Qle.default}});Object.defineProperty(k,"previousMonday",{enumerable:!0,get:function(){return ece.default}});Object.defineProperty(k,"previousSaturday",{enumerable:!0,get:function(){return tce.default}});Object.defineProperty(k,"previousSunday",{enumerable:!0,get:function(){return nce.default}});Object.defineProperty(k,"previousThursday",{enumerable:!0,get:function(){return ice.default}});Object.defineProperty(k,"previousTuesday",{enumerable:!0,get:function(){return rce.default}});Object.defineProperty(k,"previousWednesday",{enumerable:!0,get:function(){return sce.default}});Object.defineProperty(k,"quartersToMonths",{enumerable:!0,get:function(){return ace.default}});Object.defineProperty(k,"quartersToYears",{enumerable:!0,get:function(){return oce.default}});Object.defineProperty(k,"roundToNearestMinutes",{enumerable:!0,get:function(){return uce.default}});Object.defineProperty(k,"secondsToHours",{enumerable:!0,get:function(){return lce.default}});Object.defineProperty(k,"secondsToMilliseconds",{enumerable:!0,get:function(){return cce.default}});Object.defineProperty(k,"secondsToMinutes",{enumerable:!0,get:function(){return dce.default}});Object.defineProperty(k,"set",{enumerable:!0,get:function(){return fce.default}});Object.defineProperty(k,"setDate",{enumerable:!0,get:function(){return hce.default}});Object.defineProperty(k,"setDay",{enumerable:!0,get:function(){return pce.default}});Object.defineProperty(k,"setDayOfYear",{enumerable:!0,get:function(){return mce.default}});Object.defineProperty(k,"setDefaultOptions",{enumerable:!0,get:function(){return gce.default}});Object.defineProperty(k,"setHours",{enumerable:!0,get:function(){return vce.default}});Object.defineProperty(k,"setISODay",{enumerable:!0,get:function(){return _ce.default}});Object.defineProperty(k,"setISOWeek",{enumerable:!0,get:function(){return xce.default}});Object.defineProperty(k,"setISOWeekYear",{enumerable:!0,get:function(){return yce.default}});Object.defineProperty(k,"setMilliseconds",{enumerable:!0,get:function(){return bce.default}});Object.defineProperty(k,"setMinutes",{enumerable:!0,get:function(){return Mce.default}});Object.defineProperty(k,"setMonth",{enumerable:!0,get:function(){return Sce.default}});Object.defineProperty(k,"setQuarter",{enumerable:!0,get:function(){return wce.default}});Object.defineProperty(k,"setSeconds",{enumerable:!0,get:function(){return Tce.default}});Object.defineProperty(k,"setWeek",{enumerable:!0,get:function(){return Ece.default}});Object.defineProperty(k,"setWeekYear",{enumerable:!0,get:function(){return Pce.default}});Object.defineProperty(k,"setYear",{enumerable:!0,get:function(){return Ace.default}});Object.defineProperty(k,"startOfDay",{enumerable:!0,get:function(){return Dce.default}});Object.defineProperty(k,"startOfDecade",{enumerable:!0,get:function(){return Rce.default}});Object.defineProperty(k,"startOfHour",{enumerable:!0,get:function(){return Cce.default}});Object.defineProperty(k,"startOfISOWeek",{enumerable:!0,get:function(){return Oce.default}});Object.defineProperty(k,"startOfISOWeekYear",{enumerable:!0,get:function(){return Ice.default}});Object.defineProperty(k,"startOfMinute",{enumerable:!0,get:function(){return Lce.default}});Object.defineProperty(k,"startOfMonth",{enumerable:!0,get:function(){return qce.default}});Object.defineProperty(k,"startOfQuarter",{enumerable:!0,get:function(){return Nce.default}});Object.defineProperty(k,"startOfSecond",{enumerable:!0,get:function(){return kce.default}});Object.defineProperty(k,"startOfToday",{enumerable:!0,get:function(){return Fce.default}});Object.defineProperty(k,"startOfTomorrow",{enumerable:!0,get:function(){return Uce.default}});Object.defineProperty(k,"startOfWeek",{enumerable:!0,get:function(){return Bce.default}});Object.defineProperty(k,"startOfWeekYear",{enumerable:!0,get:function(){return zce.default}});Object.defineProperty(k,"startOfYear",{enumerable:!0,get:function(){return Hce.default}});Object.defineProperty(k,"startOfYesterday",{enumerable:!0,get:function(){return Wce.default}});Object.defineProperty(k,"sub",{enumerable:!0,get:function(){return Vce.default}});Object.defineProperty(k,"subBusinessDays",{enumerable:!0,get:function(){return Gce.default}});Object.defineProperty(k,"subDays",{enumerable:!0,get:function(){return jce.default}});Object.defineProperty(k,"subHours",{enumerable:!0,get:function(){return Yce.default}});Object.defineProperty(k,"subISOWeekYears",{enumerable:!0,get:function(){return Xce.default}});Object.defineProperty(k,"subMilliseconds",{enumerable:!0,get:function(){return $ce.default}});Object.defineProperty(k,"subMinutes",{enumerable:!0,get:function(){return Zce.default}});Object.defineProperty(k,"subMonths",{enumerable:!0,get:function(){return Jce.default}});Object.defineProperty(k,"subQuarters",{enumerable:!0,get:function(){return Kce.default}});Object.defineProperty(k,"subSeconds",{enumerable:!0,get:function(){return Qce.default}});Object.defineProperty(k,"subWeeks",{enumerable:!0,get:function(){return ede.default}});Object.defineProperty(k,"subYears",{enumerable:!0,get:function(){return tde.default}});Object.defineProperty(k,"toDate",{enumerable:!0,get:function(){return nde.default}});Object.defineProperty(k,"weeksToDays",{enumerable:!0,get:function(){return ide.default}});Object.defineProperty(k,"yearsToMonths",{enumerable:!0,get:function(){return rde.default}});Object.defineProperty(k,"yearsToQuarters",{enumerable:!0,get:function(){return sde.default}});var kae=U(D0()),Fae=U(O0()),Uae=U(Zn()),Bae=U(Cc()),zae=U(B0()),Hae=U(ea()),Wae=U(Vc()),Vae=U(Js()),Gae=U(jc()),jae=U(V0()),Yae=U(jo()),Xae=U(Y0()),$ae=U(ZT()),Zae=U(e1()),Jae=U(r1()),Kae=U(u1()),Qae=U(Xi()),eoe=U(m1()),toe=U(M1()),noe=U(I1()),ioe=U(vi()),roe=U(nx()),soe=U(B1()),aoe=U(hd()),ooe=U(ax()),uoe=U(vd()),loe=U(xd()),coe=U(bd()),doe=U(wd()),foe=U(pE()),hoe=U(Yo()),poe=U(Ad()),moe=U(Zo()),goe=U(TE()),voe=U(Jo()),_oe=U(RE()),xoe=U(mx()),yoe=U(vx()),boe=U(kE()),Moe=U(zE()),Soe=U(VE()),woe=U($E()),Toe=U(KE()),Eoe=U(nf()),Poe=U(iP()),Aoe=U(lP()),Doe=U(fP()),Roe=U(Rd()),Coe=U(mP()),Ooe=U(_P()),Ioe=U(MP()),Loe=U(wP()),qoe=U(PP()),Noe=U(Od()),koe=U(RP()),Foe=U(IP()),Uoe=U(qP()),Boe=U(kP()),zoe=U(Px()),Hoe=U(wx()),Woe=U(UP()),Voe=U(Bx()),Goe=U(Wx()),joe=U(Vx()),Yoe=U(XA()),Xoe=U(JA()),$oe=U(QA()),Zoe=U(tD()),Joe=U(iD()),Koe=U(aD()),Qoe=U(uD()),eue=U(cD()),tue=U(mD()),nue=U(vD()),iue=U($x()),rue=U(hu()),sue=U(SD()),aue=U(Zx()),oue=U(DD()),uue=U(OD()),lue=U(LD()),cue=U(kD()),due=U(Qx()),fue=U(ey()),hue=U(Ur()),pue=U(WD()),mue=U(jD()),gue=U($D()),vue=U(KD()),_ue=U(tR()),xue=U(rx()),yue=U(rR()),bue=U(ny()),Mue=U(lR()),Sue=U(ry()),wue=U(mR()),Tue=U(iy()),Eue=U(xR()),Pue=U(MR()),Aue=U(wR()),Due=U(ER()),Rue=U(AR()),Cue=U(CR()),Oue=U(IR()),Iue=U(BR()),Lue=U(VR()),que=U(XR()),Nue=U(ex()),kue=U(KR()),Fue=U(e2()),Uue=U(i2()),Bue=U(a2()),zue=U(l2()),Hue=U(fx()),Wue=U(Jx()),Vue=U(IO()),Gue=U(NO()),jue=U(UO()),Yue=U(na()),Xue=U(Iy()),$ue=U(Ly()),Zue=U(QO()),Jue=U(qy()),Kue=U(Ny()),Que=U(ky()),ele=U(Uy()),tle=U(Qp()),nle=U(By()),ile=U(R0()),rle=U(Ec()),sle=U(xI()),ale=U(MI()),ole=U(TI()),ule=U(AI()),lle=U(CI()),cle=U(LI()),dle=U(kI()),fle=U(BI()),hle=U(WI()),ple=U(jI()),mle=U(XI()),gle=U(JI()),vle=U(_i()),_le=U(eL()),xle=U(Wo()),yle=U(iL()),ble=U(aL()),Mle=U(lL()),Sle=U(hL()),wle=U(mL()),Tle=U(sy()),Ele=U(_L()),Ple=U(jy()),Ale=U(bL()),Dle=U(SL()),Rle=U($0()),Cle=U(EL()),Ole=U(AL()),Ile=U(RL()),Lle=U(OL()),qle=U(J0()),Nle=U(LL()),kle=U(NL()),Fle=U(FL()),Ule=U(BL()),Ble=U(HL()),zle=U(wi()),Hle=U(jL()),Wle=U($L()),Vle=U(KL()),Gle=U(tq()),jle=U(rq()),Yle=U(oq()),Xle=U(cq()),$le=U(Ry()),Zle=U(pq()),Jle=U(vq()),Kle=U(Ti()),Qle=U(bq()),ece=U(wq()),tce=U(Pq()),nce=U(Rq()),ice=U(Iq()),rce=U(Nq()),sce=U(Uq()),ace=U(zq()),oce=U(Wq()),uce=U(jq()),lce=U(Xq()),cce=U(Zq()),dce=U(Kq()),fce=U(tN()),hce=U(iN()),pce=U(aN()),mce=U(uN()),gce=U(dN()),vce=U(hN()),_ce=U(mN()),xce=U(vN()),yce=U(U0()),bce=U(xN()),Mce=U(bN()),Sce=U(pg()),wce=U(SN()),Tce=U(TN()),Ece=U(PN()),Pce=U(CN()),Ace=U(IN()),Dce=U(Vo()),Rce=U(NN()),Cce=U(Oy()),Oce=U(Yi()),Ice=U(ta()),Lce=U(Vd()),qce=U(Ko()),Nce=U($d()),kce=U(Fy()),Fce=U(FN()),Uce=U(BN()),Bce=U(gi()),zce=U(kh()),Hce=U(lf()),Wce=U(HN()),Vce=U(GN()),Gce=U(YN()),jce=U(Nu()),Yce=U($N()),Xce=U(dx()),$ce=U(ia()),Zce=U(JN()),Jce=U(sb()),Kce=U(QN()),Qce=U(tk()),ede=U(ik()),tde=U(sk()),nde=U(ee()),ide=U(ok()),rde=U(lk()),sde=U(dk()),hb=St();Object.keys(hb).forEach(function(i){i==="default"||i==="__esModule"||Object.prototype.hasOwnProperty.call(Nae,i)||i in k&&k[i]===hb[i]||Object.defineProperty(k,i,{enumerable:!0,get:function(){return hb[i]}})})});var gb=E((pb,mb)=>{(function(i,e){typeof pb=="object"&&typeof mb!="undefined"?mb.exports=e():typeof define=="function"&&define.amd?define(e):(i=typeof globalThis!="undefined"?globalThis:i||self,i["@kurkle/color"]=e())})(pb,function(){"use strict";function i(L){return L+.5|0}let e=(L,N,Q)=>Math.max(Math.min(L,Q),N);function t(L){return e(i(L*2.55),0,255)}function n(L){return e(i(L/2.55),0,100)}function r(L){return e(i(L*255),0,255)}function s(L){return e(i(L/2.55)/100,0,1)}function a(L){return e(i(L*100),0,100)}let o={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},u=[..."0123456789ABCDEF"],l=L=>u[L&15],c=L=>u[(L&240)>>4]+u[L&15],d=L=>(L&240)>>4===(L&15),f=L=>d(L.r)&&d(L.g)&&d(L.b)&&d(L.a);function h(L){var N=L.length,Q;return L[0]==="#"&&(N===4||N===5?Q={r:255&o[L[1]]*17,g:255&o[L[2]]*17,b:255&o[L[3]]*17,a:N===5?o[L[4]]*17:255}:(N===7||N===9)&&(Q={r:o[L[1]]<<4|o[L[2]],g:o[L[3]]<<4|o[L[4]],b:o[L[5]]<<4|o[L[6]],a:N===9?o[L[7]]<<4|o[L[8]]:255})),Q}let p=(L,N)=>L<255?N(L):"";function v(L){var N=f(L)?l:c;return L?"#"+N(L.r)+N(L.g)+N(L.b)+p(L.a,N):void 0}let g=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function m(L,N,Q){let $=N*Math.min(Q,1-Q),pe=(ye,Ee=(ye+L/30)%12)=>Q-$*Math.max(Math.min(Ee-3,9-Ee,1),-1);return[pe(0),pe(8),pe(4)]}function y(L,N,Q){let $=(pe,ye=(pe+L/60)%6)=>Q-Q*N*Math.max(Math.min(ye,4-ye,1),0);return[$(5),$(3),$(1)]}function _(L,N,Q){let $=m(L,1,.5),pe;for(N+Q>1&&(pe=1/(N+Q),N*=pe,Q*=pe),pe=0;pe<3;pe++)$[pe]*=1-N-Q,$[pe]+=N;return $}function b(L,N,Q,$,pe){return L===pe?(N-Q)/$+(N<Q?6:0):N===pe?(Q-L)/$+2:(L-N)/$+4}function M(L){let Q=L.r/255,$=L.g/255,pe=L.b/255,ye=Math.max(Q,$,pe),Ee=Math.min(Q,$,pe),ze=(ye+Ee)/2,Xe,q,D;return ye!==Ee&&(D=ye-Ee,q=ze>.5?D/(2-ye-Ee):D/(ye+Ee),Xe=b(Q,$,pe,D,ye),Xe=Xe*60+.5),[Xe|0,q||0,ze]}function T(L,N,Q,$){return(Array.isArray(N)?L(N[0],N[1],N[2]):L(N,Q,$)).map(r)}function P(L,N,Q){return T(m,L,N,Q)}function C(L,N,Q){return T(_,L,N,Q)}function S(L,N,Q){return T(y,L,N,Q)}function A(L){return(L%360+360)%360}function z(L){let N=g.exec(L),Q=255,$;if(!N)return;N[5]!==$&&(Q=N[6]?t(+N[5]):r(+N[5]));let pe=A(+N[2]),ye=+N[3]/100,Ee=+N[4]/100;return N[1]==="hwb"?$=C(pe,ye,Ee):N[1]==="hsv"?$=S(pe,ye,Ee):$=P(pe,ye,Ee),{r:$[0],g:$[1],b:$[2],a:Q}}function j(L,N){var Q=M(L);Q[0]=A(Q[0]+N),Q=P(Q),L.r=Q[0],L.g=Q[1],L.b=Q[2]}function W(L){if(!L)return;let N=M(L),Q=N[0],$=a(N[1]),pe=a(N[2]);return L.a<255?`hsla(${Q}, ${$}%, ${pe}%, ${s(L.a)})`:`hsl(${Q}, ${$}%, ${pe}%)`}let G={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},V={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function J(){let L={},N=Object.keys(V),Q=Object.keys(G),$,pe,ye,Ee,ze;for($=0;$<N.length;$++){for(Ee=ze=N[$],pe=0;pe<Q.length;pe++)ye=Q[pe],ze=ze.replace(ye,G[ye]);ye=parseInt(V[Ee],16),L[ze]=[ye>>16&255,ye>>8&255,ye&255]}return L}let Z;function ne(L){Z||(Z=J(),Z.transparent=[0,0,0,0]);let N=Z[L.toLowerCase()];return N&&{r:N[0],g:N[1],b:N[2],a:N.length===4?N[3]:255}}let re=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ce(L){let N=re.exec(L),Q=255,$,pe,ye;if(!!N){if(N[7]!==$){let Ee=+N[7];Q=N[8]?t(Ee):e(Ee*255,0,255)}return $=+N[1],pe=+N[3],ye=+N[5],$=255&(N[2]?t($):e($,0,255)),pe=255&(N[4]?t(pe):e(pe,0,255)),ye=255&(N[6]?t(ye):e(ye,0,255)),{r:$,g:pe,b:ye,a:Q}}}function Te(L){return L&&(L.a<255?`rgba(${L.r}, ${L.g}, ${L.b}, ${s(L.a)})`:`rgb(${L.r}, ${L.g}, ${L.b})`)}let xe=L=>L<=.0031308?L*12.92:Math.pow(L,1/2.4)*1.055-.055,K=L=>L<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4);function ue(L,N,Q){let $=K(s(L.r)),pe=K(s(L.g)),ye=K(s(L.b));return{r:r(xe($+Q*(K(s(N.r))-$))),g:r(xe(pe+Q*(K(s(N.g))-pe))),b:r(xe(ye+Q*(K(s(N.b))-ye))),a:L.a+Q*(N.a-L.a)}}function _e(L,N,Q){if(L){let $=M(L);$[N]=Math.max(0,Math.min($[N]+$[N]*Q,N===0?360:1)),$=P($),L.r=$[0],L.g=$[1],L.b=$[2]}}function be(L,N){return L&&Object.assign(N||{},L)}function B(L){var N={r:0,g:0,b:0,a:255};return Array.isArray(L)?L.length>=3&&(N={r:L[0],g:L[1],b:L[2],a:255},L.length>3&&(N.a=r(L[3]))):(N=be(L,{r:0,g:0,b:0,a:1}),N.a=r(N.a)),N}function De(L){return L.charAt(0)==="r"?ce(L):z(L)}class Se{constructor(N){if(N instanceof Se)return N;let Q=typeof N,$;Q==="object"?$=B(N):Q==="string"&&($=h(N)||ne(N)||De(N)),this._rgb=$,this._valid=!!$}get valid(){return this._valid}get rgb(){var N=be(this._rgb);return N&&(N.a=s(N.a)),N}set rgb(N){this._rgb=B(N)}rgbString(){return this._valid?Te(this._rgb):void 0}hexString(){return this._valid?v(this._rgb):void 0}hslString(){return this._valid?W(this._rgb):void 0}mix(N,Q){if(N){let $=this.rgb,pe=N.rgb,ye,Ee=Q===ye?.5:Q,ze=2*Ee-1,Xe=$.a-pe.a,q=((ze*Xe===-1?ze:(ze+Xe)/(1+ze*Xe))+1)/2;ye=1-q,$.r=255&q*$.r+ye*pe.r+.5,$.g=255&q*$.g+ye*pe.g+.5,$.b=255&q*$.b+ye*pe.b+.5,$.a=Ee*$.a+(1-Ee)*pe.a,this.rgb=$}return this}interpolate(N,Q){return N&&(this._rgb=ue(this._rgb,N._rgb,Q)),this}clone(){return new Se(this.rgb)}alpha(N){return this._rgb.a=r(N),this}clearer(N){let Q=this._rgb;return Q.a*=1-N,this}greyscale(){let N=this._rgb,Q=i(N.r*.3+N.g*.59+N.b*.11);return N.r=N.g=N.b=Q,this}opaquer(N){let Q=this._rgb;return Q.a*=1+N,this}negate(){let N=this._rgb;return N.r=255-N.r,N.g=255-N.g,N.b=255-N.b,this}lighten(N){return _e(this._rgb,2,N),this}darken(N){return _e(this._rgb,2,-N),this}saturate(N){return _e(this._rgb,1,N),this}desaturate(N){return _e(this._rgb,1,-N),this}rotate(N){return j(this._rgb,N),this}}function he(L){return new Se(L)}var Ce=Object.freeze({__proto__:null,Color:Se,default:he,round:i,lim:e,p2b:t,b2p:n,n2b:r,b2n:s,n2p:a,hexParse:h,hexString:v,rgb2hsl:M,hsl2rgb:P,hwb2rgb:C,hsv2rgb:S,hueParse:z,rotate:j,hslString:W,nameParse:ne,rgbParse:ce,rgbString:Te}),fe=Object.assign(he,Ce);return fe})});var rF=E(ie=>{"use strict";var Mk=gb();function ade(){}var ode=(()=>{let i=0;return()=>i++})();function Gu(i){return i===null||typeof i=="undefined"}function En(i){if(Array.isArray&&Array.isArray(i))return!0;let e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function nn(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function wb(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function ude(i,e){return wb(i)?i:e}function ar(i,e){return typeof i=="undefined"?e:i}var lde=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/e,Sk=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function cde(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function dde(i,e,t,n){let r,s,a;if(En(i))if(s=i.length,n)for(r=s-1;r>=0;r--)e.call(t,i[r],r);else for(r=0;r<s;r++)e.call(t,i[r],r);else if(nn(i))for(a=Object.keys(i),s=a.length,r=0;r<s;r++)e.call(t,i[a[r]],a[r])}function fde(i,e){let t,n,r,s;if(!i||!e||i.length!==e.length)return!1;for(t=0,n=i.length;t<n;++t)if(r=i[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function ju(i){if(En(i))return i.map(ju);if(nn(i)){let e=Object.create(null),t=Object.keys(i),n=t.length,r=0;for(;r<n;++r)e[t[r]]=ju(i[t[r]]);return e}return i}function wk(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Tk(i,e,t,n){if(!wk(i))return;let r=e[i],s=t[i];nn(r)&&nn(s)?Yu(r,s,n):e[i]=ju(s)}function Yu(i,e,t){let n=En(e)?e:[e],r=n.length;if(!nn(i))return i;t=t||{};let s=t.merger||Tk,a;for(let o=0;o<r;++o){if(a=n[o],!nn(a))continue;let u=Object.keys(a);for(let l=0,c=u.length;l<c;++l)s(u[l],i,a,t)}return i}function Ek(i,e){return Yu(i,e,{merger:Pk})}function Pk(i,e,t){if(!wk(i))return;let n=e[i],r=t[i];nn(n)&&nn(r)?Ek(n,r):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=ju(r))}function hde(i,e,t,n){e!==void 0&&console.warn(i+': "'+t+'" is deprecated. Please use "'+n+'" instead')}var hk={"":i=>i,x:i=>i.x,y:i=>i.y};function Ak(i){let e=i.split("."),t=[],n="";for(let r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function pde(i){let e=Ak(i);return t=>{for(let n of e){if(n==="")break;t=t&&t[n]}return t}}function Tb(i,e){return(hk[e]||(hk[e]=pde(e)))(i)}function Eb(i){return i.charAt(0).toUpperCase()+i.slice(1)}var mde=i=>typeof i!="undefined",Xu=i=>typeof i=="function",gde=(i,e)=>{if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0};function vde(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}var Xt=Math.PI,Fn=2*Xt,Dk=Fn+Xt,$u=Number.POSITIVE_INFINITY,Rk=Xt/180,kn=Xt/2,sr=Xt/4,_b=Xt*2/3,tv=Math.log10,xb=Math.sign;function Pb(i,e,t){return Math.abs(i-e)<t}function _de(i){let e=Math.round(i);i=Pb(i,e,i/1e3)?e:i;let t=Math.pow(10,Math.floor(tv(i))),n=i/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function xde(i){let e=[],t=Math.sqrt(i),n;for(n=1;n<t;n++)i%n===0&&(e.push(n),e.push(i/n));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function yde(i){return!isNaN(parseFloat(i))&&isFinite(i)}function bde(i,e){let t=Math.round(i);return t-e<=i&&t+e>=i}function Mde(i,e,t){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Sde(i){return i*(Xt/180)}function wde(i){return i*(180/Xt)}function Tde(i){if(!wb(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function Ede(i,e){let t=e.x-i.x,n=e.y-i.y,r=Math.sqrt(t*t+n*n),s=Math.atan2(n,t);return s<-.5*Xt&&(s+=Fn),{angle:s,distance:r}}function yb(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function Ck(i,e){return(i-e+Dk)%Fn-Xt}function Ei(i){return(i%Fn+Fn)%Fn}function Ok(i,e,t,n){let r=Ei(i),s=Ei(e),a=Ei(t),o=Ei(s-r),u=Ei(a-r),l=Ei(r-s),c=Ei(r-a);return r===s||r===a||n&&s===a||o>u&&l<c}function nv(i,e,t){return Math.max(e,Math.min(t,i))}function Pde(i){return nv(i,-32768,32767)}function Ik(i,e,t,n=1e-6){return i>=Math.min(e,t)-n&&i<=Math.max(e,t)+n}function Ab(i,e,t){t=t||(a=>i[a]<e);let n=i.length-1,r=0,s;for(;n-r>1;)s=r+n>>1,t(s)?r=s:n=s;return{lo:r,hi:n}}var Wu=(i,e,t,n)=>Ab(i,t,n?r=>{let s=i[r][e];return s<t||s===t&&i[r+1][e]===t}:r=>i[r][e]<t),Ade=(i,e,t)=>Ab(i,t,n=>i[n][e]>=t);function Dde(i,e,t){let n=0,r=i.length;for(;n<r&&i[n]<e;)n++;for(;r>n&&i[r-1]>t;)r--;return n>0||r<i.length?i.slice(n,r):i}var Lk=["push","pop","shift","splice","unshift"];function Rde(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Lk.forEach(t=>{let n="_onData"+Eb(t),r=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...s){let a=r.apply(this,s);return i._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...s)}),a}})})}function Cde(i,e){let t=i._chartjs;if(!t)return;let n=t.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(Lk.forEach(s=>{delete i[s]}),delete i._chartjs)}function Ode(i){let e=new Set(i);return e.size===i.length?i:Array.from(e)}function Ide(i,e,t){return e+" "+i+"px "+t}var qk=function(){return typeof window=="undefined"?function(i){return i()}:window.requestAnimationFrame}();function Lde(i,e){let t=[],n=!1;return function(...r){t=r,n||(n=!0,qk.call(window,()=>{n=!1,i.apply(e,t)}))}}function qde(i,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(i,e,n)):i.apply(this,n),e}}var Nde=i=>i==="start"?"left":i==="end"?"right":"center",kde=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,Fde=(i,e,t,n)=>i===(n?"left":"right")?t:i==="center"?(e+t)/2:e;function Ude(i,e,t){let n=e.length,r=0,s=n;if(i._sorted){let{iScale:a,_parsed:o}=i,u=a.axis,{min:l,max:c,minDefined:d,maxDefined:f}=a.getUserBounds();d&&(r=nv(Math.min(Wu(o,u,l).lo,t?n:Wu(e,u,a.getPixelForValue(l)).lo),0,n-1)),f?s=nv(Math.max(Wu(o,a.axis,c,!0).hi+1,t?0:Wu(e,u,a.getPixelForValue(c),!0).hi+1),r,n)-r:s=n-r}return{start:r,count:s}}function Bde(i){let{xScale:e,yScale:t,_scaleRanges:n}=i,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return i._scaleRanges=r,!0;let s=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,r),s}var Zg=i=>i===0||i===1,pk=(i,e,t)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*Fn/t)),mk=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*Fn/t)+1,Qg={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*kn)+1,easeOutSine:i=>Math.sin(i*kn),easeInOutSine:i=>-.5*(Math.cos(Xt*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Zg(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Zg(i)?i:pk(i,.075,.3),easeOutElastic:i=>Zg(i)?i:mk(i,.075,.3),easeInOutElastic(i){return Zg(i)?i:i<.5?.5*pk(i*2,.1125,.45):.5+.5*mk(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-Qg.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?Qg.easeInBounce(i*2)*.5:Qg.easeOutBounce(i*2-1)*.5+.5};function rv(i){if(i&&typeof i=="object"){let e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function zde(i){return rv(i)?i:new Mk.Color(i)}function ev(i){return rv(i)?i:new Mk.Color(i).saturate(.5).darken(.1).hexString()}var Hde=["x","y","borderWidth","radius","tension"],Wde=["color","borderColor","backgroundColor"];function Vde(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:Wde},numbers:{type:"number",properties:Hde}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Gde(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var gk=new Map;function jde(i,e){e=e||{};let t=i+JSON.stringify(e),n=gk.get(t);return n||(n=new Intl.NumberFormat(i,e),gk.set(t,n)),n}function Nk(i,e,t){return jde(e,t).format(i)}var kk={values(i){return En(i)?i:""+i},numeric(i,e,t){if(i===0)return"0";let n=this.chart.options.locale,r,s=i;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(r="scientific"),s=Yde(i,t)}let a=tv(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(u,this.options.ticks.format),Nk(i,n,u)},logarithmic(i,e,t){if(i===0)return"0";let n=t[e].significand||i/Math.pow(10,Math.floor(tv(i)));return[1,2,3,5,10,15].includes(n)||e>.8*t.length?kk.numeric.call(this,i,e,t):""}};function Yde(i,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&i!==Math.floor(i)&&(t=i-Math.floor(i)),t}var Fk={formatters:kk};function Xde(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Fk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Uk=Object.create(null),Bk=Object.create(null);function Vu(i,e){if(!e)return i;let t=e.split(".");for(let n=0,r=t.length;n<r;++n){let s=t[n];i=i[s]||(i[s]=Object.create(null))}return i}function vb(i,e,t){return typeof e=="string"?Yu(Vu(i,e),t):Yu(Vu(i,""),e)}var bb=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>ev(r.backgroundColor),this.hoverBorderColor=(n,r)=>ev(r.borderColor),this.hoverColor=(n,r)=>ev(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return vb(this,e,t)}get(e){return Vu(this,e)}describe(e,t){return vb(Bk,e,t)}override(e,t){return vb(Uk,e,t)}route(e,t,n,r){let s=Vu(this,e),a=Vu(this,n),o="_"+t;Object.defineProperties(s,{[o]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let u=this[o],l=a[r];return nn(u)?Object.assign({},l,u):ar(u,l)},set(u){this[o]=u}}})}apply(e){e.forEach(t=>t(this))}},zk=new bb({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Vde,Gde,Xde]);function Hk(i){return!i||Gu(i.size)||Gu(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function Mb(i,e,t,n,r){let s=e[r];return s||(s=e[r]=i.measureText(r).width,t.push(r)),s>n&&(n=s),n}function $de(i,e,t,n){n=n||{};let r=n.data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},s=n.garbageCollect=[],n.font=e),i.save(),i.font=e;let a=0,o=t.length,u,l,c,d,f;for(u=0;u<o;u++)if(d=t[u],d!=null&&!En(d))a=Mb(i,r,s,a,d);else if(En(d))for(l=0,c=d.length;l<c;l++)f=d[l],f!=null&&!En(f)&&(a=Mb(i,r,s,a,f));i.restore();let h=s.length/2;if(h>t.length){for(u=0;u<h;u++)delete r[s[u]];s.splice(0,h)}return a}function Zde(i,e,t){let n=i.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*n)/n+r}function Jde(i,e){e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore()}function Kde(i,e,t,n){Wk(i,e,t,n,null)}function Wk(i,e,t,n,r){let s,a,o,u,l,c,d,f,h=e.pointStyle,p=e.rotation,v=e.radius,g=(p||0)*Rk;if(h&&typeof h=="object"&&(s=h.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){i.save(),i.translate(t,n),i.rotate(g),i.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),i.restore();return}if(!(isNaN(v)||v<=0)){switch(i.beginPath(),h){default:r?i.ellipse(t,n,r/2,v,0,0,Fn):i.arc(t,n,v,0,Fn),i.closePath();break;case"triangle":c=r?r/2:v,i.moveTo(t+Math.sin(g)*c,n-Math.cos(g)*v),g+=_b,i.lineTo(t+Math.sin(g)*c,n-Math.cos(g)*v),g+=_b,i.lineTo(t+Math.sin(g)*c,n-Math.cos(g)*v),i.closePath();break;case"rectRounded":l=v*.516,u=v-l,a=Math.cos(g+sr)*u,d=Math.cos(g+sr)*(r?r/2-l:u),o=Math.sin(g+sr)*u,f=Math.sin(g+sr)*(r?r/2-l:u),i.arc(t-d,n-o,l,g-Xt,g-kn),i.arc(t+f,n-a,l,g-kn,g),i.arc(t+d,n+o,l,g,g+kn),i.arc(t-f,n+a,l,g+kn,g+Xt),i.closePath();break;case"rect":if(!p){u=Math.SQRT1_2*v,c=r?r/2:u,i.rect(t-c,n-u,2*c,2*u);break}g+=sr;case"rectRot":d=Math.cos(g)*(r?r/2:v),a=Math.cos(g)*v,o=Math.sin(g)*v,f=Math.sin(g)*(r?r/2:v),i.moveTo(t-d,n-o),i.lineTo(t+f,n-a),i.lineTo(t+d,n+o),i.lineTo(t-f,n+a),i.closePath();break;case"crossRot":g+=sr;case"cross":d=Math.cos(g)*(r?r/2:v),a=Math.cos(g)*v,o=Math.sin(g)*v,f=Math.sin(g)*(r?r/2:v),i.moveTo(t-d,n-o),i.lineTo(t+d,n+o),i.moveTo(t+f,n-a),i.lineTo(t-f,n+a);break;case"star":d=Math.cos(g)*(r?r/2:v),a=Math.cos(g)*v,o=Math.sin(g)*v,f=Math.sin(g)*(r?r/2:v),i.moveTo(t-d,n-o),i.lineTo(t+d,n+o),i.moveTo(t+f,n-a),i.lineTo(t-f,n+a),g+=sr,d=Math.cos(g)*(r?r/2:v),a=Math.cos(g)*v,o=Math.sin(g)*v,f=Math.sin(g)*(r?r/2:v),i.moveTo(t-d,n-o),i.lineTo(t+d,n+o),i.moveTo(t+f,n-a),i.lineTo(t-f,n+a);break;case"line":a=r?r/2:Math.cos(g)*v,o=Math.sin(g)*v,i.moveTo(t-a,n-o),i.lineTo(t+a,n+o);break;case"dash":i.moveTo(t,n),i.lineTo(t+Math.cos(g)*(r?r/2:v),n+Math.sin(g)*v);break;case!1:i.closePath();break}i.fill(),e.borderWidth>0&&i.stroke()}}function Sb(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function Qde(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function efe(i){i.restore()}function tfe(i,e,t,n,r){if(!e)return i.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;i.lineTo(s,e.y),i.lineTo(s,t.y)}else r==="after"!=!!n?i.lineTo(e.x,t.y):i.lineTo(t.x,e.y);i.lineTo(t.x,t.y)}function nfe(i,e,t,n){if(!e)return i.lineTo(t.x,t.y);i.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function ife(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),Gu(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function rfe(i,e,t,n,r){if(r.strikethrough||r.underline){let s=i.measureText(n),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,u=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,c=r.strikethrough?(u+l)/2:l;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(a,c),i.lineTo(o,c),i.stroke()}}function sfe(i,e){let t=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=t}function afe(i,e,t,n,r,s={}){let a=En(e)?e:[e],o=s.strokeWidth>0&&s.strokeColor!=="",u,l;for(i.save(),i.font=r.string,ife(i,s),u=0;u<a.length;++u)l=a[u],s.backdrop&&sfe(i,s.backdrop),o&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),Gu(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(l,t,n,s.maxWidth)),i.fillText(l,t,n,s.maxWidth),rfe(i,t,n,l,s),n+=Number(r.lineHeight);i.restore()}function ofe(i,e){let{x:t,y:n,w:r,h:s,radius:a}=e;i.arc(t+a.topLeft,n+a.topLeft,a.topLeft,-kn,Xt,!0),i.lineTo(t,n+s-a.bottomLeft),i.arc(t+a.bottomLeft,n+s-a.bottomLeft,a.bottomLeft,Xt,kn,!0),i.lineTo(t+r-a.bottomRight,n+s),i.arc(t+r-a.bottomRight,n+s-a.bottomRight,a.bottomRight,kn,0,!0),i.lineTo(t+r,n+a.topRight),i.arc(t+r-a.topRight,n+a.topRight,a.topRight,0,-kn,!0),i.lineTo(t+a.topLeft,n)}var ufe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,lfe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Vk(i,e){let t=(""+i).match(ufe);if(!t||t[1]==="normal")return e*1.2;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100;break}return e*i}var cfe=i=>+i||0;function Db(i,e){let t={},n=nn(e),r=n?Object.keys(e):e,s=nn(i)?n?a=>ar(i[a],i[e[a]]):a=>i[a]:()=>i;for(let a of r)t[a]=cfe(s(a));return t}function Gk(i){return Db(i,{top:"y",right:"x",bottom:"y",left:"x"})}function dfe(i){return Db(i,["topLeft","topRight","bottomLeft","bottomRight"])}function ffe(i){let e=Gk(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function hfe(i,e){i=i||{},e=e||zk.font;let t=ar(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=ar(i.style,e.style);n&&!(""+n).match(lfe)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let r={family:ar(i.family,e.family),lineHeight:Vk(ar(i.lineHeight,e.lineHeight),t),size:t,style:n,weight:ar(i.weight,e.weight),string:""};return r.string=Hk(r),r}function pfe(i,e,t,n){let r=!0,s,a,o;for(s=0,a=i.length;s<a;++s)if(o=i[s],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e),r=!1),t!==void 0&&En(o)&&(o=o[t%o.length],r=!1),o!==void 0))return n&&!r&&(n.cacheable=!1),o}function mfe(i,e,t){let{min:n,max:r}=i,s=Sk(e,(r-n)/2),a=(o,u)=>t&&o===0?0:o+u;return{min:a(n,-Math.abs(s)),max:a(r,s)}}function jk(i,e){return Object.assign(Object.create(i),e)}function Rb(i,e=[""],t,n,r=()=>i[0]){let s=t||i;typeof n=="undefined"&&(n=Zk("_fallback",i));let a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:s,_fallback:n,_getTarget:r,override:o=>Rb([o,...i],e,s,n)};return new Proxy(a,{deleteProperty(o,u){return delete o[u],delete o._keys,delete i[0][u],!0},get(o,u){return Xk(o,u,()=>Sfe(u,e,i,o))},getOwnPropertyDescriptor(o,u){return Reflect.getOwnPropertyDescriptor(o._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(o,u){return _k(o).includes(u)},ownKeys(o){return _k(o)},set(o,u,l){let c=o._storage||(o._storage=r());return o[u]=c[u]=l,delete o._keys,!0}})}function Zu(i,e,t,n){let r={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:Yk(i,n),setContext:s=>Zu(i,s,t,n),override:s=>Zu(i.override(s),e,t,n)};return new Proxy(r,{deleteProperty(s,a){return delete s[a],delete i[a],!0},get(s,a,o){return Xk(s,a,()=>vfe(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(i,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,a)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(s,a){return Reflect.has(i,a)},ownKeys(){return Reflect.ownKeys(i)},set(s,a,o){return i[a]=o,delete s[a],!0}})}function Yk(i,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=i;return{allKeys:r,scriptable:t,indexable:n,isScriptable:Xu(t)?t:()=>t,isIndexable:Xu(n)?n:()=>n}}var gfe=(i,e)=>i?i+Eb(e):e,Cb=(i,e)=>nn(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Xk(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e))return i[e];let n=t();return i[e]=n,n}function vfe(i,e,t){let{_proxy:n,_context:r,_subProxy:s,_descriptors:a}=i,o=n[e];return Xu(o)&&a.isScriptable(e)&&(o=_fe(e,o,i,t)),En(o)&&o.length&&(o=xfe(e,o,i,a.isIndexable)),Cb(e,o)&&(o=Zu(o,r,s&&s[e],a)),o}function _fe(i,e,t,n){let{_proxy:r,_context:s,_subProxy:a,_stack:o}=t;if(o.has(i))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+i);o.add(i);let u=e(s,a||n);return o.delete(i),Cb(i,u)&&(u=Ob(r._scopes,r,i,u)),u}function xfe(i,e,t,n){let{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=t;if(typeof s.index!="undefined"&&n(i))return e[s.index%e.length];if(nn(e[0])){let u=e,l=r._scopes.filter(c=>c!==u);e=[];for(let c of u){let d=Ob(l,r,i,c);e.push(Zu(d,s,a&&a[i],o))}}return e}function $k(i,e,t){return Xu(i)?i(e,t):i}var yfe=(i,e)=>i===!0?e:typeof i=="string"?Tb(e,i):void 0;function bfe(i,e,t,n,r){for(let s of e){let a=yfe(t,s);if(a){i.add(a);let o=$k(a._fallback,t,r);if(typeof o!="undefined"&&o!==t&&o!==n)return o}else if(a===!1&&typeof n!="undefined"&&t!==n)return null}return!1}function Ob(i,e,t,n){let r=e._rootScopes,s=$k(e._fallback,t,n),a=[...i,...r],o=new Set;o.add(n);let u=vk(o,a,t,s||t,n);return u===null||typeof s!="undefined"&&s!==t&&(u=vk(o,a,s,u,n),u===null)?!1:Rb(Array.from(o),[""],r,s,()=>Mfe(e,t,n))}function vk(i,e,t,n,r){for(;t;)t=bfe(i,e,t,n,r);return t}function Mfe(i,e,t){let n=i._getTarget();e in n||(n[e]={});let r=n[e];return En(r)&&nn(t)?t:r||{}}function Sfe(i,e,t,n){let r;for(let s of e)if(r=Zk(gfe(s,i),t),typeof r!="undefined")return Cb(i,r)?Ob(t,n,i,r):r}function Zk(i,e){for(let t of e){if(!t)continue;let n=t[i];if(typeof n!="undefined")return n}}function _k(i){let e=i._keys;return e||(e=i._keys=wfe(i._scopes)),e}function wfe(i){let e=new Set;for(let t of i)for(let n of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function Tfe(i,e,t,n){let{iScale:r}=i,{key:s="r"}=this._parsing,a=new Array(n),o,u,l,c;for(o=0,u=n;o<u;++o)l=o+t,c=e[l],a[o]={r:r.parse(Tb(c,s),l)};return a}var Efe=Number.EPSILON||1e-14,ka=(i,e)=>e<i.length&&!i[e].skip&&i[e],Jk=i=>i==="x"?"y":"x";function Kk(i,e,t,n){let r=i.skip?e:i,s=e,a=t.skip?e:t,o=yb(s,r),u=yb(a,s),l=o/(o+u),c=u/(o+u);l=isNaN(l)?0:l,c=isNaN(c)?0:c;let d=n*l,f=n*c;return{previous:{x:s.x-d*(a.x-r.x),y:s.y-d*(a.y-r.y)},next:{x:s.x+f*(a.x-r.x),y:s.y+f*(a.y-r.y)}}}function Pfe(i,e,t){let n=i.length,r,s,a,o,u,l=ka(i,0);for(let c=0;c<n-1;++c)if(u=l,l=ka(i,c+1),!(!u||!l)){if(Pb(e[c],0,Efe)){t[c]=t[c+1]=0;continue}r=t[c]/e[c],s=t[c+1]/e[c],o=Math.pow(r,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),t[c]=r*a*e[c],t[c+1]=s*a*e[c])}}function Afe(i,e,t="x"){let n=Jk(t),r=i.length,s,a,o,u=ka(i,0);for(let l=0;l<r;++l){if(a=o,o=u,u=ka(i,l+1),!o)continue;let c=o[t],d=o[n];a&&(s=(c-a[t])/3,o[`cp1${t}`]=c-s,o[`cp1${n}`]=d-s*e[l]),u&&(s=(u[t]-c)/3,o[`cp2${t}`]=c+s,o[`cp2${n}`]=d+s*e[l])}}function Qk(i,e="x"){let t=Jk(e),n=i.length,r=Array(n).fill(0),s=Array(n),a,o,u,l=ka(i,0);for(a=0;a<n;++a)if(o=u,u=l,l=ka(i,a+1),!!u){if(l){let c=l[e]-u[e];r[a]=c!==0?(l[t]-u[t])/c:0}s[a]=o?l?xb(r[a-1])!==xb(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}Pfe(i,r,s),Afe(i,s,e)}function Jg(i,e,t){return Math.max(Math.min(i,t),e)}function Dfe(i,e){let t,n,r,s,a,o=Sb(i[0],e);for(t=0,n=i.length;t<n;++t)a=s,s=o,o=t<n-1&&Sb(i[t+1],e),s&&(r=i[t],a&&(r.cp1x=Jg(r.cp1x,e.left,e.right),r.cp1y=Jg(r.cp1y,e.top,e.bottom)),o&&(r.cp2x=Jg(r.cp2x,e.left,e.right),r.cp2y=Jg(r.cp2y,e.top,e.bottom)))}function Rfe(i,e,t,n,r){let s,a,o,u;if(e.spanGaps&&(i=i.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")Qk(i,r);else{let l=n?i[i.length-1]:i[0];for(s=0,a=i.length;s<a;++s)o=i[s],u=Kk(l,o,i[Math.min(s+1,a-(n?0:1))%a],e.tension),o.cp1x=u.previous.x,o.cp1y=u.previous.y,o.cp2x=u.next.x,o.cp2y=u.next.y,l=o}e.capBezierPoints&&Dfe(i,t)}function Cfe(){return typeof window!="undefined"&&typeof document!="undefined"}function eF(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function iv(i,e,t){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=i,n}var sv=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function tF(i,e){return sv(i).getPropertyValue(e)}var Ofe=["top","right","bottom","left"];function es(i,e,t){let n={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=Ofe[r];n[s]=parseFloat(i[e+"-"+s+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var Ife=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function Lfe(i,e){let t=i.touches,n=t&&t.length?t[0]:i,{offsetX:r,offsetY:s}=n,a=!1,o,u;if(Ife(r,s,i.target))o=r,u=s;else{let l=e.getBoundingClientRect();o=n.clientX-l.left,u=n.clientY-l.top,a=!0}return{x:o,y:u,box:a}}function qfe(i,e){if("native"in i)return i;let{canvas:t,currentDevicePixelRatio:n}=e,r=sv(t),s=r.boxSizing==="border-box",a=es(r,"padding"),o=es(r,"border","width"),{x:u,y:l,box:c}=Lfe(i,t),d=a.left+(c&&o.left),f=a.top+(c&&o.top),{width:h,height:p}=e;return s&&(h-=a.width+o.width,p-=a.height+o.height),{x:Math.round((u-d)/h*t.width/n),y:Math.round((l-f)/p*t.height/n)}}function Nfe(i,e,t){let n,r;if(e===void 0||t===void 0){let s=eF(i);if(!s)e=i.clientWidth,t=i.clientHeight;else{let a=s.getBoundingClientRect(),o=sv(s),u=es(o,"border","width"),l=es(o,"padding");e=a.width-l.width-u.width,t=a.height-l.height-u.height,n=iv(o.maxWidth,s,"clientWidth"),r=iv(o.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:n||$u,maxHeight:r||$u}}var Kg=i=>Math.round(i*10)/10;function kfe(i,e,t,n){let r=sv(i),s=es(r,"margin"),a=iv(r.maxWidth,i,"clientWidth")||$u,o=iv(r.maxHeight,i,"clientHeight")||$u,u=Nfe(i,e,t),{width:l,height:c}=u;if(r.boxSizing==="content-box"){let f=es(r,"border","width"),h=es(r,"padding");l-=h.width+f.width,c-=h.height+f.height}return l=Math.max(0,l-s.width),c=Math.max(0,n?l/n:c-s.height),l=Kg(Math.min(l,a,u.maxWidth)),c=Kg(Math.min(c,o,u.maxHeight)),l&&!c&&(c=Kg(l/2)),(e!==void 0||t!==void 0)&&n&&u.height&&c>u.height&&(c=u.height,l=Kg(Math.floor(c*n))),{width:l,height:c}}function Ffe(i,e,t){let n=e||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);let a=i.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${i.height}px`,a.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||a.height!==r||a.width!==s?(i.currentDevicePixelRatio=n,a.height=r,a.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}var Ufe=function(){let i=!1;try{let e={get passive(){return i=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}return i}();function Bfe(i,e){let t=tF(i,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Qr(i,e,t,n){return{x:i.x+t*(e.x-i.x),y:i.y+t*(e.y-i.y)}}function zfe(i,e,t,n){return{x:i.x+t*(e.x-i.x),y:n==="middle"?t<.5?i.y:e.y:n==="after"?t<1?i.y:e.y:t>0?e.y:i.y}}function Hfe(i,e,t,n){let r={x:i.cp2x,y:i.cp2y},s={x:e.cp1x,y:e.cp1y},a=Qr(i,r,t),o=Qr(r,s,t),u=Qr(s,e,t),l=Qr(a,o,t),c=Qr(o,u,t);return Qr(l,c,t)}var Wfe=function(i,e){return{x(t){return i+i+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},Vfe=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function Gfe(i,e,t){return i?Wfe(e,t):Vfe()}function jfe(i,e){let t,n;(e==="ltr"||e==="rtl")&&(t=i.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=n)}function Yfe(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function nF(i){return i==="angle"?{between:Ok,compare:Ck,normalize:Ei}:{between:Ik,compare:(e,t)=>e-t,normalize:e=>e}}function xk({start:i,end:e,count:t,loop:n,style:r}){return{start:i%t,end:e%t,loop:n&&(e-i+1)%t===0,style:r}}function Xfe(i,e,t){let{property:n,start:r,end:s}=t,{between:a,normalize:o}=nF(n),u=e.length,{start:l,end:c,loop:d}=i,f,h;if(d){for(l+=u,c+=u,f=0,h=u;f<h&&a(o(e[l%u][n]),r,s);++f)l--,c--;l%=u,c%=u}return c<l&&(c+=u),{start:l,end:c,loop:d,style:i.style}}function iF(i,e,t){if(!t)return[i];let{property:n,start:r,end:s}=t,a=e.length,{compare:o,between:u,normalize:l}=nF(n),{start:c,end:d,loop:f,style:h}=Xfe(i,e,t),p=[],v=!1,g=null,m,y,_,b=()=>u(r,_,m)&&o(r,_)!==0,M=()=>o(s,m)===0||u(s,_,m),T=()=>v||b(),P=()=>!v||M();for(let C=c,S=c;C<=d;++C)y=e[C%a],!y.skip&&(m=l(y[n]),m!==_&&(v=u(m,r,s),g===null&&T()&&(g=o(m,r)===0?C:S),g!==null&&P()&&(p.push(xk({start:g,end:C,loop:f,count:a,style:h})),g=null),S=C,_=m));return g!==null&&p.push(xk({start:g,end:d,loop:f,count:a,style:h})),p}function $fe(i,e){let t=[],n=i.segments;for(let r=0;r<n.length;r++){let s=iF(n[r],i.points,e);s.length&&t.push(...s)}return t}function Zfe(i,e,t,n){let r=0,s=e-1;if(t&&!n)for(;r<e&&!i[r].skip;)r++;for(;r<e&&i[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&i[s%e].skip;)s--;return s%=e,{start:r,end:s}}function Jfe(i,e,t,n){let r=i.length,s=[],a=e,o=i[e],u;for(u=e+1;u<=t;++u){let l=i[u%r];l.skip||l.stop?o.skip||(n=!1,s.push({start:e%r,end:(u-1)%r,loop:n}),e=a=l.stop?u:null):(a=u,o.skip&&(e=u)),o=l}return a!==null&&s.push({start:e%r,end:a%r,loop:n}),s}function Kfe(i,e){let t=i.points,n=i.options.spanGaps,r=t.length;if(!r)return[];let s=!!i._loop,{start:a,end:o}=Zfe(t,r,s,n);if(n===!0)return yk(i,[{start:a,end:o,loop:s}],t,e);let u=o<a?o+r:o,l=!!i._fullLoop&&a===0&&o===r-1;return yk(i,Jfe(t,a,u,l),t,e)}function yk(i,e,t,n){return!n||!n.setContext||!t?e:Qfe(i,e,t,n)}function Qfe(i,e,t,n){let r=i._chart.getContext(),s=bk(i.options),{_datasetIndex:a,options:{spanGaps:o}}=i,u=t.length,l=[],c=s,d=e[0].start,f=d;function h(p,v,g,m){let y=o?-1:1;if(p!==v){for(p+=u;t[p%u].skip;)p-=y;for(;t[v%u].skip;)v+=y;p%u!==v%u&&(l.push({start:p%u,end:v%u,loop:g,style:m}),c=m,d=v%u)}}for(let p of e){d=o?d:p.start;let v=t[d%u],g;for(f=d+1;f<=p.end;f++){let m=t[f%u];g=bk(n.setContext(jk(r,{type:"segment",p0:v,p1:m,p0DataIndex:(f-1)%u,p1DataIndex:f%u,datasetIndex:a}))),ehe(g,c)&&h(d,f-1,p.loop,c),v=m,c=g}d<f-1&&h(d,f-1,p.loop,c)}return l}function bk(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function ehe(i,e){if(!e)return!1;let t=[],n=function(r,s){return rv(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(i,n)!==JSON.stringify(e,n)}ie.HALF_PI=kn;ie.INFINITY=$u;ie.PI=Xt;ie.PITAU=Dk;ie.QUARTER_PI=sr;ie.RAD_PER_DEG=Rk;ie.TAU=Fn;ie.TWO_THIRDS_PI=_b;ie.Ticks=Fk;ie._addGrace=mfe;ie._alignPixel=Zde;ie._alignStartEnd=kde;ie._angleBetween=Ok;ie._angleDiff=Ck;ie._arrayUnique=Ode;ie._attachContext=Zu;ie._bezierCurveTo=nfe;ie._bezierInterpolation=Hfe;ie._boundSegment=iF;ie._boundSegments=$fe;ie._capitalize=Eb;ie._computeSegments=Kfe;ie._createResolver=Rb;ie._decimalPlaces=Tde;ie._deprecated=hde;ie._descriptors=Yk;ie._elementsEqual=fde;ie._factorize=xde;ie._filterBetween=Dde;ie._getParentNode=eF;ie._getStartAndCountOfVisiblePoints=Ude;ie._int16Range=Pde;ie._isBetween=Ik;ie._isClickEvent=vde;ie._isDomSupported=Cfe;ie._isPointInArea=Sb;ie._limitValue=nv;ie._longestText=$de;ie._lookup=Ab;ie._lookupByKey=Wu;ie._measureText=Mb;ie._merger=Tk;ie._mergerIf=Pk;ie._normalizeAngle=Ei;ie._parseObjectDataRadialScale=Tfe;ie._pointInLine=Qr;ie._readValueToProps=Db;ie._rlookupByKey=Ade;ie._scaleRangesChanged=Bde;ie._setMinAndMaxByKey=Mde;ie._splitKey=Ak;ie._steppedInterpolation=zfe;ie._steppedLineTo=tfe;ie._textX=Fde;ie._toLeftRightCenter=Nde;ie._updateBezierControlPoints=Rfe;ie.addRoundedRectPath=ofe;ie.almostEquals=Pb;ie.almostWhole=bde;ie.callback=cde;ie.clearCanvas=Jde;ie.clipArea=Qde;ie.clone=ju;ie.color=zde;ie.createContext=jk;ie.debounce=qde;ie.defaults=zk;ie.defined=mde;ie.descriptors=Bk;ie.distanceBetweenPoints=yb;ie.drawPoint=Kde;ie.drawPointLegend=Wk;ie.each=dde;ie.effects=Qg;ie.finiteOrDefault=ude;ie.fontString=Ide;ie.formatNumber=Nk;ie.getAngleFromPoint=Ede;ie.getHoverColor=ev;ie.getMaximumSize=kfe;ie.getRelativePosition=qfe;ie.getRtlAdapter=Gfe;ie.getStyle=tF;ie.isArray=En;ie.isFunction=Xu;ie.isNullOrUndef=Gu;ie.isNumber=yde;ie.isNumberFinite=wb;ie.isObject=nn;ie.isPatternOrGradient=rv;ie.listenArrayEvents=Rde;ie.log10=tv;ie.merge=Yu;ie.mergeIf=Ek;ie.niceNum=_de;ie.noop=ade;ie.overrideTextDirection=jfe;ie.overrides=Uk;ie.readUsedSize=Bfe;ie.renderText=afe;ie.requestAnimFrame=qk;ie.resolve=pfe;ie.resolveObjectKey=Tb;ie.restoreTextDirection=Yfe;ie.retinaScale=Ffe;ie.setsEqual=gde;ie.sign=xb;ie.splineCurve=Kk;ie.splineCurveMonotone=Qk;ie.supportsEventListenerOptions=Ufe;ie.throttled=Lde;ie.toDegrees=wde;ie.toDimension=Sk;ie.toFont=hfe;ie.toFontString=Hk;ie.toLineHeight=Vk;ie.toPadding=ffe;ie.toPercentage=lde;ie.toRadians=Sde;ie.toTRBL=Gk;ie.toTRBLCorners=dfe;ie.uid=ode;ie.unclipArea=efe;ie.unlistenArrayEvents=Cde;ie.valueOrDefault=ar});var UU=E(Ge=>{"use strict";var x=rF();gb();var Hb=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){let s=t.listeners[r],a=t.duration;s.forEach(o=>o({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=x.requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;let s=n.items,a=s.length-1,o=!1,u;for(;a>=0;--a)u=s[a],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);!t||(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let n=t.items,r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},ni=new Hb,sF="transparent",the={boolean(i,e,t){return t>.5?e:i},color(i,e,t){let n=x.color(i||sF),r=n.valid&&x.color(e||sF);return r&&r.valid?r.mix(n,t).hexString():e},number(i,e,t){return i+(e-i)*t}},pv=class{constructor(e,t,n,r){let s=t[n];r=x.resolve([e.to,r,s,e.from]);let a=x.resolve([e.from,s,r]);this._active=!0,this._fn=e.fn||the[e.type||typeof a],this._easing=x.effects[e.easing]||x.effects.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);let r=this._target[this._prop],s=n-this._start,a=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=x.resolve([e.to,t,r,e.from]),this._from=x.resolve([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,n=this._duration,r=this._prop,s=this._from,a=this._loop,o=this._to,u;if(this._active=s!==o&&(a||t<n),!this._active){this._target[r]=o,this._notify(!0);return}if(t<0){this._target[r]=s;return}u=t/n%2,u=a&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(s,o,u)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){let t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}},sl=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!x.isObject(e))return;let t=Object.keys(x.defaults.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!x.isObject(s))return;let a={};for(let o of t)a[o]=s[o];(x.isArray(s.properties)&&s.properties||[r]).forEach(o=>{(o===r||!n.has(o))&&n.set(o,a)})})}_animateOptions(e,t){let n=t.options,r=ihe(e,n);if(!r)return[];let s=this._createAnimations(r,n);return n.$shared&&nhe(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){let n=this._properties,r=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now(),u;for(u=a.length-1;u>=0;--u){let l=a[u];if(l.charAt(0)==="$")continue;if(l==="options"){r.push(...this._animateOptions(e,t));continue}let c=t[l],d=s[l],f=n.get(l);if(d)if(f&&d.active()){d.update(f,c,o);continue}else d.cancel();if(!f||!f.duration){e[l]=c;continue}s[l]=d=new pv(f,e,l,c),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let n=this._createAnimations(e,t);if(n.length)return ni.add(this._chart,n),!0}};function nhe(i,e){let t=[],n=Object.keys(e);for(let r=0;r<n.length;r++){let s=i[n[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function ihe(i,e){if(!e)return;let t=i.options;if(!t){i.options=e;return}return t.$shared&&(i.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function aF(i,e){let t=i&&i.options||{},n=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:n?s:r,end:n?r:s}}function rhe(i,e,t){if(t===!1)return!1;let n=aF(i,t),r=aF(e,t);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function she(i){let e,t,n,r;return x.isObject(i)?(e=i.top,t=i.right,n=i.bottom,r=i.left):e=t=n=r=i,{top:e,right:t,bottom:n,left:r,disabled:i===!1}}function sU(i,e){let t=[],n=i._getSortedDatasetMetas(e),r,s;for(r=0,s=n.length;r<s;++r)t.push(n[r].index);return t}function oF(i,e,t,n={}){let r=i.keys,s=n.mode==="single",a,o,u,l;if(e!==null){for(a=0,o=r.length;a<o;++a){if(u=+r[a],u===t){if(n.all)continue;break}l=i.values[u],x.isNumberFinite(l)&&(s||e===0||x.sign(e)===x.sign(l))&&(e+=l)}return e}}function ahe(i){let e=Object.keys(i),t=new Array(e.length),n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],t[n]={x:s,y:i[s]};return t}function uF(i,e){let t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function ohe(i,e,t){return`${i.id}.${e.id}.${t.stack||t.type}`}function uhe(i){let{min:e,max:t,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function lhe(i,e,t){let n=i[e]||(i[e]={});return n[t]||(n[t]={})}function lF(i,e,t,n){for(let r of e.getMatchingVisibleMetas(n).reverse()){let s=i[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function cF(i,e){let{chart:t,_cachedMeta:n}=i,r=t._stacks||(t._stacks={}),{iScale:s,vScale:a,index:o}=n,u=s.axis,l=a.axis,c=ohe(s,a,n),d=e.length,f;for(let h=0;h<d;++h){let p=e[h],{[u]:v,[l]:g}=p,m=p._stacks||(p._stacks={});f=m[l]=lhe(r,c,v),f[o]=g,f._top=lF(f,a,!0,n.type),f._bottom=lF(f,a,!1,n.type);let y=f._visualValues||(f._visualValues={});y[o]=g}}function Ib(i,e){let t=i.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function che(i,e){return x.createContext(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function dhe(i,e,t){return x.createContext(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ju(i,e){let t=i.controller.index,n=i.vScale&&i.vScale.axis;if(!!n){e=e||i._parsed;for(let r of e){let s=r._stacks;if(!s||s[n]===void 0||s[n][t]===void 0)return;delete s[n][t],s[n]._visualValues!==void 0&&s[n]._visualValues[t]!==void 0&&delete s[n]._visualValues[t]}}}var Lb=i=>i==="reset"||i==="none",dF=(i,e)=>e?i:Object.assign({},i),fhe=(i,e,t)=>i&&!e.hidden&&e._stacked&&{keys:sU(t,!0),values:null},ln=class{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=uF(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ju(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(d,f,h,p)=>d==="x"?f:d==="r"?p:h,s=t.xAxisID=x.valueOrDefault(n.xAxisID,Ib(e,"x")),a=t.yAxisID=x.valueOrDefault(n.yAxisID,Ib(e,"y")),o=t.rAxisID=x.valueOrDefault(n.rAxisID,Ib(e,"r")),u=t.indexAxis,l=t.iAxisID=r(u,s,a,o),c=t.vAxisID=r(u,a,s,o);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&x.unlistenArrayEvents(this._data,this),e._stacked&&Ju(e)}_dataCheck(){let e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(x.isObject(t))this._data=ahe(t);else if(n!==t){if(n){x.unlistenArrayEvents(n,this);let r=this._cachedMeta;Ju(r),r._parsed=[]}t&&Object.isExtensible(t)&&x.listenArrayEvents(t,this),this._syncList=[],this._data=t}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let t=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();let s=t._stacked;t._stacked=uF(t.vScale,t),t.stack!==n.stack&&(r=!0,Ju(t),t.stack=n.stack),this._resyncElements(e),(r||s!==t._stacked)&&cF(this,t._parsed)}configure(){let e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){let{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:a}=n,o=s.axis,u=e===0&&t===r.length?!0:n._sorted,l=e>0&&n._parsed[e-1],c,d,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{x.isArray(r[e])?f=this.parseArrayData(n,r,e,t):x.isObject(r[e])?f=this.parseObjectData(n,r,e,t):f=this.parsePrimitiveData(n,r,e,t);let h=()=>d[o]===null||l&&d[o]<l[o];for(c=0;c<t;++c)n._parsed[c+e]=d=f[c],u&&(h()&&(u=!1),l=d);n._sorted=u}a&&cF(this,f)}parsePrimitiveData(e,t,n,r){let{iScale:s,vScale:a}=e,o=s.axis,u=a.axis,l=s.getLabels(),c=s===a,d=new Array(r),f,h,p;for(f=0,h=r;f<h;++f)p=f+n,d[f]={[o]:c||s.parse(l[p],p),[u]:a.parse(t[p],p)};return d}parseArrayData(e,t,n,r){let{xScale:s,yScale:a}=e,o=new Array(r),u,l,c,d;for(u=0,l=r;u<l;++u)c=u+n,d=t[c],o[u]={x:s.parse(d[0],c),y:a.parse(d[1],c)};return o}parseObjectData(e,t,n,r){let{xScale:s,yScale:a}=e,{xAxisKey:o="x",yAxisKey:u="y"}=this._parsing,l=new Array(r),c,d,f,h;for(c=0,d=r;c<d;++c)f=c+n,h=t[f],l[c]={x:s.parse(x.resolveObjectKey(h,o),f),y:a.parse(x.resolveObjectKey(h,u),f)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){let r=this.chart,s=this._cachedMeta,a=t[e.axis],o={keys:sU(r,!0),values:t._stacks[e.axis]._visualValues};return oF(o,a,s.index,{mode:n})}updateRangeFromParsed(e,t,n,r){let s=n[t.axis],a=s===null?NaN:s,o=r&&n._stacks[t.axis];r&&o&&(r.values=o,a=oF(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){let n=this._cachedMeta,r=n._parsed,s=n._sorted&&e===n.iScale,a=r.length,o=this._getOtherScale(e),u=fhe(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=uhe(o),f,h;function p(){h=r[f];let v=h[o.axis];return!x.isNumberFinite(h[e.axis])||c>v||d<v}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(l,e,h,u),s));++f);if(s){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(l,e,h,u);break}}return l}getAllParsedValues(e){let t=this._cachedMeta._parsed,n=[],r,s,a;for(r=0,s=t.length;r<s;++r)a=t[r][e.axis],x.isNumberFinite(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){let t=this._cachedMeta,n=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){let t=this._cachedMeta;this.update(e||"default"),t._clip=she(x.valueOrDefault(this.options.clip,rhe(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],s=t.chartArea,a=[],o=this._drawStart||0,u=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop,c;for(n.dataset&&n.dataset.draw(e,s,o,u),c=o;c<o+u;++c){let d=r[c];d.hidden||(d.active&&l?a.push(d):d.draw(e,s))}for(c=0;c<a.length;++c)a[c].draw(e,s)}getStyle(e,t){let n=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){let r=this.getDataset(),s;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];s=a.$context||(a.$context=dhe(this.getContext(),e,a)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=che(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){let r=t==="active",s=this._cachedDataOpts,a=e+"-"+t,o=s[a],u=this.enableOptionSharing&&x.defined(n);if(o)return dF(o,u);let l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=l.getOptionScopes(this.getDataset(),c),h=Object.keys(x.defaults.elements[e]),p=()=>this.getContext(n,r,t),v=l.resolveNamedOptions(f,h,p,d);return v.$shared&&(v.$shared=u,s[a]=Object.freeze(dF(v,u))),v}_resolveAnimations(e,t,n){let r=this.chart,s=this._cachedDataOpts,a=`animation-${t}`,o=s[a];if(o)return o;let u;if(r.options.animation!==!1){let c=this.chart.config,d=c.datasetAnimationScopeKeys(this._type,t),f=c.getOptionScopes(this.getDataset(),d);u=c.createResolver(f,this.getContext(e,n,t))}let l=new sl(r,u&&u.animations);return u&&u._cacheable&&(s[a]=Object.freeze(l)),l}getSharedOptions(e){if(!!e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Lb(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){let n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(n),a=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:a}}updateElement(e,t,n,r){Lb(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!Lb(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;let s=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let t=this._data,n=this._cachedMeta.data;for(let[o,u,l]of this._syncList)this[o](u,l);this._syncList=[];let r=n.length,s=t.length,a=Math.min(s,r);a&&this.parse(0,a),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t,n=!0){let r=this._cachedMeta,s=r.data,a=e+t,o,u=l=>{for(l.length+=t,o=l.length-1;o>=a;o--)l[o]=l[o-t]};for(u(s),o=e;o<a;++o)s[o]=new this.dataElementType;this._parsing&&u(r._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){let n=this._cachedMeta;if(this._parsing){let r=n._parsed.splice(e,t);n._stacked&&Ju(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);let n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};Me(ln,"defaults",{}),Me(ln,"datasetElementType",null),Me(ln,"dataElementType",null);function hhe(i,e){if(!i._cache.$bar){let t=i.getMatchingVisibleMetas(e),n=[];for(let r=0,s=t.length;r<s;r++)n=n.concat(t[r].controller.getAllParsedValues(i));i._cache.$bar=x._arrayUnique(n.sort((r,s)=>r-s))}return i._cache.$bar}function phe(i){let e=i.iScale,t=hhe(e,i.type),n=e._length,r,s,a,o,u=()=>{a===32767||a===-32768||(x.defined(o)&&(n=Math.min(n,Math.abs(a-o)||n)),o=a)};for(r=0,s=t.length;r<s;++r)a=e.getPixelForValue(t[r]),u();for(o=void 0,r=0,s=e.ticks.length;r<s;++r)a=e.getPixelForTick(r),u();return n}function mhe(i,e,t,n){let r=t.barThickness,s,a;return x.isNullOrUndef(r)?(s=e.min*t.categoryPercentage,a=t.barPercentage):(s=r*n,a=1),{chunk:s/n,ratio:a,start:e.pixels[i]-s/2}}function ghe(i,e,t,n){let r=e.pixels,s=r[i],a=i>0?r[i-1]:null,o=i<r.length-1?r[i+1]:null,u=t.categoryPercentage;a===null&&(a=s-(o===null?e.end-e.start:o-s)),o===null&&(o=s+s-a);let l=s-(s-Math.min(a,o))/2*u;return{chunk:Math.abs(o-a)/2*u/n,ratio:t.barPercentage,start:l}}function vhe(i,e,t,n){let r=t.parse(i[0],n),s=t.parse(i[1],n),a=Math.min(r,s),o=Math.max(r,s),u=a,l=o;Math.abs(a)>Math.abs(o)&&(u=o,l=a),e[t.axis]=l,e._custom={barStart:u,barEnd:l,start:r,end:s,min:a,max:o}}function aU(i,e,t,n){return x.isArray(i)?vhe(i,e,t,n):e[t.axis]=t.parse(i,n),e}function fF(i,e,t,n){let r=i.iScale,s=i.vScale,a=r.getLabels(),o=r===s,u=[],l,c,d,f;for(l=t,c=t+n;l<c;++l)f=e[l],d={},d[r.axis]=o||r.parse(a[l],l),u.push(aU(f,d,s,l));return u}function qb(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function _he(i,e,t){return i!==0?x.sign(i):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function xhe(i){let e,t,n,r,s;return i.horizontal?(e=i.base>i.x,t="left",n="right"):(e=i.base<i.y,t="bottom",n="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:n,reverse:e,top:r,bottom:s}}function yhe(i,e,t,n){let r=e.borderSkipped,s={};if(!r){i.borderSkipped=s;return}if(r===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:a,end:o,reverse:u,top:l,bottom:c}=xhe(i);r==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===n?r=l:(t._bottom||0)===n?r=c:(s[hF(c,a,o,u)]=!0,r=l)),s[hF(r,a,o,u)]=!0,i.borderSkipped=s}function hF(i,e,t,n){return n?(i=bhe(i,e,t),i=pF(i,t,e)):i=pF(i,e,t),i}function bhe(i,e,t){return i===e?t:i===t?e:i}function pF(i,e,t){return i==="start"?e:i==="end"?t:i}function Mhe(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}var is=class extends ln{parsePrimitiveData(e,t,n,r){return fF(e,t,n,r)}parseArrayData(e,t,n,r){return fF(e,t,n,r)}parseObjectData(e,t,n,r){let{iScale:s,vScale:a}=e,{xAxisKey:o="x",yAxisKey:u="y"}=this._parsing,l=s.axis==="x"?o:u,c=a.axis==="x"?o:u,d=[],f,h,p,v;for(f=n,h=n+r;f<h;++f)v=t[f],p={},p[s.axis]=s.parse(x.resolveObjectKey(v,l),f),d.push(aU(x.resolveObjectKey(v,c),p,a,f));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);let s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let t=this._cachedMeta,{iScale:n,vScale:r}=t,s=this.getParsed(e),a=s._custom,o=qb(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){let s=r==="reset",{index:a,_cachedMeta:{vScale:o}}=this,u=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){let p=this.getParsed(h),v=s||x.isNullOrUndef(p[o.axis])?{base:u,head:u}:this._calculateBarValuePixels(h),g=this._calculateBarIndexPixels(h,c),m=(p._stacks||{})[o.axis],y={horizontal:l,base:v.base,enableBorderRadius:!m||qb(p._custom)||a===m._top||a===m._bottom,x:l?v.head:g.center,y:l?g.center:v.head,height:l?g.size:Math.abs(v.size),width:l?Math.abs(v.size):g.size};f&&(y.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));let _=y.options||e[h].options;yhe(y,_,m,a),Mhe(y,_,c.ratio),this.updateElement(e[h],h,y,r)}}_getStacks(e,t){let{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=n.options.stacked,a=[],o=u=>{let l=u.controller.getParsed(t),c=l&&l[u.vScale.axis];if(x.isNullOrUndef(c)||isNaN(c))return!0};for(let u of r)if(!(t!==void 0&&o(u))&&((s===!1||a.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){let r=this._getStacks(e,n),s=t!==void 0?r.indexOf(t):-1;return s===-1?r.length-1:s}_getRuler(){let e=this.options,t=this._cachedMeta,n=t.iScale,r=[],s,a;for(s=0,a=t.data.length;s<a;++s)r.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));let o=e.barThickness;return{min:o||phe(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:s,minBarLength:a}}=this,o=s||0,u=this.getParsed(e),l=u._custom,c=qb(l),d=u[t.axis],f=0,h=n?this.applyStack(t,u,n):d,p,v;h!==d&&(f=h-d,h=d),c&&(d=l.barStart,h=l.barEnd-l.barStart,d!==0&&x.sign(d)!==x.sign(l.barEnd)&&(f=0),f+=d);let g=!x.isNullOrUndef(s)&&!c?s:f,m=t.getPixelForValue(g);if(this.chart.getDataVisibility(e)?p=t.getPixelForValue(f+h):p=m,v=p-m,Math.abs(v)<a){v=_he(v,t,o)*a,d===o&&(m-=v/2);let y=t.getPixelForDecimal(0),_=t.getPixelForDecimal(1),b=Math.min(y,_),M=Math.max(y,_);m=Math.max(Math.min(m,M),b),p=m+v,n&&!c&&(u._stacks[t.axis]._visualValues[r]=t.getValueForPixel(p)-t.getValueForPixel(m))}if(m===t.getPixelForValue(o)){let y=x.sign(v)*t.getLineWidthForValue(o)/2;m+=y,v-=y}return{size:v,base:m,head:p,center:p+v/2}}_calculateBarIndexPixels(e,t){let n=t.scale,r=this.options,s=r.skipNull,a=x.valueOrDefault(r.maxBarThickness,1/0),o,u;if(t.grouped){let l=s?this._getStackCount(e):t.stackCount,c=r.barThickness==="flex"?ghe(e,t,r,l):mhe(e,t,r,l),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);o=c.start+c.chunk*d+c.chunk/2,u=Math.min(a,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),u=Math.min(a,t.min*t.ratio);return{base:o-u/2,head:o+u/2,center:o,size:u}}draw(){let e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length,s=0;for(;s<r;++s)this.getParsed(s)[t.axis]!==null&&n[s].draw(this._ctx)}};Me(is,"id","bar"),Me(is,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Me(is,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});var rs=class extends ln{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){let s=super.parsePrimitiveData(e,t,n,r);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+n).radius;return s}parseArrayData(e,t,n,r){let s=super.parseArrayData(e,t,n,r);for(let a=0;a<s.length;a++){let o=t[n+a];s[a]._custom=x.valueOrDefault(o[2],this.resolveDataElementOptions(a+n).radius)}return s}parseObjectData(e,t,n,r){let s=super.parseObjectData(e,t,n,r);for(let a=0;a<s.length;a++){let o=t[n+a];s[a]._custom=x.valueOrDefault(o&&o.r&&+o.r,this.resolveDataElementOptions(a+n).radius)}return s}getMaxOverflow(){let e=this._cachedMeta.data,t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){let t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,a=this.getParsed(e),o=r.getLabelForValue(a.x),u=s.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+o+", "+u+(l?", "+l:"")+")"}}update(e){let t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){let s=r==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:u,includeOptions:l}=this._getSharedOptions(t,r),c=a.axis,d=o.axis;for(let f=t;f<t+n;f++){let h=e[f],p=!s&&this.getParsed(f),v={},g=v[c]=s?a.getPixelForDecimal(.5):a.getPixelForValue(p[c]),m=v[d]=s?o.getBasePixel():o.getPixelForValue(p[d]);v.skip=isNaN(g)||isNaN(m),l&&(v.options=u||this.resolveDataElementOptions(f,h.active?"active":r),s&&(v.options.radius=0)),this.updateElement(h,f,v,r)}}resolveDataElementOptions(e,t){let n=this.getParsed(e),r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));let s=r.radius;return t!=="active"&&(r.radius=0),r.radius+=x.valueOrDefault(n&&n._custom,s),r}};Me(rs,"id","bubble"),Me(rs,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Me(rs,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function She(i,e,t){let n=1,r=1,s=0,a=0;if(e<x.TAU){let o=i,u=o+e,l=Math.cos(o),c=Math.sin(o),d=Math.cos(u),f=Math.sin(u),h=(_,b,M)=>x._angleBetween(_,o,u,!0)?1:Math.max(b,b*t,M,M*t),p=(_,b,M)=>x._angleBetween(_,o,u,!0)?-1:Math.min(b,b*t,M,M*t),v=h(0,l,d),g=h(x.HALF_PI,c,f),m=p(x.PI,l,d),y=p(x.PI+x.HALF_PI,c,f);n=(v-m)/2,r=(g-y)/2,s=-(v+m)/2,a=-(g+y)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:a}}var ri=class extends ln{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){let n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let s=u=>+n[u];if(x.isObject(n[e])){let{key:u="value"}=this._parsing;s=l=>+x.resolveObjectKey(n[l],u)}let a,o;for(a=e,o=e+t;a<o;++a)r._parsed[a]=s(a)}}_getRotation(){return x.toRadians(this.options.rotation-90)}_getCircumference(){return x.toRadians(this.options.circumference)}_getRotationExtents(){let e=x.TAU,t=-x.TAU;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){let r=this.chart.getDatasetMeta(n).controller,s=r._getRotation(),a=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){let t=this.chart,{chartArea:n}=t,r=this._cachedMeta,s=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-a)/2,0),u=Math.min(x.toPercentage(this.options.cutout,o),1),l=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:h,offsetX:p,offsetY:v}=She(d,c,u),g=(n.width-a)/f,m=(n.height-a)/h,y=Math.max(Math.min(g,m)/2,0),_=x.toDimension(this.options.radius,y),b=Math.max(_*u,0),M=(_-b)/this._getVisibleDatasetWeightTotal();this.offsetX=p*_,this.offsetY=v*_,r.total=this.calculateTotal(),this.outerRadius=_-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*l,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){let n=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/x.TAU)}updateElements(e,t,n,r){let s=r==="reset",a=this.chart,o=a.chartArea,l=a.options.animation,c=(o.left+o.right)/2,d=(o.top+o.bottom)/2,f=s&&l.animateScale,h=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:v,includeOptions:g}=this._getSharedOptions(t,r),m=this._getRotation(),y;for(y=0;y<t;++y)m+=this._circumference(y,s);for(y=t;y<t+n;++y){let _=this._circumference(y,s),b=e[y],M={x:c+this.offsetX,y:d+this.offsetY,startAngle:m,endAngle:m+_,circumference:_,outerRadius:p,innerRadius:h};g&&(M.options=v||this.resolveDataElementOptions(y,b.active?"active":r)),m+=_,this.updateElement(b,y,M,r)}}calculateTotal(){let e=this._cachedMeta,t=e.data,n=0,r;for(r=0;r<t.length;r++){let s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(n+=Math.abs(s))}return n}calculateCircumference(e){let t=this._cachedMeta.total;return t>0&&!isNaN(e)?x.TAU*(Math.abs(e)/t):0}getLabelAndValue(e){let t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=x.formatNumber(t._parsed[e],n.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0,n=this.chart,r,s,a,o,u;if(!e){for(r=0,s=n.data.datasets.length;r<s;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,o=a.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)u=o.resolveDataElementOptions(r),u.borderAlign!=="inner"&&(t=Math.max(t,u.borderWidth||0,u.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){let s=this.resolveDataElementOptions(n);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(x.valueOrDefault(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}};Me(ri,"id","doughnut"),Me(ri,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Me(ri,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Me(ri,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((s,a)=>{let u=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:r,lineWidth:u.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});var ss=class extends ln{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let t=this._cachedMeta,{dataset:n,data:r=[],_dataset:s}=t,a=this.chart._animationsDisabled,{start:o,count:u}=x._getStartAndCountOfVisiblePoints(t,r,a);this._drawStart=o,this._drawCount=u,x._scaleRangesChanged(t)&&(o=0,u=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;let l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},e),this.updateElements(r,o,u,e)}updateElements(e,t,n,r){let s=r==="reset",{iScale:a,vScale:o,_stacked:u,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),f=a.axis,h=o.axis,{spanGaps:p,segment:v}=this.options,g=x.isNumber(p)?p:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||r==="none",y=t+n,_=e.length,b=t>0&&this.getParsed(t-1);for(let M=0;M<_;++M){let T=e[M],P=m?T:{};if(M<t||M>=y){P.skip=!0;continue}let C=this.getParsed(M),S=x.isNullOrUndef(C[h]),A=P[f]=a.getPixelForValue(C[f],M),z=P[h]=s||S?o.getBasePixel():o.getPixelForValue(u?this.applyStack(o,C,u):C[h],M);P.skip=isNaN(A)||isNaN(z)||S,P.stop=M>0&&Math.abs(C[f]-b[f])>g,v&&(P.parsed=C,P.raw=l.data[M]),d&&(P.options=c||this.resolveDataElementOptions(M,T.active?"active":r)),m||this.updateElement(T,M,P,r),b=C}}getMaxOverflow(){let e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;let s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,s,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}};Me(ss,"id","line"),Me(ss,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Me(ss,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});var lr=class extends ln{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=x.formatNumber(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,n,r){return x._parseObjectDataRadialScale.bind(this)(e,t,n,r)}update(e){let t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){let e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,r)=>{let s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){let e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),a=Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0),o=(s-a)/e.getVisibleDatasetCount();this.outerRadius=s-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,n,r){let s=r==="reset",a=this.chart,u=a.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,d=l.yCenter,f=l.getIndexAngle(0)-.5*x.PI,h=f,p,v=360/this.countVisibleElements();for(p=0;p<t;++p)h+=this._computeAngle(p,r,v);for(p=t;p<t+n;p++){let g=e[p],m=h,y=h+this._computeAngle(p,r,v),_=a.getDataVisibility(p)?l.getDistanceFromCenterForValue(this.getParsed(p).r):0;h=y,s&&(u.animateScale&&(_=0),u.animateRotate&&(m=y=f));let b={x:c,y:d,innerRadius:0,outerRadius:_,startAngle:m,endAngle:y,options:this.resolveDataElementOptions(p,g.active?"active":r)};this.updateElement(g,p,b,r)}}countVisibleElements(){let e=this._cachedMeta,t=0;return e.data.forEach((n,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?x.toRadians(this.resolveDataElementOptions(e,t).angle||n):0}};Me(lr,"id","polarArea"),Me(lr,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Me(lr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((s,a)=>{let u=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:r,lineWidth:u.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});var Ua=class extends ri{};Me(Ua,"id","pie"),Me(Ua,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});var as=class extends ln{getLabelAndValue(e){let t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return x._parseObjectDataRadialScale.bind(this)(e,t,n,r)}update(e){let t=this._cachedMeta,n=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(n.points=r,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let o={_loop:!0,_fullLoop:s.length===r.length,options:a};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){let s=this._cachedMeta.rScale,a=r==="reset";for(let o=t;o<t+n;o++){let u=e[o],l=this.resolveDataElementOptions(o,u.active?"active":r),c=s.getPointPositionForValue(o,this.getParsed(o).r),d=a?s.xCenter:c.x,f=a?s.yCenter:c.y,h={x:d,y:f,angle:c.angle,skip:isNaN(d)||isNaN(f),options:l};this.updateElement(u,o,h,r)}}};Me(as,"id","radar"),Me(as,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Me(as,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});var os=class extends ln{getLabelAndValue(e){let t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,a=this.getParsed(e),o=r.getLabelForValue(a.x),u=s.getLabelForValue(a.y);return{label:n[e]||"",value:"("+o+", "+u+")"}}update(e){let t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled,{start:s,count:a}=x._getStartAndCountOfVisiblePoints(t,n,r);if(this._drawStart=s,this._drawCount=a,x._scaleRangesChanged(t)&&(s=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:o,_dataset:u}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!u._decimated,o.points=n;let l=this.resolveDatasetElementOptions(e);l.segment=this.options.segment,this.updateElement(o,void 0,{animated:!r,options:l},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,s,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){let s=r==="reset",{iScale:a,vScale:o,_stacked:u,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),f=this.includeOptions(r,d),h=a.axis,p=o.axis,{spanGaps:v,segment:g}=this.options,m=x.isNumber(v)?v:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||r==="none",_=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){let M=e[b],T=this.getParsed(b),P=y?M:{},C=x.isNullOrUndef(T[p]),S=P[h]=a.getPixelForValue(T[h],b),A=P[p]=s||C?o.getBasePixel():o.getPixelForValue(u?this.applyStack(o,T,u):T[p],b);P.skip=isNaN(S)||isNaN(A)||C,P.stop=b>0&&Math.abs(T[h]-_[h])>m,g&&(P.parsed=T,P.raw=l.data[b]),f&&(P.options=d||this.resolveDataElementOptions(b,M.active?"active":r)),y||this.updateElement(M,b,P,r),_=T}this.updateSharedOptions(d,r,c)}getMaxOverflow(){let e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let o=0;for(let u=t.length-1;u>=0;--u)o=Math.max(o,t[u].size(this.resolveDataElementOptions(u))/2);return o>0&&o}let n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;let s=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,a)/2}};Me(os,"id","scatter"),Me(os,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Me(os,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var oU=Object.freeze({__proto__:null,BarController:is,BubbleController:rs,DoughnutController:ri,LineController:ss,PieController:Ua,PolarAreaController:lr,RadarController:as,ScatterController:os});function ts(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var al=class{constructor(e){Me(this,"options");this.options=e||{}}static override(e){Object.assign(al.prototype,e)}init(){}formats(){return ts()}parse(){return ts()}format(){return ts()}add(){return ts()}diff(){return ts()}startOf(){return ts()}endOf(){return ts()}},uU={_date:al};function whe(i,e,t,n){let{controller:r,data:s,_sorted:a}=i,o=r._cachedMeta.iScale;if(o&&e===o.axis&&e!=="r"&&a&&s.length){let u=o._reversePixels?x._rlookupByKey:x._lookupByKey;if(n){if(r._sharedOptions){let l=s[0],c=typeof l.getRange=="function"&&l.getRange(e);if(c){let d=u(s,e,t-c),f=u(s,e,t+c);return{lo:d.lo,hi:f.hi}}}}else return u(s,e,t)}return{lo:0,hi:s.length-1}}function dl(i,e,t,n,r){let s=i.getSortedVisibleDatasetMetas(),a=t[e];for(let o=0,u=s.length;o<u;++o){let{index:l,data:c}=s[o],{lo:d,hi:f}=whe(s[o],e,a,r);for(let h=d;h<=f;++h){let p=c[h];p.skip||n(p,l,h)}}}function The(i){let e=i.indexOf("x")!==-1,t=i.indexOf("y")!==-1;return function(n,r){let s=e?Math.abs(n.x-r.x):0,a=t?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function Nb(i,e,t,n,r){let s=[];return!r&&!i.isPointInArea(e)||dl(i,t,e,function(o,u,l){!r&&!x._isPointInArea(o,i.chartArea,0)||o.inRange(e.x,e.y,n)&&s.push({element:o,datasetIndex:u,index:l})},!0),s}function Ehe(i,e,t,n){let r=[];function s(a,o,u){let{startAngle:l,endAngle:c}=a.getProps(["startAngle","endAngle"],n),{angle:d}=x.getAngleFromPoint(a,{x:e.x,y:e.y});x._angleBetween(d,l,c)&&r.push({element:a,datasetIndex:o,index:u})}return dl(i,t,e,s),r}function Phe(i,e,t,n,r,s){let a=[],o=The(t),u=Number.POSITIVE_INFINITY;function l(c,d,f){let h=c.inRange(e.x,e.y,r);if(n&&!h)return;let p=c.getCenterPoint(r);if(!(!!s||i.isPointInArea(p))&&!h)return;let g=o(e,p);g<u?(a=[{element:c,datasetIndex:d,index:f}],u=g):g===u&&a.push({element:c,datasetIndex:d,index:f})}return dl(i,t,e,l),a}function kb(i,e,t,n,r,s){return!s&&!i.isPointInArea(e)?[]:t==="r"&&!n?Ehe(i,e,t,r):Phe(i,e,t,n,r,s)}function mF(i,e,t,n,r){let s=[],a=t==="x"?"inXRange":"inYRange",o=!1;return dl(i,t,e,(u,l,c)=>{u[a](e[t],r)&&(s.push({element:u,datasetIndex:l,index:c}),o=o||u.inRange(e.x,e.y,r))}),n&&!o?[]:s}var lU={evaluateInteractionItems:dl,modes:{index(i,e,t,n){let r=x.getRelativePosition(e,i),s=t.axis||"x",a=t.includeInvisible||!1,o=t.intersect?Nb(i,r,s,n,a):kb(i,r,s,!1,n,a),u=[];return o.length?(i.getSortedVisibleDatasetMetas().forEach(l=>{let c=o[0].index,d=l.data[c];d&&!d.skip&&u.push({element:d,datasetIndex:l.index,index:c})}),u):[]},dataset(i,e,t,n){let r=x.getRelativePosition(e,i),s=t.axis||"xy",a=t.includeInvisible||!1,o=t.intersect?Nb(i,r,s,n,a):kb(i,r,s,!1,n,a);if(o.length>0){let u=o[0].datasetIndex,l=i.getDatasetMeta(u).data;o=[];for(let c=0;c<l.length;++c)o.push({element:l[c],datasetIndex:u,index:c})}return o},point(i,e,t,n){let r=x.getRelativePosition(e,i),s=t.axis||"xy",a=t.includeInvisible||!1;return Nb(i,r,s,n,a)},nearest(i,e,t,n){let r=x.getRelativePosition(e,i),s=t.axis||"xy",a=t.includeInvisible||!1;return kb(i,r,s,t.intersect,n,a)},x(i,e,t,n){let r=x.getRelativePosition(e,i);return mF(i,r,"x",t.intersect,n)},y(i,e,t,n){let r=x.getRelativePosition(e,i);return mF(i,r,"y",t.intersect,n)}}},cU=["left","top","right","bottom"];function Ku(i,e){return i.filter(t=>t.pos===e)}function gF(i,e){return i.filter(t=>cU.indexOf(t.pos)===-1&&t.box.axis===e)}function Qu(i,e){return i.sort((t,n)=>{let r=e?n:t,s=e?t:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function Ahe(i){let e=[],t,n,r,s,a,o;for(t=0,n=(i||[]).length;t<n;++t)r=i[t],{position:s,options:{stack:a,stackWeight:o=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return e}function Dhe(i){let e={};for(let t of i){let{stack:n,pos:r,stackWeight:s}=t;if(!n||!cU.includes(r))continue;let a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}function Rhe(i,e){let t=Dhe(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e,s,a,o;for(s=0,a=i.length;s<a;++s){o=i[s];let{fullSize:u}=o.box,l=t[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*n:u&&e.availableWidth,o.height=r):(o.width=n,o.height=c?c*r:u&&e.availableHeight)}return t}function Che(i){let e=Ahe(i),t=Qu(e.filter(l=>l.box.fullSize),!0),n=Qu(Ku(e,"left"),!0),r=Qu(Ku(e,"right")),s=Qu(Ku(e,"top"),!0),a=Qu(Ku(e,"bottom")),o=gF(e,"x"),u=gF(e,"y");return{fullSize:t,leftAndTop:n.concat(s),rightAndBottom:r.concat(u).concat(a).concat(o),chartArea:Ku(e,"chartArea"),vertical:n.concat(r).concat(u),horizontal:s.concat(a).concat(o)}}function vF(i,e,t,n){return Math.max(i[t],e[t])+Math.max(i[n],e[n])}function dU(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function Ohe(i,e,t,n){let{pos:r,box:s}=t,a=i.maxPadding;if(!x.isObject(r)){t.size&&(i[r]-=t.size);let d=n[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,i[r]+=t.size}s.getPadding&&dU(a,s.getPadding());let o=Math.max(0,e.outerWidth-vF(a,i,"left","right")),u=Math.max(0,e.outerHeight-vF(a,i,"top","bottom")),l=o!==i.w,c=u!==i.h;return i.w=o,i.h=u,t.horizontal?{same:l,other:c}:{same:c,other:l}}function Ihe(i){let e=i.maxPadding;function t(n){let r=Math.max(e[n]-i[n],0);return i[n]+=r,r}i.y+=t("top"),i.x+=t("left"),t("right"),t("bottom")}function Lhe(i,e){let t=e.maxPadding;function n(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{s[a]=Math.max(e[a],t[a])}),s}return n(i?["left","right"]:["top","bottom"])}function nl(i,e,t,n){let r=[],s,a,o,u,l,c;for(s=0,a=i.length,l=0;s<a;++s){o=i[s],u=o.box,u.update(o.width||e.w,o.height||e.h,Lhe(o.horizontal,e));let{same:d,other:f}=Ohe(e,t,o,n);l|=d&&r.length,c=c||f,u.fullSize||r.push(o)}return l&&nl(r,e,t,n)||c}function av(i,e,t,n,r){i.top=t,i.left=e,i.right=e+n,i.bottom=t+r,i.width=n,i.height=r}function _F(i,e,t,n){let r=t.padding,{x:s,y:a}=e;for(let o of i){let u=o.box,l=n[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){let d=e.w*c,f=l.size||u.height;x.defined(l.start)&&(a=l.start),u.fullSize?av(u,r.left,a,t.outerWidth-r.right-r.left,f):av(u,e.left+l.placed,a,d,f),l.start=a,l.placed+=d,a=u.bottom}else{let d=e.h*c,f=l.size||u.width;x.defined(l.start)&&(s=l.start),u.fullSize?av(u,s,r.top,f,t.outerHeight-r.bottom-r.top):av(u,s,e.top+l.placed,f,d),l.start=s,l.placed+=d,s=u.right}}e.x=s,e.y=a}var Vt={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){let t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,n){if(!i)return;let r=x.toPadding(i.options.layout.padding),s=Math.max(e-r.width,0),a=Math.max(t-r.height,0),o=Che(i.boxes),u=o.vertical,l=o.horizontal;x.each(i.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});let c=u.reduce((v,g)=>g.box.options&&g.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/c,hBoxMaxHeight:a/2}),f=Object.assign({},r);dU(f,x.toPadding(n));let h=Object.assign({maxPadding:f,w:s,h:a,x:r.left,y:r.top},r),p=Rhe(u.concat(l),d);nl(o.fullSize,h,d,p),nl(u,h,d,p),nl(l,h,d,p)&&nl(u,h,d,p),Ihe(h),_F(o.leftAndTop,h,d,p),h.x+=h.w,h.y+=h.h,_F(o.rightAndBottom,h,d,p),i.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},x.each(o.chartArea,v=>{let g=v.box;Object.assign(g,i.chartArea),g.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}},ol=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}},mv=class extends ol{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},fv="$chartjs",qhe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xF=i=>i===null||i==="";function Nhe(i,e){let t=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[fv]={initial:{height:n,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",xF(r)){let s=x.readUsedSize(i,"width");s!==void 0&&(i.width=s)}if(xF(n))if(i.style.height==="")i.height=i.width/(e||2);else{let s=x.readUsedSize(i,"height");s!==void 0&&(i.height=s)}return i}var fU=x.supportsEventListenerOptions?{passive:!0}:!1;function khe(i,e,t){i.addEventListener(e,t,fU)}function Fhe(i,e,t){i.canvas.removeEventListener(e,t,fU)}function Uhe(i,e){let t=qhe[i.type]||i.type,{x:n,y:r}=x.getRelativePosition(i,e);return{type:t,chart:e,native:i,x:n!==void 0?n:null,y:r!==void 0?r:null}}function gv(i,e){for(let t of i)if(t===e||t.contains(e))return!0}function Bhe(i,e,t){let n=i.canvas,r=new MutationObserver(s=>{let a=!1;for(let o of s)a=a||gv(o.addedNodes,n),a=a&&!gv(o.removedNodes,n);a&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function zhe(i,e,t){let n=i.canvas,r=new MutationObserver(s=>{let a=!1;for(let o of s)a=a||gv(o.removedNodes,n),a=a&&!gv(o.addedNodes,n);a&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var ul=new Map,yF=0;function hU(){let i=window.devicePixelRatio;i!==yF&&(yF=i,ul.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function Hhe(i,e){ul.size||window.addEventListener("resize",hU),ul.set(i,e)}function Whe(i){ul.delete(i),ul.size||window.removeEventListener("resize",hU)}function Vhe(i,e,t){let n=i.canvas,r=n&&x._getParentNode(n);if(!r)return;let s=x.throttled((o,u)=>{let l=r.clientWidth;t(o,u),l<r.clientWidth&&t()},window),a=new ResizeObserver(o=>{let u=o[0],l=u.contentRect.width,c=u.contentRect.height;l===0&&c===0||s(l,c)});return a.observe(r),Hhe(i,s),a}function Fb(i,e,t){t&&t.disconnect(),e==="resize"&&Whe(i)}function Ghe(i,e,t){let n=i.canvas,r=x.throttled(s=>{i.ctx!==null&&t(Uhe(s,i))},i);return khe(n,e,r),r}var vv=class extends ol{acquireContext(e,t){let n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Nhe(e,t),n):null}releaseContext(e){let t=e.canvas;if(!t[fv])return!1;let n=t[fv].initial;["height","width"].forEach(s=>{let a=n[s];x.isNullOrUndef(a)?t.removeAttribute(s):t.setAttribute(s,a)});let r=n.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[fv],!0}addEventListener(e,t,n){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),a={attach:Bhe,detach:zhe,resize:Vhe}[t]||Ghe;r[t]=a(e,t,n)}removeEventListener(e,t){let n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:Fb,detach:Fb,resize:Fb}[t]||Fhe)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return x.getMaximumSize(e,t,n,r)}isAttached(e){let t=x._getParentNode(e);return!!(t&&t.isConnected)}};function pU(i){return!x._isDomSupported()||typeof OffscreenCanvas!="undefined"&&i instanceof OffscreenCanvas?mv:vv}var dn=class{constructor(){Me(this,"x");Me(this,"y");Me(this,"active",!1);Me(this,"options");Me(this,"$animations")}tooltipPosition(e){let{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return x.isNumber(this.x)&&x.isNumber(this.y)}getProps(e,t){let n=this.$animations;if(!t||!n)return this;let r={};return e.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}};Me(dn,"defaults",{}),Me(dn,"defaultRoutes");function jhe(i,e){let t=i.options.ticks,n=Yhe(i),r=Math.min(t.maxTicksLimit||n,n),s=t.major.enabled?$he(e):[],a=s.length,o=s[0],u=s[a-1],l=[];if(a>r)return Zhe(e,l,s,a/r),l;let c=Xhe(s,e,r);if(a>0){let d,f,h=a>1?Math.round((u-o)/(a-1)):null;for(ov(e,l,c,x.isNullOrUndef(h)?0:o-h,o),d=0,f=a-1;d<f;d++)ov(e,l,c,s[d],s[d+1]);return ov(e,l,c,u,x.isNullOrUndef(h)?e.length:u+h),l}return ov(e,l,c),l}function Yhe(i){let e=i.options.offset,t=i._tickSize(),n=i._length/t+(e?0:1),r=i._maxLength/t;return Math.floor(Math.min(n,r))}function Xhe(i,e,t){let n=Jhe(i),r=e.length/t;if(!n)return Math.max(r,1);let s=x._factorize(n);for(let a=0,o=s.length-1;a<o;a++){let u=s[a];if(u>r)return u}return Math.max(r,1)}function $he(i){let e=[],t,n;for(t=0,n=i.length;t<n;t++)i[t].major&&e.push(t);return e}function Zhe(i,e,t,n){let r=0,s=t[0],a;for(n=Math.ceil(n),a=0;a<i.length;a++)a===s&&(e.push(i[a]),r++,s=t[r*n])}function ov(i,e,t,n,r){let s=x.valueOrDefault(n,0),a=Math.min(x.valueOrDefault(r,i.length),i.length),o=0,u,l,c;for(t=Math.ceil(t),r&&(u=r-n,t=u/Math.floor(u/t)),c=s;c<0;)o++,c=Math.round(s+o*t);for(l=Math.max(s,0);l<a;l++)l===c&&(e.push(i[l]),o++,c=Math.round(s+o*t))}function Jhe(i){let e=i.length,t,n;if(e<2)return!1;for(n=i[0],t=1;t<e;++t)if(i[t]-i[t-1]!==n)return!1;return n}var Khe=i=>i==="left"?"right":i==="right"?"left":i,bF=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t,MF=(i,e)=>Math.min(e||i,i);function SF(i,e){let t=[],n=i.length/e,r=i.length,s=0;for(;s<r;s+=n)t.push(i[Math.floor(s)]);return t}function Qhe(i,e,t){let n=i.ticks.length,r=Math.min(e,n-1),s=i._startPixel,a=i._endPixel,o=1e-6,u=i.getPixelForTick(r),l;if(!(t&&(n===1?l=Math.max(u-s,a-u):e===0?l=(i.getPixelForTick(1)-u)/2:l=(u-i.getPixelForTick(r-1))/2,u+=r<e?l:-l,u<s-o||u>a+o)))return u}function epe(i,e){x.each(i,t=>{let n=t.gc,r=n.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[n[s]];n.splice(0,r)}})}function el(i){return i.drawTicks?i.tickLength:0}function wF(i,e){if(!i.display)return 0;let t=x.toFont(i.font,e),n=x.toPadding(i.padding);return(x.isArray(i.text)?i.text.length:1)*t.lineHeight+n.height}function tpe(i,e){return x.createContext(i,{scale:e,type:"scale"})}function npe(i,e,t){return x.createContext(i,{tick:t,index:e,type:"tick"})}function ipe(i,e,t){let n=x._toLeftRightCenter(i);return(t&&e!=="right"||!t&&e==="right")&&(n=Khe(n)),n}function rpe(i,e,t,n){let{top:r,left:s,bottom:a,right:o,chart:u}=i,{chartArea:l,scales:c}=u,d=0,f,h,p,v=a-r,g=o-s;if(i.isHorizontal()){if(h=x._alignStartEnd(n,s,o),x.isObject(t)){let m=Object.keys(t)[0],y=t[m];p=c[m].getPixelForValue(y)+v-e}else t==="center"?p=(l.bottom+l.top)/2+v-e:p=bF(i,t,e);f=o-s}else{if(x.isObject(t)){let m=Object.keys(t)[0],y=t[m];h=c[m].getPixelForValue(y)-g+e}else t==="center"?h=(l.left+l.right)/2-g+e:h=bF(i,t,e);p=x._alignStartEnd(n,a,r),d=t==="left"?-x.HALF_PI:x.HALF_PI}return{titleX:h,titleY:p,maxWidth:f,rotation:d}}var si=class extends dn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=x.finiteOrDefault(e,Number.POSITIVE_INFINITY),t=x.finiteOrDefault(t,Number.NEGATIVE_INFINITY),n=x.finiteOrDefault(n,Number.POSITIVE_INFINITY),r=x.finiteOrDefault(r,Number.NEGATIVE_INFINITY),{min:x.finiteOrDefault(e,n),max:x.finiteOrDefault(t,r),minDefined:x.isNumberFinite(e),maxDefined:x.isNumberFinite(t)}}getMinMax(e){let{min:t,max:n,minDefined:r,maxDefined:s}=this.getUserBounds(),a;if(r&&s)return{min:t,max:n};let o=this.getMatchingVisibleMetas();for(let u=0,l=o.length;u<l;++u)a=o[u].controller.getMinMax(this,e),r||(t=Math.min(t,a.min)),s||(n=Math.max(n,a.max));return t=s&&t>n?n:t,n=r&&t>n?t:n,{min:x.finiteOrDefault(t,x.finiteOrDefault(n,t)),max:x.finiteOrDefault(n,x.finiteOrDefault(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){x.callback(this.options.beforeUpdate,[this])}update(e,t,n){let{beginAtZero:r,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=x._addGrace(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let u=o<this.ticks.length;this._convertTicksToLabels(u?SF(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=jhe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){x.callback(this.options.afterUpdate,[this])}beforeSetDimensions(){x.callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){x.callback(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),x.callback(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){x.callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=x.callback(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){x.callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){x.callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,n=MF(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,a=r,o,u,l;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal()){this.labelRotation=r;return}let c=this._getLabelSizes(),d=c.widest.width,f=c.highest.height,h=x._limitValue(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/n:h/(n-1),d+6>o&&(o=h/(n-(e.offset?.5:1)),u=this.maxHeight-el(e.grid)-t.padding-wF(e.title,this.chart.options.font),l=Math.sqrt(d*d+f*f),a=x.toDegrees(Math.min(Math.asin(x._limitValue((c.highest.height+6)/o,-1,1)),Math.asin(x._limitValue(u/l,-1,1))-Math.asin(x._limitValue(f/l,-1,1)))),a=Math.max(r,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){x.callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){x.callback(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){let u=wF(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=el(s)+u):(e.height=this.maxHeight,e.width=el(s)+u),n.display&&this.ticks.length){let{first:l,last:c,widest:d,highest:f}=this._getLabelSizes(),h=n.padding*2,p=x.toRadians(this.labelRotation),v=Math.cos(p),g=Math.sin(p);if(o){let m=n.mirror?0:g*d.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+m+h)}else{let m=n.mirror?0:v*d.width+g*f.height;e.width=Math.min(this.maxWidth,e.width+m+h)}this._calculatePadding(l,c,g,v)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){let{ticks:{align:s,padding:a},position:o}=this.options,u=this.labelRotation!==0,l=o!=="top"&&this.axis==="x";if(this.isHorizontal()){let c=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),f=0,h=0;u?l?(f=r*e.width,h=n*t.height):(f=n*e.height,h=r*t.width):s==="start"?h=t.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,h=t.width/2),this.paddingLeft=Math.max((f-c+a)*this.width/(this.width-c),0),this.paddingRight=Math.max((h-d+a)*this.width/(this.width-d),0)}else{let c=t.height/2,d=e.height/2;s==="start"?(c=0,d=e.height):s==="end"&&(c=t.height,d=0),this.paddingTop=c+a,this.paddingBottom=d+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){x.callback(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)x.isNullOrUndef(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=SF(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){let{ctx:r,_longestTextCache:s}=this,a=[],o=[],u=Math.floor(t/MF(t,n)),l=0,c=0,d,f,h,p,v,g,m,y,_,b,M;for(d=0;d<t;d+=u){if(p=e[d].label,v=this._resolveTickFontOptions(d),r.font=g=v.string,m=s[g]=s[g]||{data:{},gc:[]},y=v.lineHeight,_=b=0,!x.isNullOrUndef(p)&&!x.isArray(p))_=x._measureText(r,m.data,m.gc,_,p),b=y;else if(x.isArray(p))for(f=0,h=p.length;f<h;++f)M=p[f],!x.isNullOrUndef(M)&&!x.isArray(M)&&(_=x._measureText(r,m.data,m.gc,_,M),b+=y);a.push(_),o.push(b),l=Math.max(_,l),c=Math.max(b,c)}epe(s,t);let T=a.indexOf(l),P=o.indexOf(c),C=S=>({width:a[S]||0,height:o[S]||0});return{first:C(0),last:C(t-1),widest:C(T),highest:C(P),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return x._int16Range(this._alignToPixels?x._alignPixel(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let n=t[e];return n.$context||(n.$context=npe(this.getContext(),e,n))}return this.$context||(this.$context=tpe(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=x.toRadians(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,o=s?s.widest.width+a:0,u=s?s.highest.height+a:0;return this.isHorizontal()?u*n>o*r?o/n:u/r:u*r<o*n?u/n:o/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,n=this.chart,r=this.options,{grid:s,position:a,border:o}=r,u=s.offset,l=this.isHorizontal(),d=this.ticks.length+(u?1:0),f=el(s),h=[],p=o.setContext(this.getContext()),v=p.display?p.width:0,g=v/2,m=function(J){return x._alignPixel(n,J,v)},y,_,b,M,T,P,C,S,A,z,j,W;if(a==="top")y=m(this.bottom),P=this.bottom-f,S=y-g,z=m(e.top)+g,W=e.bottom;else if(a==="bottom")y=m(this.top),z=e.top,W=m(e.bottom)-g,P=y+g,S=this.top+f;else if(a==="left")y=m(this.right),T=this.right-f,C=y-g,A=m(e.left)+g,j=e.right;else if(a==="right")y=m(this.left),A=e.left,j=m(e.right)-g,T=y+g,C=this.left+f;else if(t==="x"){if(a==="center")y=m((e.top+e.bottom)/2+.5);else if(x.isObject(a)){let J=Object.keys(a)[0],Z=a[J];y=m(this.chart.scales[J].getPixelForValue(Z))}z=e.top,W=e.bottom,P=y+g,S=P+f}else if(t==="y"){if(a==="center")y=m((e.left+e.right)/2);else if(x.isObject(a)){let J=Object.keys(a)[0],Z=a[J];y=m(this.chart.scales[J].getPixelForValue(Z))}T=y-g,C=T-f,A=e.left,j=e.right}let G=x.valueOrDefault(r.ticks.maxTicksLimit,d),V=Math.max(1,Math.ceil(d/G));for(_=0;_<d;_+=V){let J=this.getContext(_),Z=s.setContext(J),ne=o.setContext(J),re=Z.lineWidth,ce=Z.color,Te=ne.dash||[],xe=ne.dashOffset,K=Z.tickWidth,ue=Z.tickColor,_e=Z.tickBorderDash||[],be=Z.tickBorderDashOffset;b=Qhe(this,_,u),b!==void 0&&(M=x._alignPixel(n,b,re),l?T=C=A=j=M:P=S=z=W=M,h.push({tx1:T,ty1:P,tx2:C,ty2:S,x1:A,y1:z,x2:j,y2:W,width:re,color:ce,borderDash:Te,borderDashOffset:xe,tickWidth:K,tickColor:ue,tickBorderDash:_e,tickBorderDashOffset:be}))}return this._ticksLength=d,this._borderValue=y,h}_computeLabelItems(e){let t=this.axis,n=this.options,{position:r,ticks:s}=n,a=this.isHorizontal(),o=this.ticks,{align:u,crossAlign:l,padding:c,mirror:d}=s,f=el(n.grid),h=f+c,p=d?-c:h,v=-x.toRadians(this.labelRotation),g=[],m,y,_,b,M,T,P,C,S,A,z,j,W="middle";if(r==="top")T=this.bottom-p,P=this._getXAxisLabelAlignment();else if(r==="bottom")T=this.top+p,P=this._getXAxisLabelAlignment();else if(r==="left"){let V=this._getYAxisLabelAlignment(f);P=V.textAlign,M=V.x}else if(r==="right"){let V=this._getYAxisLabelAlignment(f);P=V.textAlign,M=V.x}else if(t==="x"){if(r==="center")T=(e.top+e.bottom)/2+h;else if(x.isObject(r)){let V=Object.keys(r)[0],J=r[V];T=this.chart.scales[V].getPixelForValue(J)+h}P=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")M=(e.left+e.right)/2-h;else if(x.isObject(r)){let V=Object.keys(r)[0],J=r[V];M=this.chart.scales[V].getPixelForValue(J)}P=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(u==="start"?W="top":u==="end"&&(W="bottom"));let G=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){_=o[m],b=_.label;let V=s.setContext(this.getContext(m));C=this.getPixelForTick(m)+s.labelOffset,S=this._resolveTickFontOptions(m),A=S.lineHeight,z=x.isArray(b)?b.length:1;let J=z/2,Z=V.color,ne=V.textStrokeColor,re=V.textStrokeWidth,ce=P;a?(M=C,P==="inner"&&(m===y-1?ce=this.options.reverse?"left":"right":m===0?ce=this.options.reverse?"right":"left":ce="center"),r==="top"?l==="near"||v!==0?j=-z*A+A/2:l==="center"?j=-G.highest.height/2-J*A+A:j=-G.highest.height+A/2:l==="near"||v!==0?j=A/2:l==="center"?j=G.highest.height/2-J*A:j=G.highest.height-z*A,d&&(j*=-1),v!==0&&!V.showLabelBackdrop&&(M+=A/2*Math.sin(v))):(T=C,j=(1-z)*A/2);let Te;if(V.showLabelBackdrop){let xe=x.toPadding(V.backdropPadding),K=G.heights[m],ue=G.widths[m],_e=j-xe.top,be=0-xe.left;switch(W){case"middle":_e-=K/2;break;case"bottom":_e-=K;break}switch(P){case"center":be-=ue/2;break;case"right":be-=ue;break}Te={left:be,top:_e,width:ue+xe.width,height:K+xe.height,color:V.backdropColor}}g.push({label:b,font:S,textOffset:j,options:{rotation:v,color:Z,strokeColor:ne,strokeWidth:re,textAlign:ce,textBaseline:W,translation:[M,T],backdrop:Te}})}return g}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-x.toRadians(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,a=this._getLabelSizes(),o=e+s,u=a.widest.width,l,c;return t==="left"?r?(c=this.right+s,n==="near"?l="left":n==="center"?(l="center",c+=u/2):(l="right",c+=u)):(c=this.right-o,n==="near"?l="right":n==="center"?(l="center",c-=u/2):(l="left",c=this.left)):t==="right"?r?(c=this.left+s,n==="near"?l="right":n==="center"?(l="center",c-=u/2):(l="left",c-=u)):(c=this.left+o,n==="near"?l="left":n==="center"?(l="center",c+=u/2):(l="right",c=this.right)):l="right",{textAlign:l,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,a),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,a,o=(u,l,c)=>{!c.width||!c.color||(n.save(),n.lineWidth=c.width,n.strokeStyle=c.color,n.setLineDash(c.borderDash||[]),n.lineDashOffset=c.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(l.x,l.y),n.stroke(),n.restore())};if(t.display)for(s=0,a=r.length;s<a;++s){let u=r[s];t.drawOnChartArea&&o({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),t.drawTicks&&o({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),a=n.display?s.width:0;if(!a)return;let o=r.setContext(this.getContext(0)).lineWidth,u=this._borderValue,l,c,d,f;this.isHorizontal()?(l=x._alignPixel(e,this.left,a)-a/2,c=x._alignPixel(e,this.right,o)+o/2,d=f=u):(d=x._alignPixel(e,this.top,a)-a/2,f=x._alignPixel(e,this.bottom,o)+o/2,l=c=u),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let n=this.ctx,r=this._computeLabelArea();r&&x.clipArea(n,r);let s=this.getLabelItems(e);for(let a of s){let o=a.options,u=a.font,l=a.label,c=a.textOffset;x.renderText(n,l,0,c,u,o)}r&&x.unclipArea(n)}drawTitle(){let{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;let s=x.toFont(n.font),a=x.toPadding(n.padding),o=n.align,u=s.lineHeight/2;t==="bottom"||t==="center"||x.isObject(t)?(u+=a.bottom,x.isArray(n.text)&&(u+=s.lineHeight*(n.text.length-1))):u+=a.top;let{titleX:l,titleY:c,maxWidth:d,rotation:f}=rpe(this,u,t,o);x.renderText(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:f,textAlign:ipe(o,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,n=x.valueOrDefault(e.grid&&e.grid.z,-1),r=x.valueOrDefault(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==si.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[],s,a;for(s=0,a=t.length;s<a;++s){let o=t[s];o[n]===this.id&&(!e||o.type===e)&&r.push(o)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return x.toFont(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Ba=class{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),n;ope(t)&&(n=this.register(t));let r=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,spe(e,a,n),this.override&&x.defaults.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){let t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in x.defaults[r]&&(delete x.defaults[r][n],this.override&&delete x.overrides[n])}};function spe(i,e,t){let n=x.merge(Object.create(null),[t?x.defaults.get(t):{},x.defaults.get(e),i.defaults]);x.defaults.set(e,n),i.defaultRoutes&&ape(e,i.defaultRoutes),i.descriptors&&x.defaults.describe(e,i.descriptors)}function ape(i,e){Object.keys(e).forEach(t=>{let n=t.split("."),r=n.pop(),s=[i].concat(n).join("."),a=e[t].split("."),o=a.pop(),u=a.join(".");x.defaults.route(s,r,u,o)})}function ope(i){return"id"in i&&"defaults"in i}var Wb=class{constructor(){this.controllers=new Ba(ln,"datasets",!0),this.elements=new Ba(dn,"elements"),this.plugins=new Ba(Object,"plugins"),this.scales=new Ba(si,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(r=>{let s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):x.each(r,a=>{let o=n||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,t,n){let r=x._capitalize(e);x.callback(n["before"+r],[],n),t[e](n),x.callback(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}},Un=new Wb,Vb=class{constructor(){this._init=[]}notify(e,t,n,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(s,e,t,n);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,n,r){r=r||{};for(let s of e){let a=s.plugin,o=a[n],u=[t,r,s.options];if(x.callback(o,u,a)===!1&&r.cancelable)return!1}return!0}invalidate(){x.isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let n=e&&e.config,r=x.valueOrDefault(n.options&&n.options.plugins,{}),s=upe(n);return r===!1&&!t?[]:cpe(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],n=this._cache,r=(s,a)=>s.filter(o=>!a.some(u=>o.plugin.id===u.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}};function upe(i){let e={},t=[],n=Object.keys(Un.plugins.items);for(let s=0;s<n.length;s++)t.push(Un.getPlugin(n[s]));let r=i.plugins||[];for(let s=0;s<r.length;s++){let a=r[s];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function lpe(i,e){return!e&&i===!1?null:i===!0?{}:i}function cpe(i,{plugins:e,localIds:t},n,r){let s=[],a=i.getContext();for(let o of e){let u=o.id,l=lpe(n[u],r);l!==null&&s.push({plugin:o,options:dpe(i.config,{plugin:o,local:t[u]},l,a)})}return s}function dpe(i,{plugin:e,local:t},n,r){let s=i.pluginScopeKeys(e),a=i.getOptionScopes(n,s);return t&&e.defaults&&a.push(e.defaults),i.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gb(i,e){let t=x.defaults.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function fpe(i,e){let t=i;return i==="_index_"?t=e:i==="_value_"&&(t=e==="x"?"y":"x"),t}function hpe(i,e){return i===e?"_index_":"_value_"}function TF(i){if(i==="x"||i==="y"||i==="r")return i}function ppe(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function jb(i,...e){if(TF(i))return i;for(let t of e){let n=t.axis||ppe(t.position)||i.length>1&&TF(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function EF(i,e,t){if(t[e+"AxisID"]===i)return{axis:e}}function mpe(i,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(t.length)return EF(i,"x",t[0])||EF(i,"y",t[0])}return{}}function gpe(i,e){let t=x.overrides[i.type]||{scales:{}},n=e.scales||{},r=Gb(i.type,e),s=Object.create(null);return Object.keys(n).forEach(a=>{let o=n[a];if(!x.isObject(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let u=jb(a,o,mpe(a,i),x.defaults.scales[o.type]),l=hpe(u,r),c=t.scales||{};s[a]=x.mergeIf(Object.create(null),[{axis:u},o,c[u],c[l]])}),i.data.datasets.forEach(a=>{let o=a.type||i.type,u=a.indexAxis||Gb(o,e),c=(x.overrides[o]||{}).scales||{};Object.keys(c).forEach(d=>{let f=fpe(d,u),h=a[f+"AxisID"]||f;s[h]=s[h]||Object.create(null),x.mergeIf(s[h],[{axis:f},n[h],c[d]])})}),Object.keys(s).forEach(a=>{let o=s[a];x.mergeIf(o,[x.defaults.scales[o.type],x.defaults.scale])}),s}function mU(i){let e=i.options||(i.options={});e.plugins=x.valueOrDefault(e.plugins,{}),e.scales=gpe(i,e)}function gU(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function vpe(i){return i=i||{},i.data=gU(i.data),mU(i),i}var PF=new Map,vU=new Set;function uv(i,e){let t=PF.get(i);return t||(t=e(),PF.set(i,t),vU.add(t)),t}var tl=(i,e,t)=>{let n=x.resolveObjectKey(e,t);n!==void 0&&i.add(n)},Yb=class{constructor(e){this._config=vpe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=gU(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),mU(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return uv(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return uv(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return uv(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,n=this.type;return uv(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let n=this._scopeCache,r=n.get(e);return(!r||t)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){let{options:r,type:s}=this,a=this._cachedScopes(e,n),o=a.get(t);if(o)return o;let u=new Set;t.forEach(c=>{e&&(u.add(e),c.forEach(d=>tl(u,e,d))),c.forEach(d=>tl(u,r,d)),c.forEach(d=>tl(u,x.overrides[s]||{},d)),c.forEach(d=>tl(u,x.defaults,d)),c.forEach(d=>tl(u,x.descriptors,d))});let l=Array.from(u);return l.length===0&&l.push(Object.create(null)),vU.has(t)&&a.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,x.overrides[t]||{},x.defaults.datasets[t]||{},{type:t},x.defaults,x.descriptors]}resolveNamedOptions(e,t,n,r=[""]){let s={$shared:!0},{resolver:a,subPrefixes:o}=AF(this._resolverCache,e,r),u=a;if(xpe(a,t)){s.$shared=!1,n=x.isFunction(n)?n():n;let l=this.createResolver(e,n,o);u=x._attachContext(a,n,l)}for(let l of t)s[l]=u[l];return s}createResolver(e,t,n=[""],r){let{resolver:s}=AF(this._resolverCache,e,n);return x.isObject(t)?x._attachContext(s,t,void 0,r):s}};function AF(i,e,t){let n=i.get(e);n||(n=new Map,i.set(e,n));let r=t.join(),s=n.get(r);return s||(s={resolver:x._createResolver(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},n.set(r,s)),s}var _pe=i=>x.isObject(i)&&Object.getOwnPropertyNames(i).reduce((e,t)=>e||x.isFunction(i[t]),!1);function xpe(i,e){let{isScriptable:t,isIndexable:n}=x._descriptors(i);for(let r of e){let s=t(r),a=n(r),o=(a||s)&&i[r];if(s&&(x.isFunction(o)||_pe(o))||a&&x.isArray(o))return!0}return!1}var ype="4.3.3",bpe=["top","bottom","left","right","chartArea"];function DF(i,e){return i==="top"||i==="bottom"||bpe.indexOf(i)===-1&&e==="x"}function RF(i,e){return function(t,n){return t[i]===n[i]?t[e]-n[e]:t[i]-n[i]}}function CF(i){let e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),x.callback(t&&t.onComplete,[i],e)}function Mpe(i){let e=i.chart,t=e.options.animation;x.callback(t&&t.onProgress,[i],e)}function _U(i){return x._isDomSupported()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}var hv={},OF=i=>{let e=_U(i);return Object.values(hv).filter(t=>t.canvas===e).pop()};function Spe(i,e,t){let n=Object.keys(i);for(let r of n){let s=+r;if(s>=e){let a=i[r];delete i[r],(t>0||s>e)&&(i[s+t]=a)}}}function wpe(i,e,t,n){return!t||i.type==="mouseout"?null:n?e:i}function Tpe(i){let{xScale:e,yScale:t}=i;if(e&&t)return{left:e.left,right:e.right,top:t.top,bottom:t.bottom}}var ii=class{static register(...e){Un.add(...e),IF()}static unregister(...e){Un.remove(...e),IF()}constructor(e,t){let n=this.config=new Yb(t),r=_U(e),s=OF(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||pU(r)),this.platform.updateConfig(n);let o=this.platform.acquireContext(r,a.aspectRatio),u=o&&o.canvas,l=u&&u.height,c=u&&u.width;if(this.id=x.uid(),this.ctx=o,this.canvas=u,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Vb,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=x.debounce(d=>this.update(d),a.resizeDelay||0),this._dataChanges=[],hv[this.id]=this,!o||!u){console.error("Failed to create chart: can't acquire context from the given item");return}ni.listen(this,"complete",CF),ni.listen(this,"progress",Mpe),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return x.isNullOrUndef(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Un}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():x.retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return x.clearCanvas(this.canvas,this.ctx),this}stop(){return ni.stop(this),this}resize(e,t){ni.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){let n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,s),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,x.retinaScale(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),x.callback(n.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){let t=this.options.scales||{};x.each(t,(n,r)=>{n.id=r})}buildOrUpdateScales(){let e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((a,o)=>(a[o]=!1,a),{}),s=[];t&&(s=s.concat(Object.keys(t).map(a=>{let o=t[a],u=jb(a,o),l=u==="r",c=u==="x";return{options:o,dposition:l?"chartArea":c?"bottom":"left",dtype:l?"radialLinear":c?"category":"linear"}}))),x.each(s,a=>{let o=a.options,u=o.id,l=jb(u,o),c=x.valueOrDefault(o.type,a.dtype);(o.position===void 0||DF(o.position,l)!==DF(a.dposition))&&(o.position=a.dposition),r[u]=!0;let d=null;if(u in n&&n[u].type===c)d=n[u];else{let f=Un.getScale(c);d=new f({id:u,type:c,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(o,e)}),x.each(r,(a,o)=>{a||delete n[o]}),x.each(n,a=>{Vt.configure(this,a,a.options),Vt.addBox(this,a)})}_updateMetasets(){let e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((r,s)=>r.index-s.index),n>t){for(let r=t;r<n;++r)this._destroyDatasetMeta(r);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(RF("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,r)=>{t.filter(s=>s===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){let e=[],t=this.data.datasets,n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){let s=t[n],a=this.getDatasetMeta(n),o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=s.indexAxis||Gb(o,this.options),a.order=s.order||0,a.index=n,a.label=""+s.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{let u=Un.getController(o),{datasetElementType:l,dataElementType:c}=x.defaults.datasets[o];Object.assign(u,{dataElementType:Un.getElement(c),datasetElementType:l&&Un.getElement(l)}),a.controller=new u(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){x.each(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let t=this.config;t.update();let n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,c=this.data.datasets.length;l<c;l++){let{controller:d}=this.getDatasetMeta(l),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),a=Math.max(+d.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||x.each(s,l=>{l.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(RF("z","_idx"));let{_active:o,_lastEvent:u}=this;u?this._eventHandler(u,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){x.each(this.scales,e=>{Vt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!x.setsEqual(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(let{method:n,start:r,count:s}of t){let a=n==="_removeElements"?-s:s;Spe(e,r,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let t=this.data.datasets.length,n=s=>new Set(e.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),r=n(0);for(let s=1;s<t;s++)if(!x.setsEqual(r,n(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vt.update(this,this.width,this.height,e);let t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],x.each(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,x.isFunction(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){let n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ni.has(this)?this.attached&&!ni.running(this)&&ni.start(this):(this.draw(),CF({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let t=this._sortedMetasets,n=[],r,s;for(r=0,s=t.length;r<s;++r){let a=t[r];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let t=this.ctx,n=e._clip,r=!n.disabled,s=Tpe(e)||this.chartArea,a={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(r&&x.clipArea(t,{left:n.left===!1?0:s.left-n.left,right:n.right===!1?this.width:s.right+n.right,top:n.top===!1?0:s.top-n.top,bottom:n.bottom===!1?this.height:s.bottom+n.bottom}),e.controller.draw(),r&&x.unclipArea(t),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return x._isPointInArea(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){let s=lU.modes[t];return typeof s=="function"?s(this,e,n,r):[]}getDatasetMeta(e){let t=this.data.datasets[e],n=this._metasets,r=n.filter(s=>s&&s._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=x.createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let t=this.data.datasets[e];if(!t)return!1;let n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){let n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){let r=n?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,r);x.defined(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(s,{visible:n}),this.update(o=>o.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){let t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ni.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),x.clearCanvas(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete hv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,t=this.platform,n=(s,a)=>{t.addEventListener(this,s,a),e[s]=a},r=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};x.each(this.options.events,s=>n(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,t=this.platform,n=(u,l)=>{t.addEventListener(this,u,l),e[u]=l},r=(u,l)=>{e[u]&&(t.removeEventListener(this,u,l),delete e[u])},s=(u,l)=>{this.canvas&&this.resize(u,l)},a,o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",s),n("detach",a)};a=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){x.each(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},x.each(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){let r=n?"set":"remove",s,a,o,u;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),o=0,u=e.length;o<u;++o){a=e[o];let l=a&&this.getDatasetMeta(a.datasetIndex).controller;l&&l[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let t=this._active||[],n=e.map(({datasetIndex:s,index:a})=>{let o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!x._elementsEqual(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,n){let r=this.options.hover,s=(u,l)=>u.filter(c=>!l.some(d=>c.datasetIndex===d.datasetIndex&&c.index===d.index)),a=s(t,e),o=n?e:s(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){let n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;let s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){let{_active:r=[],options:s}=this,a=t,o=this._getActiveElements(e,r,n,a),u=x._isClickEvent(e),l=wpe(e,this._lastEvent,n,u);n&&(this._lastEvent=null,x.callback(s.onHover,[e,o,this],this),u&&x.callback(s.onClick,[e,o,this],this));let c=!x._elementsEqual(o,r);return(c||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if(e.type==="mouseout")return[];if(!n)return t;let s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}};Me(ii,"defaults",x.defaults),Me(ii,"instances",hv),Me(ii,"overrides",x.overrides),Me(ii,"registry",Un),Me(ii,"version",ype),Me(ii,"getChart",OF);function IF(){return x.each(ii.instances,i=>i._plugins.invalidate())}function Epe(i,e,t){let{startAngle:n,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:u}=e,l=r/o;i.beginPath(),i.arc(s,a,o,n-l,t+l),u>r?(l=r/u,i.arc(s,a,u,t+l,n-l,!0)):i.arc(s,a,r,t+x.HALF_PI,n-x.HALF_PI),i.closePath(),i.clip()}function Ppe(i){return x._readValueToProps(i,["outerStart","outerEnd","innerStart","innerEnd"])}function Ape(i,e,t,n){let r=Ppe(i.options.borderRadius),s=(t-e)/2,a=Math.min(s,n*e/2),o=u=>{let l=(t-Math.min(s,u))*n/2;return x._limitValue(u,0,Math.min(s,l))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:x._limitValue(r.innerStart,0,a),innerEnd:x._limitValue(r.innerEnd,0,a)}}function Fa(i,e,t,n){return{x:t+i*Math.cos(e),y:n+i*Math.sin(e)}}function _v(i,e,t,n,r,s){let{x:a,y:o,startAngle:u,pixelMargin:l,innerRadius:c}=e,d=Math.max(e.outerRadius+n+t-l,0),f=c>0?c+n+t+l:0,h=0,p=r-u;if(n){let V=c>0?c-n:0,J=d>0?d-n:0,Z=(V+J)/2,ne=Z!==0?p*Z/(Z+n):p;h=(p-ne)/2}let v=Math.max(.001,p*d-t/x.PI)/d,g=(p-v)/2,m=u+g+h,y=r-g-h,{outerStart:_,outerEnd:b,innerStart:M,innerEnd:T}=Ape(e,f,d,y-m),P=d-_,C=d-b,S=m+_/P,A=y-b/C,z=f+M,j=f+T,W=m+M/z,G=y-T/j;if(i.beginPath(),s){let V=(S+A)/2;if(i.arc(a,o,d,S,V),i.arc(a,o,d,V,A),b>0){let re=Fa(C,A,a,o);i.arc(re.x,re.y,b,A,y+x.HALF_PI)}let J=Fa(j,y,a,o);if(i.lineTo(J.x,J.y),T>0){let re=Fa(j,G,a,o);i.arc(re.x,re.y,T,y+x.HALF_PI,G+Math.PI)}let Z=(y-T/f+(m+M/f))/2;if(i.arc(a,o,f,y-T/f,Z,!0),i.arc(a,o,f,Z,m+M/f,!0),M>0){let re=Fa(z,W,a,o);i.arc(re.x,re.y,M,W+Math.PI,m-x.HALF_PI)}let ne=Fa(P,m,a,o);if(i.lineTo(ne.x,ne.y),_>0){let re=Fa(P,S,a,o);i.arc(re.x,re.y,_,m-x.HALF_PI,S)}}else{i.moveTo(a,o);let V=Math.cos(S)*d+a,J=Math.sin(S)*d+o;i.lineTo(V,J);let Z=Math.cos(A)*d+a,ne=Math.sin(A)*d+o;i.lineTo(Z,ne)}i.closePath()}function Dpe(i,e,t,n,r){let{fullCircles:s,startAngle:a,circumference:o}=e,u=e.endAngle;if(s){_v(i,e,t,n,u,r);for(let l=0;l<s;++l)i.fill();isNaN(o)||(u=a+(o%x.TAU||x.TAU))}return _v(i,e,t,n,u,r),i.fill(),u}function Rpe(i,e,t,n,r){let{fullCircles:s,startAngle:a,circumference:o,options:u}=e,{borderWidth:l,borderJoinStyle:c,borderDash:d,borderDashOffset:f}=u,h=u.borderAlign==="inner";if(!l)return;i.setLineDash(d||[]),i.lineDashOffset=f,h?(i.lineWidth=l*2,i.lineJoin=c||"round"):(i.lineWidth=l,i.lineJoin=c||"bevel");let p=e.endAngle;if(s){_v(i,e,t,n,p,r);for(let v=0;v<s;++v)i.stroke();isNaN(o)||(p=a+(o%x.TAU||x.TAU))}h&&Epe(i,e,p),s||(_v(i,e,t,n,p,r),i.stroke())}var or=class extends dn{constructor(t){super();Me(this,"circumference");Me(this,"endAngle");Me(this,"fullCircles");Me(this,"innerRadius");Me(this,"outerRadius");Me(this,"pixelMargin");Me(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,r){let s=this.getProps(["x","y"],r),{angle:a,distance:o}=x.getAngleFromPoint(s,{x:t,y:n}),{startAngle:u,endAngle:l,innerRadius:c,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),h=(this.options.spacing+this.options.borderWidth)/2,v=x.valueOrDefault(f,l-u)>=x.TAU||x._angleBetween(a,u,l),g=x._isBetween(o,c+h,d+h);return v&&g}getCenterPoint(t){let{x:n,y:r,startAngle:s,endAngle:a,innerRadius:o,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,d=(s+a)/2,f=(o+u+c+l)/2;return{x:n+Math.cos(d)*f,y:r+Math.sin(d)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:n,circumference:r}=this,s=(n.offset||0)/4,a=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>x.TAU?Math.floor(r/x.TAU):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let u=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(u)*s,Math.sin(u)*s);let l=1-Math.sin(Math.min(x.PI,r||0)),c=s*l;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,Dpe(t,this,c,a,o),Rpe(t,this,c,a,o),t.restore()}};Me(or,"id","arc"),Me(or,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Me(or,"defaultRoutes",{backgroundColor:"backgroundColor"}),Me(or,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function xU(i,e,t=e){i.lineCap=x.valueOrDefault(t.borderCapStyle,e.borderCapStyle),i.setLineDash(x.valueOrDefault(t.borderDash,e.borderDash)),i.lineDashOffset=x.valueOrDefault(t.borderDashOffset,e.borderDashOffset),i.lineJoin=x.valueOrDefault(t.borderJoinStyle,e.borderJoinStyle),i.lineWidth=x.valueOrDefault(t.borderWidth,e.borderWidth),i.strokeStyle=x.valueOrDefault(t.borderColor,e.borderColor)}function Cpe(i,e,t){i.lineTo(t.x,t.y)}function Ope(i){return i.stepped?x._steppedLineTo:i.tension||i.cubicInterpolationMode==="monotone"?x._bezierCurveTo:Cpe}function yU(i,e,t={}){let n=i.length,{start:r=0,end:s=n-1}=t,{start:a,end:o}=e,u=Math.max(r,a),l=Math.min(s,o),c=r<a&&s<a||r>o&&s>o;return{count:n,start:u,loop:e.loop,ilen:l<u&&!c?n+l-u:l-u}}function Ipe(i,e,t,n){let{points:r,options:s}=e,{count:a,start:o,loop:u,ilen:l}=yU(r,t,n),c=Ope(s),{move:d=!0,reverse:f}=n||{},h,p,v;for(h=0;h<=l;++h)p=r[(o+(f?l-h:h))%a],!p.skip&&(d?(i.moveTo(p.x,p.y),d=!1):c(i,v,p,f,s.stepped),v=p);return u&&(p=r[(o+(f?l:0))%a],c(i,v,p,f,s.stepped)),!!u}function Lpe(i,e,t,n){let r=e.points,{count:s,start:a,ilen:o}=yU(r,t,n),{move:u=!0,reverse:l}=n||{},c=0,d=0,f,h,p,v,g,m,y=b=>(a+(l?o-b:b))%s,_=()=>{v!==g&&(i.lineTo(c,g),i.lineTo(c,v),i.lineTo(c,m))};for(u&&(h=r[y(0)],i.moveTo(h.x,h.y)),f=0;f<=o;++f){if(h=r[y(f)],h.skip)continue;let b=h.x,M=h.y,T=b|0;T===p?(M<v?v=M:M>g&&(g=M),c=(d*c+b)/++d):(_(),i.lineTo(b,M),p=T,d=0,v=g=M),m=M}_()}function Xb(i){let e=i.options,t=e.borderDash&&e.borderDash.length;return!i._decimated&&!i._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Lpe:Ipe}function qpe(i){return i.stepped?x._steppedInterpolation:i.tension||i.cubicInterpolationMode==="monotone"?x._bezierInterpolation:x._pointInLine}function Npe(i,e,t,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,n)&&r.closePath()),xU(i,e.options),i.stroke(r)}function kpe(i,e,t,n){let{segments:r,options:s}=e,a=Xb(e);for(let o of r)xU(i,s,o.style),i.beginPath(),a(i,e,o,{start:t,end:t+n-1})&&i.closePath(),i.stroke()}var Fpe=typeof Path2D=="function";function Upe(i,e,t,n){Fpe&&!e.options.segment?Npe(i,e,t,n):kpe(i,e,t,n)}var Bn=class extends dn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let r=n.spanGaps?this._loop:this._fullLoop;x._updateBezierControlPoints(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=x._computeSegments(this,this.options.segment))}first(){let e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){let e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){let n=this.options,r=e[t],s=this.points,a=x._boundSegments(this,{property:t,start:r,end:r});if(!a.length)return;let o=[],u=qpe(n),l,c;for(l=0,c=a.length;l<c;++l){let{start:d,end:f}=a[l],h=s[d],p=s[f];if(h===p){o.push(h);continue}let v=Math.abs((r-h[t])/(p[t]-h[t])),g=u(h,p,v,n.stepped);g[t]=e[t],o.push(g)}return o.length===1?o[0]:o}pathSegment(e,t,n){return Xb(this)(e,this,t,n)}path(e,t,n){let r=this.segments,s=Xb(this),a=this._loop;t=t||0,n=n||this.points.length-t;for(let o of r)a&=s(e,this,o,{start:t,end:t+n-1});return!!a}draw(e,t,n,r){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Upe(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};Me(Bn,"id","line"),Me(Bn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Me(Bn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Me(Bn,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function LF(i,e,t,n){let r=i.options,{[t]:s}=i.getProps([t],n);return Math.abs(e-s)<r.radius+r.hitRadius}var us=class extends dn{constructor(t){super();Me(this,"parsed");Me(this,"skip");Me(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,r){let s=this.options,{x:a,y:o}=this.getProps(["x","y"],r);return Math.pow(t-a,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,n){return LF(this,t,"x",n)}inYRange(t,n){return LF(this,t,"y",n)}getCenterPoint(t){let{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);let r=n&&t.borderWidth||0;return(n+r)*2}draw(t,n){let r=this.options;this.skip||r.radius<.1||!x._isPointInArea(this,n,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,x.drawPoint(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}};Me(us,"id","point"),Me(us,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Me(us,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function bU(i,e){let{x:t,y:n,base:r,width:s,height:a}=i.getProps(["x","y","base","width","height"],e),o,u,l,c,d;return i.horizontal?(d=a/2,o=Math.min(t,r),u=Math.max(t,r),l=n-d,c=n+d):(d=s/2,o=t-d,u=t+d,l=Math.min(n,r),c=Math.max(n,r)),{left:o,top:l,right:u,bottom:c}}function cr(i,e,t,n){return i?0:x._limitValue(e,t,n)}function Bpe(i,e,t){let n=i.options.borderWidth,r=i.borderSkipped,s=x.toTRBL(n);return{t:cr(r.top,s.top,0,t),r:cr(r.right,s.right,0,e),b:cr(r.bottom,s.bottom,0,t),l:cr(r.left,s.left,0,e)}}function zpe(i,e,t){let{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=x.toTRBLCorners(r),a=Math.min(e,t),o=i.borderSkipped,u=n||x.isObject(r);return{topLeft:cr(!u||o.top||o.left,s.topLeft,0,a),topRight:cr(!u||o.top||o.right,s.topRight,0,a),bottomLeft:cr(!u||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:cr(!u||o.bottom||o.right,s.bottomRight,0,a)}}function Hpe(i){let e=bU(i),t=e.right-e.left,n=e.bottom-e.top,r=Bpe(i,t/2,n/2),s=zpe(i,t/2,n/2);return{outer:{x:e.left,y:e.top,w:t,h:n,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Ub(i,e,t,n){let r=e===null,s=t===null,o=i&&!(r&&s)&&bU(i,n);return o&&(r||x._isBetween(e,o.left,o.right))&&(s||x._isBetween(t,o.top,o.bottom))}function Wpe(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function Vpe(i,e){i.rect(e.x,e.y,e.w,e.h)}function Bb(i,e,t={}){let n=i.x!==t.x?-e:0,r=i.y!==t.y?-e:0,s=(i.x+i.w!==t.x+t.w?e:0)-n,a=(i.y+i.h!==t.y+t.h?e:0)-r;return{x:i.x+n,y:i.y+r,w:i.w+s,h:i.h+a,radius:i.radius}}var ls=class extends dn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:a}=Hpe(this),o=Wpe(a.radius)?x.addRoundedRectPath:Vpe;e.save(),(a.w!==s.w||a.h!==s.h)&&(e.beginPath(),o(e,Bb(a,t,s)),e.clip(),o(e,Bb(s,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,Bb(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return Ub(this,e,t,n)}inXRange(e,t){return Ub(this,e,null,t)}inYRange(e,t){return Ub(this,null,e,t)}getCenterPoint(e){let{x:t,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}};Me(ls,"id","bar"),Me(ls,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Me(ls,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var MU=Object.freeze({__proto__:null,ArcElement:or,BarElement:ls,LineElement:Bn,PointElement:us}),$b=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],qF=$b.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function SU(i){return $b[i%$b.length]}function wU(i){return qF[i%qF.length]}function Gpe(i,e){return i.borderColor=SU(e),i.backgroundColor=wU(e),++e}function jpe(i,e){return i.backgroundColor=i.data.map(()=>SU(e++)),e}function Ype(i,e){return i.backgroundColor=i.data.map(()=>wU(e++)),e}function Xpe(i){let e=0;return(t,n)=>{let r=i.getDatasetMeta(n).controller;r instanceof ri?e=jpe(t,e):r instanceof lr?e=Ype(t,e):r&&(e=Gpe(t,e))}}function NF(i){let e;for(e in i)if(i[e].borderColor||i[e].backgroundColor)return!0;return!1}function $pe(i){return i&&(i.borderColor||i.backgroundColor)}var TU={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,e,t){if(!t.enabled)return;let{data:{datasets:n},options:r}=i.config,{elements:s}=r;if(!t.forceOverride&&(NF(n)||$pe(r)||s&&NF(s)))return;let a=Xpe(i);n.forEach(a)}};function Zpe(i,e,t,n,r){let s=r.samples||n;if(s>=t)return i.slice(e,e+t);let a=[],o=(t-2)/(s-2),u=0,l=e+t-1,c=e,d,f,h,p,v;for(a[u++]=i[c],d=0;d<s-2;d++){let g=0,m=0,y,_=Math.floor((d+1)*o)+1+e,b=Math.min(Math.floor((d+2)*o)+1,t)+e,M=b-_;for(y=_;y<b;y++)g+=i[y].x,m+=i[y].y;g/=M,m/=M;let T=Math.floor(d*o)+1+e,P=Math.min(Math.floor((d+1)*o)+1,t)+e,{x:C,y:S}=i[c];for(h=p=-1,y=T;y<P;y++)p=.5*Math.abs((C-g)*(i[y].y-S)-(C-i[y].x)*(m-S)),p>h&&(h=p,f=i[y],v=y);a[u++]=f,c=v}return a[u++]=i[l],a}function Jpe(i,e,t,n){let r=0,s=0,a,o,u,l,c,d,f,h,p,v,g=[],m=e+t-1,y=i[e].x,b=i[m].x-y;for(a=e;a<e+t;++a){o=i[a],u=(o.x-y)/b*n,l=o.y;let M=u|0;if(M===c)l<p?(p=l,d=a):l>v&&(v=l,f=a),r=(s*r+o.x)/++s;else{let T=a-1;if(!x.isNullOrUndef(d)&&!x.isNullOrUndef(f)){let P=Math.min(d,f),C=Math.max(d,f);P!==h&&P!==T&&g.push(vc(gc({},i[P]),{x:r})),C!==h&&C!==T&&g.push(vc(gc({},i[C]),{x:r}))}a>0&&T!==h&&g.push(i[T]),g.push(o),c=M,s=0,p=v=l,d=f=h=a}}return g}function EU(i){if(i._decimated){let e=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function kF(i){i.data.datasets.forEach(e=>{EU(e)})}function Kpe(i,e){let t=e.length,n=0,r,{iScale:s}=i,{min:a,max:o,minDefined:u,maxDefined:l}=s.getUserBounds();return u&&(n=x._limitValue(x._lookupByKey(e,s.axis,a).lo,0,t-1)),l?r=x._limitValue(x._lookupByKey(e,s.axis,o).hi+1,n,t)-n:r=t-n,{start:n,count:r}}var PU={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,e,t)=>{if(!t.enabled){kF(i);return}let n=i.width;i.data.datasets.forEach((r,s)=>{let{_data:a,indexAxis:o}=r,u=i.getDatasetMeta(s),l=a||r.data;if(x.resolve([o,i.options.indexAxis])==="y"||!u.controller.supportsDecimation)return;let c=i.scales[u.xAxisID];if(c.type!=="linear"&&c.type!=="time"||i.options.parsing)return;let{start:d,count:f}=Kpe(u,l),h=t.threshold||4*n;if(f<=h){EU(r);return}x.isNullOrUndef(a)&&(r._data=l,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let p;switch(t.algorithm){case"lttb":p=Zpe(l,d,f,n,t);break;case"min-max":p=Jpe(l,d,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=p})},destroy(i){kF(i)}};function Qpe(i,e,t){let n=i.segments,r=i.points,s=e.points,a=[];for(let o of n){let{start:u,end:l}=o;l=Kb(u,l,r);let c=Zb(t,r[u],r[l],o.loop);if(!e.segments){a.push({source:o,target:c,start:r[u],end:r[l]});continue}let d=x._boundSegments(e,c);for(let f of d){let h=Zb(t,s[f.start],s[f.end],f.loop),p=x._boundSegment(o,r,h);for(let v of p)a.push({source:v,target:f,start:{[t]:FF(c,h,"start",Math.max)},end:{[t]:FF(c,h,"end",Math.min)}})}}return a}function Zb(i,e,t,n){if(n)return;let r=e[i],s=t[i];return i==="angle"&&(r=x._normalizeAngle(r),s=x._normalizeAngle(s)),{property:i,start:r,end:s}}function eme(i,e){let{x:t=null,y:n=null}=i||{},r=e.points,s=[];return e.segments.forEach(({start:a,end:o})=>{o=Kb(a,o,r);let u=r[a],l=r[o];n!==null?(s.push({x:u.x,y:n}),s.push({x:l.x,y:n})):t!==null&&(s.push({x:t,y:u.y}),s.push({x:t,y:l.y}))}),s}function Kb(i,e,t){for(;e>i;e--){let n=t[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function FF(i,e,t,n){return i&&e?n(i[t],e[t]):i?i[t]:e?e[t]:0}function AU(i,e){let t=[],n=!1;return x.isArray(i)?(n=!0,t=i):t=eme(i,e),t.length?new Bn({points:t,options:{tension:0},_loop:n,_fullLoop:n}):null}function UF(i){return i&&i.fill!==!1}function tme(i,e,t){let r=i[e].fill,s=[e],a;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!x.isNumberFinite(r))return r;if(a=i[r],!a)return!1;if(a.visible)return r;s.push(r),r=a.fill}return!1}function nme(i,e,t){let n=ame(i);if(x.isObject(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return x.isNumberFinite(r)&&Math.floor(r)===r?ime(n[0],e,r,t):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function ime(i,e,t,n){return(i==="-"||i==="+")&&(t=e+t),t===e||t<0||t>=n?!1:t}function rme(i,e){let t=null;return i==="start"?t=e.bottom:i==="end"?t=e.top:x.isObject(i)?t=e.getPixelForValue(i.value):e.getBasePixel&&(t=e.getBasePixel()),t}function sme(i,e,t){let n;return i==="start"?n=t:i==="end"?n=e.options.reverse?e.min:e.max:x.isObject(i)?n=i.value:n=e.getBaseValue(),n}function ame(i){let e=i.options,t=e.fill,n=x.valueOrDefault(t&&t.target,t);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function ome(i){let{scale:e,index:t,line:n}=i,r=[],s=n.segments,a=n.points,o=ume(e,t);o.push(AU({x:null,y:e.bottom},n));for(let u=0;u<s.length;u++){let l=s[u];for(let c=l.start;c<=l.end;c++)lme(r,a[c],o)}return new Bn({points:r,options:{}})}function ume(i,e){let t=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){let s=n[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function lme(i,e,t){let n=[];for(let r=0;r<t.length;r++){let s=t[r],{first:a,last:o,point:u}=cme(s,e,"x");if(!(!u||a&&o)){if(a)n.unshift(u);else if(i.push(u),!o)break}}i.push(...n)}function cme(i,e,t){let n=i.interpolate(e,t);if(!n)return{};let r=n[t],s=i.segments,a=i.points,o=!1,u=!1;for(let l=0;l<s.length;l++){let c=s[l],d=a[c.start][t],f=a[c.end][t];if(x._isBetween(r,d,f)){o=r===d,u=r===f;break}}return{first:o,last:u,point:n}}var xv=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){let{x:r,y:s,radius:a}=this;return t=t||{start:0,end:x.TAU},e.arc(r,s,a,t.end,t.start,!0),!n.bounds}interpolate(e){let{x:t,y:n,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}};function dme(i){let{chart:e,fill:t,line:n}=i;if(x.isNumberFinite(t))return fme(e,t);if(t==="stack")return ome(i);if(t==="shape")return!0;let r=hme(i);return r instanceof xv?r:AU(r,n)}function fme(i,e){let t=i.getDatasetMeta(e);return t&&i.isDatasetVisible(e)?t.dataset:null}function hme(i){return(i.scale||{}).getPointPositionForValue?mme(i):pme(i)}function pme(i){let{scale:e={},fill:t}=i,n=rme(t,e);if(x.isNumberFinite(n)){let r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function mme(i){let{scale:e,fill:t}=i,n=e.options,r=e.getLabels().length,s=n.reverse?e.max:e.min,a=sme(t,e,s),o=[];if(n.grid.circular){let u=e.getPointPositionForValue(0,s);return new xv({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(a)})}for(let u=0;u<r;++u)o.push(e.getPointPositionForValue(u,a));return o}function zb(i,e,t){let n=dme(e),{line:r,scale:s,axis:a}=e,o=r.options,u=o.fill,l=o.backgroundColor,{above:c=l,below:d=l}=u||{};n&&r.points.length&&(x.clipArea(i,t),gme(i,{line:r,target:n,above:c,below:d,area:t,scale:s,axis:a}),x.unclipArea(i))}function gme(i,e){let{line:t,target:n,above:r,below:s,area:a,scale:o}=e,u=t._loop?"angle":e.axis;i.save(),u==="x"&&s!==r&&(BF(i,n,a.top),zF(i,{line:t,target:n,color:r,scale:o,property:u}),i.restore(),i.save(),BF(i,n,a.bottom)),zF(i,{line:t,target:n,color:s,scale:o,property:u}),i.restore()}function BF(i,e,t){let{segments:n,points:r}=e,s=!0,a=!1;i.beginPath();for(let o of n){let{start:u,end:l}=o,c=r[u],d=r[Kb(u,l,r)];s?(i.moveTo(c.x,c.y),s=!1):(i.lineTo(c.x,t),i.lineTo(c.x,c.y)),a=!!e.pathSegment(i,o,{move:a}),a?i.closePath():i.lineTo(d.x,t)}i.lineTo(e.first().x,t),i.closePath(),i.clip()}function zF(i,e){let{line:t,target:n,property:r,color:s,scale:a}=e,o=Qpe(t,n,r);for(let{source:u,target:l,start:c,end:d}of o){let{style:{backgroundColor:f=s}={}}=u,h=n!==!0;i.save(),i.fillStyle=f,vme(i,a,h&&Zb(r,c,d)),i.beginPath();let p=!!t.pathSegment(i,u),v;if(h){p?i.closePath():HF(i,n,d,r);let g=!!n.pathSegment(i,l,{move:p,reverse:!0});v=p&&g,v||HF(i,n,c,r)}i.closePath(),i.fill(v?"evenodd":"nonzero"),i.restore()}}function vme(i,e,t){let{top:n,bottom:r}=e.chart.chartArea,{property:s,start:a,end:o}=t||{};s==="x"&&(i.beginPath(),i.rect(a,n,o-a,r-n),i.clip())}function HF(i,e,t,n){let r=e.interpolate(t,n);r&&i.lineTo(r.x,r.y)}var DU={id:"filler",afterDatasetsUpdate(i,e,t){let n=(i.data.datasets||[]).length,r=[],s,a,o,u;for(a=0;a<n;++a)s=i.getDatasetMeta(a),o=s.dataset,u=null,o&&o.options&&o instanceof Bn&&(u={visible:i.isDatasetVisible(a),index:a,fill:nme(o,a,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=u,r.push(u);for(a=0;a<n;++a)u=r[a],!(!u||u.fill===!1)&&(u.fill=tme(r,a,t.propagate))},beforeDraw(i,e,t){let n=t.drawTime==="beforeDraw",r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let a=r.length-1;a>=0;--a){let o=r[a].$filler;!o||(o.line.updateControlPoints(s,o.axis),n&&o.fill&&zb(i.ctx,o,s))}},beforeDatasetsDraw(i,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){let s=n[r].$filler;UF(s)&&zb(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,e,t){let n=e.meta.$filler;!UF(n)||t.drawTime!=="beforeDatasetDraw"||zb(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},WF=(i,e)=>{let{boxHeight:t=e,boxWidth:n=e}=i;return i.usePointStyle&&(t=Math.min(t,e),n=i.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},_me=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index,yv=class extends dn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=x.callback(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let n=e.labels,r=x.toFont(n.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:u}=WF(n,s),l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,s,o,u)+10):(c=this.maxHeight,l=this._fitCols(a,r,o,u)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){let{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,u=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+o,d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,h=-c;return this.legendItems.forEach((p,v)=>{let g=n+t/2+s.measureText(p.text).width;(v===0||l[l.length-1]+g+2*o>a)&&(d+=c,l[l.length-(v>0?0:1)]=0,h+=c,f++),u[v]={left:0,top:h,row:f,width:g,height:r},l[l.length-1]+=g+o}),d}_fitCols(e,t,n,r){let{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,u=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e,d=o,f=0,h=0,p=0,v=0;return this.legendItems.forEach((g,m)=>{let{itemWidth:y,itemHeight:_}=xme(n,t,s,g,r);m>0&&h+_+2*o>c&&(d+=f+o,l.push({width:f,height:h}),p+=f+o,v++,f=h=0),u[m]={left:p,top:h,col:v,width:y,height:_},f=Math.max(f,y),h+=_+o}),d+=f,l.push({width:f,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,a=x.getRtlAdapter(s,this.left,this.width);if(this.isHorizontal()){let o=0,u=x._alignStartEnd(n,this.left+r,this.right-this.lineWidths[o]);for(let l of t)o!==l.row&&(o=l.row,u=x._alignStartEnd(n,this.left+r,this.right-this.lineWidths[o])),l.top+=this.top+e+r,l.left=a.leftForLtr(a.x(u),l.width),u+=l.width+r}else{let o=0,u=x._alignStartEnd(n,this.top+e+r,this.bottom-this.columnSizes[o].height);for(let l of t)l.col!==o&&(o=l.col,u=x._alignStartEnd(n,this.top+e+r,this.bottom-this.columnSizes[o].height)),l.top=u,l.left+=this.left+r,l.left=a.leftForLtr(a.x(l.left),l.width),u+=l.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;x.clipArea(e,this),this._draw(),x.unclipArea(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:a}=e,o=x.defaults.color,u=x.getRtlAdapter(e.rtl,this.left,this.width),l=x.toFont(a.font),{padding:c}=a,d=l.size,f=d/2,h;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;let{boxWidth:p,boxHeight:v,itemHeight:g}=WF(a,d),m=function(T,P,C){if(isNaN(p)||p<=0||isNaN(v)||v<0)return;r.save();let S=x.valueOrDefault(C.lineWidth,1);if(r.fillStyle=x.valueOrDefault(C.fillStyle,o),r.lineCap=x.valueOrDefault(C.lineCap,"butt"),r.lineDashOffset=x.valueOrDefault(C.lineDashOffset,0),r.lineJoin=x.valueOrDefault(C.lineJoin,"miter"),r.lineWidth=S,r.strokeStyle=x.valueOrDefault(C.strokeStyle,o),r.setLineDash(x.valueOrDefault(C.lineDash,[])),a.usePointStyle){let A={radius:v*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:S},z=u.xPlus(T,p/2),j=P+f;x.drawPointLegend(r,A,z,j,a.pointStyleWidth&&p)}else{let A=P+Math.max((d-v)/2,0),z=u.leftForLtr(T,p),j=x.toTRBLCorners(C.borderRadius);r.beginPath(),Object.values(j).some(W=>W!==0)?x.addRoundedRectPath(r,{x:z,y:A,w:p,h:v,radius:j}):r.rect(z,A,p,v),r.fill(),S!==0&&r.stroke()}r.restore()},y=function(T,P,C){x.renderText(r,C.text,T,P+g/2,l,{strikethrough:C.hidden,textAlign:u.textAlign(C.textAlign)})},_=this.isHorizontal(),b=this._computeTitleHeight();_?h={x:x._alignStartEnd(s,this.left+c,this.right-n[0]),y:this.top+c+b,line:0}:h={x:this.left+c,y:x._alignStartEnd(s,this.top+b+c,this.bottom-t[0].height),line:0},x.overrideTextDirection(this.ctx,e.textDirection);let M=g+c;this.legendItems.forEach((T,P)=>{r.strokeStyle=T.fontColor,r.fillStyle=T.fontColor;let C=r.measureText(T.text).width,S=u.textAlign(T.textAlign||(T.textAlign=a.textAlign)),A=p+f+C,z=h.x,j=h.y;u.setWidth(this.width),_?P>0&&z+A+c>this.right&&(j=h.y+=M,h.line++,z=h.x=x._alignStartEnd(s,this.left+c,this.right-n[h.line])):P>0&&j+M>this.bottom&&(z=h.x=z+t[h.line].width+c,h.line++,j=h.y=x._alignStartEnd(s,this.top+b+c,this.bottom-t[h.line].height));let W=u.x(z);if(m(W,j,T),z=x._textX(S,z+p+f,_?z+A:this.right,e.rtl),y(u.x(z),j,T),_)h.x+=A+c;else if(typeof T.text!="string"){let G=l.lineHeight;h.y+=RU(T,G)+c}else h.y+=M}),x.restoreTextDirection(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,n=x.toFont(t.font),r=x.toPadding(t.padding);if(!t.display)return;let s=x.getRtlAdapter(e.rtl,this.left,this.width),a=this.ctx,o=t.position,u=n.size/2,l=r.top+u,c,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),c=this.top+l,d=x._alignStartEnd(e.align,d,this.right-f);else{let p=this.columnSizes.reduce((v,g)=>Math.max(v,g.height),0);c=l+x._alignStartEnd(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}let h=x._alignStartEnd(o,d,d+f);a.textAlign=s.textAlign(x._toLeftRightCenter(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,x.renderText(a,t.text,h,c,n)}_computeTitleHeight(){let e=this.options.title,t=x.toFont(e.font),n=x.toPadding(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if(x._isBetween(e,this.left,this.right)&&x._isBetween(t,this.top,this.bottom)){for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],x._isBetween(e,r.left,r.left+r.width)&&x._isBetween(t,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){let t=this.options;if(!Mme(e.type,t))return;let n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=_me(r,n);r&&!s&&x.callback(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!s&&x.callback(t.onHover,[e,n,this],this)}else n&&x.callback(t.onClick,[e,n,this],this)}};function xme(i,e,t,n,r){let s=yme(n,i,e,t),a=bme(r,n,e.lineHeight);return{itemWidth:s,itemHeight:a}}function yme(i,e,t,n){let r=i.text;return r&&typeof r!="string"&&(r=r.reduce((s,a)=>s.length>a.length?s:a)),e+t.size/2+n.measureText(r).width}function bme(i,e,t){let n=i;return typeof e.text!="string"&&(n=RU(e,t)),n}function RU(i,e){let t=i.text?i.text.length:0;return e*t}function Mme(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var CU={id:"legend",_element:yv,start(i,e,t){let n=i.legend=new yv({ctx:i.ctx,options:t,chart:i});Vt.configure(i,n,t),Vt.addBox(i,n)},stop(i){Vt.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){let n=i.legend;Vt.configure(i,n,t),n.options=t},afterUpdate(i){let e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){let n=e.datasetIndex,r=t.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){let e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=i.legend.options;return i._getSortedDatasetMetas().map(u=>{let l=u.controller.getStyle(t?0:void 0),c=x.toPadding(l.borderWidth);return{text:e[u.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!u.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:u.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}},ll=class extends dn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=x.isArray(n.text)?n.text.length:1;this._padding=x.toPadding(n.padding);let s=r*x.toFont(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:n,bottom:r,right:s,options:a}=this,o=a.align,u=0,l,c,d;return this.isHorizontal()?(c=x._alignStartEnd(o,n,s),d=t+e,l=s-n):(a.position==="left"?(c=n+e,d=x._alignStartEnd(o,r,t),u=x.PI*-.5):(c=s-e,d=x._alignStartEnd(o,t,r),u=x.PI*.5),l=r-t),{titleX:c,titleY:d,maxWidth:l,rotation:u}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let n=x.toFont(t.font),s=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:u,rotation:l}=this._drawArgs(s);x.renderText(e,t.text,0,0,n,{color:t.color,maxWidth:u,rotation:l,textAlign:x._toLeftRightCenter(t.align),textBaseline:"middle",translation:[a,o]})}};function Sme(i,e){let t=new ll({ctx:i.ctx,options:e,chart:i});Vt.configure(i,t,e),Vt.addBox(i,t),i.titleBlock=t}var OU={id:"title",_element:ll,start(i,e,t){Sme(i,t)},stop(i){let e=i.titleBlock;Vt.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){let n=i.titleBlock;Vt.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},lv=new WeakMap,IU={id:"subtitle",start(i,e,t){let n=new ll({ctx:i.ctx,options:t,chart:i});Vt.configure(i,n,t),Vt.addBox(i,n),lv.set(i,n)},stop(i){Vt.removeBox(i,lv.get(i)),lv.delete(i)},beforeUpdate(i,e,t){let n=lv.get(i);Vt.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},il={average(i){if(!i.length)return!1;let e,t,n=0,r=0,s=0;for(e=0,t=i.length;e<t;++e){let a=i[e].element;if(a&&a.hasValue()){let o=a.tooltipPosition();n+=o.x,r+=o.y,++s}}return{x:n/s,y:r/s}},nearest(i,e){if(!i.length)return!1;let t=e.x,n=e.y,r=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=i.length;s<a;++s){let u=i[s].element;if(u&&u.hasValue()){let l=u.getCenterPoint(),c=x.distanceBetweenPoints(e,l);c<r&&(r=c,o=u)}}if(o){let u=o.tooltipPosition();t=u.x,n=u.y}return{x:t,y:n}}};function ti(i,e){return e&&(x.isArray(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function Pi(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function wme(i,e){let{element:t,datasetIndex:n,index:r}=e,s=i.getDatasetMeta(n).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:i,label:a,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:t}}function VF(i,e){let t=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:a,boxHeight:o}=e,u=x.toFont(e.bodyFont),l=x.toFont(e.titleFont),c=x.toFont(e.footerFont),d=s.length,f=r.length,h=n.length,p=x.toPadding(e.padding),v=p.height,g=0,m=n.reduce((b,M)=>b+M.before.length+M.lines.length+M.after.length,0);if(m+=i.beforeBody.length+i.afterBody.length,d&&(v+=d*l.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),m){let b=e.displayColors?Math.max(o,u.lineHeight):u.lineHeight;v+=h*b+(m-h)*u.lineHeight+(m-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*c.lineHeight+(f-1)*e.footerSpacing);let y=0,_=function(b){g=Math.max(g,t.measureText(b).width+y)};return t.save(),t.font=l.string,x.each(i.title,_),t.font=u.string,x.each(i.beforeBody.concat(i.afterBody),_),y=e.displayColors?a+2+e.boxPadding:0,x.each(n,b=>{x.each(b.before,_),x.each(b.lines,_),x.each(b.after,_)}),y=0,t.font=c.string,x.each(i.footer,_),t.restore(),g+=p.width,{width:g,height:v}}function Tme(i,e){let{y:t,height:n}=e;return t<n/2?"top":t>i.height-n/2?"bottom":"center"}function Eme(i,e,t,n){let{x:r,width:s}=n,a=t.caretSize+t.caretPadding;if(i==="left"&&r+s+a>e.width||i==="right"&&r-s-a<0)return!0}function Pme(i,e,t,n){let{x:r,width:s}=t,{width:a,chartArea:{left:o,right:u}}=i,l="center";return n==="center"?l=r<=(o+u)/2?"left":"right":r<=s/2?l="left":r>=a-s/2&&(l="right"),Eme(l,i,e,t)&&(l="center"),l}function GF(i,e,t){let n=t.yAlign||e.yAlign||Tme(i,t);return{xAlign:t.xAlign||e.xAlign||Pme(i,e,t,n),yAlign:n}}function Ame(i,e){let{x:t,width:n}=i;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function Dme(i,e,t){let{y:n,height:r}=i;return e==="top"?n+=t:e==="bottom"?n-=r+t:n-=r/2,n}function jF(i,e,t,n){let{caretSize:r,caretPadding:s,cornerRadius:a}=i,{xAlign:o,yAlign:u}=t,l=r+s,{topLeft:c,topRight:d,bottomLeft:f,bottomRight:h}=x.toTRBLCorners(a),p=Ame(e,o),v=Dme(e,u,l);return u==="center"?o==="left"?p+=l:o==="right"&&(p-=l):o==="left"?p-=Math.max(c,f)+r:o==="right"&&(p+=Math.max(d,h)+r),{x:x._limitValue(p,0,n.width-e.width),y:x._limitValue(v,0,n.height-e.height)}}function cv(i,e,t){let n=x.toPadding(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-n.right:i.x+n.left}function YF(i){return ti([],Pi(i))}function Rme(i,e,t){return x.createContext(i,{tooltip:e,tooltipItems:t,type:"tooltip"})}function XF(i,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}var LU={beforeTitle:x.noop,title(i){if(i.length>0){let e=i[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:x.noop,beforeBody:x.noop,beforeLabel:x.noop,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");let t=i.formattedValue;return x.isNullOrUndef(t)||(e+=t),e},labelColor(i){let t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){let t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:x.noop,afterBody:x.noop,beforeFooter:x.noop,footer:x.noop,afterFooter:x.noop};function un(i,e,t,n){let r=i[e].call(t,n);return typeof r=="undefined"?LU[e].call(t,n):r}var rl=class extends dn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,s=new sl(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Rme(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){let{callbacks:n}=t,r=un(n,"beforeTitle",this,e),s=un(n,"title",this,e),a=un(n,"afterTitle",this,e),o=[];return o=ti(o,Pi(r)),o=ti(o,Pi(s)),o=ti(o,Pi(a)),o}getBeforeBody(e,t){return YF(un(t.callbacks,"beforeBody",this,e))}getBody(e,t){let{callbacks:n}=t,r=[];return x.each(e,s=>{let a={before:[],lines:[],after:[]},o=XF(n,s);ti(a.before,Pi(un(o,"beforeLabel",this,s))),ti(a.lines,un(o,"label",this,s)),ti(a.after,Pi(un(o,"afterLabel",this,s))),r.push(a)}),r}getAfterBody(e,t){return YF(un(t.callbacks,"afterBody",this,e))}getFooter(e,t){let{callbacks:n}=t,r=un(n,"beforeFooter",this,e),s=un(n,"footer",this,e),a=un(n,"afterFooter",this,e),o=[];return o=ti(o,Pi(r)),o=ti(o,Pi(s)),o=ti(o,Pi(a)),o}_createItems(e){let t=this._active,n=this.chart.data,r=[],s=[],a=[],o=[],u,l;for(u=0,l=t.length;u<l;++u)o.push(wme(this.chart,t[u]));return e.filter&&(o=o.filter((c,d,f)=>e.filter(c,d,f,n))),e.itemSort&&(o=o.sort((c,d)=>e.itemSort(c,d,n))),x.each(o,c=>{let d=XF(e.callbacks,c);r.push(un(d,"labelColor",this,c)),s.push(un(d,"labelPointStyle",this,c)),a.push(un(d,"labelTextColor",this,c))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(e,t){let n=this.options.setContext(this.getContext()),r=this._active,s,a=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{let o=il[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);let u=this._size=VF(this,n),l=Object.assign({},o,u),c=GF(this.chart,n,l),d=jF(n,l,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,s={opacity:1,x:d.x,y:d.y,width:u.width,height:u.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){let s=this.getCaretPosition(e,n,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){let{xAlign:r,yAlign:s}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:u,topRight:l,bottomLeft:c,bottomRight:d}=x.toTRBLCorners(o),{x:f,y:h}=e,{width:p,height:v}=t,g,m,y,_,b,M;return s==="center"?(b=h+v/2,r==="left"?(g=f,m=g-a,_=b+a,M=b-a):(g=f+p,m=g+a,_=b-a,M=b+a),y=g):(r==="left"?m=f+Math.max(u,c)+a:r==="right"?m=f+p-Math.max(l,d)-a:m=this.caretX,s==="top"?(_=h,b=_-a,g=m-a,y=m+a):(_=h+v,b=_+a,g=m+a,y=m-a),M=_),{x1:g,x2:m,x3:y,y1:_,y2:b,y3:M}}drawTitle(e,t,n){let r=this.title,s=r.length,a,o,u;if(s){let l=x.getRtlAdapter(n.rtl,this.x,this.width);for(e.x=cv(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",a=x.toFont(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,u=0;u<s;++u)t.fillText(r[u],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,u+1===s&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,r,s){let a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:u,boxWidth:l}=s,c=x.toFont(s.bodyFont),d=cv(this,"left",s),f=r.x(d),h=u<c.lineHeight?(c.lineHeight-u)/2:0,p=t.y+h;if(s.usePointStyle){let v={radius:Math.min(l,u)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},g=r.leftForLtr(f,l)+l/2,m=p+u/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,x.drawPoint(e,v,g,m),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,x.drawPoint(e,v,g,m)}else{e.lineWidth=x.isObject(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let v=r.leftForLtr(f,l),g=r.leftForLtr(r.xPlus(f,1),l-2),m=x.toTRBLCorners(a.borderRadius);Object.values(m).some(y=>y!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,x.addRoundedRectPath(e,{x:v,y:p,w:l,h:u,radius:m}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),x.addRoundedRectPath(e,{x:g,y:p+1,w:l-2,h:u-2,radius:m}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,p,l,u),e.strokeRect(v,p,l,u),e.fillStyle=a.backgroundColor,e.fillRect(g,p+1,l-2,u-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){let{body:r}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:u,boxWidth:l,boxPadding:c}=n,d=x.toFont(n.bodyFont),f=d.lineHeight,h=0,p=x.getRtlAdapter(n.rtl,this.x,this.width),v=function(C){t.fillText(C,p.x(e.x+h),e.y+f/2),e.y+=f+s},g=p.textAlign(a),m,y,_,b,M,T,P;for(t.textAlign=a,t.textBaseline="middle",t.font=d.string,e.x=cv(this,g,n),t.fillStyle=n.bodyColor,x.each(this.beforeBody,v),h=o&&g!=="right"?a==="center"?l/2+c:l+2+c:0,b=0,T=r.length;b<T;++b){for(m=r[b],y=this.labelTextColors[b],t.fillStyle=y,x.each(m.before,v),_=m.lines,o&&_.length&&(this._drawColorBox(t,e,b,p,n),f=Math.max(d.lineHeight,u)),M=0,P=_.length;M<P;++M)v(_[M]),f=d.lineHeight;x.each(m.after,v)}h=0,f=d.lineHeight,x.each(this.afterBody,v),e.y-=s}drawFooter(e,t,n){let r=this.footer,s=r.length,a,o;if(s){let u=x.getRtlAdapter(n.rtl,this.x,this.width);for(e.x=cv(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=u.textAlign(n.footerAlign),t.textBaseline="middle",a=x.toFont(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,o=0;o<s;++o)t.fillText(r[o],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){let{xAlign:s,yAlign:a}=this,{x:o,y:u}=e,{width:l,height:c}=n,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:p}=x.toTRBLCorners(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+d,u),a==="top"&&this.drawCaret(e,t,n,r),t.lineTo(o+l-f,u),t.quadraticCurveTo(o+l,u,o+l,u+f),a==="center"&&s==="right"&&this.drawCaret(e,t,n,r),t.lineTo(o+l,u+c-p),t.quadraticCurveTo(o+l,u+c,o+l-p,u+c),a==="bottom"&&this.drawCaret(e,t,n,r),t.lineTo(o+h,u+c),t.quadraticCurveTo(o,u+c,o,u+c-h),a==="center"&&s==="left"&&this.drawCaret(e,t,n,r),t.lineTo(o,u+d),t.quadraticCurveTo(o,u,o+d,u),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){let t=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){let a=il[e.position].call(this,this._active,this._eventPosition);if(!a)return;let o=this._size=VF(this,e),u=Object.assign({},a,this._size),l=GF(t,e,u),c=jF(e,u,l,t);(r._to!==c.x||s._to!==c.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){let t=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(t);let r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let a=x.toPadding(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,r,t),x.overrideTextDirection(e,t.textDirection),s.y+=a.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),x.restoreTextDirection(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){let n=this._active,r=e.map(({datasetIndex:o,index:u})=>{let l=this.chart.getDatasetMeta(o);if(!l)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:l.data[u],index:u}}),s=!x._elementsEqual(n,r),a=this._positionChanged(r,t);(s||a)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let r=this.options,s=this._active||[],a=this._getActiveElements(e,s,t,n),o=this._positionChanged(a,e),u=t||!x._elementsEqual(a,s)||o;return u&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),u}_getActiveElements(e,t,n,r){let s=this.options;if(e.type==="mouseout")return[];if(!r)return t;let a=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&a.reverse(),a}_positionChanged(e,t){let{caretX:n,caretY:r,options:s}=this,a=il[s.position].call(this,e,t);return a!==!1&&(n!==a.x||r!==a.y)}};Me(rl,"positioners",il);var qU={id:"tooltip",_element:rl,positioners:il,afterInit(i,e,t){t&&(i.tooltip=new rl({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){let e=i.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",vc(gc({},t),{cancelable:!0}))===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){let t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:LU},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},NU=Object.freeze({__proto__:null,Colors:TU,Decimation:PU,Filler:DU,Legend:CU,SubTitle:IU,Title:OU,Tooltip:qU}),Cme=(i,e,t,n)=>(typeof e=="string"?(t=i.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Ome(i,e,t,n){let r=i.indexOf(e);if(r===-1)return Cme(i,e,t,n);let s=i.lastIndexOf(e);return r!==s?t:r}var Ime=(i,e)=>i===null?null:x._limitValue(Math.round(i),0,e);function $F(i){let e=this.getLabels();return i>=0&&i<e.length?e[i]:i}var za=class extends si{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let t=this._addedLabels;if(t.length){let n=this.getLabels();for(let{index:r,label:s}of t)n[r]===s&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(x.isNullOrUndef(e))return null;let n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:Ome(n,e,x.valueOrDefault(t,e),this._addedLabels),Ime(t,n.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){let e=this.min,t=this.max,n=this.options.offset,r=[],s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)r.push({value:a});return r}getLabelForValue(e){return $F.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}};Me(za,"id","category"),Me(za,"defaults",{ticks:{callback:$F}});function Lme(i,e){let t=[],{bounds:r,step:s,min:a,max:o,precision:u,count:l,maxTicks:c,maxDigits:d,includeBounds:f}=i,h=s||1,p=c-1,{min:v,max:g}=e,m=!x.isNullOrUndef(a),y=!x.isNullOrUndef(o),_=!x.isNullOrUndef(l),b=(g-v)/(d+1),M=x.niceNum((g-v)/p/h)*h,T,P,C,S;if(M<1e-14&&!m&&!y)return[{value:v},{value:g}];S=Math.ceil(g/M)-Math.floor(v/M),S>p&&(M=x.niceNum(S*M/p/h)*h),x.isNullOrUndef(u)||(T=Math.pow(10,u),M=Math.ceil(M*T)/T),r==="ticks"?(P=Math.floor(v/M)*M,C=Math.ceil(g/M)*M):(P=v,C=g),m&&y&&s&&x.almostWhole((o-a)/s,M/1e3)?(S=Math.round(Math.min((o-a)/M,c)),M=(o-a)/S,P=a,C=o):_?(P=m?a:P,C=y?o:C,S=l-1,M=(C-P)/S):(S=(C-P)/M,x.almostEquals(S,Math.round(S),M/1e3)?S=Math.round(S):S=Math.ceil(S));let A=Math.max(x._decimalPlaces(M),x._decimalPlaces(P));T=Math.pow(10,x.isNullOrUndef(u)?A:u),P=Math.round(P*T)/T,C=Math.round(C*T)/T;let z=0;for(m&&(f&&P!==a?(t.push({value:a}),P<a&&z++,x.almostEquals(Math.round((P+z*M)*T)/T,a,ZF(a,b,i))&&z++):P<a&&z++);z<S;++z){let j=Math.round((P+z*M)*T)/T;if(y&&j>o)break;t.push({value:j})}return y&&f&&C!==o?t.length&&x.almostEquals(t[t.length-1].value,o,ZF(o,b,i))?t[t.length-1].value=o:t.push({value:o}):(!y||C===o)&&t.push({value:C}),t}function ZF(i,e,{horizontal:t,minRotation:n}){let r=x.toRadians(n),s=(t?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+i).length;return Math.min(e/s,a)}var Ga=class extends si{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return x.isNullOrUndef(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds(),{min:r,max:s}=this,a=u=>r=t?r:u,o=u=>s=n?s:u;if(e){let u=x.sign(r),l=x.sign(s);u<0&&l<0?o(0):u>0&&l>0&&a(0)}if(r===s){let u=s===0?1:Math.abs(s*.05);o(s+u),e||a(r-u)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,n=this.getTickLimit();n=Math.max(2,n);let r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,a=Lme(r,s);return e.bounds==="ticks"&&x._setMinAndMaxByKey(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){let e=this.ticks,t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){let r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return x.formatNumber(e,this.chart.options.locale,this.options.ticks.format)}},Ha=class extends Ga{determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=x.isNumberFinite(e)?e:0,this.max=x.isNumberFinite(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,n=x.toRadians(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}};Me(Ha,"id","linear"),Me(Ha,"defaults",{ticks:{callback:x.Ticks.formatters.numeric}});var cl=i=>Math.floor(x.log10(i)),ns=(i,e)=>Math.pow(10,cl(i)+e);function JF(i){return i/Math.pow(10,cl(i))===1}function KF(i,e,t){let n=Math.pow(10,t),r=Math.floor(i/n);return Math.ceil(e/n)-r}function qme(i,e){let t=e-i,n=cl(t);for(;KF(i,e,n)>10;)n++;for(;KF(i,e,n)<10;)n--;return Math.min(n,cl(i))}function Nme(i,{min:e,max:t}){e=x.finiteOrDefault(i.min,e);let n=[],r=cl(e),s=qme(e,t),a=s<0?Math.pow(10,Math.abs(s)):1,o=Math.pow(10,s),u=r>s?Math.pow(10,r):0,l=Math.round((e-u)*a)/a,c=Math.floor((e-u)/o/10)*o*10,d=Math.floor((l-c)/Math.pow(10,s)),f=x.finiteOrDefault(i.min,Math.round((u+c+d*Math.pow(10,s))*a)/a);for(;f<t;)n.push({value:f,major:JF(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,a=s>=0?1:a),f=Math.round((u+c+d*Math.pow(10,s))*a)/a;let h=x.finiteOrDefault(i.max,f);return n.push({value:h,major:JF(h),significand:d}),n}var Wa=class extends si{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let n=Ga.prototype.parse.apply(this,[e,t]);if(n===0){this._zero=!0;return}return x.isNumberFinite(n)&&n>0?n:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=x.isNumberFinite(e)?Math.max(0,e):null,this.max=x.isNumberFinite(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!x.isNumberFinite(this._userMin)&&(this.min=e===ns(this.min,0)?ns(this.min,-1):ns(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),n=this.min,r=this.max,s=o=>n=e?n:o,a=o=>r=t?r:o;n===r&&(n<=0?(s(1),a(10)):(s(ns(n,-1)),a(ns(r,1)))),n<=0&&s(ns(r,-1)),r<=0&&a(ns(n,1)),this.min=n,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},n=Nme(t,this);return e.bounds==="ticks"&&x._setMinAndMaxByKey(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":x.formatNumber(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=x.log10(e),this._valueRange=x.log10(this.max)-x.log10(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(x.log10(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};Me(Wa,"id","logarithmic"),Me(Wa,"defaults",{ticks:{callback:x.Ticks.formatters.logarithmic,major:{enabled:!0}}});function Jb(i){let e=i.ticks;if(e.display&&i.display){let t=x.toPadding(e.backdropPadding);return x.valueOrDefault(e.font&&e.font.size,x.defaults.font.size)+t.height}return 0}function kme(i,e,t){return t=x.isArray(t)?t:[t],{w:x._longestText(i,e.string,t),h:t.length*e.lineHeight}}function QF(i,e,t,n,r){return i===n||i===r?{start:e-t/2,end:e+t/2}:i<n||i>r?{start:e-t,end:e}:{start:e,end:e+t}}function Fme(i){let e={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},t=Object.assign({},e),n=[],r=[],s=i._pointLabels.length,a=i.options.pointLabels,o=a.centerPointLabels?x.PI/s:0;for(let u=0;u<s;u++){let l=a.setContext(i.getPointLabelContext(u));r[u]=l.padding;let c=i.getPointPosition(u,i.drawingArea+r[u],o),d=x.toFont(l.font),f=kme(i.ctx,d,i._pointLabels[u]);n[u]=f;let h=x._normalizeAngle(i.getIndexAngle(u)+o),p=Math.round(x.toDegrees(h)),v=QF(p,c.x,f.w,0,180),g=QF(p,c.y,f.h,90,270);Ume(t,e,h,v,g)}i.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),i._pointLabelItems=Hme(i,n,r)}function Ume(i,e,t,n,r){let s=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t)),o=0,u=0;n.start<e.l?(o=(e.l-n.start)/s,i.l=Math.min(i.l,e.l-o)):n.end>e.r&&(o=(n.end-e.r)/s,i.r=Math.max(i.r,e.r+o)),r.start<e.t?(u=(e.t-r.start)/a,i.t=Math.min(i.t,e.t-u)):r.end>e.b&&(u=(r.end-e.b)/a,i.b=Math.max(i.b,e.b+u))}function Bme(i,e,t){let n=i.drawingArea,{extra:r,additionalAngle:s,padding:a,size:o}=t,u=i.getPointPosition(e,n+r+a,s),l=Math.round(x.toDegrees(x._normalizeAngle(u.angle+x.HALF_PI))),c=Gme(u.y,o.h,l),d=Wme(l),f=Vme(u.x,o.w,d);return{visible:!0,x:u.x,y:c,textAlign:d,left:f,top:c,right:f+o.w,bottom:c+o.h}}function zme(i,e){if(!e)return!0;let{left:t,top:n,right:r,bottom:s}=i;return!(x._isPointInArea({x:t,y:n},e)||x._isPointInArea({x:t,y:s},e)||x._isPointInArea({x:r,y:n},e)||x._isPointInArea({x:r,y:s},e))}function Hme(i,e,t){let n=[],r=i._pointLabels.length,s=i.options,{centerPointLabels:a,display:o}=s.pointLabels,u={extra:Jb(s)/2,additionalAngle:a?x.PI/r:0},l;for(let c=0;c<r;c++){u.padding=t[c],u.size=e[c];let d=Bme(i,c,u);n.push(d),o==="auto"&&(d.visible=zme(d,l),d.visible&&(l=d))}return n}function Wme(i){return i===0||i===180?"center":i<180?"left":"right"}function Vme(i,e,t){return t==="right"?i-=e:t==="center"&&(i-=e/2),i}function Gme(i,e,t){return t===90||t===270?i-=e/2:(t>270||t<90)&&(i-=e),i}function jme(i,e,t){let{left:n,top:r,right:s,bottom:a}=t,{backdropColor:o}=e;if(!x.isNullOrUndef(o)){let u=x.toTRBLCorners(e.borderRadius),l=x.toPadding(e.backdropPadding);i.fillStyle=o;let c=n-l.left,d=r-l.top,f=s-n+l.width,h=a-r+l.height;Object.values(u).some(p=>p!==0)?(i.beginPath(),x.addRoundedRectPath(i,{x:c,y:d,w:f,h,radius:u}),i.fill()):i.fillRect(c,d,f,h)}}function Yme(i,e){let{ctx:t,options:{pointLabels:n}}=i;for(let r=e-1;r>=0;r--){let s=i._pointLabelItems[r];if(!s.visible)continue;let a=n.setContext(i.getPointLabelContext(r));jme(t,a,s);let o=x.toFont(a.font),{x:u,y:l,textAlign:c}=s;x.renderText(t,i._pointLabels[r],u,l+o.lineHeight/2,o,{color:a.color,textAlign:c,textBaseline:"middle"})}}function kU(i,e,t,n){let{ctx:r}=i;if(t)r.arc(i.xCenter,i.yCenter,e,0,x.TAU);else{let s=i.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let a=1;a<n;a++)s=i.getPointPosition(a,e),r.lineTo(s.x,s.y)}}function Xme(i,e,t,n,r){let s=i.ctx,a=e.circular,{color:o,lineWidth:u}=e;!a&&!n||!o||!u||t<0||(s.save(),s.strokeStyle=o,s.lineWidth=u,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),kU(i,t,a,n),s.closePath(),s.stroke(),s.restore())}function $me(i,e,t){return x.createContext(i,{label:t,index:e,type:"pointLabel"})}var ur=class extends Ga{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=x.toPadding(Jb(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=x.isNumberFinite(e)&&!isNaN(e)?e:0,this.max=x.isNumberFinite(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Jb(this.options))}generateTickLabels(e){Ga.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,n)=>{let r=x.callback(this.options.pointLabels.callback,[t,n],this);return r||r===0?r:""}).filter((t,n)=>this.chart.getDataVisibility(n))}fit(){let e=this.options;e.display&&e.pointLabels.display?Fme(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){let t=x.TAU/(this._pointLabels.length||1),n=this.options.startAngle||0;return x._normalizeAngle(e*t+x.toRadians(n))}getDistanceFromCenterForValue(e){if(x.isNullOrUndef(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(x.isNullOrUndef(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let n=t[e];return $me(this.getContext(),e,n)}}getPointPosition(e,t,n=0){let r=this.getIndexAngle(e)-x.HALF_PI+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:n,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let n=this.ctx;n.save(),n.beginPath(),kU(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:n,grid:r,border:s}=t,a=this._pointLabels.length,o,u,l;if(t.pointLabels.display&&Yme(this,a),r.display&&this.ticks.forEach((c,d)=>{if(d!==0){u=this.getDistanceFromCenterForValue(c.value);let f=this.getContext(d),h=r.setContext(f),p=s.setContext(f);Xme(this,h,u,a,p)}}),n.display){for(e.save(),o=a-1;o>=0;o--){let c=n.setContext(this.getPointLabelContext(o)),{color:d,lineWidth:f}=c;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,u=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,u),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;let r=this.getIndexAngle(0),s,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,u)=>{if(u===0&&!t.reverse)return;let l=n.setContext(this.getContext(u)),c=x.toFont(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[u].value),l.showLabelBackdrop){e.font=c.string,a=e.measureText(o.label).width,e.fillStyle=l.backdropColor;let d=x.toPadding(l.backdropPadding);e.fillRect(-a/2-d.left,-s-c.size/2-d.top,a+d.width,c.size+d.height)}x.renderText(e,o.label,0,-s,c,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}};Me(ur,"id","radialLinear"),Me(ur,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:x.Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Me(ur,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Me(ur,"descriptors",{angleLines:{_fallback:"grid"}});var bv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},cn=Object.keys(bv);function eU(i,e){return i-e}function tU(i,e){if(x.isNullOrUndef(e))return null;let t=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts,a=e;return typeof n=="function"&&(a=n(a)),x.isNumberFinite(a)||(a=typeof n=="string"?t.parse(a,n):t.parse(a)),a===null?null:(r&&(a=r==="week"&&(x.isNumber(s)||s===!0)?t.startOf(a,"isoWeek",s):t.startOf(a,r)),+a)}function nU(i,e,t,n){let r=cn.length;for(let s=cn.indexOf(i);s<r-1;++s){let a=bv[cn[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(o*a.size))<=n)return cn[s]}return cn[r-1]}function Zme(i,e,t,n,r){for(let s=cn.length-1;s>=cn.indexOf(t);s--){let a=cn[s];if(bv[a].common&&i._adapter.diff(r,n,a)>=e-1)return a}return cn[t?cn.indexOf(t):0]}function Jme(i){for(let e=cn.indexOf(i)+1,t=cn.length;e<t;++e)if(bv[cn[e]].common)return cn[e]}function iU(i,e,t){if(!t)i[e]=!0;else if(t.length){let{lo:n,hi:r}=x._lookup(t,e),s=t[n]>=e?t[n]:t[r];i[s]=!0}}function Kme(i,e,t,n){let r=i._adapter,s=+r.startOf(e[0].value,n),a=e[e.length-1].value,o,u;for(o=s;o<=a;o=+r.add(o,1,n))u=t[o],u>=0&&(e[u].major=!0);return e}function rU(i,e,t){let n=[],r={},s=e.length,a,o;for(a=0;a<s;++a)o=e[a],r[o]=a,n.push({value:o,major:!1});return s===0||!t?n:Kme(i,n,r,t)}var dr=class extends si{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){let n=e.time||(e.time={}),r=this._adapter=new uU._date(e.adapters.date);r.init(t),x.mergeIf(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:tU(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,t=this._adapter,n=e.time.unit||"day",{min:r,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function u(l){!a&&!isNaN(l.min)&&(r=Math.min(r,l.min)),!o&&!isNaN(l.max)&&(s=Math.max(s,l.max))}(!a||!o)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),r=x.isNumberFinite(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),s=x.isNumberFinite(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){let e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){let e=this.options,t=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let s=this.min,a=this.max,o=x._filterBetween(r,s,a);return this._unit=t.unit||(n.autoSkip?nU(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):Zme(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Jme(this._unit),this.initOffsets(r),e.reverse&&o.reverse(),rU(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,n=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?n=s:n=(s-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;t=x._limitValue(t,0,a),n=x._limitValue(n,0,a),this._offsets={start:t,end:n,factor:1/(t+1+n)}}_generate(){let e=this._adapter,t=this.min,n=this.max,r=this.options,s=r.time,a=s.unit||nU(s.minUnit,t,n,this._getLabelCapacity(t)),o=x.valueOrDefault(r.ticks.stepSize,1),u=a==="week"?s.isoWeekday:!1,l=x.isNumber(u)||u===!0,c={},d=t,f,h;if(l&&(d=+e.startOf(d,"isoWeek",u)),d=+e.startOf(d,l?"day":a),e.diff(n,t,a)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+a);let p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,h=0;f<n;f=+e.add(f,o,a),h++)iU(c,f,p);return(f===n||r.bounds==="ticks"||h===1)&&iU(c,f,p),Object.keys(c).sort(eU).map(v=>+v)}getLabelForValue(e){let t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){let r=this.options.time.displayFormats,s=this._unit,a=t||r[s];return this._adapter.format(e,a)}_tickFormatFunction(e,t,n,r){let s=this.options,a=s.ticks.callback;if(a)return x.callback(a,[e,t,n],this);let o=s.time.displayFormats,u=this._unit,l=this._majorUnit,c=u&&o[u],d=l&&o[l],f=n[t],h=l&&d&&f&&f.major;return this._adapter.format(e,r||(h?d:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){let t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){let t=this.options.ticks,n=this.ctx.measureText(e).width,r=x.toRadians(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),a=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*s+o*a,h:n*a+o*s}}_getLabelCapacity(e){let t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,rU(this,[e],this._majorUnit),r),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,n;if(e.length)return e;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,n=r.length;t<n;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],t,n;if(e.length)return e;let r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(tU(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return x._arrayUnique(e.sort(eU))}};Me(dr,"id","time"),Me(dr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function dv(i,e,t){let n=0,r=i.length-1,s,a,o,u;t?(e>=i[n].pos&&e<=i[r].pos&&({lo:n,hi:r}=x._lookupByKey(i,"pos",e)),{pos:s,time:o}=i[n],{pos:a,time:u}=i[r]):(e>=i[n].time&&e<=i[r].time&&({lo:n,hi:r}=x._lookupByKey(i,"time",e)),{time:s,pos:o}=i[n],{time:a,pos:u}=i[r]);let l=a-s;return l?o+(u-o)*(e-s)/l:o}var Va=class extends dr{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=dv(t,this.min),this._tableRange=dv(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:n}=this,r=[],s=[],a,o,u,l,c;for(a=0,o=e.length;a<o;++a)l=e[a],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,o=r.length;a<o;++a)c=r[a+1],u=r[a-1],l=r[a],Math.round((c+u)/2)!==l&&s.push({time:l,pos:a/(o-1)});return s}_generate(){let e=this.min,t=this.max,n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(t)||n.length===1)&&n.push(t),n.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(dv(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return dv(this._table,n*this._tableRange+this._minPos,!0)}};Me(Va,"id","timeseries"),Me(Va,"defaults",dr.defaults);var FU=Object.freeze({__proto__:null,CategoryScale:za,LinearScale:Ha,LogarithmicScale:Wa,RadialLinearScale:ur,TimeScale:dr,TimeSeriesScale:Va}),Qme=[oU,MU,NU,FU];Ge.Ticks=x.Ticks;Ge.defaults=x.defaults;Ge.Animation=pv;Ge.Animations=sl;Ge.ArcElement=or;Ge.BarController=is;Ge.BarElement=ls;Ge.BasePlatform=ol;Ge.BasicPlatform=mv;Ge.BubbleController=rs;Ge.CategoryScale=za;Ge.Chart=ii;Ge.Colors=TU;Ge.DatasetController=ln;Ge.Decimation=PU;Ge.DomPlatform=vv;Ge.DoughnutController=ri;Ge.Element=dn;Ge.Filler=DU;Ge.Interaction=lU;Ge.Legend=CU;Ge.LineController=ss;Ge.LineElement=Bn;Ge.LinearScale=Ha;Ge.LogarithmicScale=Wa;Ge.PieController=Ua;Ge.PointElement=us;Ge.PolarAreaController=lr;Ge.RadarController=as;Ge.RadialLinearScale=ur;Ge.Scale=si;Ge.ScatterController=os;Ge.SubTitle=IU;Ge.TimeScale=dr;Ge.TimeSeriesScale=Va;Ge.Title=OU;Ge.Tooltip=qU;Ge._adapters=uU;Ge._detectPlatform=pU;Ge.animator=ni;Ge.controllers=oU;Ge.elements=MU;Ge.layouts=Vt;Ge.plugins=NU;Ge.registerables=Qme;Ge.registry=Un;Ge.scales=FU});var Pz=E(w=>{"use strict";var c0="152",ege={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},tge={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},dB=0,DM=1,fB=2,nge=3,ige=0,Bw=1,hB=2,oi=3,Bi=0,an=1,li=2,rge=2,Fi=0,ws=1,RM=2,CM=3,OM=4,pB=5,xs=100,mB=101,gB=102,IM=103,LM=104,vB=200,_B=201,xB=202,yB=203,zw=204,Hw=205,bB=206,MB=207,SB=208,wB=209,TB=210,EB=0,PB=1,AB=2,g_=3,DB=4,RB=5,CB=6,OB=7,dc=0,IB=1,LB=2,ci=0,qB=1,NB=2,kB=3,FB=4,UB=5,d0=300,Sr=301,wr=302,Rl=303,Cl=304,No=306,Ol=1e3,Kt=1001,Il=1002,It=1003,v_=1004,sge=1004,wl=1005,age=1005,Lt=1006,Ww=1007,oge=1007,Tr=1008,uge=1008,Er=1009,BB=1010,zB=1011,Vw=1012,HB=1013,vr=1014,Ni=1015,yo=1016,WB=1017,VB=1018,Ts=1020,GB=1021,_n=1023,jB=1024,YB=1025,xr=1026,Ps=1027,XB=1028,$B=1029,ZB=1030,JB=1031,KB=1033,l_=33776,c_=33777,d_=33778,f_=33779,qM=35840,NM=35841,kM=35842,FM=35843,QB=36196,UM=37492,BM=37496,zM=37808,HM=37809,WM=37810,VM=37811,GM=37812,jM=37813,YM=37814,XM=37815,$M=37816,ZM=37817,JM=37818,KM=37819,QM=37820,eS=37821,h_=36492,ez=36283,tS=36284,nS=36285,iS=36286,tz=2200,nz=2201,iz=2202,Ll=2300,ql=2301,p_=2302,bs=2400,Ms=2401,Nl=2402,f0=2500,Gw=2501,lge=0,cge=1,dge=2,jw=3e3,yr=3001,rz=3200,sz=3201,Ir=0,az=1,br="",$e="srgb",Gn="srgb-linear",Yw="display-p3",fge=0,m_=7680,hge=7681,pge=7682,mge=7683,gge=34055,vge=34056,_ge=5386,xge=512,yge=513,bge=514,Mge=515,Sge=516,wge=517,Tge=518,oz=519,kl=35044,Ege=35048,Pge=35040,Age=35045,Dge=35049,Rge=35041,Cge=35046,Oge=35050,Ige=35042,Lge="100",rS="300 es",__=1035,jn=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let n=this._listeners[e.type];if(n!==void 0){e.target=this;let r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}},$t=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],BU=1234567,Es=Math.PI/180,bo=180/Math.PI;function yn(){let i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return($t[i&255]+$t[i>>8&255]+$t[i>>16&255]+$t[i>>24&255]+"-"+$t[e&255]+$t[e>>8&255]+"-"+$t[e>>16&15|64]+$t[e>>24&255]+"-"+$t[t&63|128]+$t[t>>8&255]+"-"+$t[t>>16&255]+$t[t>>24&255]+$t[n&255]+$t[n>>8&255]+$t[n>>16&255]+$t[n>>24&255]).toLowerCase()}function Pt(i,e,t){return Math.max(e,Math.min(t,i))}function Xw(i,e){return(i%e+e)%e}function qge(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function Nge(i,e,t){return i!==e?(t-i)/(e-i):0}function Tl(i,e,t){return(1-t)*i+t*e}function kge(i,e,t,n){return Tl(i,e,1-Math.exp(-t*n))}function Fge(i,e=1){return e-Math.abs(Xw(i,e*2)-e)}function Uge(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function Bge(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function zge(i,e){return i+Math.floor(Math.random()*(e-i+1))}function Hge(i,e){return i+Math.random()*(e-i)}function Wge(i){return i*(.5-Math.random())}function Vge(i){i!==void 0&&(BU=i);let e=BU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Gge(i){return i*Es}function jge(i){return i*bo}function sS(i){return(i&i-1)===0&&i!==0}function uz(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function lz(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Yge(i,e,t,n,r){let s=Math.cos,a=Math.sin,o=s(t/2),u=a(t/2),l=s((e+n)/2),c=a((e+n)/2),d=s((e-n)/2),f=a((e-n)/2),h=s((n-e)/2),p=a((n-e)/2);switch(r){case"XYX":i.set(o*c,u*d,u*f,o*l);break;case"YZY":i.set(u*f,o*c,u*d,o*l);break;case"ZXZ":i.set(u*d,u*f,o*c,o*l);break;case"XZX":i.set(o*c,u*p,u*h,o*l);break;case"YXY":i.set(u*h,o*c,u*p,o*l);break;case"ZYZ":i.set(u*p,u*h,o*c,o*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function xn(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Ke(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}var Xge={DEG2RAD:Es,RAD2DEG:bo,generateUUID:yn,clamp:Pt,euclideanModulo:Xw,mapLinear:qge,inverseLerp:Nge,lerp:Tl,damp:kge,pingpong:Fge,smoothstep:Uge,smootherstep:Bge,randInt:zge,randFloat:Hge,randFloatSpread:Wge,seededRandom:Vge,degToRad:Gge,radToDeg:jge,isPowerOfTwo:sS,ceilPowerOfTwo:uz,floorPowerOfTwo:lz,setQuaternionFromProperEuler:Yge,normalize:Ke,denormalize:xn},de=class{constructor(e=0,t=0){de.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(Pt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},et=class{constructor(){et.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,s,a,o,u,l){let c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=s,c[5]=u,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[3],u=n[6],l=n[1],c=n[4],d=n[7],f=n[2],h=n[5],p=n[8],v=r[0],g=r[3],m=r[6],y=r[1],_=r[4],b=r[7],M=r[2],T=r[5],P=r[8];return s[0]=a*v+o*y+u*M,s[3]=a*g+o*_+u*T,s[6]=a*m+o*b+u*P,s[1]=l*v+c*y+d*M,s[4]=l*g+c*_+d*T,s[7]=l*m+c*b+d*P,s[2]=f*v+h*y+p*M,s[5]=f*g+h*_+p*T,s[8]=f*m+h*b+p*P,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],u=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*s*c+n*o*u+r*s*l-r*a*u}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],u=e[6],l=e[7],c=e[8],d=c*a-o*l,f=o*u-c*s,h=l*s-a*u,p=t*d+n*f+r*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let v=1/p;return e[0]=d*v,e[1]=(r*l-c*n)*v,e[2]=(o*n-r*a)*v,e[3]=f*v,e[4]=(c*t-r*u)*v,e[5]=(r*s-o*t)*v,e[6]=h*v,e[7]=(n*u-l*t)*v,e[8]=(a*t-n*s)*v,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,o){let u=Math.cos(s),l=Math.sin(s);return this.set(n*u,n*l,-n*(u*a+l*o)+a+e,-r*l,r*u,-r*(-l*a+u*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Qb.makeScale(e,t)),this}rotate(e){return this.premultiply(Qb.makeRotation(-e)),this}translate(e,t){return this.premultiply(Qb.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}},Qb=new et;function cz(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}var $ge={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function mo(i,e){return new $ge[i](e)}function Fl(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}var zU={};function El(i){i in zU||(zU[i]=!0,console.warn(i))}function _o(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function eM(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}var Zge=new et().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Jge=new et().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Kge(i){return i.convertSRGBToLinear().applyMatrix3(Jge)}function Qge(i){return i.applyMatrix3(Zge).convertLinearToSRGB()}var eve={[Gn]:i=>i,[$e]:i=>i.convertSRGBToLinear(),[Yw]:Kge},tve={[Gn]:i=>i,[$e]:i=>i.convertLinearToSRGB(),[Yw]:Qge},An={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return Gn},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;let n=eve[e],r=tve[t];if(n===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}},ja,Ul=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ja===void 0&&(ja=Fl("canvas")),ja.width=e.width,ja.height=e.height;let n=ja.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ja}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){let t=Fl("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=_o(s[a]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(_o(t[n]/255)*255):t[n]=_o(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},ki=class{constructor(e=null){this.isSource=!0,this.uuid=yn(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(tM(r[a].image)):s.push(tM(r[a]))}else s=tM(r);n.url=s}return t||(e.images[this.uuid]=n),n}};function tM(i){return typeof HTMLImageElement!="undefined"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&i instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&i instanceof ImageBitmap?Ul.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var nve=0,Tt=class extends jn{constructor(e=Tt.DEFAULT_IMAGE,t=Tt.DEFAULT_MAPPING,n=Kt,r=Kt,s=Lt,a=Tr,o=_n,u=Er,l=Tt.DEFAULT_ANISOTROPY,c=br){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:nve++}),this.uuid=yn(),this.name="",this.source=new ki(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=u,this.offset=new de(0,0),this.repeat=new de(1,1),this.center=new de(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new et,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(El("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===yr?$e:br),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==d0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ol:e.x=e.x-Math.floor(e.x);break;case Kt:e.x=e.x<0?0:1;break;case Il:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ol:e.y=e.y-Math.floor(e.y);break;case Kt:e.y=e.y<0?0:1;break;case Il:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return El("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===$e?yr:jw}set encoding(e){El("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===yr?$e:br}};Tt.DEFAULT_IMAGE=null;Tt.DEFAULT_MAPPING=d0;Tt.DEFAULT_ANISOTROPY=1;var gt=class{constructor(e=0,t=0,n=0,r=1){gt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s,u=e.elements,l=u[0],c=u[4],d=u[8],f=u[1],h=u[5],p=u[9],v=u[2],g=u[6],m=u[10];if(Math.abs(c-f)<.01&&Math.abs(d-v)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+f)<.1&&Math.abs(d+v)<.1&&Math.abs(p+g)<.1&&Math.abs(l+h+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let _=(l+1)/2,b=(h+1)/2,M=(m+1)/2,T=(c+f)/4,P=(d+v)/4,C=(p+g)/4;return _>b&&_>M?_<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(_),r=T/n,s=P/n):b>M?b<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),n=T/r,s=C/r):M<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),n=P/s,r=C/s),this.set(n,r,s,t),this}let y=Math.sqrt((g-p)*(g-p)+(d-v)*(d-v)+(f-c)*(f-c));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(d-v)/y,this.z=(f-c)/y,this.w=Math.acos((l+h+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},bn=class extends jn{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new gt(0,0,e,t),this.scissorTest=!1,this.viewport=new gt(0,0,e,t);let r={width:e,height:t,depth:1};n.encoding!==void 0&&(El("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===yr?$e:br),this.texture=new Tt(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Lt,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new ki(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Mo=class extends Tt{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=It,this.minFilter=It,this.wrapR=Kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},aS=class extends bn{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Mo(null,e,t,n),this.texture.isRenderTargetTexture=!0}},Bl=class extends Tt{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=It,this.minFilter=It,this.wrapR=Kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},oS=class extends bn{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Bl(null,e,t,n),this.texture.isRenderTargetTexture=!0}},uS=class extends bn{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;let s=this.texture;this.texture=[];for(let a=0;a<n;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},Qt=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,o){let u=n[r+0],l=n[r+1],c=n[r+2],d=n[r+3],f=s[a+0],h=s[a+1],p=s[a+2],v=s[a+3];if(o===0){e[t+0]=u,e[t+1]=l,e[t+2]=c,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=h,e[t+2]=p,e[t+3]=v;return}if(d!==v||u!==f||l!==h||c!==p){let g=1-o,m=u*f+l*h+c*p+d*v,y=m>=0?1:-1,_=1-m*m;if(_>Number.EPSILON){let M=Math.sqrt(_),T=Math.atan2(M,m*y);g=Math.sin(g*T)/M,o=Math.sin(o*T)/M}let b=o*y;if(u=u*g+f*b,l=l*g+h*b,c=c*g+p*b,d=d*g+v*b,g===1-o){let M=1/Math.sqrt(u*u+l*l+c*c+d*d);u*=M,l*=M,c*=M,d*=M}}e[t]=u,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,r,s,a){let o=n[r],u=n[r+1],l=n[r+2],c=n[r+3],d=s[a],f=s[a+1],h=s[a+2],p=s[a+3];return e[t]=o*p+c*d+u*h-l*f,e[t+1]=u*p+c*f+l*d-o*h,e[t+2]=l*p+c*h+o*f-u*d,e[t+3]=c*p-o*d-u*f-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let n=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,u=Math.sin,l=o(n/2),c=o(r/2),d=o(s/2),f=u(n/2),h=u(r/2),p=u(s/2);switch(a){case"XYZ":this._x=f*c*d+l*h*p,this._y=l*h*d-f*c*p,this._z=l*c*p+f*h*d,this._w=l*c*d-f*h*p;break;case"YXZ":this._x=f*c*d+l*h*p,this._y=l*h*d-f*c*p,this._z=l*c*p-f*h*d,this._w=l*c*d+f*h*p;break;case"ZXY":this._x=f*c*d-l*h*p,this._y=l*h*d+f*c*p,this._z=l*c*p+f*h*d,this._w=l*c*d-f*h*p;break;case"ZYX":this._x=f*c*d-l*h*p,this._y=l*h*d+f*c*p,this._z=l*c*p-f*h*d,this._w=l*c*d+f*h*p;break;case"YZX":this._x=f*c*d+l*h*p,this._y=l*h*d+f*c*p,this._z=l*c*p-f*h*d,this._w=l*c*d-f*h*p;break;case"XZY":this._x=f*c*d-l*h*p,this._y=l*h*d-f*c*p,this._z=l*c*p+f*h*d,this._w=l*c*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],o=t[5],u=t[9],l=t[2],c=t[6],d=t[10],f=n+o+d;if(f>0){let h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(c-u)*h,this._y=(s-l)*h,this._z=(a-r)*h}else if(n>o&&n>d){let h=2*Math.sqrt(1+n-o-d);this._w=(c-u)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(s+l)/h}else if(o>d){let h=2*Math.sqrt(1+o-n-d);this._w=(s-l)/h,this._x=(r+a)/h,this._y=.25*h,this._z=(u+c)/h}else{let h=2*Math.sqrt(1+d-n-o);this._w=(a-r)/h,this._x=(s+l)/h,this._y=(u+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Pt(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(n===0)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,s=e._z,a=e._w,o=t._x,u=t._y,l=t._z,c=t._w;return this._x=n*c+a*o+r*l-s*u,this._y=r*c+a*u+s*o-n*l,this._z=s*c+a*l+n*u-r*o,this._w=a*c-n*o-r*u-s*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let n=this._x,r=this._y,s=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;let u=1-o*o;if(u<=Number.EPSILON){let h=1-t;return this._w=h*a+t*this._w,this._x=h*n+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(u),c=Math.atan2(l,o),d=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=a*d+this._w*f,this._x=n*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},I=class{constructor(e=0,t=0,n=0){I.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(HU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(HU.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,o=e.z,u=e.w,l=u*t+a*r-o*n,c=u*n+o*t-s*r,d=u*r+s*n-a*t,f=-s*t-a*n-o*r;return this.x=l*u+f*-s+c*-o-d*-a,this.y=c*u+f*-a+d*-s-l*-o,this.z=d*u+f*-o+l*-a-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,s=e.z,a=t.x,o=t.y,u=t.z;return this.x=r*u-s*o,this.y=s*a-n*u,this.z=n*o-r*a,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return nM.copy(this).projectOnVector(e),this.sub(nM)}reflect(e){return this.sub(nM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(Pt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-T0(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},nM=new I,HU=new Qt,Cn=class{constructor(e=new I(1/0,1/0,1/0),t=new I(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Di.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Di.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=Di.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Ya.copy(e.boundingBox),Ya.applyMatrix4(e.matrixWorld),this.union(Ya);else{let r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){let s=r.attributes.position;for(let a=0,o=s.count;a<o;a++)Di.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Di)}else r.boundingBox===null&&r.computeBoundingBox(),Ya.copy(r.boundingBox),Ya.applyMatrix4(e.matrixWorld),this.union(Ya)}let n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Di),Di.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fl),Mv.subVectors(this.max,fl),Xa.subVectors(e.a,fl),$a.subVectors(e.b,fl),Za.subVectors(e.c,fl),fr.subVectors($a,Xa),hr.subVectors(Za,$a),cs.subVectors(Xa,Za);let t=[0,-fr.z,fr.y,0,-hr.z,hr.y,0,-cs.z,cs.y,fr.z,0,-fr.x,hr.z,0,-hr.x,cs.z,0,-cs.x,-fr.y,fr.x,0,-hr.y,hr.x,0,-cs.y,cs.x,0];return!iM(t,Xa,$a,Za,Mv)||(t=[1,0,0,0,1,0,0,0,1],!iM(t,Xa,$a,Za,Mv))?!1:(Sv.crossVectors(fr,hr),t=[Sv.x,Sv.y,Sv.z],iM(t,Xa,$a,Za,Mv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Di).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Di).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ai[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ai[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ai[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ai[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ai[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ai[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ai[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ai[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ai),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Ai=[new I,new I,new I,new I,new I,new I,new I,new I],Di=new I,Ya=new Cn,Xa=new I,$a=new I,Za=new I,fr=new I,hr=new I,cs=new I,fl=new I,Mv=new I,Sv=new I,ds=new I;function iM(i,e,t,n,r){for(let s=0,a=i.length-3;s<=a;s+=3){ds.fromArray(i,s);let o=r.x*Math.abs(ds.x)+r.y*Math.abs(ds.y)+r.z*Math.abs(ds.z),u=e.dot(ds),l=t.dot(ds),c=n.dot(ds);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>o)return!1}return!0}var ive=new Cn,hl=new I,rM=new I,On=class{constructor(e=new I,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;t!==void 0?n.copy(t):ive.setFromPoints(e).getCenter(n);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;hl.subVectors(e,this.center);let t=hl.lengthSq();if(t>this.radius*this.radius){let n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(hl,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(rM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(hl.copy(e.center).add(rM)),this.expandByPoint(hl.copy(e.center).sub(rM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Ri=new I,sM=new I,wv=new I,pr=new I,aM=new I,Tv=new I,oM=new I,As=class{constructor(e=new I,t=new I(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ri)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Ri.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ri.copy(this.origin).addScaledVector(this.direction,t),Ri.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){sM.copy(e).add(t).multiplyScalar(.5),wv.copy(t).sub(e).normalize(),pr.copy(this.origin).sub(sM);let s=e.distanceTo(t)*.5,a=-this.direction.dot(wv),o=pr.dot(this.direction),u=-pr.dot(wv),l=pr.lengthSq(),c=Math.abs(1-a*a),d,f,h,p;if(c>0)if(d=a*u-o,f=a*o-u,p=s*c,d>=0)if(f>=-p)if(f<=p){let v=1/c;d*=v,f*=v,h=d*(d+a*f+2*o)+f*(a*d+f+2*u)+l}else f=s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*u)+l;else f=-s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*u)+l;else f<=-p?(d=Math.max(0,-(-a*s+o)),f=d>0?-s:Math.min(Math.max(-s,-u),s),h=-d*d+f*(f+2*u)+l):f<=p?(d=0,f=Math.min(Math.max(-s,-u),s),h=f*(f+2*u)+l):(d=Math.max(0,-(a*s+o)),f=d>0?s:Math.min(Math.max(-s,-u),s),h=-d*d+f*(f+2*u)+l);else f=a>0?-s:s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*u)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(sM).addScaledVector(wv,f),h}intersectSphere(e,t){Ri.subVectors(e.center,this.origin);let n=Ri.dot(this.direction),r=Ri.dot(Ri)-n*n,s=e.radius*e.radius;if(r>s)return null;let a=Math.sqrt(s-r),o=n-a,u=n+a;return u<0?null:o<0?this.at(u,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,a,o,u,l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,f=this.origin;return l>=0?(n=(e.min.x-f.x)*l,r=(e.max.x-f.x)*l):(n=(e.max.x-f.x)*l,r=(e.min.x-f.x)*l),c>=0?(s=(e.min.y-f.y)*c,a=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,a=(e.min.y-f.y)*c),n>a||s>r||((s>n||isNaN(n))&&(n=s),(a<r||isNaN(r))&&(r=a),d>=0?(o=(e.min.z-f.z)*d,u=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,u=(e.min.z-f.z)*d),n>u||o>r)||((o>n||n!==n)&&(n=o),(u<r||r!==r)&&(r=u),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Ri)!==null}intersectTriangle(e,t,n,r,s){aM.subVectors(t,e),Tv.subVectors(n,e),oM.crossVectors(aM,Tv);let a=this.direction.dot(oM),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;pr.subVectors(this.origin,e);let u=o*this.direction.dot(Tv.crossVectors(pr,Tv));if(u<0)return null;let l=o*this.direction.dot(aM.cross(pr));if(l<0||u+l>a)return null;let c=-o*pr.dot(oM);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Ye=class{constructor(){Ye.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,s,a,o,u,l,c,d,f,h,p,v,g){let m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=s,m[5]=a,m[9]=o,m[13]=u,m[2]=l,m[6]=c,m[10]=d,m[14]=f,m[3]=h,m[7]=p,m[11]=v,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ye().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/Ja.setFromMatrixColumn(e,0).length(),s=1/Ja.setFromMatrixColumn(e,1).length(),a=1/Ja.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),u=Math.cos(r),l=Math.sin(r),c=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){let f=a*c,h=a*d,p=o*c,v=o*d;t[0]=u*c,t[4]=-u*d,t[8]=l,t[1]=h+p*l,t[5]=f-v*l,t[9]=-o*u,t[2]=v-f*l,t[6]=p+h*l,t[10]=a*u}else if(e.order==="YXZ"){let f=u*c,h=u*d,p=l*c,v=l*d;t[0]=f+v*o,t[4]=p*o-h,t[8]=a*l,t[1]=a*d,t[5]=a*c,t[9]=-o,t[2]=h*o-p,t[6]=v+f*o,t[10]=a*u}else if(e.order==="ZXY"){let f=u*c,h=u*d,p=l*c,v=l*d;t[0]=f-v*o,t[4]=-a*d,t[8]=p+h*o,t[1]=h+p*o,t[5]=a*c,t[9]=v-f*o,t[2]=-a*l,t[6]=o,t[10]=a*u}else if(e.order==="ZYX"){let f=a*c,h=a*d,p=o*c,v=o*d;t[0]=u*c,t[4]=p*l-h,t[8]=f*l+v,t[1]=u*d,t[5]=v*l+f,t[9]=h*l-p,t[2]=-l,t[6]=o*u,t[10]=a*u}else if(e.order==="YZX"){let f=a*u,h=a*l,p=o*u,v=o*l;t[0]=u*c,t[4]=v-f*d,t[8]=p*d+h,t[1]=d,t[5]=a*c,t[9]=-o*c,t[2]=-l*c,t[6]=h*d+p,t[10]=f-v*d}else if(e.order==="XZY"){let f=a*u,h=a*l,p=o*u,v=o*l;t[0]=u*c,t[4]=-d,t[8]=l*c,t[1]=f*d+v,t[5]=a*c,t[9]=h*d-p,t[2]=p*d-h,t[6]=o*c,t[10]=v*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rve,e,sve)}lookAt(e,t,n){let r=this.elements;return gn.subVectors(e,t),gn.lengthSq()===0&&(gn.z=1),gn.normalize(),mr.crossVectors(n,gn),mr.lengthSq()===0&&(Math.abs(n.z)===1?gn.x+=1e-4:gn.z+=1e-4,gn.normalize(),mr.crossVectors(n,gn)),mr.normalize(),Ev.crossVectors(gn,mr),r[0]=mr.x,r[4]=Ev.x,r[8]=gn.x,r[1]=mr.y,r[5]=Ev.y,r[9]=gn.y,r[2]=mr.z,r[6]=Ev.z,r[10]=gn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[4],u=n[8],l=n[12],c=n[1],d=n[5],f=n[9],h=n[13],p=n[2],v=n[6],g=n[10],m=n[14],y=n[3],_=n[7],b=n[11],M=n[15],T=r[0],P=r[4],C=r[8],S=r[12],A=r[1],z=r[5],j=r[9],W=r[13],G=r[2],V=r[6],J=r[10],Z=r[14],ne=r[3],re=r[7],ce=r[11],Te=r[15];return s[0]=a*T+o*A+u*G+l*ne,s[4]=a*P+o*z+u*V+l*re,s[8]=a*C+o*j+u*J+l*ce,s[12]=a*S+o*W+u*Z+l*Te,s[1]=c*T+d*A+f*G+h*ne,s[5]=c*P+d*z+f*V+h*re,s[9]=c*C+d*j+f*J+h*ce,s[13]=c*S+d*W+f*Z+h*Te,s[2]=p*T+v*A+g*G+m*ne,s[6]=p*P+v*z+g*V+m*re,s[10]=p*C+v*j+g*J+m*ce,s[14]=p*S+v*W+g*Z+m*Te,s[3]=y*T+_*A+b*G+M*ne,s[7]=y*P+_*z+b*V+M*re,s[11]=y*C+_*j+b*J+M*ce,s[15]=y*S+_*W+b*Z+M*Te,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],o=e[5],u=e[9],l=e[13],c=e[2],d=e[6],f=e[10],h=e[14],p=e[3],v=e[7],g=e[11],m=e[15];return p*(+s*u*d-r*l*d-s*o*f+n*l*f+r*o*h-n*u*h)+v*(+t*u*h-t*l*f+s*a*f-r*a*h+r*l*c-s*u*c)+g*(+t*l*d-t*o*h-s*a*d+n*a*h+s*o*c-n*l*c)+m*(-r*o*c-t*u*d+t*o*f+r*a*d-n*a*f+n*u*c)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],u=e[6],l=e[7],c=e[8],d=e[9],f=e[10],h=e[11],p=e[12],v=e[13],g=e[14],m=e[15],y=d*g*l-v*f*l+v*u*h-o*g*h-d*u*m+o*f*m,_=p*f*l-c*g*l-p*u*h+a*g*h+c*u*m-a*f*m,b=c*v*l-p*d*l+p*o*h-a*v*h-c*o*m+a*d*m,M=p*d*u-c*v*u-p*o*f+a*v*f+c*o*g-a*d*g,T=t*y+n*_+r*b+s*M;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let P=1/T;return e[0]=y*P,e[1]=(v*f*s-d*g*s-v*r*h+n*g*h+d*r*m-n*f*m)*P,e[2]=(o*g*s-v*u*s+v*r*l-n*g*l-o*r*m+n*u*m)*P,e[3]=(d*u*s-o*f*s-d*r*l+n*f*l+o*r*h-n*u*h)*P,e[4]=_*P,e[5]=(c*g*s-p*f*s+p*r*h-t*g*h-c*r*m+t*f*m)*P,e[6]=(p*u*s-a*g*s-p*r*l+t*g*l+a*r*m-t*u*m)*P,e[7]=(a*f*s-c*u*s+c*r*l-t*f*l-a*r*h+t*u*h)*P,e[8]=b*P,e[9]=(p*d*s-c*v*s-p*n*h+t*v*h+c*n*m-t*d*m)*P,e[10]=(a*v*s-p*o*s+p*n*l-t*v*l-a*n*m+t*o*m)*P,e[11]=(c*o*s-a*d*s-c*n*l+t*d*l+a*n*h-t*o*h)*P,e[12]=M*P,e[13]=(c*v*r-p*d*r+p*n*f-t*v*f-c*n*g+t*d*g)*P,e[14]=(p*o*r-a*v*r-p*n*u+t*v*u+a*n*g-t*o*g)*P,e[15]=(a*d*r-c*o*r+c*n*u-t*d*u-a*n*f+t*o*f)*P,this}scale(e){let t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,o=e.y,u=e.z,l=s*a,c=s*o;return this.set(l*a+n,l*o-r*u,l*u+r*o,0,l*o+r*u,c*o+n,c*u-r*a,0,l*u-r*o,c*u+r*a,s*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,s=t._x,a=t._y,o=t._z,u=t._w,l=s+s,c=a+a,d=o+o,f=s*l,h=s*c,p=s*d,v=a*c,g=a*d,m=o*d,y=u*l,_=u*c,b=u*d,M=n.x,T=n.y,P=n.z;return r[0]=(1-(v+m))*M,r[1]=(h+b)*M,r[2]=(p-_)*M,r[3]=0,r[4]=(h-b)*T,r[5]=(1-(f+m))*T,r[6]=(g+y)*T,r[7]=0,r[8]=(p+_)*P,r[9]=(g-y)*P,r[10]=(1-(f+v))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,s=Ja.set(r[0],r[1],r[2]).length(),a=Ja.set(r[4],r[5],r[6]).length(),o=Ja.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],zn.copy(this);let l=1/s,c=1/a,d=1/o;return zn.elements[0]*=l,zn.elements[1]*=l,zn.elements[2]*=l,zn.elements[4]*=c,zn.elements[5]*=c,zn.elements[6]*=c,zn.elements[8]*=d,zn.elements[9]*=d,zn.elements[10]*=d,t.setFromRotationMatrix(zn),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,r,s,a){let o=this.elements,u=2*s/(t-e),l=2*s/(n-r),c=(t+e)/(t-e),d=(n+r)/(n-r),f=-(a+s)/(a-s),h=-2*a*s/(a-s);return o[0]=u,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,s,a){let o=this.elements,u=1/(t-e),l=1/(n-r),c=1/(a-s),d=(t+e)*u,f=(n+r)*l,h=(a+s)*c;return o[0]=2*u,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},Ja=new I,zn=new Ye,rve=new I(0,0,0),sve=new I(1,1,1),mr=new I,Ev=new I,gn=new I,WU=new Ye,VU=new Qt,Ds=class{constructor(e=0,t=0,n=0,r=Ds.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let r=e.elements,s=r[0],a=r[4],o=r[8],u=r[1],l=r[5],c=r[9],d=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Pt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Pt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Pt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Pt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Pt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Pt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return WU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(WU,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return VU.setFromEuler(this),this.setFromQuaternion(VU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Ds.DEFAULT_ORDER="XYZ";var So=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},ave=0,GU=new I,Ka=new Qt,Ci=new Ye,Pv=new I,pl=new I,ove=new I,uve=new Qt,jU=new I(1,0,0),YU=new I(0,1,0),XU=new I(0,0,1),lve={type:"added"},$U={type:"removed"},ft=class extends jn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ave++}),this.uuid=yn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ft.DEFAULT_UP.clone();let e=new I,t=new Ds,n=new Qt,r=new I(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ye},normalMatrix:{value:new et}}),this.matrix=new Ye,this.matrixWorld=new Ye,this.matrixAutoUpdate=ft.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ft.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new So,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ka.setFromAxisAngle(e,t),this.quaternion.multiply(Ka),this}rotateOnWorldAxis(e,t){return Ka.setFromAxisAngle(e,t),this.quaternion.premultiply(Ka),this}rotateX(e){return this.rotateOnAxis(jU,e)}rotateY(e){return this.rotateOnAxis(YU,e)}rotateZ(e){return this.rotateOnAxis(XU,e)}translateOnAxis(e,t){return GU.copy(e).applyQuaternion(this.quaternion),this.position.add(GU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(jU,e)}translateY(e){return this.translateOnAxis(YU,e)}translateZ(e){return this.translateOnAxis(XU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ci.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Pv.copy(e):Pv.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),pl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ci.lookAt(pl,Pv,this.up):Ci.lookAt(Pv,pl,this.up),this.quaternion.setFromRotationMatrix(Ci),r&&(Ci.extractRotation(r.matrixWorld),Ka.setFromRotationMatrix(Ci),this.quaternion.premultiply(Ka.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(lve)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($U)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent($U)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ci.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ci.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ci),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,s=this.children.length;r<s;r++){let a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pl,e,ove),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pl,uve,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,r=t.length;n<r;n++){let s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let r=this.children;for(let s=0,a=r.length;s<a;s++){let o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,u){return o[u.uuid]===void 0&&(o[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let u=o.shapes;if(Array.isArray(u))for(let l=0,c=u.length;l<c;l++){let d=u[l];s(e.shapes,d)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let u=0,l=this.material.length;u<l;u++)o.push(s(e.materials,this.material[u]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){let u=this.animations[o];r.animations.push(s(e.animations,u))}}if(t){let o=a(e.geometries),u=a(e.materials),l=a(e.textures),c=a(e.images),d=a(e.shapes),f=a(e.skeletons),h=a(e.animations),p=a(e.nodes);o.length>0&&(n.geometries=o),u.length>0&&(n.materials=u),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),d.length>0&&(n.shapes=d),f.length>0&&(n.skeletons=f),h.length>0&&(n.animations=h),p.length>0&&(n.nodes=p)}return n.object=r,n;function a(o){let u=[];for(let l in o){let c=o[l];delete c.metadata,u.push(c)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){let r=e.children[n];this.add(r.clone())}return this}};ft.DEFAULT_UP=new I(0,1,0);ft.DEFAULT_MATRIX_AUTO_UPDATE=!0;ft.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Hn=new I,Oi=new I,uM=new I,Ii=new I,Qa=new I,eo=new I,ZU=new I,lM=new I,cM=new I,dM=new I,Av=!1,Jt=class{constructor(e=new I,t=new I,n=new I){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Hn.subVectors(e,t),r.cross(Hn);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Hn.subVectors(r,t),Oi.subVectors(n,t),uM.subVectors(e,t);let a=Hn.dot(Hn),o=Hn.dot(Oi),u=Hn.dot(uM),l=Oi.dot(Oi),c=Oi.dot(uM),d=a*l-o*o;if(d===0)return s.set(-2,-1,-1);let f=1/d,h=(l*u-o*c)*f,p=(a*c-o*u)*f;return s.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Ii),Ii.x>=0&&Ii.y>=0&&Ii.x+Ii.y<=1}static getUV(e,t,n,r,s,a,o,u){return Av===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Av=!0),this.getInterpolation(e,t,n,r,s,a,o,u)}static getInterpolation(e,t,n,r,s,a,o,u){return this.getBarycoord(e,t,n,r,Ii),u.setScalar(0),u.addScaledVector(s,Ii.x),u.addScaledVector(a,Ii.y),u.addScaledVector(o,Ii.z),u}static isFrontFacing(e,t,n,r){return Hn.subVectors(n,t),Oi.subVectors(e,t),Hn.cross(Oi).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Hn.subVectors(this.c,this.b),Oi.subVectors(this.a,this.b),Hn.cross(Oi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Jt.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Jt.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return Av===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Av=!0),Jt.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}getInterpolation(e,t,n,r,s){return Jt.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Jt.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Jt.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n=this.a,r=this.b,s=this.c,a,o;Qa.subVectors(r,n),eo.subVectors(s,n),lM.subVectors(e,n);let u=Qa.dot(lM),l=eo.dot(lM);if(u<=0&&l<=0)return t.copy(n);cM.subVectors(e,r);let c=Qa.dot(cM),d=eo.dot(cM);if(c>=0&&d<=c)return t.copy(r);let f=u*d-c*l;if(f<=0&&u>=0&&c<=0)return a=u/(u-c),t.copy(n).addScaledVector(Qa,a);dM.subVectors(e,s);let h=Qa.dot(dM),p=eo.dot(dM);if(p>=0&&h<=p)return t.copy(s);let v=h*l-u*p;if(v<=0&&l>=0&&p<=0)return o=l/(l-p),t.copy(n).addScaledVector(eo,o);let g=c*p-h*d;if(g<=0&&d-c>=0&&h-p>=0)return ZU.subVectors(s,r),o=(d-c)/(d-c+(h-p)),t.copy(r).addScaledVector(ZU,o);let m=1/(g+v+f);return a=v*m,o=f*m,t.copy(n).addScaledVector(Qa,a).addScaledVector(eo,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},cve=0,Wt=class extends jn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:cve++}),this.uuid=yn(),this.name="",this.type="Material",this.blending=ws,this.side=Bi,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=zw,this.blendDst=Hw,this.blendEquation=xs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=g_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=oz,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=m_,this.stencilZFail=m_,this.stencilZPass=m_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ws&&(n.blending=this.blending),this.side!==Bi&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){let a=[];for(let o in s){let u=s[o];delete u.metadata,a.push(u)}return a}if(t){let s=r(e.textures),a=r(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(t!==null){let r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},dz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wn={h:0,s:0,l:0},Dv={h:0,s:0,l:0};function fM(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}var Ae=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=$e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,An.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=An.workingColorSpace){return this.r=e,this.g=t,this.b=n,An.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=An.workingColorSpace){if(e=Xw(e,1),t=Pt(t,0,1),n=Pt(n,0,1),t===0)this.r=this.g=this.b=n;else{let s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=fM(a,s,e+1/3),this.g=fM(a,s,e),this.b=fM(a,s,e-1/3)}return An.toWorkingColorSpace(this,r),this}setStyle(e,t=$e){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s,a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=$e){let n=dz[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=_o(e.r),this.g=_o(e.g),this.b=_o(e.b),this}copyLinearToSRGB(e){return this.r=eM(e.r),this.g=eM(e.g),this.b=eM(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=$e){return An.fromWorkingColorSpace(Zt.copy(this),e),Math.round(Pt(Zt.r*255,0,255))*65536+Math.round(Pt(Zt.g*255,0,255))*256+Math.round(Pt(Zt.b*255,0,255))}getHexString(e=$e){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=An.workingColorSpace){An.fromWorkingColorSpace(Zt.copy(this),t);let n=Zt.r,r=Zt.g,s=Zt.b,a=Math.max(n,r,s),o=Math.min(n,r,s),u,l,c=(o+a)/2;if(o===a)u=0,l=0;else{let d=a-o;switch(l=c<=.5?d/(a+o):d/(2-a-o),a){case n:u=(r-s)/d+(r<s?6:0);break;case r:u=(s-n)/d+2;break;case s:u=(n-r)/d+4;break}u/=6}return e.h=u,e.s=l,e.l=c,e}getRGB(e,t=An.workingColorSpace){return An.fromWorkingColorSpace(Zt.copy(this),t),e.r=Zt.r,e.g=Zt.g,e.b=Zt.b,e}getStyle(e=$e){An.fromWorkingColorSpace(Zt.copy(this),e);let t=Zt.r,n=Zt.g,r=Zt.b;return e!==$e?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Wn),Wn.h+=e,Wn.s+=t,Wn.l+=n,this.setHSL(Wn.h,Wn.s,Wn.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Wn),e.getHSL(Dv);let n=Tl(Wn.h,Dv.h,t),r=Tl(Wn.s,Dv.s,t),s=Tl(Wn.l,Dv.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Zt=new Ae;Ae.NAMES=dz;var di=class extends Wt{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},qi=dve();function dve(){let i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){let l=u-127;l<-27?(n[u]=0,n[u|256]=32768,r[u]=24,r[u|256]=24):l<-14?(n[u]=1024>>-l-14,n[u|256]=1024>>-l-14|32768,r[u]=-l-1,r[u|256]=-l-1):l<=15?(n[u]=l+15<<10,n[u|256]=l+15<<10|32768,r[u]=13,r[u|256]=13):l<128?(n[u]=31744,n[u|256]=64512,r[u]=24,r[u|256]=24):(n[u]=31744,n[u|256]=64512,r[u]=13,r[u|256]=13)}let s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let u=1;u<1024;++u){let l=u<<13,c=0;for(;(l&8388608)===0;)l<<=1,c-=8388608;l&=-8388609,c+=947912704,s[u]=l|c}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)a[u]=u<<23;a[31]=1199570944,a[32]=2147483648;for(let u=33;u<63;++u)a[u]=2147483648+(u-32<<23);a[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(o[u]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function fn(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Pt(i,-65504,65504),qi.floatView[0]=i;let e=qi.uint32View[0],t=e>>23&511;return qi.baseTable[t]+((e&8388607)>>qi.shiftTable[t])}function Ml(i){let e=i>>10;return qi.uint32View[0]=qi.mantissaTable[qi.offsetTable[e]+(i&1023)]+qi.exponentTable[e],qi.floatView[0]}var fve={toHalfFloat:fn,fromHalfFloat:Ml},Nt=new I,Rv=new de,_t=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=kl,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Rv.fromBufferAttribute(this,t),Rv.applyMatrix3(e),this.setXY(t,Rv.x,Rv.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Nt.fromBufferAttribute(this,t),Nt.applyMatrix3(e),this.setXYZ(t,Nt.x,Nt.y,Nt.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Nt.fromBufferAttribute(this,t),Nt.applyMatrix4(e),this.setXYZ(t,Nt.x,Nt.y,Nt.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Nt.fromBufferAttribute(this,t),Nt.applyNormalMatrix(e),this.setXYZ(t,Nt.x,Nt.y,Nt.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Nt.fromBufferAttribute(this,t),Nt.transformDirection(e),this.setXYZ(t,Nt.x,Nt.y,Nt.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=xn(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ke(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=xn(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ke(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=xn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ke(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=xn(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ke(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ke(t,this.array),n=Ke(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Ke(t,this.array),n=Ke(n,this.array),r=Ke(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Ke(t,this.array),n=Ke(n,this.array),r=Ke(r,this.array),s=Ke(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==kl&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},lS=class extends _t{constructor(e,t,n){super(new Int8Array(e),t,n)}},cS=class extends _t{constructor(e,t,n){super(new Uint8Array(e),t,n)}},dS=class extends _t{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}},fS=class extends _t{constructor(e,t,n){super(new Int16Array(e),t,n)}},zl=class extends _t{constructor(e,t,n){super(new Uint16Array(e),t,n)}},hS=class extends _t{constructor(e,t,n){super(new Int32Array(e),t,n)}},Hl=class extends _t{constructor(e,t,n){super(new Uint32Array(e),t,n)}},pS=class extends _t{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Ml(this.array[e*this.itemSize]);return this.normalized&&(t=xn(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ke(t,this.array)),this.array[e*this.itemSize]=fn(t),this}getY(e){let t=Ml(this.array[e*this.itemSize+1]);return this.normalized&&(t=xn(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ke(t,this.array)),this.array[e*this.itemSize+1]=fn(t),this}getZ(e){let t=Ml(this.array[e*this.itemSize+2]);return this.normalized&&(t=xn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ke(t,this.array)),this.array[e*this.itemSize+2]=fn(t),this}getW(e){let t=Ml(this.array[e*this.itemSize+3]);return this.normalized&&(t=xn(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ke(t,this.array)),this.array[e*this.itemSize+3]=fn(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ke(t,this.array),n=Ke(n,this.array)),this.array[e+0]=fn(t),this.array[e+1]=fn(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Ke(t,this.array),n=Ke(n,this.array),r=Ke(r,this.array)),this.array[e+0]=fn(t),this.array[e+1]=fn(n),this.array[e+2]=fn(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Ke(t,this.array),n=Ke(n,this.array),r=Ke(r,this.array),s=Ke(s,this.array)),this.array[e+0]=fn(t),this.array[e+1]=fn(n),this.array[e+2]=fn(r),this.array[e+3]=fn(s),this}},Le=class extends _t{constructor(e,t,n){super(new Float32Array(e),t,n)}},mS=class extends _t{constructor(e,t,n){super(new Float64Array(e),t,n)}},hve=0,Pn=new Ye,hM=new ft,to=new I,vn=new Cn,ml=new Cn,Ht=new I,Ze=class extends jn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hve++}),this.uuid=yn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(cz(e)?Hl:zl)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(n!==void 0){let s=new et().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Pn.makeRotationFromQuaternion(e),this.applyMatrix4(Pn),this}rotateX(e){return Pn.makeRotationX(e),this.applyMatrix4(Pn),this}rotateY(e){return Pn.makeRotationY(e),this.applyMatrix4(Pn),this}rotateZ(e){return Pn.makeRotationZ(e),this.applyMatrix4(Pn),this}translate(e,t,n){return Pn.makeTranslation(e,t,n),this.applyMatrix4(Pn),this}scale(e,t,n){return Pn.makeScale(e,t,n),this.applyMatrix4(Pn),this}lookAt(e){return hM.lookAt(e),hM.updateMatrix(),this.applyMatrix4(hM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(to).negate(),this.translate(to.x,to.y,to.z),this}setFromPoints(e){let t=[];for(let n=0,r=e.length;n<r;n++){let s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Le(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new I(-1/0,-1/0,-1/0),new I(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){let s=t[n];vn.setFromBufferAttribute(s),this.morphTargetsRelative?(Ht.addVectors(this.boundingBox.min,vn.min),this.boundingBox.expandByPoint(Ht),Ht.addVectors(this.boundingBox.max,vn.max),this.boundingBox.expandByPoint(Ht)):(this.boundingBox.expandByPoint(vn.min),this.boundingBox.expandByPoint(vn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new On);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new I,1/0);return}if(e){let n=this.boundingSphere.center;if(vn.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){let o=t[s];ml.setFromBufferAttribute(o),this.morphTargetsRelative?(Ht.addVectors(vn.min,ml.min),vn.expandByPoint(Ht),Ht.addVectors(vn.max,ml.max),vn.expandByPoint(Ht)):(vn.expandByPoint(ml.min),vn.expandByPoint(ml.max))}vn.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)Ht.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Ht));if(t)for(let s=0,a=t.length;s<a;s++){let o=t[s],u=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)Ht.fromBufferAttribute(o,l),u&&(to.fromBufferAttribute(e,l),Ht.add(to)),r=Math.max(r,n.distanceToSquared(Ht))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _t(new Float32Array(4*o),4));let u=this.getAttribute("tangent").array,l=[],c=[];for(let A=0;A<o;A++)l[A]=new I,c[A]=new I;let d=new I,f=new I,h=new I,p=new de,v=new de,g=new de,m=new I,y=new I;function _(A,z,j){d.fromArray(r,A*3),f.fromArray(r,z*3),h.fromArray(r,j*3),p.fromArray(a,A*2),v.fromArray(a,z*2),g.fromArray(a,j*2),f.sub(d),h.sub(d),v.sub(p),g.sub(p);let W=1/(v.x*g.y-g.x*v.y);!isFinite(W)||(m.copy(f).multiplyScalar(g.y).addScaledVector(h,-v.y).multiplyScalar(W),y.copy(h).multiplyScalar(v.x).addScaledVector(f,-g.x).multiplyScalar(W),l[A].add(m),l[z].add(m),l[j].add(m),c[A].add(y),c[z].add(y),c[j].add(y))}let b=this.groups;b.length===0&&(b=[{start:0,count:n.length}]);for(let A=0,z=b.length;A<z;++A){let j=b[A],W=j.start,G=j.count;for(let V=W,J=W+G;V<J;V+=3)_(n[V+0],n[V+1],n[V+2])}let M=new I,T=new I,P=new I,C=new I;function S(A){P.fromArray(s,A*3),C.copy(P);let z=l[A];M.copy(z),M.sub(P.multiplyScalar(P.dot(z))).normalize(),T.crossVectors(C,z);let W=T.dot(c[A])<0?-1:1;u[A*4]=M.x,u[A*4+1]=M.y,u[A*4+2]=M.z,u[A*4+3]=W}for(let A=0,z=b.length;A<z;++A){let j=b[A],W=j.start,G=j.count;for(let V=W,J=W+G;V<J;V+=3)S(n[V+0]),S(n[V+1]),S(n[V+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new _t(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let f=0,h=n.count;f<h;f++)n.setXYZ(f,0,0,0);let r=new I,s=new I,a=new I,o=new I,u=new I,l=new I,c=new I,d=new I;if(e)for(let f=0,h=e.count;f<h;f+=3){let p=e.getX(f+0),v=e.getX(f+1),g=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,v),a.fromBufferAttribute(t,g),c.subVectors(a,s),d.subVectors(r,s),c.cross(d),o.fromBufferAttribute(n,p),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,g),o.add(c),u.add(c),l.add(c),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(g,l.x,l.y,l.z)}else for(let f=0,h=t.count;f<h;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),c.subVectors(a,s),d.subVectors(r,s),c.cross(d),n.setXYZ(f+0,c.x,c.y,c.z),n.setXYZ(f+1,c.x,c.y,c.z),n.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ht.fromBufferAttribute(e,t),Ht.normalize(),e.setXYZ(t,Ht.x,Ht.y,Ht.z)}toNonIndexed(){function e(o,u){let l=o.array,c=o.itemSize,d=o.normalized,f=new l.constructor(u.length*c),h=0,p=0;for(let v=0,g=u.length;v<g;v++){o.isInterleavedBufferAttribute?h=u[v]*o.data.stride+o.offset:h=u[v]*c;for(let m=0;m<c;m++)f[p++]=l[h++]}return new _t(f,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Ze,n=this.index.array,r=this.attributes;for(let o in r){let u=r[o],l=e(u,n);t.setAttribute(o,l)}let s=this.morphAttributes;for(let o in s){let u=[],l=s[o];for(let c=0,d=l.length;c<d;c++){let f=l[c],h=e(f,n);u.push(h)}t.morphAttributes[o]=u}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let o=0,u=a.length;o<u;o++){let l=a[o];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let u=this.parameters;for(let l in u)u[l]!==void 0&&(e[l]=u[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let u in n){let l=n[u];e.data.attributes[u]=l.toJSON(e.data)}let r={},s=!1;for(let u in this.morphAttributes){let l=this.morphAttributes[u],c=[];for(let d=0,f=l.length;d<f;d++){let h=l[d];c.push(h.toJSON(e.data))}c.length>0&&(r[u]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;n!==null&&this.setIndex(n.clone(t));let r=e.attributes;for(let l in r){let c=r[l];this.setAttribute(l,c.clone(t))}let s=e.morphAttributes;for(let l in s){let c=[],d=s[l];for(let f=0,h=d.length;f<h;f++)c.push(d[f].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let l=0,c=a.length;l<c;l++){let d=a[l];this.addGroup(d.start,d.count,d.materialIndex)}let o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());let u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},JU=new Ye,ai=new As,Cv=new On,KU=new I,no=new I,io=new I,ro=new I,pM=new I,Ov=new I,Iv=new de,Lv=new de,qv=new de,QU=new I,e3=new I,t3=new I,Nv=new I,kv=new I,Ft=class extends ft{constructor(e=new Ze,t=new di){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){let o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let o=this.morphTargetInfluences;if(s&&o){Ov.set(0,0,0);for(let u=0,l=s.length;u<l;u++){let c=o[u],d=s[u];c!==0&&(pM.fromBufferAttribute(d,e),a?Ov.addScaledVector(pM,c):Ov.addScaledVector(pM.sub(t),c))}t.add(Ov)}return t}raycast(e,t){let n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Cv.copy(n.boundingSphere),Cv.applyMatrix4(s),ai.copy(e.ray).recast(e.near),!(Cv.containsPoint(ai.origin)===!1&&(ai.intersectSphere(Cv,KU)===null||ai.origin.distanceToSquared(KU)>T0(e.far-e.near,2)))&&(JU.copy(s).invert(),ai.copy(e.ray).applyMatrix4(JU),!(n.boundingBox!==null&&ai.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t)))}_computeIntersections(e,t){let n,r=this.geometry,s=this.material,a=r.index,o=r.attributes.position,u=r.attributes.uv,l=r.attributes.uv1,c=r.attributes.normal,d=r.groups,f=r.drawRange;if(a!==null)if(Array.isArray(s))for(let h=0,p=d.length;h<p;h++){let v=d[h],g=s[v.materialIndex],m=Math.max(v.start,f.start),y=Math.min(a.count,Math.min(v.start+v.count,f.start+f.count));for(let _=m,b=y;_<b;_+=3){let M=a.getX(_),T=a.getX(_+1),P=a.getX(_+2);n=Fv(this,g,e,ai,u,l,c,M,T,P),n&&(n.faceIndex=Math.floor(_/3),n.face.materialIndex=v.materialIndex,t.push(n))}}else{let h=Math.max(0,f.start),p=Math.min(a.count,f.start+f.count);for(let v=h,g=p;v<g;v+=3){let m=a.getX(v),y=a.getX(v+1),_=a.getX(v+2);n=Fv(this,s,e,ai,u,l,c,m,y,_),n&&(n.faceIndex=Math.floor(v/3),t.push(n))}}else if(o!==void 0)if(Array.isArray(s))for(let h=0,p=d.length;h<p;h++){let v=d[h],g=s[v.materialIndex],m=Math.max(v.start,f.start),y=Math.min(o.count,Math.min(v.start+v.count,f.start+f.count));for(let _=m,b=y;_<b;_+=3){let M=_,T=_+1,P=_+2;n=Fv(this,g,e,ai,u,l,c,M,T,P),n&&(n.faceIndex=Math.floor(_/3),n.face.materialIndex=v.materialIndex,t.push(n))}}else{let h=Math.max(0,f.start),p=Math.min(o.count,f.start+f.count);for(let v=h,g=p;v<g;v+=3){let m=v,y=v+1,_=v+2;n=Fv(this,s,e,ai,u,l,c,m,y,_),n&&(n.faceIndex=Math.floor(v/3),t.push(n))}}}};function pve(i,e,t,n,r,s,a,o){let u;if(e.side===an?u=n.intersectTriangle(a,s,r,!0,o):u=n.intersectTriangle(r,s,a,e.side===Bi,o),u===null)return null;kv.copy(o),kv.applyMatrix4(i.matrixWorld);let l=t.ray.origin.distanceTo(kv);return l<t.near||l>t.far?null:{distance:l,point:kv.clone(),object:i}}function Fv(i,e,t,n,r,s,a,o,u,l){i.getVertexPosition(o,no),i.getVertexPosition(u,io),i.getVertexPosition(l,ro);let c=pve(i,e,t,n,no,io,ro,Nv);if(c){r&&(Iv.fromBufferAttribute(r,o),Lv.fromBufferAttribute(r,u),qv.fromBufferAttribute(r,l),c.uv=Jt.getInterpolation(Nv,no,io,ro,Iv,Lv,qv,new de)),s&&(Iv.fromBufferAttribute(s,o),Lv.fromBufferAttribute(s,u),qv.fromBufferAttribute(s,l),c.uv1=Jt.getInterpolation(Nv,no,io,ro,Iv,Lv,qv,new de),c.uv2=c.uv1),a&&(QU.fromBufferAttribute(a,o),e3.fromBufferAttribute(a,u),t3.fromBufferAttribute(a,l),c.normal=Jt.getInterpolation(Nv,no,io,ro,QU,e3,t3,new I),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));let d={a:o,b:u,c:l,normal:new I,materialIndex:0};Jt.getNormal(no,io,ro,d.normal),c.face=d}return c}var fi=class extends Ze{constructor(e=1,t=1,n=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:a};let o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);let u=[],l=[],c=[],d=[],f=0,h=0;p("z","y","x",-1,-1,n,t,e,a,s,0),p("z","y","x",1,-1,n,t,-e,a,s,1),p("x","z","y",1,1,e,n,t,r,a,2),p("x","z","y",1,-1,e,n,-t,r,a,3),p("x","y","z",1,-1,e,t,n,r,s,4),p("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(u),this.setAttribute("position",new Le(l,3)),this.setAttribute("normal",new Le(c,3)),this.setAttribute("uv",new Le(d,2));function p(v,g,m,y,_,b,M,T,P,C,S){let A=b/P,z=M/C,j=b/2,W=M/2,G=T/2,V=P+1,J=C+1,Z=0,ne=0,re=new I;for(let ce=0;ce<J;ce++){let Te=ce*z-W;for(let xe=0;xe<V;xe++){let K=xe*A-j;re[v]=K*y,re[g]=Te*_,re[m]=G,l.push(re.x,re.y,re.z),re[v]=0,re[g]=0,re[m]=T>0?1:-1,c.push(re.x,re.y,re.z),d.push(xe/P),d.push(1-ce/C),Z+=1}}for(let ce=0;ce<C;ce++)for(let Te=0;Te<P;Te++){let xe=f+Te+V*ce,K=f+Te+V*(ce+1),ue=f+(Te+1)+V*(ce+1),_e=f+(Te+1)+V*ce;u.push(xe,K,_e),u.push(K,ue,_e),ne+=6}o.addGroup(h,ne,S),h+=ne,f+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fi(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function wo(i){let e={};for(let t in i){e[t]={};for(let n in i[t]){let r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function sn(i){let e={};for(let t=0;t<i.length;t++){let n=wo(i[t]);for(let r in n)e[r]=n[r]}return e}function mve(i){let e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function fz(i){return i.getRenderTarget()===null?i.outputColorSpace:Gn}var hz={clone:wo,merge:sn},gve=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vve=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,In=class extends Wt{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=gve,this.fragmentShader=vve,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=wo(e.uniforms),this.uniformsGroups=mve(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},To=class extends ft{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ye,this.projectionMatrix=new Ye,this.projectionMatrixInverse=new Ye}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},kt=class extends To{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=bo*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Es*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return bo*2*Math.atan(Math.tan(Es*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Es*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r,a=this.view;if(this.view!==null&&this.view.enabled){let u=a.fullWidth,l=a.fullHeight;s+=a.offsetX*r/u,t-=a.offsetY*n/l,r*=a.width/u,n*=a.height/l}let o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},so=-90,ao=1,x_=class extends ft{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;let r=new kt(so,ao,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);let s=new kt(so,ao,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);let a=new kt(so,ao,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);let o=new kt(so,ao,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);let u=new kt(so,ao,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,1),this.add(u);let l=new kt(so,ao,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let n=this.renderTarget,[r,s,a,o,u,l]=this.children,c=e.getRenderTarget(),d=e.toneMapping,f=e.xr.enabled;e.toneMapping=ci,e.xr.enabled=!1;let h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=d,e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}},Rs=class extends Tt{constructor(e,t,n,r,s,a,o,u,l,c){e=e!==void 0?e:[],t=t!==void 0?t:Sr,super(e,t,n,r,s,a,o,u,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},y_=class extends bn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];t.encoding!==void 0&&(El("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===yr?$e:br),this.texture=new Rs(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Lt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new fi(5,5,5),s=new In({name:"CubemapFromEquirect",uniforms:wo(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:an,blending:Fi});s.uniforms.tEquirect.value=t;let a=new Ft(r,s),o=t.minFilter;return t.minFilter===Tr&&(t.minFilter=Lt),new x_(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){let s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(s)}},mM=new I,_ve=new I,xve=new et,ui=class{constructor(e=new I(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=mM.subVectors(n,t).cross(_ve.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(mM),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||xve.getNormalMatrix(e),r=this.coplanarPoint(mM).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},fs=new On,Uv=new I,Eo=class{constructor(e=new ui,t=new ui,n=new ui,r=new ui,s=new ui,a=new ui){this.planes=[e,t,n,r,s,a]}set(e,t,n,r,s,a){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=this.planes,n=e.elements,r=n[0],s=n[1],a=n[2],o=n[3],u=n[4],l=n[5],c=n[6],d=n[7],f=n[8],h=n[9],p=n[10],v=n[11],g=n[12],m=n[13],y=n[14],_=n[15];return t[0].setComponents(o-r,d-u,v-f,_-g).normalize(),t[1].setComponents(o+r,d+u,v+f,_+g).normalize(),t[2].setComponents(o+s,d+l,v+h,_+m).normalize(),t[3].setComponents(o-s,d-l,v-h,_-m).normalize(),t[4].setComponents(o-a,d-c,v-p,_-y).normalize(),t[5].setComponents(o+a,d+c,v+p,_+y).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),fs.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),fs.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(fs)}intersectsSprite(e){return fs.center.set(0,0,0),fs.radius=.7071067811865476,fs.applyMatrix4(e.matrixWorld),this.intersectsSphere(fs)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(Uv.x=r.normal.x>0?e.max.x:e.min.x,Uv.y=r.normal.y>0?e.max.y:e.min.y,Uv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Uv)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function pz(){let i=null,e=!1,t=null,n=null;function r(s,a){t(s,a),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function yve(i,e){let t=e.isWebGL2,n=new WeakMap;function r(l,c){let d=l.array,f=l.usage,h=i.createBuffer();i.bindBuffer(c,h),i.bufferData(c,d,f),l.onUploadCallback();let p;if(d instanceof Float32Array)p=i.FLOAT;else if(d instanceof Uint16Array)if(l.isFloat16BufferAttribute)if(t)p=i.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)p=i.SHORT;else if(d instanceof Uint32Array)p=i.UNSIGNED_INT;else if(d instanceof Int32Array)p=i.INT;else if(d instanceof Int8Array)p=i.BYTE;else if(d instanceof Uint8Array)p=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)p=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:h,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version}}function s(l,c,d){let f=c.array,h=c.updateRange;i.bindBuffer(d,l),h.count===-1?i.bufferSubData(d,0,f):(t?i.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):i.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1),c.onUploadCallback()}function a(l){return l.isInterleavedBufferAttribute&&(l=l.data),n.get(l)}function o(l){l.isInterleavedBufferAttribute&&(l=l.data);let c=n.get(l);c&&(i.deleteBuffer(c.buffer),n.delete(l))}function u(l,c){if(l.isGLBufferAttribute){let f=n.get(l);(!f||f.version<l.version)&&n.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);let d=n.get(l);d===void 0?n.set(l,r(l,c)):d.version<l.version&&(s(d.buffer,l,c),d.version=l.version)}return{get:a,remove:o,update:u}}var Pr=class extends Ze{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let s=e/2,a=t/2,o=Math.floor(n),u=Math.floor(r),l=o+1,c=u+1,d=e/o,f=t/u,h=[],p=[],v=[],g=[];for(let m=0;m<c;m++){let y=m*f-a;for(let _=0;_<l;_++){let b=_*d-s;p.push(b,-y,0),v.push(0,0,1),g.push(_/o),g.push(1-m/u)}}for(let m=0;m<u;m++)for(let y=0;y<o;y++){let _=y+l*m,b=y+l*(m+1),M=y+1+l*(m+1),T=y+1+l*m;h.push(_,b,T),h.push(b,M,T)}this.setIndex(h),this.setAttribute("position",new Le(p,3)),this.setAttribute("normal",new Le(v,3)),this.setAttribute("uv",new Le(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pr(e.width,e.height,e.widthSegments,e.heightSegments)}},bve=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Mve=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Sve=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,wve=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Tve=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Eve=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Pve="vec3 transformed = vec3( position );",Ave=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Dve=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Rve=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Cve=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Ove=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Ive=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Lve=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qve=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Nve=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kve=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Fve=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Uve=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Bve=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,zve=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Hve=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Wve=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Vve=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Gve=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,jve=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Yve="gl_FragColor = linearToOutputTexel( gl_FragColor );",Xve=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,$ve=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Zve=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Jve=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Kve=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Qve=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,e_e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,t_e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,n_e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,i_e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,r_e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,s_e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,a_e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,o_e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,u_e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,l_e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,c_e=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,d_e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,f_e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,h_e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,p_e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,m_e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,g_e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,v_e=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,__e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,x_e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,y_e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,b_e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,M_e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,S_e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,w_e=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,T_e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,E_e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,P_e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,A_e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,D_e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,R_e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,C_e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,O_e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,I_e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,L_e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,q_e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,N_e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,k_e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,F_e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,U_e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,B_e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,z_e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,H_e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,W_e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,V_e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,G_e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,j_e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Y_e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,X_e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,$_e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Z_e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,J_e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,K_e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Q_e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,e0e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,t0e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,n0e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,i0e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,r0e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,s0e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,a0e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,o0e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,u0e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,l0e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,c0e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,d0e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,f0e=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,h0e=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,p0e=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,m0e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,g0e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,v0e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,_0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,x0e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,y0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,b0e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,M0e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,S0e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,w0e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,T0e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,E0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,P0e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,A0e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,D0e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,R0e=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,C0e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,O0e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,I0e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,L0e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,q0e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,N0e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,k0e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,F0e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,U0e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B0e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,z0e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H0e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,W0e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V0e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,G0e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,j0e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Y0e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,X0e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$0e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Je={alphamap_fragment:bve,alphamap_pars_fragment:Mve,alphatest_fragment:Sve,alphatest_pars_fragment:wve,aomap_fragment:Tve,aomap_pars_fragment:Eve,begin_vertex:Pve,beginnormal_vertex:Ave,bsdfs:Dve,iridescence_fragment:Rve,bumpmap_pars_fragment:Cve,clipping_planes_fragment:Ove,clipping_planes_pars_fragment:Ive,clipping_planes_pars_vertex:Lve,clipping_planes_vertex:qve,color_fragment:Nve,color_pars_fragment:kve,color_pars_vertex:Fve,color_vertex:Uve,common:Bve,cube_uv_reflection_fragment:zve,defaultnormal_vertex:Hve,displacementmap_pars_vertex:Wve,displacementmap_vertex:Vve,emissivemap_fragment:Gve,emissivemap_pars_fragment:jve,encodings_fragment:Yve,encodings_pars_fragment:Xve,envmap_fragment:$ve,envmap_common_pars_fragment:Zve,envmap_pars_fragment:Jve,envmap_pars_vertex:Kve,envmap_physical_pars_fragment:c_e,envmap_vertex:Qve,fog_vertex:e_e,fog_pars_vertex:t_e,fog_fragment:n_e,fog_pars_fragment:i_e,gradientmap_pars_fragment:r_e,lightmap_fragment:s_e,lightmap_pars_fragment:a_e,lights_lambert_fragment:o_e,lights_lambert_pars_fragment:u_e,lights_pars_begin:l_e,lights_toon_fragment:d_e,lights_toon_pars_fragment:f_e,lights_phong_fragment:h_e,lights_phong_pars_fragment:p_e,lights_physical_fragment:m_e,lights_physical_pars_fragment:g_e,lights_fragment_begin:v_e,lights_fragment_maps:__e,lights_fragment_end:x_e,logdepthbuf_fragment:y_e,logdepthbuf_pars_fragment:b_e,logdepthbuf_pars_vertex:M_e,logdepthbuf_vertex:S_e,map_fragment:w_e,map_pars_fragment:T_e,map_particle_fragment:E_e,map_particle_pars_fragment:P_e,metalnessmap_fragment:A_e,metalnessmap_pars_fragment:D_e,morphcolor_vertex:R_e,morphnormal_vertex:C_e,morphtarget_pars_vertex:O_e,morphtarget_vertex:I_e,normal_fragment_begin:L_e,normal_fragment_maps:q_e,normal_pars_fragment:N_e,normal_pars_vertex:k_e,normal_vertex:F_e,normalmap_pars_fragment:U_e,clearcoat_normal_fragment_begin:B_e,clearcoat_normal_fragment_maps:z_e,clearcoat_pars_fragment:H_e,iridescence_pars_fragment:W_e,output_fragment:V_e,packing:G_e,premultiplied_alpha_fragment:j_e,project_vertex:Y_e,dithering_fragment:X_e,dithering_pars_fragment:$_e,roughnessmap_fragment:Z_e,roughnessmap_pars_fragment:J_e,shadowmap_pars_fragment:K_e,shadowmap_pars_vertex:Q_e,shadowmap_vertex:e0e,shadowmask_pars_fragment:t0e,skinbase_vertex:n0e,skinning_pars_vertex:i0e,skinning_vertex:r0e,skinnormal_vertex:s0e,specularmap_fragment:a0e,specularmap_pars_fragment:o0e,tonemapping_fragment:u0e,tonemapping_pars_fragment:l0e,transmission_fragment:c0e,transmission_pars_fragment:d0e,uv_pars_fragment:f0e,uv_pars_vertex:h0e,uv_vertex:p0e,worldpos_vertex:m0e,background_vert:g0e,background_frag:v0e,backgroundCube_vert:_0e,backgroundCube_frag:x0e,cube_vert:y0e,cube_frag:b0e,depth_vert:M0e,depth_frag:S0e,distanceRGBA_vert:w0e,distanceRGBA_frag:T0e,equirect_vert:E0e,equirect_frag:P0e,linedashed_vert:A0e,linedashed_frag:D0e,meshbasic_vert:R0e,meshbasic_frag:C0e,meshlambert_vert:O0e,meshlambert_frag:I0e,meshmatcap_vert:L0e,meshmatcap_frag:q0e,meshnormal_vert:N0e,meshnormal_frag:k0e,meshphong_vert:F0e,meshphong_frag:U0e,meshphysical_vert:B0e,meshphysical_frag:z0e,meshtoon_vert:H0e,meshtoon_frag:W0e,points_vert:V0e,points_frag:G0e,shadow_vert:j0e,shadow_frag:Y0e,sprite_vert:X0e,sprite_frag:$0e},we={common:{diffuse:{value:new Ae(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new et},alphaMap:{value:null},alphaMapTransform:{value:new et},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new et}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new et}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new et}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new et},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new et},normalScale:{value:new de(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new et},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new et}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new et}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new et}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new et}},sprite:{diffuse:{value:new Ae(16777215)},opacity:{value:1},center:{value:new de(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new et},alphaMap:{value:null},alphaTest:{value:0}}},Vn={basic:{uniforms:sn([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.fog]),vertexShader:Je.meshbasic_vert,fragmentShader:Je.meshbasic_frag},lambert:{uniforms:sn([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.fog,we.lights,{emissive:{value:new Ae(0)}}]),vertexShader:Je.meshlambert_vert,fragmentShader:Je.meshlambert_frag},phong:{uniforms:sn([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.fog,we.lights,{emissive:{value:new Ae(0)},specular:{value:new Ae(1118481)},shininess:{value:30}}]),vertexShader:Je.meshphong_vert,fragmentShader:Je.meshphong_frag},standard:{uniforms:sn([we.common,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.roughnessmap,we.metalnessmap,we.fog,we.lights,{emissive:{value:new Ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Je.meshphysical_vert,fragmentShader:Je.meshphysical_frag},toon:{uniforms:sn([we.common,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.gradientmap,we.fog,we.lights,{emissive:{value:new Ae(0)}}]),vertexShader:Je.meshtoon_vert,fragmentShader:Je.meshtoon_frag},matcap:{uniforms:sn([we.common,we.bumpmap,we.normalmap,we.displacementmap,we.fog,{matcap:{value:null}}]),vertexShader:Je.meshmatcap_vert,fragmentShader:Je.meshmatcap_frag},points:{uniforms:sn([we.points,we.fog]),vertexShader:Je.points_vert,fragmentShader:Je.points_frag},dashed:{uniforms:sn([we.common,we.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Je.linedashed_vert,fragmentShader:Je.linedashed_frag},depth:{uniforms:sn([we.common,we.displacementmap]),vertexShader:Je.depth_vert,fragmentShader:Je.depth_frag},normal:{uniforms:sn([we.common,we.bumpmap,we.normalmap,we.displacementmap,{opacity:{value:1}}]),vertexShader:Je.meshnormal_vert,fragmentShader:Je.meshnormal_frag},sprite:{uniforms:sn([we.sprite,we.fog]),vertexShader:Je.sprite_vert,fragmentShader:Je.sprite_frag},background:{uniforms:{uvTransform:{value:new et},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Je.background_vert,fragmentShader:Je.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Je.backgroundCube_vert,fragmentShader:Je.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Je.cube_vert,fragmentShader:Je.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Je.equirect_vert,fragmentShader:Je.equirect_frag},distanceRGBA:{uniforms:sn([we.common,we.displacementmap,{referencePosition:{value:new I},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Je.distanceRGBA_vert,fragmentShader:Je.distanceRGBA_frag},shadow:{uniforms:sn([we.lights,we.fog,{color:{value:new Ae(0)},opacity:{value:1}}]),vertexShader:Je.shadow_vert,fragmentShader:Je.shadow_frag}};Vn.physical={uniforms:sn([Vn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new et},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new et},clearcoatNormalScale:{value:new de(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new et},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new et},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new et},sheen:{value:0},sheenColor:{value:new Ae(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new et},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new et},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new et},transmissionSamplerSize:{value:new de},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new et},attenuationDistance:{value:0},attenuationColor:{value:new Ae(0)},specularColor:{value:new Ae(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new et},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new et}}]),vertexShader:Je.meshphysical_vert,fragmentShader:Je.meshphysical_frag};var Bv={r:0,b:0,g:0};function Z0e(i,e,t,n,r,s,a){let o=new Ae(0),u=s===!0?0:1,l,c,d=null,f=0,h=null;function p(g,m){let y=!1,_=m.isScene===!0?m.background:null;switch(_&&_.isTexture&&(_=(m.backgroundBlurriness>0?t:e).get(_)),_===null?v(o,u):_&&_.isColor&&(v(_,1),y=!0),i.xr.getEnvironmentBlendMode()){case"opaque":y=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,a),y=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,a),y=!0;break}(i.autoClear||y)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),_&&(_.isCubeTexture||_.mapping===No)?(c===void 0&&(c=new Ft(new fi(1,1,1),new In({name:"BackgroundCubeMaterial",uniforms:wo(Vn.backgroundCube.uniforms),vertexShader:Vn.backgroundCube.vertexShader,fragmentShader:Vn.backgroundCube.fragmentShader,side:an,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(T,P,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=_.colorSpace!==$e,(d!==_||f!==_.version||h!==i.toneMapping)&&(c.material.needsUpdate=!0,d=_,f=_.version,h=i.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(l===void 0&&(l=new Ft(new Pr(2,2),new In({name:"BackgroundMaterial",uniforms:wo(Vn.background.uniforms),vertexShader:Vn.background.vertexShader,fragmentShader:Vn.background.fragmentShader,side:Bi,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=_,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=_.colorSpace!==$e,_.matrixAutoUpdate===!0&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),(d!==_||f!==_.version||h!==i.toneMapping)&&(l.material.needsUpdate=!0,d=_,f=_.version,h=i.toneMapping),l.layers.enableAll(),g.unshift(l,l.geometry,l.material,0,0,null))}function v(g,m){g.getRGB(Bv,fz(i)),n.buffers.color.setClear(Bv.r,Bv.g,Bv.b,m,a)}return{getClearColor:function(){return o},setClearColor:function(g,m=1){o.set(g),u=m,v(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(g){u=g,v(o,u)},render:p}}function J0e(i,e,t,n){let r=i.getParameter(i.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),a=n.isWebGL2||s!==null,o={},u=g(null),l=u,c=!1;function d(G,V,J,Z,ne){let re=!1;if(a){let ce=v(Z,J,V);l!==ce&&(l=ce,h(l.object)),re=m(G,Z,J,ne),re&&y(G,Z,J,ne)}else{let ce=V.wireframe===!0;(l.geometry!==Z.id||l.program!==J.id||l.wireframe!==ce)&&(l.geometry=Z.id,l.program=J.id,l.wireframe=ce,re=!0)}ne!==null&&t.update(ne,i.ELEMENT_ARRAY_BUFFER),(re||c)&&(c=!1,C(G,V,J,Z),ne!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(ne).buffer))}function f(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}function h(G){return n.isWebGL2?i.bindVertexArray(G):s.bindVertexArrayOES(G)}function p(G){return n.isWebGL2?i.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function v(G,V,J){let Z=J.wireframe===!0,ne=o[G.id];ne===void 0&&(ne={},o[G.id]=ne);let re=ne[V.id];re===void 0&&(re={},ne[V.id]=re);let ce=re[Z];return ce===void 0&&(ce=g(f()),re[Z]=ce),ce}function g(G){let V=[],J=[],Z=[];for(let ne=0;ne<r;ne++)V[ne]=0,J[ne]=0,Z[ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:J,attributeDivisors:Z,object:G,attributes:{},index:null}}function m(G,V,J,Z){let ne=l.attributes,re=V.attributes,ce=0,Te=J.getAttributes();for(let xe in Te)if(Te[xe].location>=0){let ue=ne[xe],_e=re[xe];if(_e===void 0&&(xe==="instanceMatrix"&&G.instanceMatrix&&(_e=G.instanceMatrix),xe==="instanceColor"&&G.instanceColor&&(_e=G.instanceColor)),ue===void 0||ue.attribute!==_e||_e&&ue.data!==_e.data)return!0;ce++}return l.attributesNum!==ce||l.index!==Z}function y(G,V,J,Z){let ne={},re=V.attributes,ce=0,Te=J.getAttributes();for(let xe in Te)if(Te[xe].location>=0){let ue=re[xe];ue===void 0&&(xe==="instanceMatrix"&&G.instanceMatrix&&(ue=G.instanceMatrix),xe==="instanceColor"&&G.instanceColor&&(ue=G.instanceColor));let _e={};_e.attribute=ue,ue&&ue.data&&(_e.data=ue.data),ne[xe]=_e,ce++}l.attributes=ne,l.attributesNum=ce,l.index=Z}function _(){let G=l.newAttributes;for(let V=0,J=G.length;V<J;V++)G[V]=0}function b(G){M(G,0)}function M(G,V){let J=l.newAttributes,Z=l.enabledAttributes,ne=l.attributeDivisors;J[G]=1,Z[G]===0&&(i.enableVertexAttribArray(G),Z[G]=1),ne[G]!==V&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,V),ne[G]=V)}function T(){let G=l.newAttributes,V=l.enabledAttributes;for(let J=0,Z=V.length;J<Z;J++)V[J]!==G[J]&&(i.disableVertexAttribArray(J),V[J]=0)}function P(G,V,J,Z,ne,re){n.isWebGL2===!0&&(J===i.INT||J===i.UNSIGNED_INT)?i.vertexAttribIPointer(G,V,J,ne,re):i.vertexAttribPointer(G,V,J,Z,ne,re)}function C(G,V,J,Z){if(n.isWebGL2===!1&&(G.isInstancedMesh||Z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();let ne=Z.attributes,re=J.getAttributes(),ce=V.defaultAttributeValues;for(let Te in re){let xe=re[Te];if(xe.location>=0){let K=ne[Te];if(K===void 0&&(Te==="instanceMatrix"&&G.instanceMatrix&&(K=G.instanceMatrix),Te==="instanceColor"&&G.instanceColor&&(K=G.instanceColor)),K!==void 0){let ue=K.normalized,_e=K.itemSize,be=t.get(K);if(be===void 0)continue;let B=be.buffer,De=be.type,Se=be.bytesPerElement;if(K.isInterleavedBufferAttribute){let he=K.data,Ce=he.stride,fe=K.offset;if(he.isInstancedInterleavedBuffer){for(let L=0;L<xe.locationSize;L++)M(xe.location+L,he.meshPerAttribute);G.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let L=0;L<xe.locationSize;L++)b(xe.location+L);i.bindBuffer(i.ARRAY_BUFFER,B);for(let L=0;L<xe.locationSize;L++)P(xe.location+L,_e/xe.locationSize,De,ue,Ce*Se,(fe+_e/xe.locationSize*L)*Se)}else{if(K.isInstancedBufferAttribute){for(let he=0;he<xe.locationSize;he++)M(xe.location+he,K.meshPerAttribute);G.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let he=0;he<xe.locationSize;he++)b(xe.location+he);i.bindBuffer(i.ARRAY_BUFFER,B);for(let he=0;he<xe.locationSize;he++)P(xe.location+he,_e/xe.locationSize,De,ue,_e*Se,_e/xe.locationSize*he*Se)}}else if(ce!==void 0){let ue=ce[Te];if(ue!==void 0)switch(ue.length){case 2:i.vertexAttrib2fv(xe.location,ue);break;case 3:i.vertexAttrib3fv(xe.location,ue);break;case 4:i.vertexAttrib4fv(xe.location,ue);break;default:i.vertexAttrib1fv(xe.location,ue)}}}}T()}function S(){j();for(let G in o){let V=o[G];for(let J in V){let Z=V[J];for(let ne in Z)p(Z[ne].object),delete Z[ne];delete V[J]}delete o[G]}}function A(G){if(o[G.id]===void 0)return;let V=o[G.id];for(let J in V){let Z=V[J];for(let ne in Z)p(Z[ne].object),delete Z[ne];delete V[J]}delete o[G.id]}function z(G){for(let V in o){let J=o[V];if(J[G.id]===void 0)continue;let Z=J[G.id];for(let ne in Z)p(Z[ne].object),delete Z[ne];delete J[G.id]}}function j(){W(),c=!0,l!==u&&(l=u,h(l.object))}function W(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:d,reset:j,resetDefaultState:W,dispose:S,releaseStatesOfGeometry:A,releaseStatesOfProgram:z,initAttributes:_,enableAttribute:b,disableUnusedAttributes:T}}function K0e(i,e,t,n){let r=n.isWebGL2,s;function a(l){s=l}function o(l,c){i.drawArrays(s,l,c),t.update(c,s,1)}function u(l,c,d){if(d===0)return;let f,h;if(r)f=i,h="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[h](s,l,c,d),t.update(c,s,d)}this.setMode=a,this.render=o,this.renderInstances=u}function Q0e(i,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){let P=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(P){if(P==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext!="undefined"&&i.constructor.name==="WebGL2RenderingContext",o=t.precision!==void 0?t.precision:"highp",u=s(o);u!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",u,"instead."),o=u);let l=a||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,d=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),f=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=i.getParameter(i.MAX_TEXTURE_SIZE),p=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),v=i.getParameter(i.MAX_VERTEX_ATTRIBS),g=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),m=i.getParameter(i.MAX_VARYING_VECTORS),y=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),_=f>0,b=a||e.has("OES_texture_float"),M=_&&b,T=a?i.getParameter(i.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:g,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:M,maxSamples:T}}function exe(i){let e=this,t=null,n=0,r=!1,s=!1,a=new ui,o=new et,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){let h=d.length!==0||f||n!==0||r;return r=f,n=d.length,h},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=c(d,f,0)},this.setState=function(d,f,h){let p=d.clippingPlanes,v=d.clipIntersection,g=d.clipShadows,m=i.get(d);if(!r||p===null||p.length===0||s&&!g)s?c(null):l();else{let y=s?0:n,_=y*4,b=m.clippingState||null;u.value=b,b=c(p,f,_,h);for(let M=0;M!==_;++M)b[M]=t[M];m.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}};function l(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(d,f,h,p){let v=d!==null?d.length:0,g=null;if(v!==0){if(g=u.value,p!==!0||g===null){let m=h+v*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(g===null||g.length<m)&&(g=new Float32Array(m));for(let _=0,b=h;_!==v;++_,b+=4)a.copy(d[_]).applyMatrix4(y,o),a.normal.toArray(g,b),g[b+3]=a.constant}u.value=g,u.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,g}}function txe(i){let e=new WeakMap;function t(a,o){return o===Rl?a.mapping=Sr:o===Cl&&(a.mapping=wr),a}function n(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){let o=a.mapping;if(o===Rl||o===Cl)if(e.has(a)){let u=e.get(a).texture;return t(u,a.mapping)}else{let u=a.image;if(u&&u.height>0){let l=new y_(u.height/2);return l.fromEquirectangularTexture(i,a),e.set(a,l),a.addEventListener("dispose",r),t(l.texture,a.mapping)}else return null}}return a}function r(a){let o=a.target;o.removeEventListener("dispose",r);let u=e.get(o);u!==void 0&&(e.delete(o),u.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}var Po=class extends To{constructor(e=-1,t=1,n=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=n-e,a=n+e,o=r+t,u=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,a=s+l*this.view.width,o-=c*this.view.offsetY,u=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},go=4,n3=[.125,.215,.35,.446,.526,.582],ys=20,gM=new Po,i3=new Ae,vM=null,_s=(1+Math.sqrt(5))/2,oo=1/_s,r3=[new I(1,1,1),new I(-1,1,1),new I(1,1,-1),new I(-1,1,-1),new I(0,_s,oo),new I(0,_s,-oo),new I(oo,0,_s),new I(-oo,0,_s),new I(_s,oo,0),new I(-_s,oo,0)],Wl=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){vM=this._renderer.getRenderTarget(),this._setSize(256);let s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=o3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=a3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(vM),e.scissorTest=!1,zv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Sr||e.mapping===wr?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),vM=this._renderer.getRenderTarget();let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Lt,minFilter:Lt,generateMipmaps:!1,type:yo,format:_n,colorSpace:Gn,depthBuffer:!1},r=s3(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=s3(e,t,n);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=nxe(s)),this._blurMaterial=ixe(s,e,t)}return r}_compileMaterial(e){let t=new Ft(this._lodPlanes[0],e);this._renderer.compile(t,gM)}_sceneToCubeUV(e,t,n,r){let o=new kt(90,1,t,n),u=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,f=c.toneMapping;c.getClearColor(i3),c.toneMapping=ci,c.autoClear=!1;let h=new di({name:"PMREM.Background",side:an,depthWrite:!1,depthTest:!1}),p=new Ft(new fi,h),v=!1,g=e.background;g?g.isColor&&(h.color.copy(g),e.background=null,v=!0):(h.color.copy(i3),v=!0);for(let m=0;m<6;m++){let y=m%3;y===0?(o.up.set(0,u[m],0),o.lookAt(l[m],0,0)):y===1?(o.up.set(0,0,u[m]),o.lookAt(0,l[m],0)):(o.up.set(0,u[m],0),o.lookAt(0,0,l[m]));let _=this._cubeSize;zv(r,y*_,m>2?_:0,_,_),c.setRenderTarget(r),v&&c.render(p,o),c.render(e,o)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=f,c.autoClear=d,e.background=g}_textureToCubeUV(e,t){let n=this._renderer,r=e.mapping===Sr||e.mapping===wr;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=o3()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=a3());let s=r?this._cubemapMaterial:this._equirectMaterial,a=new Ft(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;let u=this._cubeSize;zv(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(a,gM)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=r3[(r-1)%r3.length];this._blur(e,r-1,r,s,a)}t.autoClear=n}_blur(e,t,n,r,s){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,o){let u=this._renderer,l=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let c=3,d=new Ft(this._lodPlanes[r],l),f=l.uniforms,h=this._sizeLods[n]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*ys-1),v=s/p,g=isFinite(s)?1+Math.floor(c*v):ys;g>ys&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${ys}`);let m=[],y=0;for(let P=0;P<ys;++P){let C=P/v,S=Math.exp(-C*C/2);m.push(S),P===0?y+=S:P<g&&(y+=2*S)}for(let P=0;P<m.length;P++)m[P]=m[P]/y;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=m,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);let{_lodMax:_}=this;f.dTheta.value=p,f.mipInt.value=_-n;let b=this._sizeLods[r],M=3*b*(r>_-go?r-_+go:0),T=4*(this._cubeSize-b);zv(t,M,T,3*b,2*b),u.setRenderTarget(t),u.render(d,gM)}};function nxe(i){let e=[],t=[],n=[],r=i,s=i-go+1+n3.length;for(let a=0;a<s;a++){let o=Math.pow(2,r);t.push(o);let u=1/o;a>i-go?u=n3[a-i+go-1]:a===0&&(u=0),n.push(u);let l=1/(o-2),c=-l,d=1+l,f=[c,c,d,c,d,d,c,c,d,d,c,d],h=6,p=6,v=3,g=2,m=1,y=new Float32Array(v*p*h),_=new Float32Array(g*p*h),b=new Float32Array(m*p*h);for(let T=0;T<h;T++){let P=T%3*2/3-1,C=T>2?0:-1,S=[P,C,0,P+2/3,C,0,P+2/3,C+1,0,P,C,0,P+2/3,C+1,0,P,C+1,0];y.set(S,v*p*T),_.set(f,g*p*T);let A=[T,T,T,T,T,T];b.set(A,m*p*T)}let M=new Ze;M.setAttribute("position",new _t(y,v)),M.setAttribute("uv",new _t(_,g)),M.setAttribute("faceIndex",new _t(b,m)),e.push(M),r>go&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function s3(i,e,t){let n=new bn(i,e,t);return n.texture.mapping=No,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function zv(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function ixe(i,e,t){let n=new Float32Array(ys),r=new I(0,1,0);return new In({name:"SphericalGaussianBlur",defines:{n:ys,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:$w(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fi,depthTest:!1,depthWrite:!1})}function a3(){return new In({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:$w(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fi,depthTest:!1,depthWrite:!1})}function o3(){return new In({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:$w(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fi,depthTest:!1,depthWrite:!1})}function $w(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function rxe(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){let u=o.mapping,l=u===Rl||u===Cl,c=u===Sr||u===wr;if(l||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=e.get(o);return t===null&&(t=new Wl(i)),d=l?t.fromEquirectangular(o,d):t.fromCubemap(o,d),e.set(o,d),d.texture}else{if(e.has(o))return e.get(o).texture;{let d=o.image;if(l&&d&&d.height>0||c&&d&&r(d)){t===null&&(t=new Wl(i));let f=l?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,f),o.addEventListener("dispose",s),f.texture}else return null}}}return o}function r(o){let u=0,l=6;for(let c=0;c<l;c++)o[c]!==void 0&&u++;return u===l}function s(o){let u=o.target;u.removeEventListener("dispose",s);let l=e.get(u);l!==void 0&&(e.delete(u),l.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function sxe(i){let e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){let r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function axe(i,e,t,n){let r={},s=new WeakMap;function a(d){let f=d.target;f.index!==null&&e.remove(f.index);for(let p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",a),delete r[f.id];let h=s.get(f);h&&(e.remove(h),s.delete(f)),n.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,t.memory.geometries++),f}function u(d){let f=d.attributes;for(let p in f)e.update(f[p],i.ARRAY_BUFFER);let h=d.morphAttributes;for(let p in h){let v=h[p];for(let g=0,m=v.length;g<m;g++)e.update(v[g],i.ARRAY_BUFFER)}}function l(d){let f=[],h=d.index,p=d.attributes.position,v=0;if(h!==null){let y=h.array;v=h.version;for(let _=0,b=y.length;_<b;_+=3){let M=y[_+0],T=y[_+1],P=y[_+2];f.push(M,T,T,P,P,M)}}else{let y=p.array;v=p.version;for(let _=0,b=y.length/3-1;_<b;_+=3){let M=_+0,T=_+1,P=_+2;f.push(M,T,T,P,P,M)}}let g=new(cz(f)?Hl:zl)(f,1);g.version=v;let m=s.get(d);m&&e.remove(m),s.set(d,g)}function c(d){let f=s.get(d);if(f){let h=d.index;h!==null&&f.version<h.version&&l(d)}else l(d);return s.get(d)}return{get:o,update:u,getWireframeAttribute:c}}function oxe(i,e,t,n){let r=n.isWebGL2,s;function a(f){s=f}let o,u;function l(f){o=f.type,u=f.bytesPerElement}function c(f,h){i.drawElements(s,h,o,f*u),t.update(h,s,1)}function d(f,h,p){if(p===0)return;let v,g;if(r)v=i,g="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[g](s,h,o,f*u,p),t.update(h,s,p)}this.setMode=a,this.setIndex=l,this.render=c,this.renderInstances=d}function uxe(i){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(s/3);break;case i.LINES:t.lines+=o*(s/2);break;case i.LINE_STRIP:t.lines+=o*(s-1);break;case i.LINE_LOOP:t.lines+=o*s;break;case i.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function lxe(i,e){return i[0]-e[0]}function cxe(i,e){return Math.abs(e[1])-Math.abs(i[1])}function dxe(i,e,t){let n={},r=new Float32Array(8),s=new WeakMap,a=new gt,o=[];for(let l=0;l<8;l++)o[l]=[l,0];function u(l,c,d){let f=l.morphTargetInfluences;if(e.isWebGL2===!0){let h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=h!==void 0?h.length:0,v=s.get(c);if(v===void 0||v.count!==p){let G=function(){j.dispose(),s.delete(c),c.removeEventListener("dispose",G)};v!==void 0&&v.texture.dispose();let y=c.morphAttributes.position!==void 0,_=c.morphAttributes.normal!==void 0,b=c.morphAttributes.color!==void 0,M=c.morphAttributes.position||[],T=c.morphAttributes.normal||[],P=c.morphAttributes.color||[],C=0;y===!0&&(C=1),_===!0&&(C=2),b===!0&&(C=3);let S=c.attributes.position.count*C,A=1;S>e.maxTextureSize&&(A=Math.ceil(S/e.maxTextureSize),S=e.maxTextureSize);let z=new Float32Array(S*A*4*p),j=new Mo(z,S,A,p);j.type=Ni,j.needsUpdate=!0;let W=C*4;for(let V=0;V<p;V++){let J=M[V],Z=T[V],ne=P[V],re=S*A*4*V;for(let ce=0;ce<J.count;ce++){let Te=ce*W;y===!0&&(a.fromBufferAttribute(J,ce),z[re+Te+0]=a.x,z[re+Te+1]=a.y,z[re+Te+2]=a.z,z[re+Te+3]=0),_===!0&&(a.fromBufferAttribute(Z,ce),z[re+Te+4]=a.x,z[re+Te+5]=a.y,z[re+Te+6]=a.z,z[re+Te+7]=0),b===!0&&(a.fromBufferAttribute(ne,ce),z[re+Te+8]=a.x,z[re+Te+9]=a.y,z[re+Te+10]=a.z,z[re+Te+11]=ne.itemSize===4?a.w:1)}}v={count:p,texture:j,size:new de(S,A)},s.set(c,v),c.addEventListener("dispose",G)}let g=0;for(let y=0;y<f.length;y++)g+=f[y];let m=c.morphTargetsRelative?1:1-g;d.getUniforms().setValue(i,"morphTargetBaseInfluence",m),d.getUniforms().setValue(i,"morphTargetInfluences",f),d.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),d.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}else{let h=f===void 0?0:f.length,p=n[c.id];if(p===void 0||p.length!==h){p=[];for(let _=0;_<h;_++)p[_]=[_,0];n[c.id]=p}for(let _=0;_<h;_++){let b=p[_];b[0]=_,b[1]=f[_]}p.sort(cxe);for(let _=0;_<8;_++)_<h&&p[_][1]?(o[_][0]=p[_][0],o[_][1]=p[_][1]):(o[_][0]=Number.MAX_SAFE_INTEGER,o[_][1]=0);o.sort(lxe);let v=c.morphAttributes.position,g=c.morphAttributes.normal,m=0;for(let _=0;_<8;_++){let b=o[_],M=b[0],T=b[1];M!==Number.MAX_SAFE_INTEGER&&T?(v&&c.getAttribute("morphTarget"+_)!==v[M]&&c.setAttribute("morphTarget"+_,v[M]),g&&c.getAttribute("morphNormal"+_)!==g[M]&&c.setAttribute("morphNormal"+_,g[M]),r[_]=T,m+=T):(v&&c.hasAttribute("morphTarget"+_)===!0&&c.deleteAttribute("morphTarget"+_),g&&c.hasAttribute("morphNormal"+_)===!0&&c.deleteAttribute("morphNormal"+_),r[_]=0)}let y=c.morphTargetsRelative?1:1-m;d.getUniforms().setValue(i,"morphTargetBaseInfluence",y),d.getUniforms().setValue(i,"morphTargetInfluences",r)}}return{update:u}}function fxe(i,e,t,n){let r=new WeakMap;function s(u){let l=n.render.frame,c=u.geometry,d=e.get(u,c);return r.get(d)!==l&&(e.update(d),r.set(d,l)),u.isInstancedMesh&&(u.hasEventListener("dispose",o)===!1&&u.addEventListener("dispose",o),t.update(u.instanceMatrix,i.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,i.ARRAY_BUFFER)),d}function a(){r=new WeakMap}function o(u){let l=u.target;l.removeEventListener("dispose",o),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:a}}var mz=new Tt,gz=new Mo,vz=new Bl,_z=new Rs,u3=[],l3=[],c3=new Float32Array(16),d3=new Float32Array(9),f3=new Float32Array(4);function ko(i,e,t){let n=i[0];if(n<=0||n>0)return i;let r=e*t,s=u3[r];if(s===void 0&&(s=new Float32Array(r),u3[r]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(s,o)}return s}function Ut(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Bt(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function h0(i,e){let t=l3[e];t===void 0&&(t=new Int32Array(e),l3[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function hxe(i,e){let t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function pxe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ut(t,e))return;i.uniform2fv(this.addr,e),Bt(t,e)}}function mxe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ut(t,e))return;i.uniform3fv(this.addr,e),Bt(t,e)}}function gxe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ut(t,e))return;i.uniform4fv(this.addr,e),Bt(t,e)}}function vxe(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Ut(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Bt(t,e)}else{if(Ut(t,n))return;f3.set(n),i.uniformMatrix2fv(this.addr,!1,f3),Bt(t,n)}}function _xe(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Ut(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Bt(t,e)}else{if(Ut(t,n))return;d3.set(n),i.uniformMatrix3fv(this.addr,!1,d3),Bt(t,n)}}function xxe(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Ut(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Bt(t,e)}else{if(Ut(t,n))return;c3.set(n),i.uniformMatrix4fv(this.addr,!1,c3),Bt(t,n)}}function yxe(i,e){let t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function bxe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ut(t,e))return;i.uniform2iv(this.addr,e),Bt(t,e)}}function Mxe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ut(t,e))return;i.uniform3iv(this.addr,e),Bt(t,e)}}function Sxe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ut(t,e))return;i.uniform4iv(this.addr,e),Bt(t,e)}}function wxe(i,e){let t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function Txe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ut(t,e))return;i.uniform2uiv(this.addr,e),Bt(t,e)}}function Exe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ut(t,e))return;i.uniform3uiv(this.addr,e),Bt(t,e)}}function Pxe(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ut(t,e))return;i.uniform4uiv(this.addr,e),Bt(t,e)}}function Axe(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||mz,r)}function Dxe(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||vz,r)}function Rxe(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||_z,r)}function Cxe(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||gz,r)}function Oxe(i){switch(i){case 5126:return hxe;case 35664:return pxe;case 35665:return mxe;case 35666:return gxe;case 35674:return vxe;case 35675:return _xe;case 35676:return xxe;case 5124:case 35670:return yxe;case 35667:case 35671:return bxe;case 35668:case 35672:return Mxe;case 35669:case 35673:return Sxe;case 5125:return wxe;case 36294:return Txe;case 36295:return Exe;case 36296:return Pxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Axe;case 35679:case 36299:case 36307:return Dxe;case 35680:case 36300:case 36308:case 36293:return Rxe;case 36289:case 36303:case 36311:case 36292:return Cxe}}function Ixe(i,e){i.uniform1fv(this.addr,e)}function Lxe(i,e){let t=ko(e,this.size,2);i.uniform2fv(this.addr,t)}function qxe(i,e){let t=ko(e,this.size,3);i.uniform3fv(this.addr,t)}function Nxe(i,e){let t=ko(e,this.size,4);i.uniform4fv(this.addr,t)}function kxe(i,e){let t=ko(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Fxe(i,e){let t=ko(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Uxe(i,e){let t=ko(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Bxe(i,e){i.uniform1iv(this.addr,e)}function zxe(i,e){i.uniform2iv(this.addr,e)}function Hxe(i,e){i.uniform3iv(this.addr,e)}function Wxe(i,e){i.uniform4iv(this.addr,e)}function Vxe(i,e){i.uniform1uiv(this.addr,e)}function Gxe(i,e){i.uniform2uiv(this.addr,e)}function jxe(i,e){i.uniform3uiv(this.addr,e)}function Yxe(i,e){i.uniform4uiv(this.addr,e)}function Xxe(i,e,t){let n=this.cache,r=e.length,s=h0(t,r);Ut(n,s)||(i.uniform1iv(this.addr,s),Bt(n,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||mz,s[a])}function $xe(i,e,t){let n=this.cache,r=e.length,s=h0(t,r);Ut(n,s)||(i.uniform1iv(this.addr,s),Bt(n,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||vz,s[a])}function Zxe(i,e,t){let n=this.cache,r=e.length,s=h0(t,r);Ut(n,s)||(i.uniform1iv(this.addr,s),Bt(n,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||_z,s[a])}function Jxe(i,e,t){let n=this.cache,r=e.length,s=h0(t,r);Ut(n,s)||(i.uniform1iv(this.addr,s),Bt(n,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||gz,s[a])}function Kxe(i){switch(i){case 5126:return Ixe;case 35664:return Lxe;case 35665:return qxe;case 35666:return Nxe;case 35674:return kxe;case 35675:return Fxe;case 35676:return Uxe;case 5124:case 35670:return Bxe;case 35667:case 35671:return zxe;case 35668:case 35672:return Hxe;case 35669:case 35673:return Wxe;case 5125:return Vxe;case 36294:return Gxe;case 36295:return jxe;case 36296:return Yxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Xxe;case 35679:case 36299:case 36307:return $xe;case 35680:case 36300:case 36308:case 36293:return Zxe;case 36289:case 36303:case 36311:case 36292:return Jxe}}var gS=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Oxe(t.type)}},vS=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=Kxe(t.type)}},_S=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let s=0,a=r.length;s!==a;++s){let o=r[s];o.setValue(e,t[o.id],n)}}},_M=/(\w+)(\])?(\[|\.)?/g;function h3(i,e){i.seq.push(e),i.map[e.id]=e}function Qxe(i,e,t){let n=i.name,r=n.length;for(_M.lastIndex=0;;){let s=_M.exec(n),a=_M.lastIndex,o=s[1],u=s[2]==="]",l=s[3];if(u&&(o=o|0),l===void 0||l==="["&&a+2===r){h3(t,l===void 0?new gS(o,i,e):new vS(o,i,e));break}else{let d=t.map[o];d===void 0&&(d=new _S(o),h3(t,d)),t=d}}}var xo=class{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);Qxe(s,a,this)}}setValue(e,t,n,r){let s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,a=t.length;s!==a;++s){let o=t[s],u=n[o.id];u.needsUpdate!==!1&&o.setValue(e,u.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,s=e.length;r!==s;++r){let a=e[r];a.id in t&&n.push(a)}return n}};function p3(i,e,t){let n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}var eye=0;function tye(i,e){let t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){let o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}function nye(i){switch(i){case Gn:return["Linear","( value )"];case $e:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),["Linear","( value )"]}}function m3(i,e,t){let n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+tye(i.getShaderSource(e),a)}else return r}function iye(i,e){let t=nye(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function rye(i,e){let t;switch(e){case qB:t="Linear";break;case NB:t="Reinhard";break;case kB:t="OptimizedCineon";break;case FB:t="ACESFilmic";break;case UB:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function sye(i){return[i.extensionDerivatives||!!i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Sl).join(`
`)}function aye(i){let e=[];for(let t in i){let n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function oye(i,e){let t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){let s=i.getActiveAttrib(e,r),a=s.name,o=1;s.type===i.FLOAT_MAT2&&(o=2),s.type===i.FLOAT_MAT3&&(o=3),s.type===i.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function Sl(i){return i!==""}function g3(i,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function v3(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var uye=/^[ \t]*#include +<([\w\d./]+)>/gm;function xS(i){return i.replace(uye,lye)}function lye(i,e){let t=Je[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return xS(t)}var cye=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _3(i){return i.replace(cye,dye)}function dye(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function x3(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function fye(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Bw?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===hB?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===oi&&(e="SHADOWMAP_TYPE_VSM"),e}function hye(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Sr:case wr:e="ENVMAP_TYPE_CUBE";break;case No:e="ENVMAP_TYPE_CUBE_UV";break}return e}function pye(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case wr:e="ENVMAP_MODE_REFRACTION";break}return e}function mye(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case dc:e="ENVMAP_BLENDING_MULTIPLY";break;case IB:e="ENVMAP_BLENDING_MIX";break;case LB:e="ENVMAP_BLENDING_ADD";break}return e}function gye(i){let e=i.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function vye(i,e,t,n){let r=i.getContext(),s=t.defines,a=t.vertexShader,o=t.fragmentShader,u=fye(t),l=hye(t),c=pye(t),d=mye(t),f=gye(t),h=t.isWebGL2?"":sye(t),p=aye(s),v=r.createProgram(),g,m,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=[p].filter(Sl).join(`
`),g.length>0&&(g+=`
`),m=[h,p].filter(Sl).join(`
`),m.length>0&&(m+=`
`)):(g=[x3(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sl).join(`
`),m=[h,x3(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ci?"#define TONE_MAPPING":"",t.toneMapping!==ci?Je.tonemapping_pars_fragment:"",t.toneMapping!==ci?rye("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Je.encodings_pars_fragment,iye("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Sl).join(`
`)),a=xS(a),a=g3(a,t),a=v3(a,t),o=xS(o),o=g3(o,t),o=v3(o,t),a=_3(a),o=_3(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",t.glslVersion===rS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===rS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);let _=y+g+a,b=y+m+o,M=p3(r,r.VERTEX_SHADER,_),T=p3(r,r.FRAGMENT_SHADER,b);if(r.attachShader(v,M),r.attachShader(v,T),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),i.debug.checkShaderErrors){let S=r.getProgramInfoLog(v).trim(),A=r.getShaderInfoLog(M).trim(),z=r.getShaderInfoLog(T).trim(),j=!0,W=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(j=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,v,M,T);else{let G=m3(r,M,"vertex"),V=m3(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Program Info Log: `+S+`
`+G+`
`+V)}else S!==""?console.warn("THREE.WebGLProgram: Program Info Log:",S):(A===""||z==="")&&(W=!1);W&&(this.diagnostics={runnable:j,programLog:S,vertexShader:{log:A,prefix:g},fragmentShader:{log:z,prefix:m}})}r.deleteShader(M),r.deleteShader(T);let P;this.getUniforms=function(){return P===void 0&&(P=new xo(r,v)),P};let C;return this.getAttributes=function(){return C===void 0&&(C=oye(r,v)),C},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=eye++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=T,this}var _ye=0,yS=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return n===void 0&&(n=new bS(e),t.set(e,n)),n}},bS=class{constructor(e){this.id=_ye++,this.code=e,this.usedTimes=0}};function xye(i,e,t,n,r,s,a){let o=new So,u=new yS,l=[],c=r.isWebGL2,d=r.logarithmicDepthBuffer,f=r.vertexTextures,h=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(S){return S===1?"uv1":S===2?"uv2":S===3?"uv3":"uv"}function g(S,A,z,j,W){let G=j.fog,V=W.geometry,J=S.isMeshStandardMaterial?j.environment:null,Z=(S.isMeshStandardMaterial?t:e).get(S.envMap||J),ne=!!Z&&Z.mapping===No?Z.image.height:null,re=p[S.type];S.precision!==null&&(h=r.getMaxPrecision(S.precision),h!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",h,"instead."));let ce=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,Te=ce!==void 0?ce.length:0,xe=0;V.morphAttributes.position!==void 0&&(xe=1),V.morphAttributes.normal!==void 0&&(xe=2),V.morphAttributes.color!==void 0&&(xe=3);let K,ue,_e,be;if(re){let bt=Vn[re];K=bt.vertexShader,ue=bt.fragmentShader}else K=S.vertexShader,ue=S.fragmentShader,u.update(S),_e=u.getVertexShaderID(S),be=u.getFragmentShaderID(S);let B=i.getRenderTarget(),De=W.isInstancedMesh===!0,Se=!!S.map,he=!!S.matcap,Ce=!!Z,fe=!!S.aoMap,L=!!S.lightMap,N=!!S.bumpMap,Q=!!S.normalMap,$=!!S.displacementMap,pe=!!S.emissiveMap,ye=!!S.metalnessMap,Ee=!!S.roughnessMap,ze=S.clearcoat>0,Xe=S.iridescence>0,q=S.sheen>0,D=S.transmission>0,te=ze&&!!S.clearcoatMap,me=ze&&!!S.clearcoatNormalMap,ve=ze&&!!S.clearcoatRoughnessMap,Pe=Xe&&!!S.iridescenceMap,Ve=Xe&&!!S.iridescenceThicknessMap,Oe=q&&!!S.sheenColorMap,oe=q&&!!S.sheenRoughnessMap,Ne=!!S.specularMap,Ue=!!S.specularColorMap,He=!!S.specularIntensityMap,Ie=D&&!!S.transmissionMap,Fe=D&&!!S.thicknessMap,at=!!S.gradientMap,xt=!!S.alphaMap,At=S.alphaTest>0,H=!!S.extensions,se=!!V.attributes.uv1,ge=!!V.attributes.uv2,Re=!!V.attributes.uv3;return{isWebGL2:c,shaderID:re,shaderName:S.type,vertexShader:K,fragmentShader:ue,defines:S.defines,customVertexShaderID:_e,customFragmentShaderID:be,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:h,instancing:De,instancingColor:De&&W.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:B===null?i.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:Gn,map:Se,matcap:he,envMap:Ce,envMapMode:Ce&&Z.mapping,envMapCubeUVHeight:ne,aoMap:fe,lightMap:L,bumpMap:N,normalMap:Q,displacementMap:f&&$,emissiveMap:pe,normalMapObjectSpace:Q&&S.normalMapType===az,normalMapTangentSpace:Q&&S.normalMapType===Ir,metalnessMap:ye,roughnessMap:Ee,clearcoat:ze,clearcoatMap:te,clearcoatNormalMap:me,clearcoatRoughnessMap:ve,iridescence:Xe,iridescenceMap:Pe,iridescenceThicknessMap:Ve,sheen:q,sheenColorMap:Oe,sheenRoughnessMap:oe,specularMap:Ne,specularColorMap:Ue,specularIntensityMap:He,transmission:D,transmissionMap:Ie,thicknessMap:Fe,gradientMap:at,opaque:S.transparent===!1&&S.blending===ws,alphaMap:xt,alphaTest:At,combine:S.combine,mapUv:Se&&v(S.map.channel),aoMapUv:fe&&v(S.aoMap.channel),lightMapUv:L&&v(S.lightMap.channel),bumpMapUv:N&&v(S.bumpMap.channel),normalMapUv:Q&&v(S.normalMap.channel),displacementMapUv:$&&v(S.displacementMap.channel),emissiveMapUv:pe&&v(S.emissiveMap.channel),metalnessMapUv:ye&&v(S.metalnessMap.channel),roughnessMapUv:Ee&&v(S.roughnessMap.channel),clearcoatMapUv:te&&v(S.clearcoatMap.channel),clearcoatNormalMapUv:me&&v(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ve&&v(S.clearcoatRoughnessMap.channel),iridescenceMapUv:Pe&&v(S.iridescenceMap.channel),iridescenceThicknessMapUv:Ve&&v(S.iridescenceThicknessMap.channel),sheenColorMapUv:Oe&&v(S.sheenColorMap.channel),sheenRoughnessMapUv:oe&&v(S.sheenRoughnessMap.channel),specularMapUv:Ne&&v(S.specularMap.channel),specularColorMapUv:Ue&&v(S.specularColorMap.channel),specularIntensityMapUv:He&&v(S.specularIntensityMap.channel),transmissionMapUv:Ie&&v(S.transmissionMap.channel),thicknessMapUv:Fe&&v(S.thicknessMap.channel),alphaMapUv:xt&&v(S.alphaMap.channel),vertexTangents:Q&&!!V.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,vertexUv1s:se,vertexUv2s:ge,vertexUv3s:Re,pointsUvs:W.isPoints===!0&&!!V.attributes.uv&&(Se||xt),fog:!!G,useFog:S.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:S.flatShading===!0,sizeAttenuation:S.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:W.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:Te,morphTextureStride:xe,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:S.dithering,shadowMapEnabled:i.shadowMap.enabled&&z.length>0,shadowMapType:i.shadowMap.type,toneMapping:S.toneMapped?i.toneMapping:ci,useLegacyLights:i.useLegacyLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===li,flipSided:S.side===an,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionDerivatives:H&&S.extensions.derivatives===!0,extensionFragDepth:H&&S.extensions.fragDepth===!0,extensionDrawBuffers:H&&S.extensions.drawBuffers===!0,extensionShaderTextureLOD:H&&S.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function m(S){let A=[];if(S.shaderID?A.push(S.shaderID):(A.push(S.customVertexShaderID),A.push(S.customFragmentShaderID)),S.defines!==void 0)for(let z in S.defines)A.push(z),A.push(S.defines[z]);return S.isRawShaderMaterial===!1&&(y(A,S),_(A,S),A.push(i.outputColorSpace)),A.push(S.customProgramCacheKey),A.join()}function y(S,A){S.push(A.precision),S.push(A.outputColorSpace),S.push(A.envMapMode),S.push(A.envMapCubeUVHeight),S.push(A.mapUv),S.push(A.alphaMapUv),S.push(A.lightMapUv),S.push(A.aoMapUv),S.push(A.bumpMapUv),S.push(A.normalMapUv),S.push(A.displacementMapUv),S.push(A.emissiveMapUv),S.push(A.metalnessMapUv),S.push(A.roughnessMapUv),S.push(A.clearcoatMapUv),S.push(A.clearcoatNormalMapUv),S.push(A.clearcoatRoughnessMapUv),S.push(A.iridescenceMapUv),S.push(A.iridescenceThicknessMapUv),S.push(A.sheenColorMapUv),S.push(A.sheenRoughnessMapUv),S.push(A.specularMapUv),S.push(A.specularColorMapUv),S.push(A.specularIntensityMapUv),S.push(A.transmissionMapUv),S.push(A.thicknessMapUv),S.push(A.combine),S.push(A.fogExp2),S.push(A.sizeAttenuation),S.push(A.morphTargetsCount),S.push(A.morphAttributeCount),S.push(A.numDirLights),S.push(A.numPointLights),S.push(A.numSpotLights),S.push(A.numSpotLightMaps),S.push(A.numHemiLights),S.push(A.numRectAreaLights),S.push(A.numDirLightShadows),S.push(A.numPointLightShadows),S.push(A.numSpotLightShadows),S.push(A.numSpotLightShadowsWithMaps),S.push(A.shadowMapType),S.push(A.toneMapping),S.push(A.numClippingPlanes),S.push(A.numClipIntersection),S.push(A.depthPacking)}function _(S,A){o.disableAll(),A.isWebGL2&&o.enable(0),A.supportsVertexTextures&&o.enable(1),A.instancing&&o.enable(2),A.instancingColor&&o.enable(3),A.matcap&&o.enable(4),A.envMap&&o.enable(5),A.normalMapObjectSpace&&o.enable(6),A.normalMapTangentSpace&&o.enable(7),A.clearcoat&&o.enable(8),A.iridescence&&o.enable(9),A.alphaTest&&o.enable(10),A.vertexColors&&o.enable(11),A.vertexAlphas&&o.enable(12),A.vertexUv1s&&o.enable(13),A.vertexUv2s&&o.enable(14),A.vertexUv3s&&o.enable(15),A.vertexTangents&&o.enable(16),S.push(o.mask),o.disableAll(),A.fog&&o.enable(0),A.useFog&&o.enable(1),A.flatShading&&o.enable(2),A.logarithmicDepthBuffer&&o.enable(3),A.skinning&&o.enable(4),A.morphTargets&&o.enable(5),A.morphNormals&&o.enable(6),A.morphColors&&o.enable(7),A.premultipliedAlpha&&o.enable(8),A.shadowMapEnabled&&o.enable(9),A.useLegacyLights&&o.enable(10),A.doubleSided&&o.enable(11),A.flipSided&&o.enable(12),A.useDepthPacking&&o.enable(13),A.dithering&&o.enable(14),A.transmission&&o.enable(15),A.sheen&&o.enable(16),A.opaque&&o.enable(17),A.pointsUvs&&o.enable(18),S.push(o.mask)}function b(S){let A=p[S.type],z;if(A){let j=Vn[A];z=hz.clone(j.uniforms)}else z=S.uniforms;return z}function M(S,A){let z;for(let j=0,W=l.length;j<W;j++){let G=l[j];if(G.cacheKey===A){z=G,++z.usedTimes;break}}return z===void 0&&(z=new vye(i,A,S,s),l.push(z)),z}function T(S){if(--S.usedTimes===0){let A=l.indexOf(S);l[A]=l[l.length-1],l.pop(),S.destroy()}}function P(S){u.remove(S)}function C(){u.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:b,acquireProgram:M,releaseProgram:T,releaseShaderCache:P,programs:l,dispose:C}}function yye(){let i=new WeakMap;function e(s){let a=i.get(s);return a===void 0&&(a={},i.set(s,a)),a}function t(s){i.delete(s)}function n(s,a,o){i.get(s)[a]=o}function r(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function bye(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function y3(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function b3(){let i=[],e=0,t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function a(d,f,h,p,v,g){let m=i[e];return m===void 0?(m={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:v,group:g},i[e]=m):(m.id=d.id,m.object=d,m.geometry=f,m.material=h,m.groupOrder=p,m.renderOrder=d.renderOrder,m.z=v,m.group=g),e++,m}function o(d,f,h,p,v,g){let m=a(d,f,h,p,v,g);h.transmission>0?n.push(m):h.transparent===!0?r.push(m):t.push(m)}function u(d,f,h,p,v,g){let m=a(d,f,h,p,v,g);h.transmission>0?n.unshift(m):h.transparent===!0?r.unshift(m):t.unshift(m)}function l(d,f){t.length>1&&t.sort(d||bye),n.length>1&&n.sort(f||y3),r.length>1&&r.sort(f||y3)}function c(){for(let d=e,f=i.length;d<f;d++){let h=i[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:o,unshift:u,finish:c,sort:l}}function Mye(){let i=new WeakMap;function e(n,r){let s=i.get(n),a;return s===void 0?(a=new b3,i.set(n,[a])):r>=s.length?(a=new b3,s.push(a)):a=s[r],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function Sye(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new I,color:new Ae};break;case"SpotLight":t={position:new I,direction:new I,color:new Ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new I,color:new Ae,distance:0,decay:0};break;case"HemisphereLight":t={direction:new I,skyColor:new Ae,groundColor:new Ae};break;case"RectAreaLight":t={color:new Ae,position:new I,halfWidth:new I,halfHeight:new I};break}return i[e.id]=t,t}}}function wye(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}var Tye=0;function Eye(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Pye(i,e){let t=new Sye,n=wye(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)r.probe.push(new I);let s=new I,a=new Ye,o=new Ye;function u(c,d){let f=0,h=0,p=0;for(let z=0;z<9;z++)r.probe[z].set(0,0,0);let v=0,g=0,m=0,y=0,_=0,b=0,M=0,T=0,P=0,C=0;c.sort(Eye);let S=d===!0?Math.PI:1;for(let z=0,j=c.length;z<j;z++){let W=c[z],G=W.color,V=W.intensity,J=W.distance,Z=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)f+=G.r*V*S,h+=G.g*V*S,p+=G.b*V*S;else if(W.isLightProbe)for(let ne=0;ne<9;ne++)r.probe[ne].addScaledVector(W.sh.coefficients[ne],V);else if(W.isDirectionalLight){let ne=t.get(W);if(ne.color.copy(W.color).multiplyScalar(W.intensity*S),W.castShadow){let re=W.shadow,ce=n.get(W);ce.shadowBias=re.bias,ce.shadowNormalBias=re.normalBias,ce.shadowRadius=re.radius,ce.shadowMapSize=re.mapSize,r.directionalShadow[v]=ce,r.directionalShadowMap[v]=Z,r.directionalShadowMatrix[v]=W.shadow.matrix,b++}r.directional[v]=ne,v++}else if(W.isSpotLight){let ne=t.get(W);ne.position.setFromMatrixPosition(W.matrixWorld),ne.color.copy(G).multiplyScalar(V*S),ne.distance=J,ne.coneCos=Math.cos(W.angle),ne.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),ne.decay=W.decay,r.spot[m]=ne;let re=W.shadow;if(W.map&&(r.spotLightMap[P]=W.map,P++,re.updateMatrices(W),W.castShadow&&C++),r.spotLightMatrix[m]=re.matrix,W.castShadow){let ce=n.get(W);ce.shadowBias=re.bias,ce.shadowNormalBias=re.normalBias,ce.shadowRadius=re.radius,ce.shadowMapSize=re.mapSize,r.spotShadow[m]=ce,r.spotShadowMap[m]=Z,T++}m++}else if(W.isRectAreaLight){let ne=t.get(W);ne.color.copy(G).multiplyScalar(V),ne.halfWidth.set(W.width*.5,0,0),ne.halfHeight.set(0,W.height*.5,0),r.rectArea[y]=ne,y++}else if(W.isPointLight){let ne=t.get(W);if(ne.color.copy(W.color).multiplyScalar(W.intensity*S),ne.distance=W.distance,ne.decay=W.decay,W.castShadow){let re=W.shadow,ce=n.get(W);ce.shadowBias=re.bias,ce.shadowNormalBias=re.normalBias,ce.shadowRadius=re.radius,ce.shadowMapSize=re.mapSize,ce.shadowCameraNear=re.camera.near,ce.shadowCameraFar=re.camera.far,r.pointShadow[g]=ce,r.pointShadowMap[g]=Z,r.pointShadowMatrix[g]=W.shadow.matrix,M++}r.point[g]=ne,g++}else if(W.isHemisphereLight){let ne=t.get(W);ne.skyColor.copy(W.color).multiplyScalar(V*S),ne.groundColor.copy(W.groundColor).multiplyScalar(V*S),r.hemi[_]=ne,_++}}y>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=we.LTC_FLOAT_1,r.rectAreaLTC2=we.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=we.LTC_HALF_1,r.rectAreaLTC2=we.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=h,r.ambient[2]=p;let A=r.hash;(A.directionalLength!==v||A.pointLength!==g||A.spotLength!==m||A.rectAreaLength!==y||A.hemiLength!==_||A.numDirectionalShadows!==b||A.numPointShadows!==M||A.numSpotShadows!==T||A.numSpotMaps!==P)&&(r.directional.length=v,r.spot.length=m,r.rectArea.length=y,r.point.length=g,r.hemi.length=_,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=T,r.spotShadowMap.length=T,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=M,r.spotLightMatrix.length=T+P-C,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=C,A.directionalLength=v,A.pointLength=g,A.spotLength=m,A.rectAreaLength=y,A.hemiLength=_,A.numDirectionalShadows=b,A.numPointShadows=M,A.numSpotShadows=T,A.numSpotMaps=P,r.version=Tye++)}function l(c,d){let f=0,h=0,p=0,v=0,g=0,m=d.matrixWorldInverse;for(let y=0,_=c.length;y<_;y++){let b=c[y];if(b.isDirectionalLight){let M=r.directional[f];M.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(m),f++}else if(b.isSpotLight){let M=r.spot[p];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(m),M.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(m),p++}else if(b.isRectAreaLight){let M=r.rectArea[v];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(m),o.identity(),a.copy(b.matrixWorld),a.premultiply(m),o.extractRotation(a),M.halfWidth.set(b.width*.5,0,0),M.halfHeight.set(0,b.height*.5,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),v++}else if(b.isPointLight){let M=r.point[h];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(m),h++}else if(b.isHemisphereLight){let M=r.hemi[g];M.direction.setFromMatrixPosition(b.matrixWorld),M.direction.transformDirection(m),g++}}}return{setup:u,setupView:l,state:r}}function M3(i,e){let t=new Pye(i,e),n=[],r=[];function s(){n.length=0,r.length=0}function a(d){n.push(d)}function o(d){r.push(d)}function u(d){t.setup(n,d)}function l(d){t.setupView(n,d)}return{init:s,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:u,setupLightsView:l,pushLight:a,pushShadow:o}}function Aye(i,e){let t=new WeakMap;function n(s,a=0){let o=t.get(s),u;return o===void 0?(u=new M3(i,e),t.set(s,[u])):a>=o.length?(u=new M3(i,e),o.push(u)):u=o[a],u}function r(){t=new WeakMap}return{get:n,dispose:r}}var Vl=class extends Wt{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=rz,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Gl=class extends Wt{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Dye=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Rye=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Cye(i,e,t){let n=new Eo,r=new de,s=new de,a=new gt,o=new Vl({depthPacking:sz}),u=new Gl,l={},c=t.maxTextureSize,d={[Bi]:an,[an]:Bi,[li]:li},f=new In({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new de},radius:{value:4}},vertexShader:Dye,fragmentShader:Rye}),h=f.clone();h.defines.HORIZONTAL_PASS=1;let p=new Ze;p.setAttribute("position",new _t(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new Ft(p,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Bw;let m=this.type;this.render=function(M,T,P){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||M.length===0)return;let C=i.getRenderTarget(),S=i.getActiveCubeFace(),A=i.getActiveMipmapLevel(),z=i.state;z.setBlending(Fi),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);let j=m!==oi&&this.type===oi,W=m===oi&&this.type!==oi;for(let G=0,V=M.length;G<V;G++){let J=M[G],Z=J.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;r.copy(Z.mapSize);let ne=Z.getFrameExtents();if(r.multiply(ne),s.copy(Z.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/ne.x),r.x=s.x*ne.x,Z.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/ne.y),r.y=s.y*ne.y,Z.mapSize.y=s.y)),Z.map===null||j===!0||W===!0){let ce=this.type!==oi?{minFilter:It,magFilter:It}:{};Z.map!==null&&Z.map.dispose(),Z.map=new bn(r.x,r.y,ce),Z.map.texture.name=J.name+".shadowMap",Z.camera.updateProjectionMatrix()}i.setRenderTarget(Z.map),i.clear();let re=Z.getViewportCount();for(let ce=0;ce<re;ce++){let Te=Z.getViewport(ce);a.set(s.x*Te.x,s.y*Te.y,s.x*Te.z,s.y*Te.w),z.viewport(a),Z.updateMatrices(J,ce),n=Z.getFrustum(),b(T,P,Z.camera,J,this.type)}Z.isPointLightShadow!==!0&&this.type===oi&&y(Z,P),Z.needsUpdate=!1}m=this.type,g.needsUpdate=!1,i.setRenderTarget(C,S,A)};function y(M,T){let P=e.update(v);f.defines.VSM_SAMPLES!==M.blurSamples&&(f.defines.VSM_SAMPLES=M.blurSamples,h.defines.VSM_SAMPLES=M.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new bn(r.x,r.y)),f.uniforms.shadow_pass.value=M.map.texture,f.uniforms.resolution.value=M.mapSize,f.uniforms.radius.value=M.radius,i.setRenderTarget(M.mapPass),i.clear(),i.renderBufferDirect(T,null,P,f,v,null),h.uniforms.shadow_pass.value=M.mapPass.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,i.setRenderTarget(M.map),i.clear(),i.renderBufferDirect(T,null,P,h,v,null)}function _(M,T,P,C){let S=null,A=P.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(A!==void 0)S=A;else if(S=P.isPointLight===!0?u:o,i.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){let z=S.uuid,j=T.uuid,W=l[z];W===void 0&&(W={},l[z]=W);let G=W[j];G===void 0&&(G=S.clone(),W[j]=G),S=G}if(S.visible=T.visible,S.wireframe=T.wireframe,C===oi?S.side=T.shadowSide!==null?T.shadowSide:T.side:S.side=T.shadowSide!==null?T.shadowSide:d[T.side],S.alphaMap=T.alphaMap,S.alphaTest=T.alphaTest,S.map=T.map,S.clipShadows=T.clipShadows,S.clippingPlanes=T.clippingPlanes,S.clipIntersection=T.clipIntersection,S.displacementMap=T.displacementMap,S.displacementScale=T.displacementScale,S.displacementBias=T.displacementBias,S.wireframeLinewidth=T.wireframeLinewidth,S.linewidth=T.linewidth,P.isPointLight===!0&&S.isMeshDistanceMaterial===!0){let z=i.properties.get(S);z.light=P}return S}function b(M,T,P,C,S){if(M.visible===!1)return;if(M.layers.test(T.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&S===oi)&&(!M.frustumCulled||n.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,M.matrixWorld);let j=e.update(M),W=M.material;if(Array.isArray(W)){let G=j.groups;for(let V=0,J=G.length;V<J;V++){let Z=G[V],ne=W[Z.materialIndex];if(ne&&ne.visible){let re=_(M,ne,C,S);i.renderBufferDirect(P,null,j,re,M,Z)}}}else if(W.visible){let G=_(M,W,C,S);i.renderBufferDirect(P,null,j,G,M,null)}}let z=M.children;for(let j=0,W=z.length;j<W;j++)b(z[j],T,P,C,S)}}function Oye(i,e,t){let n=t.isWebGL2;function r(){let H=!1,se=new gt,ge=null,Re=new gt(0,0,0,0);return{setMask:function(ke){ge!==ke&&!H&&(i.colorMask(ke,ke,ke,ke),ge=ke)},setLocked:function(ke){H=ke},setClear:function(ke,bt,Mt,jt,ji){ji===!0&&(ke*=jt,bt*=jt,Mt*=jt),se.set(ke,bt,Mt,jt),Re.equals(se)===!1&&(i.clearColor(ke,bt,Mt,jt),Re.copy(se))},reset:function(){H=!1,ge=null,Re.set(-1,0,0,0)}}}function s(){let H=!1,se=null,ge=null,Re=null;return{setTest:function(ke){ke?B(i.DEPTH_TEST):De(i.DEPTH_TEST)},setMask:function(ke){se!==ke&&!H&&(i.depthMask(ke),se=ke)},setFunc:function(ke){if(ge!==ke){switch(ke){case EB:i.depthFunc(i.NEVER);break;case PB:i.depthFunc(i.ALWAYS);break;case AB:i.depthFunc(i.LESS);break;case g_:i.depthFunc(i.LEQUAL);break;case DB:i.depthFunc(i.EQUAL);break;case RB:i.depthFunc(i.GEQUAL);break;case CB:i.depthFunc(i.GREATER);break;case OB:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ge=ke}},setLocked:function(ke){H=ke},setClear:function(ke){Re!==ke&&(i.clearDepth(ke),Re=ke)},reset:function(){H=!1,se=null,ge=null,Re=null}}}function a(){let H=!1,se=null,ge=null,Re=null,ke=null,bt=null,Mt=null,jt=null,ji=null;return{setTest:function(Dt){H||(Dt?B(i.STENCIL_TEST):De(i.STENCIL_TEST))},setMask:function(Dt){se!==Dt&&!H&&(i.stencilMask(Dt),se=Dt)},setFunc:function(Dt,wn,$n){(ge!==Dt||Re!==wn||ke!==$n)&&(i.stencilFunc(Dt,wn,$n),ge=Dt,Re=wn,ke=$n)},setOp:function(Dt,wn,$n){(bt!==Dt||Mt!==wn||jt!==$n)&&(i.stencilOp(Dt,wn,$n),bt=Dt,Mt=wn,jt=$n)},setLocked:function(Dt){H=Dt},setClear:function(Dt){ji!==Dt&&(i.clearStencil(Dt),ji=Dt)},reset:function(){H=!1,se=null,ge=null,Re=null,ke=null,bt=null,Mt=null,jt=null,ji=null}}}let o=new r,u=new s,l=new a,c=new WeakMap,d=new WeakMap,f={},h={},p=new WeakMap,v=[],g=null,m=!1,y=null,_=null,b=null,M=null,T=null,P=null,C=null,S=!1,A=null,z=null,j=null,W=null,G=null,V=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS),J=!1,Z=0,ne=i.getParameter(i.VERSION);ne.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(ne)[1]),J=Z>=1):ne.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),J=Z>=2);let re=null,ce={},Te=i.getParameter(i.SCISSOR_BOX),xe=i.getParameter(i.VIEWPORT),K=new gt().fromArray(Te),ue=new gt().fromArray(xe);function _e(H,se,ge,Re){let ke=new Uint8Array(4),bt=i.createTexture();i.bindTexture(H,bt),i.texParameteri(H,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(H,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Mt=0;Mt<ge;Mt++)n&&(H===i.TEXTURE_3D||H===i.TEXTURE_2D_ARRAY)?i.texImage3D(se,0,i.RGBA,1,1,Re,0,i.RGBA,i.UNSIGNED_BYTE,ke):i.texImage2D(se+Mt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ke);return bt}let be={};be[i.TEXTURE_2D]=_e(i.TEXTURE_2D,i.TEXTURE_2D,1),be[i.TEXTURE_CUBE_MAP]=_e(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(be[i.TEXTURE_2D_ARRAY]=_e(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),be[i.TEXTURE_3D]=_e(i.TEXTURE_3D,i.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),u.setClear(1),l.setClear(0),B(i.DEPTH_TEST),u.setFunc(g_),$(!1),pe(DM),B(i.CULL_FACE),N(Fi);function B(H){f[H]!==!0&&(i.enable(H),f[H]=!0)}function De(H){f[H]!==!1&&(i.disable(H),f[H]=!1)}function Se(H,se){return h[H]!==se?(i.bindFramebuffer(H,se),h[H]=se,n&&(H===i.DRAW_FRAMEBUFFER&&(h[i.FRAMEBUFFER]=se),H===i.FRAMEBUFFER&&(h[i.DRAW_FRAMEBUFFER]=se)),!0):!1}function he(H,se){let ge=v,Re=!1;if(H)if(ge=p.get(se),ge===void 0&&(ge=[],p.set(se,ge)),H.isWebGLMultipleRenderTargets){let ke=H.texture;if(ge.length!==ke.length||ge[0]!==i.COLOR_ATTACHMENT0){for(let bt=0,Mt=ke.length;bt<Mt;bt++)ge[bt]=i.COLOR_ATTACHMENT0+bt;ge.length=ke.length,Re=!0}}else ge[0]!==i.COLOR_ATTACHMENT0&&(ge[0]=i.COLOR_ATTACHMENT0,Re=!0);else ge[0]!==i.BACK&&(ge[0]=i.BACK,Re=!0);Re&&(t.isWebGL2?i.drawBuffers(ge):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ge))}function Ce(H){return g!==H?(i.useProgram(H),g=H,!0):!1}let fe={[xs]:i.FUNC_ADD,[mB]:i.FUNC_SUBTRACT,[gB]:i.FUNC_REVERSE_SUBTRACT};if(n)fe[IM]=i.MIN,fe[LM]=i.MAX;else{let H=e.get("EXT_blend_minmax");H!==null&&(fe[IM]=H.MIN_EXT,fe[LM]=H.MAX_EXT)}let L={[vB]:i.ZERO,[_B]:i.ONE,[xB]:i.SRC_COLOR,[zw]:i.SRC_ALPHA,[TB]:i.SRC_ALPHA_SATURATE,[SB]:i.DST_COLOR,[bB]:i.DST_ALPHA,[yB]:i.ONE_MINUS_SRC_COLOR,[Hw]:i.ONE_MINUS_SRC_ALPHA,[wB]:i.ONE_MINUS_DST_COLOR,[MB]:i.ONE_MINUS_DST_ALPHA};function N(H,se,ge,Re,ke,bt,Mt,jt){if(H===Fi){m===!0&&(De(i.BLEND),m=!1);return}if(m===!1&&(B(i.BLEND),m=!0),H!==pB){if(H!==y||jt!==S){if((_!==xs||T!==xs)&&(i.blendEquation(i.FUNC_ADD),_=xs,T=xs),jt)switch(H){case ws:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case RM:i.blendFunc(i.ONE,i.ONE);break;case CM:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case OM:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}else switch(H){case ws:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case RM:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case CM:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case OM:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}b=null,M=null,P=null,C=null,y=H,S=jt}return}ke=ke||se,bt=bt||ge,Mt=Mt||Re,(se!==_||ke!==T)&&(i.blendEquationSeparate(fe[se],fe[ke]),_=se,T=ke),(ge!==b||Re!==M||bt!==P||Mt!==C)&&(i.blendFuncSeparate(L[ge],L[Re],L[bt],L[Mt]),b=ge,M=Re,P=bt,C=Mt),y=H,S=!1}function Q(H,se){H.side===li?De(i.CULL_FACE):B(i.CULL_FACE);let ge=H.side===an;se&&(ge=!ge),$(ge),H.blending===ws&&H.transparent===!1?N(Fi):N(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.premultipliedAlpha),u.setFunc(H.depthFunc),u.setTest(H.depthTest),u.setMask(H.depthWrite),o.setMask(H.colorWrite);let Re=H.stencilWrite;l.setTest(Re),Re&&(l.setMask(H.stencilWriteMask),l.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),l.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),Ee(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),H.alphaToCoverage===!0?B(i.SAMPLE_ALPHA_TO_COVERAGE):De(i.SAMPLE_ALPHA_TO_COVERAGE)}function $(H){A!==H&&(H?i.frontFace(i.CW):i.frontFace(i.CCW),A=H)}function pe(H){H!==dB?(B(i.CULL_FACE),H!==z&&(H===DM?i.cullFace(i.BACK):H===fB?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):De(i.CULL_FACE),z=H}function ye(H){H!==j&&(J&&i.lineWidth(H),j=H)}function Ee(H,se,ge){H?(B(i.POLYGON_OFFSET_FILL),(W!==se||G!==ge)&&(i.polygonOffset(se,ge),W=se,G=ge)):De(i.POLYGON_OFFSET_FILL)}function ze(H){H?B(i.SCISSOR_TEST):De(i.SCISSOR_TEST)}function Xe(H){H===void 0&&(H=i.TEXTURE0+V-1),re!==H&&(i.activeTexture(H),re=H)}function q(H,se,ge){ge===void 0&&(re===null?ge=i.TEXTURE0+V-1:ge=re);let Re=ce[ge];Re===void 0&&(Re={type:void 0,texture:void 0},ce[ge]=Re),(Re.type!==H||Re.texture!==se)&&(re!==ge&&(i.activeTexture(ge),re=ge),i.bindTexture(H,se||be[H]),Re.type=H,Re.texture=se)}function D(){let H=ce[re];H!==void 0&&H.type!==void 0&&(i.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)}function te(){try{i.compressedTexImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function me(){try{i.compressedTexImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function ve(){try{i.texSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Pe(){try{i.texSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ve(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Oe(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function oe(){try{i.texStorage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ne(){try{i.texStorage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ue(){try{i.texImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function He(){try{i.texImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ie(H){K.equals(H)===!1&&(i.scissor(H.x,H.y,H.z,H.w),K.copy(H))}function Fe(H){ue.equals(H)===!1&&(i.viewport(H.x,H.y,H.z,H.w),ue.copy(H))}function at(H,se){let ge=d.get(se);ge===void 0&&(ge=new WeakMap,d.set(se,ge));let Re=ge.get(H);Re===void 0&&(Re=i.getUniformBlockIndex(se,H.name),ge.set(H,Re))}function xt(H,se){let Re=d.get(se).get(H);c.get(se)!==Re&&(i.uniformBlockBinding(se,Re,H.__bindingPointIndex),c.set(se,Re))}function At(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),n===!0&&(i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),f={},re=null,ce={},h={},p=new WeakMap,v=[],g=null,m=!1,y=null,_=null,b=null,M=null,T=null,P=null,C=null,S=!1,A=null,z=null,j=null,W=null,G=null,K.set(0,0,i.canvas.width,i.canvas.height),ue.set(0,0,i.canvas.width,i.canvas.height),o.reset(),u.reset(),l.reset()}return{buffers:{color:o,depth:u,stencil:l},enable:B,disable:De,bindFramebuffer:Se,drawBuffers:he,useProgram:Ce,setBlending:N,setMaterial:Q,setFlipSided:$,setCullFace:pe,setLineWidth:ye,setPolygonOffset:Ee,setScissorTest:ze,activeTexture:Xe,bindTexture:q,unbindTexture:D,compressedTexImage2D:te,compressedTexImage3D:me,texImage2D:Ue,texImage3D:He,updateUBOMapping:at,uniformBlockBinding:xt,texStorage2D:oe,texStorage3D:Ne,texSubImage2D:ve,texSubImage3D:Pe,compressedTexSubImage2D:Ve,compressedTexSubImage3D:Oe,scissor:Ie,viewport:Fe,reset:At}}function Iye(i,e,t,n,r,s,a){let o=r.isWebGL2,u=r.maxTextures,l=r.maxCubemapSize,c=r.maxTextureSize,d=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap,v,g=new WeakMap,m=!1;try{m=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(q){}function y(q,D){return m?new OffscreenCanvas(q,D):Fl("canvas")}function _(q,D,te,me){let ve=1;if((q.width>me||q.height>me)&&(ve=me/Math.max(q.width,q.height)),ve<1||D===!0)if(typeof HTMLImageElement!="undefined"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&q instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&q instanceof ImageBitmap){let Pe=D?lz:Math.floor,Ve=Pe(ve*q.width),Oe=Pe(ve*q.height);v===void 0&&(v=y(Ve,Oe));let oe=te?y(Ve,Oe):v;return oe.width=Ve,oe.height=Oe,oe.getContext("2d").drawImage(q,0,0,Ve,Oe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+q.width+"x"+q.height+") to ("+Ve+"x"+Oe+")."),oe}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+q.width+"x"+q.height+")."),q;return q}function b(q){return sS(q.width)&&sS(q.height)}function M(q){return o?!1:q.wrapS!==Kt||q.wrapT!==Kt||q.minFilter!==It&&q.minFilter!==Lt}function T(q,D){return q.generateMipmaps&&D&&q.minFilter!==It&&q.minFilter!==Lt}function P(q){i.generateMipmap(q)}function C(q,D,te,me,ve=!1){if(o===!1)return D;if(q!==null){if(i[q]!==void 0)return i[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let Pe=D;return D===i.RED&&(te===i.FLOAT&&(Pe=i.R32F),te===i.HALF_FLOAT&&(Pe=i.R16F),te===i.UNSIGNED_BYTE&&(Pe=i.R8)),D===i.RG&&(te===i.FLOAT&&(Pe=i.RG32F),te===i.HALF_FLOAT&&(Pe=i.RG16F),te===i.UNSIGNED_BYTE&&(Pe=i.RG8)),D===i.RGBA&&(te===i.FLOAT&&(Pe=i.RGBA32F),te===i.HALF_FLOAT&&(Pe=i.RGBA16F),te===i.UNSIGNED_BYTE&&(Pe=me===$e&&ve===!1?i.SRGB8_ALPHA8:i.RGBA8),te===i.UNSIGNED_SHORT_4_4_4_4&&(Pe=i.RGBA4),te===i.UNSIGNED_SHORT_5_5_5_1&&(Pe=i.RGB5_A1)),(Pe===i.R16F||Pe===i.R32F||Pe===i.RG16F||Pe===i.RG32F||Pe===i.RGBA16F||Pe===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Pe}function S(q,D,te){return T(q,te)===!0||q.isFramebufferTexture&&q.minFilter!==It&&q.minFilter!==Lt?Math.log2(Math.max(D.width,D.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?D.mipmaps.length:1}function A(q){return q===It||q===v_||q===wl?i.NEAREST:i.LINEAR}function z(q){let D=q.target;D.removeEventListener("dispose",z),W(D),D.isVideoTexture&&p.delete(D)}function j(q){let D=q.target;D.removeEventListener("dispose",j),V(D)}function W(q){let D=n.get(q);if(D.__webglInit===void 0)return;let te=q.source,me=g.get(te);if(me){let ve=me[D.__cacheKey];ve.usedTimes--,ve.usedTimes===0&&G(q),Object.keys(me).length===0&&g.delete(te)}n.remove(q)}function G(q){let D=n.get(q);i.deleteTexture(D.__webglTexture);let te=q.source,me=g.get(te);delete me[D.__cacheKey],a.memory.textures--}function V(q){let D=q.texture,te=n.get(q),me=n.get(D);if(me.__webglTexture!==void 0&&(i.deleteTexture(me.__webglTexture),a.memory.textures--),q.depthTexture&&q.depthTexture.dispose(),q.isWebGLCubeRenderTarget)for(let ve=0;ve<6;ve++)i.deleteFramebuffer(te.__webglFramebuffer[ve]),te.__webglDepthbuffer&&i.deleteRenderbuffer(te.__webglDepthbuffer[ve]);else{if(i.deleteFramebuffer(te.__webglFramebuffer),te.__webglDepthbuffer&&i.deleteRenderbuffer(te.__webglDepthbuffer),te.__webglMultisampledFramebuffer&&i.deleteFramebuffer(te.__webglMultisampledFramebuffer),te.__webglColorRenderbuffer)for(let ve=0;ve<te.__webglColorRenderbuffer.length;ve++)te.__webglColorRenderbuffer[ve]&&i.deleteRenderbuffer(te.__webglColorRenderbuffer[ve]);te.__webglDepthRenderbuffer&&i.deleteRenderbuffer(te.__webglDepthRenderbuffer)}if(q.isWebGLMultipleRenderTargets)for(let ve=0,Pe=D.length;ve<Pe;ve++){let Ve=n.get(D[ve]);Ve.__webglTexture&&(i.deleteTexture(Ve.__webglTexture),a.memory.textures--),n.remove(D[ve])}n.remove(D),n.remove(q)}let J=0;function Z(){J=0}function ne(){let q=J;return q>=u&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+u),J+=1,q}function re(q){let D=[];return D.push(q.wrapS),D.push(q.wrapT),D.push(q.wrapR||0),D.push(q.magFilter),D.push(q.minFilter),D.push(q.anisotropy),D.push(q.internalFormat),D.push(q.format),D.push(q.type),D.push(q.generateMipmaps),D.push(q.premultiplyAlpha),D.push(q.flipY),D.push(q.unpackAlignment),D.push(q.colorSpace),D.join()}function ce(q,D){let te=n.get(q);if(q.isVideoTexture&&ze(q),q.isRenderTargetTexture===!1&&q.version>0&&te.__version!==q.version){let me=q.image;if(me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{De(te,q,D);return}}t.bindTexture(i.TEXTURE_2D,te.__webglTexture,i.TEXTURE0+D)}function Te(q,D){let te=n.get(q);if(q.version>0&&te.__version!==q.version){De(te,q,D);return}t.bindTexture(i.TEXTURE_2D_ARRAY,te.__webglTexture,i.TEXTURE0+D)}function xe(q,D){let te=n.get(q);if(q.version>0&&te.__version!==q.version){De(te,q,D);return}t.bindTexture(i.TEXTURE_3D,te.__webglTexture,i.TEXTURE0+D)}function K(q,D){let te=n.get(q);if(q.version>0&&te.__version!==q.version){Se(te,q,D);return}t.bindTexture(i.TEXTURE_CUBE_MAP,te.__webglTexture,i.TEXTURE0+D)}let ue={[Ol]:i.REPEAT,[Kt]:i.CLAMP_TO_EDGE,[Il]:i.MIRRORED_REPEAT},_e={[It]:i.NEAREST,[v_]:i.NEAREST_MIPMAP_NEAREST,[wl]:i.NEAREST_MIPMAP_LINEAR,[Lt]:i.LINEAR,[Ww]:i.LINEAR_MIPMAP_NEAREST,[Tr]:i.LINEAR_MIPMAP_LINEAR};function be(q,D,te){if(te?(i.texParameteri(q,i.TEXTURE_WRAP_S,ue[D.wrapS]),i.texParameteri(q,i.TEXTURE_WRAP_T,ue[D.wrapT]),(q===i.TEXTURE_3D||q===i.TEXTURE_2D_ARRAY)&&i.texParameteri(q,i.TEXTURE_WRAP_R,ue[D.wrapR]),i.texParameteri(q,i.TEXTURE_MAG_FILTER,_e[D.magFilter]),i.texParameteri(q,i.TEXTURE_MIN_FILTER,_e[D.minFilter])):(i.texParameteri(q,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(q,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(q===i.TEXTURE_3D||q===i.TEXTURE_2D_ARRAY)&&i.texParameteri(q,i.TEXTURE_WRAP_R,i.CLAMP_TO_EDGE),(D.wrapS!==Kt||D.wrapT!==Kt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(q,i.TEXTURE_MAG_FILTER,A(D.magFilter)),i.texParameteri(q,i.TEXTURE_MIN_FILTER,A(D.minFilter)),D.minFilter!==It&&D.minFilter!==Lt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){let me=e.get("EXT_texture_filter_anisotropic");if(D.magFilter===It||D.minFilter!==wl&&D.minFilter!==Tr||D.type===Ni&&e.has("OES_texture_float_linear")===!1||o===!1&&D.type===yo&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||n.get(D).__currentAnisotropy)&&(i.texParameterf(q,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),n.get(D).__currentAnisotropy=D.anisotropy)}}function B(q,D){let te=!1;q.__webglInit===void 0&&(q.__webglInit=!0,D.addEventListener("dispose",z));let me=D.source,ve=g.get(me);ve===void 0&&(ve={},g.set(me,ve));let Pe=re(D);if(Pe!==q.__cacheKey){ve[Pe]===void 0&&(ve[Pe]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,te=!0),ve[Pe].usedTimes++;let Ve=ve[q.__cacheKey];Ve!==void 0&&(ve[q.__cacheKey].usedTimes--,Ve.usedTimes===0&&G(D)),q.__cacheKey=Pe,q.__webglTexture=ve[Pe].texture}return te}function De(q,D,te){let me=i.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(me=i.TEXTURE_2D_ARRAY),D.isData3DTexture&&(me=i.TEXTURE_3D);let ve=B(q,D),Pe=D.source;t.bindTexture(me,q.__webglTexture,i.TEXTURE0+te);let Ve=n.get(Pe);if(Pe.version!==Ve.__version||ve===!0){t.activeTexture(i.TEXTURE0+te),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,D.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,D.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);let Oe=M(D)&&b(D.image)===!1,oe=_(D.image,Oe,!1,c);oe=Xe(D,oe);let Ne=b(oe)||o,Ue=s.convert(D.format,D.colorSpace),He=s.convert(D.type),Ie=C(D.internalFormat,Ue,He,D.colorSpace);be(me,D,Ne);let Fe,at=D.mipmaps,xt=o&&D.isVideoTexture!==!0,At=Ve.__version===void 0||ve===!0,H=S(D,oe,Ne);if(D.isDepthTexture)Ie=i.DEPTH_COMPONENT,o?D.type===Ni?Ie=i.DEPTH_COMPONENT32F:D.type===vr?Ie=i.DEPTH_COMPONENT24:D.type===Ts?Ie=i.DEPTH24_STENCIL8:Ie=i.DEPTH_COMPONENT16:D.type===Ni&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===xr&&Ie===i.DEPTH_COMPONENT&&D.type!==Vw&&D.type!==vr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=vr,He=s.convert(D.type)),D.format===Ps&&Ie===i.DEPTH_COMPONENT&&(Ie=i.DEPTH_STENCIL,D.type!==Ts&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=Ts,He=s.convert(D.type))),At&&(xt?t.texStorage2D(i.TEXTURE_2D,1,Ie,oe.width,oe.height):t.texImage2D(i.TEXTURE_2D,0,Ie,oe.width,oe.height,0,Ue,He,null));else if(D.isDataTexture)if(at.length>0&&Ne){xt&&At&&t.texStorage2D(i.TEXTURE_2D,H,Ie,at[0].width,at[0].height);for(let se=0,ge=at.length;se<ge;se++)Fe=at[se],xt?t.texSubImage2D(i.TEXTURE_2D,se,0,0,Fe.width,Fe.height,Ue,He,Fe.data):t.texImage2D(i.TEXTURE_2D,se,Ie,Fe.width,Fe.height,0,Ue,He,Fe.data);D.generateMipmaps=!1}else xt?(At&&t.texStorage2D(i.TEXTURE_2D,H,Ie,oe.width,oe.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,oe.width,oe.height,Ue,He,oe.data)):t.texImage2D(i.TEXTURE_2D,0,Ie,oe.width,oe.height,0,Ue,He,oe.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){xt&&At&&t.texStorage3D(i.TEXTURE_2D_ARRAY,H,Ie,at[0].width,at[0].height,oe.depth);for(let se=0,ge=at.length;se<ge;se++)Fe=at[se],D.format!==_n?Ue!==null?xt?t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,se,0,0,0,Fe.width,Fe.height,oe.depth,Ue,Fe.data,0,0):t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,se,Ie,Fe.width,Fe.height,oe.depth,0,Fe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xt?t.texSubImage3D(i.TEXTURE_2D_ARRAY,se,0,0,0,Fe.width,Fe.height,oe.depth,Ue,He,Fe.data):t.texImage3D(i.TEXTURE_2D_ARRAY,se,Ie,Fe.width,Fe.height,oe.depth,0,Ue,He,Fe.data)}else{xt&&At&&t.texStorage2D(i.TEXTURE_2D,H,Ie,at[0].width,at[0].height);for(let se=0,ge=at.length;se<ge;se++)Fe=at[se],D.format!==_n?Ue!==null?xt?t.compressedTexSubImage2D(i.TEXTURE_2D,se,0,0,Fe.width,Fe.height,Ue,Fe.data):t.compressedTexImage2D(i.TEXTURE_2D,se,Ie,Fe.width,Fe.height,0,Fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xt?t.texSubImage2D(i.TEXTURE_2D,se,0,0,Fe.width,Fe.height,Ue,He,Fe.data):t.texImage2D(i.TEXTURE_2D,se,Ie,Fe.width,Fe.height,0,Ue,He,Fe.data)}else if(D.isDataArrayTexture)xt?(At&&t.texStorage3D(i.TEXTURE_2D_ARRAY,H,Ie,oe.width,oe.height,oe.depth),t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,oe.width,oe.height,oe.depth,Ue,He,oe.data)):t.texImage3D(i.TEXTURE_2D_ARRAY,0,Ie,oe.width,oe.height,oe.depth,0,Ue,He,oe.data);else if(D.isData3DTexture)xt?(At&&t.texStorage3D(i.TEXTURE_3D,H,Ie,oe.width,oe.height,oe.depth),t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,oe.width,oe.height,oe.depth,Ue,He,oe.data)):t.texImage3D(i.TEXTURE_3D,0,Ie,oe.width,oe.height,oe.depth,0,Ue,He,oe.data);else if(D.isFramebufferTexture){if(At)if(xt)t.texStorage2D(i.TEXTURE_2D,H,Ie,oe.width,oe.height);else{let se=oe.width,ge=oe.height;for(let Re=0;Re<H;Re++)t.texImage2D(i.TEXTURE_2D,Re,Ie,se,ge,0,Ue,He,null),se>>=1,ge>>=1}}else if(at.length>0&&Ne){xt&&At&&t.texStorage2D(i.TEXTURE_2D,H,Ie,at[0].width,at[0].height);for(let se=0,ge=at.length;se<ge;se++)Fe=at[se],xt?t.texSubImage2D(i.TEXTURE_2D,se,0,0,Ue,He,Fe):t.texImage2D(i.TEXTURE_2D,se,Ie,Ue,He,Fe);D.generateMipmaps=!1}else xt?(At&&t.texStorage2D(i.TEXTURE_2D,H,Ie,oe.width,oe.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ue,He,oe)):t.texImage2D(i.TEXTURE_2D,0,Ie,Ue,He,oe);T(D,Ne)&&P(me),Ve.__version=Pe.version,D.onUpdate&&D.onUpdate(D)}q.__version=D.version}function Se(q,D,te){if(D.image.length!==6)return;let me=B(q,D),ve=D.source;t.bindTexture(i.TEXTURE_CUBE_MAP,q.__webglTexture,i.TEXTURE0+te);let Pe=n.get(ve);if(ve.version!==Pe.__version||me===!0){t.activeTexture(i.TEXTURE0+te),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,D.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,D.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);let Ve=D.isCompressedTexture||D.image[0].isCompressedTexture,Oe=D.image[0]&&D.image[0].isDataTexture,oe=[];for(let se=0;se<6;se++)!Ve&&!Oe?oe[se]=_(D.image[se],!1,!0,l):oe[se]=Oe?D.image[se].image:D.image[se],oe[se]=Xe(D,oe[se]);let Ne=oe[0],Ue=b(Ne)||o,He=s.convert(D.format,D.colorSpace),Ie=s.convert(D.type),Fe=C(D.internalFormat,He,Ie,D.colorSpace),at=o&&D.isVideoTexture!==!0,xt=Pe.__version===void 0||me===!0,At=S(D,Ne,Ue);be(i.TEXTURE_CUBE_MAP,D,Ue);let H;if(Ve){at&&xt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,At,Fe,Ne.width,Ne.height);for(let se=0;se<6;se++){H=oe[se].mipmaps;for(let ge=0;ge<H.length;ge++){let Re=H[ge];D.format!==_n?He!==null?at?t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,ge,0,0,Re.width,Re.height,He,Re.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,ge,Fe,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):at?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,ge,0,0,Re.width,Re.height,He,Ie,Re.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,ge,Fe,Re.width,Re.height,0,He,Ie,Re.data)}}}else{H=D.mipmaps,at&&xt&&(H.length>0&&At++,t.texStorage2D(i.TEXTURE_CUBE_MAP,At,Fe,oe[0].width,oe[0].height));for(let se=0;se<6;se++)if(Oe){at?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,0,0,oe[se].width,oe[se].height,He,Ie,oe[se].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,Fe,oe[se].width,oe[se].height,0,He,Ie,oe[se].data);for(let ge=0;ge<H.length;ge++){let ke=H[ge].image[se].image;at?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,ge+1,0,0,ke.width,ke.height,He,Ie,ke.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,ge+1,Fe,ke.width,ke.height,0,He,Ie,ke.data)}}else{at?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,0,0,He,Ie,oe[se]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,Fe,He,Ie,oe[se]);for(let ge=0;ge<H.length;ge++){let Re=H[ge];at?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,ge+1,0,0,He,Ie,Re.image[se]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,ge+1,Fe,He,Ie,Re.image[se])}}}T(D,Ue)&&P(i.TEXTURE_CUBE_MAP),Pe.__version=ve.version,D.onUpdate&&D.onUpdate(D)}q.__version=D.version}function he(q,D,te,me,ve){let Pe=s.convert(te.format,te.colorSpace),Ve=s.convert(te.type),Oe=C(te.internalFormat,Pe,Ve,te.colorSpace);n.get(D).__hasExternalTextures||(ve===i.TEXTURE_3D||ve===i.TEXTURE_2D_ARRAY?t.texImage3D(ve,0,Oe,D.width,D.height,D.depth,0,Pe,Ve,null):t.texImage2D(ve,0,Oe,D.width,D.height,0,Pe,Ve,null)),t.bindFramebuffer(i.FRAMEBUFFER,q),Ee(D)?f.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,me,ve,n.get(te).__webglTexture,0,ye(D)):(ve===i.TEXTURE_2D||ve>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ve<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,me,ve,n.get(te).__webglTexture,0),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ce(q,D,te){if(i.bindRenderbuffer(i.RENDERBUFFER,q),D.depthBuffer&&!D.stencilBuffer){let me=i.DEPTH_COMPONENT16;if(te||Ee(D)){let ve=D.depthTexture;ve&&ve.isDepthTexture&&(ve.type===Ni?me=i.DEPTH_COMPONENT32F:ve.type===vr&&(me=i.DEPTH_COMPONENT24));let Pe=ye(D);Ee(D)?f.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Pe,me,D.width,D.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,Pe,me,D.width,D.height)}else i.renderbufferStorage(i.RENDERBUFFER,me,D.width,D.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,q)}else if(D.depthBuffer&&D.stencilBuffer){let me=ye(D);te&&Ee(D)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,me,i.DEPTH24_STENCIL8,D.width,D.height):Ee(D)?f.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,me,i.DEPTH24_STENCIL8,D.width,D.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,D.width,D.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,q)}else{let me=D.isWebGLMultipleRenderTargets===!0?D.texture:[D.texture];for(let ve=0;ve<me.length;ve++){let Pe=me[ve],Ve=s.convert(Pe.format,Pe.colorSpace),Oe=s.convert(Pe.type),oe=C(Pe.internalFormat,Ve,Oe,Pe.colorSpace),Ne=ye(D);te&&Ee(D)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ne,oe,D.width,D.height):Ee(D)?f.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ne,oe,D.width,D.height):i.renderbufferStorage(i.RENDERBUFFER,oe,D.width,D.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function fe(q,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,q),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),ce(D.depthTexture,0);let me=n.get(D.depthTexture).__webglTexture,ve=ye(D);if(D.depthTexture.format===xr)Ee(D)?f.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,me,0,ve):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,me,0);else if(D.depthTexture.format===Ps)Ee(D)?f.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,me,0,ve):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,me,0);else throw new Error("Unknown depthTexture format")}function L(q){let D=n.get(q),te=q.isWebGLCubeRenderTarget===!0;if(q.depthTexture&&!D.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");fe(D.__webglFramebuffer,q)}else if(te){D.__webglDepthbuffer=[];for(let me=0;me<6;me++)t.bindFramebuffer(i.FRAMEBUFFER,D.__webglFramebuffer[me]),D.__webglDepthbuffer[me]=i.createRenderbuffer(),Ce(D.__webglDepthbuffer[me],q,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer=i.createRenderbuffer(),Ce(D.__webglDepthbuffer,q,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}function N(q,D,te){let me=n.get(q);D!==void 0&&he(me.__webglFramebuffer,q,q.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D),te!==void 0&&L(q)}function Q(q){let D=q.texture,te=n.get(q),me=n.get(D);q.addEventListener("dispose",j),q.isWebGLMultipleRenderTargets!==!0&&(me.__webglTexture===void 0&&(me.__webglTexture=i.createTexture()),me.__version=D.version,a.memory.textures++);let ve=q.isWebGLCubeRenderTarget===!0,Pe=q.isWebGLMultipleRenderTargets===!0,Ve=b(q)||o;if(ve){te.__webglFramebuffer=[];for(let Oe=0;Oe<6;Oe++)te.__webglFramebuffer[Oe]=i.createFramebuffer()}else{if(te.__webglFramebuffer=i.createFramebuffer(),Pe)if(r.drawBuffers){let Oe=q.texture;for(let oe=0,Ne=Oe.length;oe<Ne;oe++){let Ue=n.get(Oe[oe]);Ue.__webglTexture===void 0&&(Ue.__webglTexture=i.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&q.samples>0&&Ee(q)===!1){let Oe=Pe?D:[D];te.__webglMultisampledFramebuffer=i.createFramebuffer(),te.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let oe=0;oe<Oe.length;oe++){let Ne=Oe[oe];te.__webglColorRenderbuffer[oe]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,te.__webglColorRenderbuffer[oe]);let Ue=s.convert(Ne.format,Ne.colorSpace),He=s.convert(Ne.type),Ie=C(Ne.internalFormat,Ue,He,Ne.colorSpace,q.isXRRenderTarget===!0),Fe=ye(q);i.renderbufferStorageMultisample(i.RENDERBUFFER,Fe,Ie,q.width,q.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+oe,i.RENDERBUFFER,te.__webglColorRenderbuffer[oe])}i.bindRenderbuffer(i.RENDERBUFFER,null),q.depthBuffer&&(te.__webglDepthRenderbuffer=i.createRenderbuffer(),Ce(te.__webglDepthRenderbuffer,q,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(ve){t.bindTexture(i.TEXTURE_CUBE_MAP,me.__webglTexture),be(i.TEXTURE_CUBE_MAP,D,Ve);for(let Oe=0;Oe<6;Oe++)he(te.__webglFramebuffer[Oe],q,D,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe);T(D,Ve)&&P(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Pe){let Oe=q.texture;for(let oe=0,Ne=Oe.length;oe<Ne;oe++){let Ue=Oe[oe],He=n.get(Ue);t.bindTexture(i.TEXTURE_2D,He.__webglTexture),be(i.TEXTURE_2D,Ue,Ve),he(te.__webglFramebuffer,q,Ue,i.COLOR_ATTACHMENT0+oe,i.TEXTURE_2D),T(Ue,Ve)&&P(i.TEXTURE_2D)}t.unbindTexture()}else{let Oe=i.TEXTURE_2D;(q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(o?Oe=q.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Oe,me.__webglTexture),be(Oe,D,Ve),he(te.__webglFramebuffer,q,D,i.COLOR_ATTACHMENT0,Oe),T(D,Ve)&&P(Oe),t.unbindTexture()}q.depthBuffer&&L(q)}function $(q){let D=b(q)||o,te=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let me=0,ve=te.length;me<ve;me++){let Pe=te[me];if(T(Pe,D)){let Ve=q.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,Oe=n.get(Pe).__webglTexture;t.bindTexture(Ve,Oe),P(Ve),t.unbindTexture()}}}function pe(q){if(o&&q.samples>0&&Ee(q)===!1){let D=q.isWebGLMultipleRenderTargets?q.texture:[q.texture],te=q.width,me=q.height,ve=i.COLOR_BUFFER_BIT,Pe=[],Ve=q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Oe=n.get(q),oe=q.isWebGLMultipleRenderTargets===!0;if(oe)for(let Ne=0;Ne<D.length;Ne++)t.bindFramebuffer(i.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ne,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Oe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ne,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Oe.__webglFramebuffer);for(let Ne=0;Ne<D.length;Ne++){Pe.push(i.COLOR_ATTACHMENT0+Ne),q.depthBuffer&&Pe.push(Ve);let Ue=Oe.__ignoreDepthValues!==void 0?Oe.__ignoreDepthValues:!1;if(Ue===!1&&(q.depthBuffer&&(ve|=i.DEPTH_BUFFER_BIT),q.stencilBuffer&&(ve|=i.STENCIL_BUFFER_BIT)),oe&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Oe.__webglColorRenderbuffer[Ne]),Ue===!0&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[Ve]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Ve])),oe){let He=n.get(D[Ne]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,He,0)}i.blitFramebuffer(0,0,te,me,0,0,te,me,ve,i.NEAREST),h&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Pe)}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),oe)for(let Ne=0;Ne<D.length;Ne++){t.bindFramebuffer(i.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ne,i.RENDERBUFFER,Oe.__webglColorRenderbuffer[Ne]);let Ue=n.get(D[Ne]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Oe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ne,i.TEXTURE_2D,Ue,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Oe.__webglMultisampledFramebuffer)}}function ye(q){return Math.min(d,q.samples)}function Ee(q){let D=n.get(q);return o&&q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function ze(q){let D=a.render.frame;p.get(q)!==D&&(p.set(q,D),q.update())}function Xe(q,D){let te=q.colorSpace,me=q.format,ve=q.type;return q.isCompressedTexture===!0||q.format===__||te!==Gn&&te!==br&&(te===$e?o===!1?e.has("EXT_sRGB")===!0&&me===_n?(q.format=__,q.minFilter=Lt,q.generateMipmaps=!1):D=Ul.sRGBToLinear(D):(me!==_n||ve!==Er)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",te)),D}this.allocateTextureUnit=ne,this.resetTextureUnits=Z,this.setTexture2D=ce,this.setTexture2DArray=Te,this.setTexture3D=xe,this.setTextureCube=K,this.rebindTextures=N,this.setupRenderTarget=Q,this.updateRenderTargetMipmap=$,this.updateMultisampleRenderTarget=pe,this.setupDepthRenderbuffer=L,this.setupFrameBufferTexture=he,this.useMultisampledRTT=Ee}function xz(i,e,t){let n=t.isWebGL2;function r(s,a=br){let o;if(s===Er)return i.UNSIGNED_BYTE;if(s===WB)return i.UNSIGNED_SHORT_4_4_4_4;if(s===VB)return i.UNSIGNED_SHORT_5_5_5_1;if(s===BB)return i.BYTE;if(s===zB)return i.SHORT;if(s===Vw)return i.UNSIGNED_SHORT;if(s===HB)return i.INT;if(s===vr)return i.UNSIGNED_INT;if(s===Ni)return i.FLOAT;if(s===yo)return n?i.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===GB)return i.ALPHA;if(s===_n)return i.RGBA;if(s===jB)return i.LUMINANCE;if(s===YB)return i.LUMINANCE_ALPHA;if(s===xr)return i.DEPTH_COMPONENT;if(s===Ps)return i.DEPTH_STENCIL;if(s===__)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===XB)return i.RED;if(s===$B)return i.RED_INTEGER;if(s===ZB)return i.RG;if(s===JB)return i.RG_INTEGER;if(s===KB)return i.RGBA_INTEGER;if(s===l_||s===c_||s===d_||s===f_)if(a===$e)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===l_)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===c_)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===d_)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===f_)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===l_)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===c_)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===d_)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===f_)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===qM||s===NM||s===kM||s===FM)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===qM)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===NM)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===kM)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===FM)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===QB)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===UM||s===BM)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===UM)return a===$e?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===BM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===zM||s===HM||s===WM||s===VM||s===GM||s===jM||s===YM||s===XM||s===$M||s===ZM||s===JM||s===KM||s===QM||s===eS)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===zM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===HM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===WM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===VM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===GM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===jM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===YM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===XM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===$M)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===ZM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===JM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===KM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===QM)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===eS)return a===$e?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===h_)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===h_)return a===$e?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===ez||s===tS||s===nS||s===iS)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(s===h_)return o.COMPRESSED_RED_RGTC1_EXT;if(s===tS)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===nS)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===iS)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ts?n?i.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):i[s]!==void 0?i[s]:null}return{convert:r}}var b_=class extends kt{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},_r=class extends ft{constructor(){super(),this.isGroup=!0,this.type="Group"}},Lye={type:"move"},Pl=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new _r,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new _r,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new I,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new I),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new _r,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new I,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new I),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,a=null,o=this._targetRay,u=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){a=!0;for(let v of e.hand.values()){let g=t.getJointPose(v,n),m=this._getHandJoint(l,v);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}let c=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],f=c.position.distanceTo(d.position),h=.02,p=.005;l.inputState.pinching&&f>h+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=h-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Lye)))}return o!==null&&(o.visible=r!==null),u!==null&&(u.visible=s!==null),l!==null&&(l.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let n=new _r;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}},M_=class extends Tt{constructor(e,t,n,r,s,a,o,u,l,c){if(c=c!==void 0?c:xr,c!==xr&&c!==Ps)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===xr&&(n=vr),n===void 0&&c===Ps&&(n=Ts),super(null,r,s,a,o,u,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:It,this.minFilter=u!==void 0?u:It,this.flipY=!1,this.generateMipmaps=!1}},MS=class extends jn{constructor(e,t){super();let n=this,r=null,s=1,a=null,o="local-floor",u=1,l=null,c=null,d=null,f=null,h=null,p=null,v=t.getContextAttributes(),g=null,m=null,y=[],_=[],b=new Set,M=new Map,T=new kt;T.layers.enable(1),T.viewport=new gt;let P=new kt;P.layers.enable(2),P.viewport=new gt;let C=[T,P],S=new b_;S.layers.enable(1),S.layers.enable(2);let A=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let ue=y[K];return ue===void 0&&(ue=new Pl,y[K]=ue),ue.getTargetRaySpace()},this.getControllerGrip=function(K){let ue=y[K];return ue===void 0&&(ue=new Pl,y[K]=ue),ue.getGripSpace()},this.getHand=function(K){let ue=y[K];return ue===void 0&&(ue=new Pl,y[K]=ue),ue.getHandSpace()};function j(K){let ue=_.indexOf(K.inputSource);if(ue===-1)return;let _e=y[ue];_e!==void 0&&(_e.update(K.inputSource,K.frame,l||a),_e.dispatchEvent({type:K.type,data:K.inputSource}))}function W(){r.removeEventListener("select",j),r.removeEventListener("selectstart",j),r.removeEventListener("selectend",j),r.removeEventListener("squeeze",j),r.removeEventListener("squeezestart",j),r.removeEventListener("squeezeend",j),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",G);for(let K=0;K<y.length;K++){let ue=_[K];ue!==null&&(_[K]=null,y[K].disconnect(ue))}A=null,z=null,e.setRenderTarget(g),h=null,f=null,d=null,r=null,m=null,xe.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){s=K,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){o=K,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(K){l=K},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(K){return pn(this,null,function*(){if(r=K,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",j),r.addEventListener("selectstart",j),r.addEventListener("selectend",j),r.addEventListener("squeeze",j),r.addEventListener("squeezestart",j),r.addEventListener("squeezeend",j),r.addEventListener("end",W),r.addEventListener("inputsourceschange",G),v.xrCompatible!==!0&&(yield t.makeXRCompatible()),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let ue={antialias:r.renderState.layers===void 0?v.antialias:!0,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(r,t,ue),r.updateRenderState({baseLayer:h}),m=new bn(h.framebufferWidth,h.framebufferHeight,{format:_n,type:Er,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let ue=null,_e=null,be=null;v.depth&&(be=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ue=v.stencil?Ps:xr,_e=v.stencil?Ts:vr);let B={colorFormat:t.RGBA8,depthFormat:be,scaleFactor:s};d=new XRWebGLBinding(r,t),f=d.createProjectionLayer(B),r.updateRenderState({layers:[f]}),m=new bn(f.textureWidth,f.textureHeight,{format:_n,type:Er,depthTexture:new M_(f.textureWidth,f.textureHeight,_e,void 0,void 0,void 0,void 0,void 0,void 0,ue),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});let De=e.properties.get(m);De.__ignoreDepthValues=f.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(u),l=null,a=yield r.requestReferenceSpace(o),xe.setContext(r),xe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function G(K){for(let ue=0;ue<K.removed.length;ue++){let _e=K.removed[ue],be=_.indexOf(_e);be>=0&&(_[be]=null,y[be].disconnect(_e))}for(let ue=0;ue<K.added.length;ue++){let _e=K.added[ue],be=_.indexOf(_e);if(be===-1){for(let De=0;De<y.length;De++)if(De>=_.length){_.push(_e),be=De;break}else if(_[De]===null){_[De]=_e,be=De;break}if(be===-1)break}let B=y[be];B&&B.connect(_e)}}let V=new I,J=new I;function Z(K,ue,_e){V.setFromMatrixPosition(ue.matrixWorld),J.setFromMatrixPosition(_e.matrixWorld);let be=V.distanceTo(J),B=ue.projectionMatrix.elements,De=_e.projectionMatrix.elements,Se=B[14]/(B[10]-1),he=B[14]/(B[10]+1),Ce=(B[9]+1)/B[5],fe=(B[9]-1)/B[5],L=(B[8]-1)/B[0],N=(De[8]+1)/De[0],Q=Se*L,$=Se*N,pe=be/(-L+N),ye=pe*-L;ue.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(ye),K.translateZ(pe),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert();let Ee=Se+pe,ze=he+pe,Xe=Q-ye,q=$+(be-ye),D=Ce*he/ze*Ee,te=fe*he/ze*Ee;K.projectionMatrix.makePerspective(Xe,q,D,te,Ee,ze),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}function ne(K,ue){ue===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(ue.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(r===null)return;S.near=P.near=T.near=K.near,S.far=P.far=T.far=K.far,(A!==S.near||z!==S.far)&&(r.updateRenderState({depthNear:S.near,depthFar:S.far}),A=S.near,z=S.far);let ue=K.parent,_e=S.cameras;ne(S,ue);for(let be=0;be<_e.length;be++)ne(_e[be],ue);_e.length===2?Z(S,T,P):S.projectionMatrix.copy(T.projectionMatrix),re(K,S,ue)};function re(K,ue,_e){_e===null?K.matrix.copy(ue.matrixWorld):(K.matrix.copy(_e.matrixWorld),K.matrix.invert(),K.matrix.multiply(ue.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0);let be=K.children;for(let B=0,De=be.length;B<De;B++)be[B].updateMatrixWorld(!0);K.projectionMatrix.copy(ue.projectionMatrix),K.projectionMatrixInverse.copy(ue.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=bo*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return S},this.getFoveation=function(){if(!(f===null&&h===null))return u},this.setFoveation=function(K){u=K,f!==null&&(f.fixedFoveation=K),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=K)},this.getPlanes=function(){return b};let ce=null;function Te(K,ue){if(c=ue.getViewerPose(l||a),p=ue,c!==null){let _e=c.views;h!==null&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let be=!1;_e.length!==S.cameras.length&&(S.cameras.length=0,be=!0);for(let B=0;B<_e.length;B++){let De=_e[B],Se=null;if(h!==null)Se=h.getViewport(De);else{let Ce=d.getViewSubImage(f,De);Se=Ce.viewport,B===0&&(e.setRenderTargetTextures(m,Ce.colorTexture,f.ignoreDepthValues?void 0:Ce.depthStencilTexture),e.setRenderTarget(m))}let he=C[B];he===void 0&&(he=new kt,he.layers.enable(B),he.viewport=new gt,C[B]=he),he.matrix.fromArray(De.transform.matrix),he.matrix.decompose(he.position,he.quaternion,he.scale),he.projectionMatrix.fromArray(De.projectionMatrix),he.projectionMatrixInverse.copy(he.projectionMatrix).invert(),he.viewport.set(Se.x,Se.y,Se.width,Se.height),B===0&&(S.matrix.copy(he.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),be===!0&&S.cameras.push(he)}}for(let _e=0;_e<y.length;_e++){let be=_[_e],B=y[_e];be!==null&&B!==void 0&&B.update(be,ue,l||a)}if(ce&&ce(K,ue),ue.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:ue.detectedPlanes});let _e=null;for(let be of b)ue.detectedPlanes.has(be)||(_e===null&&(_e=[]),_e.push(be));if(_e!==null)for(let be of _e)b.delete(be),M.delete(be),n.dispatchEvent({type:"planeremoved",data:be});for(let be of ue.detectedPlanes)if(!b.has(be))b.add(be),M.set(be,ue.lastChangedTime),n.dispatchEvent({type:"planeadded",data:be});else{let B=M.get(be);be.lastChangedTime>B&&(M.set(be,be.lastChangedTime),n.dispatchEvent({type:"planechanged",data:be}))}}p=null}let xe=new pz;xe.setAnimationLoop(Te),this.setAnimationLoop=function(K){ce=K},this.dispose=function(){}}};function qye(i,e){function t(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function n(g,m){m.color.getRGB(g.fogColor.value,fz(i)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function r(g,m,y,_,b){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(g,m):m.isMeshToonMaterial?(s(g,m),d(g,m)):m.isMeshPhongMaterial?(s(g,m),c(g,m)):m.isMeshStandardMaterial?(s(g,m),f(g,m),m.isMeshPhysicalMaterial&&h(g,m,b)):m.isMeshMatcapMaterial?(s(g,m),p(g,m)):m.isMeshDepthMaterial?s(g,m):m.isMeshDistanceMaterial?(s(g,m),v(g,m)):m.isMeshNormalMaterial?s(g,m):m.isLineBasicMaterial?(a(g,m),m.isLineDashedMaterial&&o(g,m)):m.isPointsMaterial?u(g,m,y,_):m.isSpriteMaterial?l(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,t(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===an&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,t(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===an&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,t(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,t(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);let y=e.get(m).envMap;if(y&&(g.envMap.value=y,g.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap){g.lightMap.value=m.lightMap;let _=i.useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=m.lightMapIntensity*_,t(m.lightMap,g.lightMapTransform)}m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,g.aoMapTransform))}function a(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform))}function o(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function u(g,m,y,_){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*y,g.scale.value=_*.5,m.map&&(g.map.value=m.map,t(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function l(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function c(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function d(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function f(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,g.roughnessMapTransform)),e.get(m).envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function h(g,m,y){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===an&&g.clearcoatNormalScale.value.negate())),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=y.texture,g.transmissionSamplerSize.value.set(y.width,y.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,m){m.matcap&&(g.matcap.value=m.matcap)}function v(g,m){let y=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(y.matrixWorld),g.nearDistance.value=y.shadow.camera.near,g.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function Nye(i,e,t,n){let r={},s={},a=[],o=t.isWebGL2?i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS):0;function u(y,_){let b=_.program;n.uniformBlockBinding(y,b)}function l(y,_){let b=r[y.id];b===void 0&&(p(y),b=c(y),r[y.id]=b,y.addEventListener("dispose",g));let M=_.program;n.updateUBOMapping(y,M);let T=e.render.frame;s[y.id]!==T&&(f(y),s[y.id]=T)}function c(y){let _=d();y.__bindingPointIndex=_;let b=i.createBuffer(),M=y.__size,T=y.usage;return i.bindBuffer(i.UNIFORM_BUFFER,b),i.bufferData(i.UNIFORM_BUFFER,M,T),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,_,b),b}function d(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){let _=r[y.id],b=y.uniforms,M=y.__cache;i.bindBuffer(i.UNIFORM_BUFFER,_);for(let T=0,P=b.length;T<P;T++){let C=b[T];if(h(C,T,M)===!0){let S=C.__offset,A=Array.isArray(C.value)?C.value:[C.value],z=0;for(let j=0;j<A.length;j++){let W=A[j],G=v(W);typeof W=="number"?(C.__data[0]=W,i.bufferSubData(i.UNIFORM_BUFFER,S+z,C.__data)):W.isMatrix3?(C.__data[0]=W.elements[0],C.__data[1]=W.elements[1],C.__data[2]=W.elements[2],C.__data[3]=W.elements[0],C.__data[4]=W.elements[3],C.__data[5]=W.elements[4],C.__data[6]=W.elements[5],C.__data[7]=W.elements[0],C.__data[8]=W.elements[6],C.__data[9]=W.elements[7],C.__data[10]=W.elements[8],C.__data[11]=W.elements[0]):(W.toArray(C.__data,z),z+=G.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,S,C.__data)}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function h(y,_,b){let M=y.value;if(b[_]===void 0){if(typeof M=="number")b[_]=M;else{let T=Array.isArray(M)?M:[M],P=[];for(let C=0;C<T.length;C++)P.push(T[C].clone());b[_]=P}return!0}else if(typeof M=="number"){if(b[_]!==M)return b[_]=M,!0}else{let T=Array.isArray(b[_])?b[_]:[b[_]],P=Array.isArray(M)?M:[M];for(let C=0;C<T.length;C++){let S=T[C];if(S.equals(P[C])===!1)return S.copy(P[C]),!0}}return!1}function p(y){let _=y.uniforms,b=0,M=16,T=0;for(let P=0,C=_.length;P<C;P++){let S=_[P],A={boundary:0,storage:0},z=Array.isArray(S.value)?S.value:[S.value];for(let j=0,W=z.length;j<W;j++){let G=z[j],V=v(G);A.boundary+=V.boundary,A.storage+=V.storage}if(S.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),S.__offset=b,P>0){T=b%M;let j=M-T;T!==0&&j-A.boundary<0&&(b+=M-T,S.__offset=b)}b+=A.storage}return T=b%M,T>0&&(b+=M-T),y.__size=b,y.__cache={},this}function v(y){let _={boundary:0,storage:0};return typeof y=="number"?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function g(y){let _=y.target;_.removeEventListener("dispose",g);let b=a.indexOf(_.__bindingPointIndex);a.splice(b,1),i.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}function m(){for(let y in r)i.deleteBuffer(r[y]);a=[],r={},s={}}return{bind:u,update:l,dispose:m}}function kye(){let i=Fl("canvas");return i.style.display="block",i}var S_=class{constructor(e={}){let{canvas:t=kye(),context:n=null,depth:r=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let f;n!==null?f=n.getContextAttributes().alpha:f=a;let h=null,p=null,v=[],g=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=$e,this.useLegacyLights=!0,this.toneMapping=ci,this.toneMappingExposure=1;let m=this,y=!1,_=0,b=0,M=null,T=-1,P=null,C=new gt,S=new gt,A=null,z=t.width,j=t.height,W=1,G=null,V=null,J=new gt(0,0,z,j),Z=new gt(0,0,z,j),ne=!1,re=new Eo,ce=!1,Te=!1,xe=null,K=new Ye,ue=new I,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function be(){return M===null?W:1}let B=n;function De(O,X){for(let ae=0;ae<O.length;ae++){let Y=O[ae],le=t.getContext(Y,X);if(le!==null)return le}return null}try{let O={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:u,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${c0}`),t.addEventListener("webglcontextlost",Fe,!1),t.addEventListener("webglcontextrestored",at,!1),t.addEventListener("webglcontextcreationerror",xt,!1),B===null){let X=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&X.shift(),B=De(X,O),B===null)throw De(X)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}B.getShaderPrecisionFormat===void 0&&(B.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let Se,he,Ce,fe,L,N,Q,$,pe,ye,Ee,ze,Xe,q,D,te,me,ve,Pe,Ve,Oe,oe,Ne,Ue;function He(){Se=new sxe(B),he=new Q0e(B,Se,e),Se.init(he),oe=new xz(B,Se,he),Ce=new Oye(B,Se,he),fe=new uxe(B),L=new yye,N=new Iye(B,Se,Ce,L,he,oe,fe),Q=new txe(m),$=new rxe(m),pe=new yve(B,he),Ne=new J0e(B,Se,pe,he),ye=new axe(B,pe,fe,Ne),Ee=new fxe(B,ye,pe,fe),Pe=new dxe(B,he,N),te=new exe(L),ze=new xye(m,Q,$,Se,he,Ne,te),Xe=new qye(m,L),q=new Mye,D=new Aye(Se,he),ve=new Z0e(m,Q,$,Ce,Ee,f,u),me=new Cye(m,Ee,he),Ue=new Nye(B,fe,he,Ce),Ve=new K0e(B,Se,fe,he),Oe=new oxe(B,Se,fe,he),fe.programs=ze.programs,m.capabilities=he,m.extensions=Se,m.properties=L,m.renderLists=q,m.shadowMap=me,m.state=Ce,m.info=fe}He();let Ie=new MS(m,B);this.xr=Ie,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){let O=Se.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){let O=Se.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(O){O!==void 0&&(W=O,this.setSize(z,j,!1))},this.getSize=function(O){return O.set(z,j)},this.setSize=function(O,X,ae=!0){if(Ie.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=O,j=X,t.width=Math.floor(O*W),t.height=Math.floor(X*W),ae===!0&&(t.style.width=O+"px",t.style.height=X+"px"),this.setViewport(0,0,O,X)},this.getDrawingBufferSize=function(O){return O.set(z*W,j*W).floor()},this.setDrawingBufferSize=function(O,X,ae){z=O,j=X,W=ae,t.width=Math.floor(O*ae),t.height=Math.floor(X*ae),this.setViewport(0,0,O,X)},this.getCurrentViewport=function(O){return O.copy(C)},this.getViewport=function(O){return O.copy(J)},this.setViewport=function(O,X,ae,Y){O.isVector4?J.set(O.x,O.y,O.z,O.w):J.set(O,X,ae,Y),Ce.viewport(C.copy(J).multiplyScalar(W).floor())},this.getScissor=function(O){return O.copy(Z)},this.setScissor=function(O,X,ae,Y){O.isVector4?Z.set(O.x,O.y,O.z,O.w):Z.set(O,X,ae,Y),Ce.scissor(S.copy(Z).multiplyScalar(W).floor())},this.getScissorTest=function(){return ne},this.setScissorTest=function(O){Ce.setScissorTest(ne=O)},this.setOpaqueSort=function(O){G=O},this.setTransparentSort=function(O){V=O},this.getClearColor=function(O){return O.copy(ve.getClearColor())},this.setClearColor=function(){ve.setClearColor.apply(ve,arguments)},this.getClearAlpha=function(){return ve.getClearAlpha()},this.setClearAlpha=function(){ve.setClearAlpha.apply(ve,arguments)},this.clear=function(O=!0,X=!0,ae=!0){let Y=0;O&&(Y|=B.COLOR_BUFFER_BIT),X&&(Y|=B.DEPTH_BUFFER_BIT),ae&&(Y|=B.STENCIL_BUFFER_BIT),B.clear(Y)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Fe,!1),t.removeEventListener("webglcontextrestored",at,!1),t.removeEventListener("webglcontextcreationerror",xt,!1),q.dispose(),D.dispose(),L.dispose(),Q.dispose(),$.dispose(),Ee.dispose(),Ne.dispose(),Ue.dispose(),ze.dispose(),Ie.dispose(),Ie.removeEventListener("sessionstart",ke),Ie.removeEventListener("sessionend",bt),xe&&(xe.dispose(),xe=null),Mt.stop()};function Fe(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function at(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;let O=fe.autoReset,X=me.enabled,ae=me.autoUpdate,Y=me.needsUpdate,le=me.type;He(),fe.autoReset=O,me.enabled=X,me.autoUpdate=ae,me.needsUpdate=Y,me.type=le}function xt(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function At(O){let X=O.target;X.removeEventListener("dispose",At),H(X)}function H(O){se(O),L.remove(O)}function se(O){let X=L.get(O).programs;X!==void 0&&(X.forEach(function(ae){ze.releaseProgram(ae)}),O.isShaderMaterial&&ze.releaseShaderCache(O))}this.renderBufferDirect=function(O,X,ae,Y,le,Be){X===null&&(X=_e);let We=le.isMesh&&le.matrixWorld.determinant()<0,je=Iz(O,X,ae,Y,le);Ce.setMaterial(Y,We);let Qe=ae.index,nt=1;Y.wireframe===!0&&(Qe=ye.getWireframeAttribute(ae),nt=2);let it=ae.drawRange,rt=ae.attributes.position,yt=it.start*nt,en=(it.start+it.count)*nt;Be!==null&&(yt=Math.max(yt,Be.start*nt),en=Math.min(en,(Be.start+Be.count)*nt)),Qe!==null?(yt=Math.max(yt,0),en=Math.min(en,Qe.count)):rt!=null&&(yt=Math.max(yt,0),en=Math.min(en,rt.count));let qn=en-yt;if(qn<0||qn===1/0)return;Ne.setup(le,Y,je,ae,Qe);let qr,qt=Ve;if(Qe!==null&&(qr=pe.get(Qe),qt=Oe,qt.setIndex(qr)),le.isMesh)Y.wireframe===!0?(Ce.setLineWidth(Y.wireframeLinewidth*be()),qt.setMode(B.LINES)):qt.setMode(B.TRIANGLES);else if(le.isLine){let ot=Y.linewidth;ot===void 0&&(ot=1),Ce.setLineWidth(ot*be()),le.isLineSegments?qt.setMode(B.LINES):le.isLineLoop?qt.setMode(B.LINE_LOOP):qt.setMode(B.LINE_STRIP)}else le.isPoints?qt.setMode(B.POINTS):le.isSprite&&qt.setMode(B.TRIANGLES);if(le.isInstancedMesh)qt.renderInstances(yt,qn,le.count);else if(ae.isInstancedBufferGeometry){let ot=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,y0=Math.min(ae.instanceCount,ot);qt.renderInstances(yt,qn,y0)}else qt.render(yt,qn)},this.compile=function(O,X){function ae(Y,le,Be){Y.transparent===!0&&Y.side===li&&Y.forceSinglePass===!1?(Y.side=an,Y.needsUpdate=!0,mc(Y,le,Be),Y.side=Bi,Y.needsUpdate=!0,mc(Y,le,Be),Y.side=li):mc(Y,le,Be)}p=D.get(O),p.init(),g.push(p),O.traverseVisible(function(Y){Y.isLight&&Y.layers.test(X.layers)&&(p.pushLight(Y),Y.castShadow&&p.pushShadow(Y))}),p.setupLights(m.useLegacyLights),O.traverse(function(Y){let le=Y.material;if(le)if(Array.isArray(le))for(let Be=0;Be<le.length;Be++){let We=le[Be];ae(We,O,Y)}else ae(le,O,Y)}),g.pop(),p=null};let ge=null;function Re(O){ge&&ge(O)}function ke(){Mt.stop()}function bt(){Mt.start()}let Mt=new pz;Mt.setAnimationLoop(Re),typeof self!="undefined"&&Mt.setContext(self),this.setAnimationLoop=function(O){ge=O,Ie.setAnimationLoop(O),O===null?Mt.stop():Mt.start()},Ie.addEventListener("sessionstart",ke),Ie.addEventListener("sessionend",bt),this.render=function(O,X){if(X!==void 0&&X.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),X.parent===null&&X.matrixWorldAutoUpdate===!0&&X.updateMatrixWorld(),Ie.enabled===!0&&Ie.isPresenting===!0&&(Ie.cameraAutoUpdate===!0&&Ie.updateCamera(X),X=Ie.getCamera()),O.isScene===!0&&O.onBeforeRender(m,O,X,M),p=D.get(O,g.length),p.init(),g.push(p),K.multiplyMatrices(X.projectionMatrix,X.matrixWorldInverse),re.setFromProjectionMatrix(K),Te=this.localClippingEnabled,ce=te.init(this.clippingPlanes,Te),h=q.get(O,v.length),h.init(),v.push(h),jt(O,X,0,m.sortObjects),h.finish(),m.sortObjects===!0&&h.sort(G,V),ce===!0&&te.beginShadows();let ae=p.state.shadowsArray;if(me.render(ae,O,X),ce===!0&&te.endShadows(),this.info.autoReset===!0&&this.info.reset(),ve.render(h,O),p.setupLights(m.useLegacyLights),X.isArrayCamera){let Y=X.cameras;for(let le=0,Be=Y.length;le<Be;le++){let We=Y[le];ji(h,O,We,We.viewport)}}else ji(h,O,X);M!==null&&(N.updateMultisampleRenderTarget(M),N.updateRenderTargetMipmap(M)),O.isScene===!0&&O.onAfterRender(m,O,X),Ne.resetDefaultState(),T=-1,P=null,g.pop(),g.length>0?p=g[g.length-1]:p=null,v.pop(),v.length>0?h=v[v.length-1]:h=null};function jt(O,X,ae,Y){if(O.visible===!1)return;if(O.layers.test(X.layers)){if(O.isGroup)ae=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(X);else if(O.isLight)p.pushLight(O),O.castShadow&&p.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||re.intersectsSprite(O)){Y&&ue.setFromMatrixPosition(O.matrixWorld).applyMatrix4(K);let We=Ee.update(O),je=O.material;je.visible&&h.push(O,We,je,ae,ue.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||re.intersectsObject(O))){O.isSkinnedMesh&&O.skeleton.frame!==fe.render.frame&&(O.skeleton.update(),O.skeleton.frame=fe.render.frame);let We=Ee.update(O),je=O.material;if(Y&&(We.boundingSphere===null&&We.computeBoundingSphere(),ue.copy(We.boundingSphere.center).applyMatrix4(O.matrixWorld).applyMatrix4(K)),Array.isArray(je)){let Qe=We.groups;for(let nt=0,it=Qe.length;nt<it;nt++){let rt=Qe[nt],yt=je[rt.materialIndex];yt&&yt.visible&&h.push(O,We,yt,ae,ue.z,rt)}}else je.visible&&h.push(O,We,je,ae,ue.z,null)}}let Be=O.children;for(let We=0,je=Be.length;We<je;We++)jt(Be[We],X,ae,Y)}function ji(O,X,ae,Y){let le=O.opaque,Be=O.transmissive,We=O.transparent;p.setupLightsView(ae),ce===!0&&te.setGlobalState(m.clippingPlanes,ae),Be.length>0&&Dt(le,Be,X,ae),Y&&Ce.viewport(C.copy(Y)),le.length>0&&wn(le,X,ae),Be.length>0&&wn(Be,X,ae),We.length>0&&wn(We,X,ae),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1)}function Dt(O,X,ae,Y){if(xe===null){let je=he.isWebGL2;xe=new bn(1024,1024,{generateMipmaps:!0,type:Se.has("EXT_color_buffer_half_float")?yo:Er,minFilter:Tr,samples:je&&o===!0?4:0})}let le=m.getRenderTarget();m.setRenderTarget(xe),m.clear();let Be=m.toneMapping;m.toneMapping=ci,wn(O,ae,Y),N.updateMultisampleRenderTarget(xe),N.updateRenderTargetMipmap(xe);let We=!1;for(let je=0,Qe=X.length;je<Qe;je++){let nt=X[je],it=nt.object,rt=nt.geometry,yt=nt.material,en=nt.group;if(yt.side===li&&it.layers.test(Y.layers)){let qn=yt.side;yt.side=an,yt.needsUpdate=!0,$n(it,ae,Y,rt,yt,en),yt.side=qn,yt.needsUpdate=!0,We=!0}}We===!0&&(N.updateMultisampleRenderTarget(xe),N.updateRenderTargetMipmap(xe)),m.setRenderTarget(le),m.toneMapping=Be}function wn(O,X,ae){let Y=X.isScene===!0?X.overrideMaterial:null;for(let le=0,Be=O.length;le<Be;le++){let We=O[le],je=We.object,Qe=We.geometry,nt=Y===null?We.material:Y,it=We.group;je.layers.test(ae.layers)&&$n(je,X,ae,Qe,nt,it)}}function $n(O,X,ae,Y,le,Be){O.onBeforeRender(m,X,ae,Y,le,Be),O.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),le.onBeforeRender(m,X,ae,Y,O,Be),le.transparent===!0&&le.side===li&&le.forceSinglePass===!1?(le.side=an,le.needsUpdate=!0,m.renderBufferDirect(ae,X,Y,le,O,Be),le.side=Bi,le.needsUpdate=!0,m.renderBufferDirect(ae,X,Y,le,O,Be),le.side=li):m.renderBufferDirect(ae,X,Y,le,O,Be),O.onAfterRender(m,X,ae,Y,le,Be)}function mc(O,X,ae){X.isScene!==!0&&(X=_e);let Y=L.get(O),le=p.state.lights,Be=p.state.shadowsArray,We=le.state.version,je=ze.getParameters(O,le.state,Be,X,ae),Qe=ze.getProgramCacheKey(je),nt=Y.programs;Y.environment=O.isMeshStandardMaterial?X.environment:null,Y.fog=X.fog,Y.envMap=(O.isMeshStandardMaterial?$:Q).get(O.envMap||Y.environment),nt===void 0&&(O.addEventListener("dispose",At),nt=new Map,Y.programs=nt);let it=nt.get(Qe);if(it!==void 0){if(Y.currentProgram===it&&Y.lightsStateVersion===We)return aT(O,je),it}else je.uniforms=ze.getUniforms(O),O.onBuild(ae,je,m),O.onBeforeCompile(je,m),it=ze.acquireProgram(je,Qe),nt.set(Qe,it),Y.uniforms=je.uniforms;let rt=Y.uniforms;(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(rt.clippingPlanes=te.uniform),aT(O,je),Y.needsLights=qz(O),Y.lightsStateVersion=We,Y.needsLights&&(rt.ambientLightColor.value=le.state.ambient,rt.lightProbe.value=le.state.probe,rt.directionalLights.value=le.state.directional,rt.directionalLightShadows.value=le.state.directionalShadow,rt.spotLights.value=le.state.spot,rt.spotLightShadows.value=le.state.spotShadow,rt.rectAreaLights.value=le.state.rectArea,rt.ltc_1.value=le.state.rectAreaLTC1,rt.ltc_2.value=le.state.rectAreaLTC2,rt.pointLights.value=le.state.point,rt.pointLightShadows.value=le.state.pointShadow,rt.hemisphereLights.value=le.state.hemi,rt.directionalShadowMap.value=le.state.directionalShadowMap,rt.directionalShadowMatrix.value=le.state.directionalShadowMatrix,rt.spotShadowMap.value=le.state.spotShadowMap,rt.spotLightMatrix.value=le.state.spotLightMatrix,rt.spotLightMap.value=le.state.spotLightMap,rt.pointShadowMap.value=le.state.pointShadowMap,rt.pointShadowMatrix.value=le.state.pointShadowMatrix);let yt=it.getUniforms(),en=xo.seqWithValue(yt.seq,rt);return Y.currentProgram=it,Y.uniformsList=en,it}function aT(O,X){let ae=L.get(O);ae.outputColorSpace=X.outputColorSpace,ae.instancing=X.instancing,ae.skinning=X.skinning,ae.morphTargets=X.morphTargets,ae.morphNormals=X.morphNormals,ae.morphColors=X.morphColors,ae.morphTargetsCount=X.morphTargetsCount,ae.numClippingPlanes=X.numClippingPlanes,ae.numIntersection=X.numClipIntersection,ae.vertexAlphas=X.vertexAlphas,ae.vertexTangents=X.vertexTangents,ae.toneMapping=X.toneMapping}function Iz(O,X,ae,Y,le){X.isScene!==!0&&(X=_e),N.resetTextureUnits();let Be=X.fog,We=Y.isMeshStandardMaterial?X.environment:null,je=M===null?m.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Gn,Qe=(Y.isMeshStandardMaterial?$:Q).get(Y.envMap||We),nt=Y.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,it=!!Y.normalMap&&!!ae.attributes.tangent,rt=!!ae.morphAttributes.position,yt=!!ae.morphAttributes.normal,en=!!ae.morphAttributes.color,qn=Y.toneMapped?m.toneMapping:ci,qr=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,qt=qr!==void 0?qr.length:0,ot=L.get(Y),y0=p.state.lights;if(ce===!0&&(Te===!0||O!==P)){let hn=O===P&&Y.id===T;te.setState(Y,O,hn)}let zt=!1;Y.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==y0.state.version||ot.outputColorSpace!==je||le.isInstancedMesh&&ot.instancing===!1||!le.isInstancedMesh&&ot.instancing===!0||le.isSkinnedMesh&&ot.skinning===!1||!le.isSkinnedMesh&&ot.skinning===!0||ot.envMap!==Qe||Y.fog===!0&&ot.fog!==Be||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==te.numPlanes||ot.numIntersection!==te.numIntersection)||ot.vertexAlphas!==nt||ot.vertexTangents!==it||ot.morphTargets!==rt||ot.morphNormals!==yt||ot.morphColors!==en||ot.toneMapping!==qn||he.isWebGL2===!0&&ot.morphTargetsCount!==qt)&&(zt=!0):(zt=!0,ot.__version=Y.version);let Nr=ot.currentProgram;zt===!0&&(Nr=mc(Y,X,le));let oT=!1,zo=!1,b0=!1,tn=Nr.getUniforms(),kr=ot.uniforms;if(Ce.useProgram(Nr.program)&&(oT=!0,zo=!0,b0=!0),Y.id!==T&&(T=Y.id,zo=!0),oT||P!==O){if(tn.setValue(B,"projectionMatrix",O.projectionMatrix),he.logarithmicDepthBuffer&&tn.setValue(B,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),P!==O&&(P=O,zo=!0,b0=!0),Y.isShaderMaterial||Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshStandardMaterial||Y.envMap){let hn=tn.map.cameraPosition;hn!==void 0&&hn.setValue(B,ue.setFromMatrixPosition(O.matrixWorld))}(Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshLambertMaterial||Y.isMeshBasicMaterial||Y.isMeshStandardMaterial||Y.isShaderMaterial)&&tn.setValue(B,"isOrthographic",O.isOrthographicCamera===!0),(Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshLambertMaterial||Y.isMeshBasicMaterial||Y.isMeshStandardMaterial||Y.isShaderMaterial||Y.isShadowMaterial||le.isSkinnedMesh)&&tn.setValue(B,"viewMatrix",O.matrixWorldInverse)}if(le.isSkinnedMesh){tn.setOptional(B,le,"bindMatrix"),tn.setOptional(B,le,"bindMatrixInverse");let hn=le.skeleton;hn&&(he.floatVertexTextures?(hn.boneTexture===null&&hn.computeBoneTexture(),tn.setValue(B,"boneTexture",hn.boneTexture,N),tn.setValue(B,"boneTextureSize",hn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let M0=ae.morphAttributes;if((M0.position!==void 0||M0.normal!==void 0||M0.color!==void 0&&he.isWebGL2===!0)&&Pe.update(le,ae,Nr),(zo||ot.receiveShadow!==le.receiveShadow)&&(ot.receiveShadow=le.receiveShadow,tn.setValue(B,"receiveShadow",le.receiveShadow)),Y.isMeshGouraudMaterial&&Y.envMap!==null&&(kr.envMap.value=Qe,kr.flipEnvMap.value=Qe.isCubeTexture&&Qe.isRenderTargetTexture===!1?-1:1),zo&&(tn.setValue(B,"toneMappingExposure",m.toneMappingExposure),ot.needsLights&&Lz(kr,b0),Be&&Y.fog===!0&&Xe.refreshFogUniforms(kr,Be),Xe.refreshMaterialUniforms(kr,Y,W,j,xe),xo.upload(B,ot.uniformsList,kr,N)),Y.isShaderMaterial&&Y.uniformsNeedUpdate===!0&&(xo.upload(B,ot.uniformsList,kr,N),Y.uniformsNeedUpdate=!1),Y.isSpriteMaterial&&tn.setValue(B,"center",le.center),tn.setValue(B,"modelViewMatrix",le.modelViewMatrix),tn.setValue(B,"normalMatrix",le.normalMatrix),tn.setValue(B,"modelMatrix",le.matrixWorld),Y.isShaderMaterial||Y.isRawShaderMaterial){let hn=Y.uniformsGroups;for(let S0=0,Nz=hn.length;S0<Nz;S0++)if(he.isWebGL2){let uT=hn[S0];Ue.update(uT,Nr),Ue.bind(uT,Nr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Nr}function Lz(O,X){O.ambientLightColor.needsUpdate=X,O.lightProbe.needsUpdate=X,O.directionalLights.needsUpdate=X,O.directionalLightShadows.needsUpdate=X,O.pointLights.needsUpdate=X,O.pointLightShadows.needsUpdate=X,O.spotLights.needsUpdate=X,O.spotLightShadows.needsUpdate=X,O.rectAreaLights.needsUpdate=X,O.hemisphereLights.needsUpdate=X}function qz(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(O,X,ae){L.get(O.texture).__webglTexture=X,L.get(O.depthTexture).__webglTexture=ae;let Y=L.get(O);Y.__hasExternalTextures=!0,Y.__hasExternalTextures&&(Y.__autoAllocateDepthBuffer=ae===void 0,Y.__autoAllocateDepthBuffer||Se.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Y.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(O,X){let ae=L.get(O);ae.__webglFramebuffer=X,ae.__useDefaultFramebuffer=X===void 0},this.setRenderTarget=function(O,X=0,ae=0){M=O,_=X,b=ae;let Y=!0,le=null,Be=!1,We=!1;if(O){let Qe=L.get(O);Qe.__useDefaultFramebuffer!==void 0?(Ce.bindFramebuffer(B.FRAMEBUFFER,null),Y=!1):Qe.__webglFramebuffer===void 0?N.setupRenderTarget(O):Qe.__hasExternalTextures&&N.rebindTextures(O,L.get(O.texture).__webglTexture,L.get(O.depthTexture).__webglTexture);let nt=O.texture;(nt.isData3DTexture||nt.isDataArrayTexture||nt.isCompressedArrayTexture)&&(We=!0);let it=L.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(le=it[X],Be=!0):he.isWebGL2&&O.samples>0&&N.useMultisampledRTT(O)===!1?le=L.get(O).__webglMultisampledFramebuffer:le=it,C.copy(O.viewport),S.copy(O.scissor),A=O.scissorTest}else C.copy(J).multiplyScalar(W).floor(),S.copy(Z).multiplyScalar(W).floor(),A=ne;if(Ce.bindFramebuffer(B.FRAMEBUFFER,le)&&he.drawBuffers&&Y&&Ce.drawBuffers(O,le),Ce.viewport(C),Ce.scissor(S),Ce.setScissorTest(A),Be){let Qe=L.get(O.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+X,Qe.__webglTexture,ae)}else if(We){let Qe=L.get(O.texture),nt=X||0;B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,Qe.__webglTexture,ae||0,nt)}T=-1},this.readRenderTargetPixels=function(O,X,ae,Y,le,Be,We){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let je=L.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&We!==void 0&&(je=je[We]),je){Ce.bindFramebuffer(B.FRAMEBUFFER,je);try{let Qe=O.texture,nt=Qe.format,it=Qe.type;if(nt!==_n&&oe.convert(nt)!==B.getParameter(B.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let rt=it===yo&&(Se.has("EXT_color_buffer_half_float")||he.isWebGL2&&Se.has("EXT_color_buffer_float"));if(it!==Er&&oe.convert(it)!==B.getParameter(B.IMPLEMENTATION_COLOR_READ_TYPE)&&!(it===Ni&&(he.isWebGL2||Se.has("OES_texture_float")||Se.has("WEBGL_color_buffer_float")))&&!rt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}X>=0&&X<=O.width-Y&&ae>=0&&ae<=O.height-le&&B.readPixels(X,ae,Y,le,oe.convert(nt),oe.convert(it),Be)}finally{let Qe=M!==null?L.get(M).__webglFramebuffer:null;Ce.bindFramebuffer(B.FRAMEBUFFER,Qe)}}},this.copyFramebufferToTexture=function(O,X,ae=0){let Y=Math.pow(2,-ae),le=Math.floor(X.image.width*Y),Be=Math.floor(X.image.height*Y);N.setTexture2D(X,0),B.copyTexSubImage2D(B.TEXTURE_2D,ae,0,0,O.x,O.y,le,Be),Ce.unbindTexture()},this.copyTextureToTexture=function(O,X,ae,Y=0){let le=X.image.width,Be=X.image.height,We=oe.convert(ae.format),je=oe.convert(ae.type);N.setTexture2D(ae,0),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,ae.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,ae.unpackAlignment),X.isDataTexture?B.texSubImage2D(B.TEXTURE_2D,Y,O.x,O.y,le,Be,We,je,X.image.data):X.isCompressedTexture?B.compressedTexSubImage2D(B.TEXTURE_2D,Y,O.x,O.y,X.mipmaps[0].width,X.mipmaps[0].height,We,X.mipmaps[0].data):B.texSubImage2D(B.TEXTURE_2D,Y,O.x,O.y,We,je,X.image),Y===0&&ae.generateMipmaps&&B.generateMipmap(B.TEXTURE_2D),Ce.unbindTexture()},this.copyTextureToTexture3D=function(O,X,ae,Y,le=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let Be=O.max.x-O.min.x+1,We=O.max.y-O.min.y+1,je=O.max.z-O.min.z+1,Qe=oe.convert(Y.format),nt=oe.convert(Y.type),it;if(Y.isData3DTexture)N.setTexture3D(Y,0),it=B.TEXTURE_3D;else if(Y.isDataArrayTexture)N.setTexture2DArray(Y,0),it=B.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,Y.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,Y.unpackAlignment);let rt=B.getParameter(B.UNPACK_ROW_LENGTH),yt=B.getParameter(B.UNPACK_IMAGE_HEIGHT),en=B.getParameter(B.UNPACK_SKIP_PIXELS),qn=B.getParameter(B.UNPACK_SKIP_ROWS),qr=B.getParameter(B.UNPACK_SKIP_IMAGES),qt=ae.isCompressedTexture?ae.mipmaps[0]:ae.image;B.pixelStorei(B.UNPACK_ROW_LENGTH,qt.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,qt.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,O.min.x),B.pixelStorei(B.UNPACK_SKIP_ROWS,O.min.y),B.pixelStorei(B.UNPACK_SKIP_IMAGES,O.min.z),ae.isDataTexture||ae.isData3DTexture?B.texSubImage3D(it,le,X.x,X.y,X.z,Be,We,je,Qe,nt,qt.data):ae.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),B.compressedTexSubImage3D(it,le,X.x,X.y,X.z,Be,We,je,Qe,qt.data)):B.texSubImage3D(it,le,X.x,X.y,X.z,Be,We,je,Qe,nt,qt),B.pixelStorei(B.UNPACK_ROW_LENGTH,rt),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,yt),B.pixelStorei(B.UNPACK_SKIP_PIXELS,en),B.pixelStorei(B.UNPACK_SKIP_ROWS,qn),B.pixelStorei(B.UNPACK_SKIP_IMAGES,qr),le===0&&Y.generateMipmaps&&B.generateMipmap(it),Ce.unbindTexture()},this.initTexture=function(O){O.isCubeTexture?N.setTextureCube(O,0):O.isData3DTexture?N.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?N.setTexture2DArray(O,0):N.setTexture2D(O,0),Ce.unbindTexture()},this.resetState=function(){_=0,b=0,M=null,Ce.reset(),Ne.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===$e?yr:jw}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===yr?$e:Gn}},w_=class extends S_{};w_.prototype.isWebGL1Renderer=!0;var Ao=class{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ae(e),this.density=t}clone(){return new Ao(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}},Do=class{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Ae(e),this.near=t,this.far=n}clone(){return new Do(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},T_=class extends ft{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},Ro=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=kl,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=yn()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=yn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=yn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},rn=new I,zi=class{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)rn.fromBufferAttribute(this,t),rn.applyMatrix4(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)rn.fromBufferAttribute(this,t),rn.applyNormalMatrix(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)rn.fromBufferAttribute(this,t),rn.transformDirection(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}setX(e,t){return this.normalized&&(t=Ke(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ke(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ke(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ke(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=xn(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=xn(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=xn(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=xn(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ke(t,this.array),n=Ke(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ke(t,this.array),n=Ke(n,this.array),r=Ke(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ke(t,this.array),n=Ke(n,this.array),r=Ke(r,this.array),s=Ke(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new _t(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new zi(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},jl=class extends Wt{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},uo,gl=new I,lo=new I,co=new I,fo=new de,vl=new de,yz=new Ye,Hv=new I,_l=new I,Wv=new I,S3=new de,xM=new de,w3=new de,E_=class extends ft{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",uo===void 0){uo=new Ze;let t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ro(t,5);uo.setIndex([0,1,2,0,2,3]),uo.setAttribute("position",new zi(n,3,0,!1)),uo.setAttribute("uv",new zi(n,2,3,!1))}this.geometry=uo,this.material=e!==void 0?e:new jl,this.center=new de(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),lo.setFromMatrixScale(this.matrixWorld),yz.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),co.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&lo.multiplyScalar(-co.z);let n=this.material.rotation,r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));let a=this.center;Vv(Hv.set(-.5,-.5,0),co,a,lo,r,s),Vv(_l.set(.5,-.5,0),co,a,lo,r,s),Vv(Wv.set(.5,.5,0),co,a,lo,r,s),S3.set(0,0),xM.set(1,0),w3.set(1,1);let o=e.ray.intersectTriangle(Hv,_l,Wv,!1,gl);if(o===null&&(Vv(_l.set(-.5,.5,0),co,a,lo,r,s),xM.set(0,1),o=e.ray.intersectTriangle(Hv,Wv,_l,!1,gl),o===null))return;let u=e.ray.origin.distanceTo(gl);u<e.near||u>e.far||t.push({distance:u,point:gl.clone(),uv:Jt.getInterpolation(gl,Hv,_l,Wv,S3,xM,w3,new de),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function Vv(i,e,t,n,r,s){fo.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(vl.x=s*fo.x-r*fo.y,vl.y=r*fo.x+s*fo.y):vl.copy(fo),i.copy(e),i.x+=vl.x,i.y+=vl.y,i.applyMatrix4(yz)}var Gv=new I,T3=new I,P_=class extends ft{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let t=e.levels;for(let n=0,r=t.length;n<r;n++){let s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);let r=this.levels,s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Gv.setFromMatrixPosition(this.matrixWorld);let r=e.ray.origin.distanceTo(Gv);this.getObjectForDistance(r).raycast(e,t)}}update(e){let t=this.levels;if(t.length>1){Gv.setFromMatrixPosition(e.matrixWorld),T3.setFromMatrixPosition(this.matrixWorld);let n=Gv.distanceTo(T3)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),n>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){let t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];let n=this.levels;for(let r=0,s=n.length;r<s;r++){let a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}},E3=new I,P3=new gt,A3=new gt,Fye=new I,D3=new Ye,ho=new I,A_=class extends Ft{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ye,this.bindMatrixInverse=new Ye,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Cn),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let n=0;n<t.count;n++)ho.fromBufferAttribute(t,n),this.applyBoneTransform(n,ho),this.boundingBox.expandByPoint(ho)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new On),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let n=0;n<t.count;n++)ho.fromBufferAttribute(t,n),this.applyBoneTransform(n,ho),this.boundingSphere.expandByPoint(ho)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new gt,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);let s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let n=this.skeleton,r=this.geometry;P3.fromBufferAttribute(r.attributes.skinIndex,e),A3.fromBufferAttribute(r.attributes.skinWeight,e),E3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){let a=A3.getComponent(s);if(a!==0){let o=P3.getComponent(s);D3.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Fye.copy(E3).applyMatrix4(D3),a)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}},Yl=class extends ft{constructor(){super(),this.isBone=!0,this.type="Bone"}},Mr=class extends Tt{constructor(e=null,t=1,n=1,r,s,a,o,u,l=It,c=It,d,f){super(null,a,o,u,l,c,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},R3=new Ye,Uye=new Ye,Co=class{constructor(e=[],t=[]){this.uuid=yn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ye)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let n=new Ye;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){let e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){let o=e[s]?e[s].matrixWorld:Uye;R3.multiplyMatrices(o,t[s]),R3.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Co(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=uz(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let n=new Mr(t,e,e,_n,Ni);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){let s=e.bones[n],a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Yl),this.bones.push(a),this.boneInverses.push(new Ye().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){let a=t[r];e.bones.push(a.uuid);let o=n[r];e.boneInverses.push(o.toArray())}return e}},Ar=class extends _t{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},po=new Ye,C3=new Ye,jv=[],O3=new Cn,Bye=new Ye,xl=new Ft,yl=new On,D_=class extends Ft{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ar(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Bye)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Cn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,po),O3.copy(e.boundingBox).applyMatrix4(po),this.boundingBox.union(O3)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new On),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,po),yl.copy(e.boundingSphere).applyMatrix4(po),this.boundingSphere.union(yl)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let n=this.matrixWorld,r=this.count;if(xl.geometry=this.geometry,xl.material=this.material,xl.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),yl.copy(this.boundingSphere),yl.applyMatrix4(n),e.ray.intersectsSphere(yl)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,po),C3.multiplyMatrices(n,po),xl.matrixWorld=C3,xl.raycast(e,jv);for(let a=0,o=jv.length;a<o;a++){let u=jv[a];u.instanceId=s,u.object=this,t.push(u)}jv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ar(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},Gt=class extends Wt{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ae(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},I3=new I,L3=new I,q3=new Ye,yM=new As,Yv=new On,hi=class extends ft{constructor(e=new Ze,t=new Gt){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)I3.fromBufferAttribute(t,r-1),L3.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=I3.distanceTo(L3);e.setAttribute("lineDistance",new Le(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Yv.copy(n.boundingSphere),Yv.applyMatrix4(r),Yv.radius+=s,e.ray.intersectsSphere(Yv)===!1)return;q3.copy(r).invert(),yM.copy(e.ray).applyMatrix4(q3);let o=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,l=new I,c=new I,d=new I,f=new I,h=this.isLineSegments?2:1,p=n.index,g=n.attributes.position;if(p!==null){let m=Math.max(0,a.start),y=Math.min(p.count,a.start+a.count);for(let _=m,b=y-1;_<b;_+=h){let M=p.getX(_),T=p.getX(_+1);if(l.fromBufferAttribute(g,M),c.fromBufferAttribute(g,T),yM.distanceSqToSegment(l,c,f,d)>u)continue;f.applyMatrix4(this.matrixWorld);let C=e.ray.origin.distanceTo(f);C<e.near||C>e.far||t.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{let m=Math.max(0,a.start),y=Math.min(g.count,a.start+a.count);for(let _=m,b=y-1;_<b;_+=h){if(l.fromBufferAttribute(g,_),c.fromBufferAttribute(g,_+1),yM.distanceSqToSegment(l,c,f,d)>u)continue;f.applyMatrix4(this.matrixWorld);let T=e.ray.origin.distanceTo(f);T<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){let o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}},N3=new I,k3=new I,Ln=class extends hi{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)N3.fromBufferAttribute(t,r),k3.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+N3.distanceTo(k3);e.setAttribute("lineDistance",new Le(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},R_=class extends hi{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},Xl=class extends Wt{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},F3=new Ye,SS=new As,Xv=new On,$v=new I,C_=class extends ft{constructor(e=new Ze,t=new Xl){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Xv.copy(n.boundingSphere),Xv.applyMatrix4(r),Xv.radius+=s,e.ray.intersectsSphere(Xv)===!1)return;F3.copy(r).invert(),SS.copy(e.ray).applyMatrix4(F3);let o=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,l=n.index,d=n.attributes.position;if(l!==null){let f=Math.max(0,a.start),h=Math.min(l.count,a.start+a.count);for(let p=f,v=h;p<v;p++){let g=l.getX(p);$v.fromBufferAttribute(d,g),U3($v,g,u,r,e,t,this)}}else{let f=Math.max(0,a.start),h=Math.min(d.count,a.start+a.count);for(let p=f,v=h;p<v;p++)$v.fromBufferAttribute(d,p),U3($v,p,u,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){let o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}};function U3(i,e,t,n,r,s,a){let o=SS.distanceSqToPoint(i);if(o<t){let u=new I;SS.closestPointToPoint(i,u),u.applyMatrix4(n);let l=r.ray.origin.distanceTo(u);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:u,index:e,face:null,object:a})}}var wS=class extends Tt{constructor(e,t,n,r,s,a,o,u,l){super(e,t,n,r,s,a,o,u,l),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Lt,this.magFilter=s!==void 0?s:Lt,this.generateMipmaps=!1;let c=this;function d(){c.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},TS=class extends Tt{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=It,this.minFilter=It,this.generateMipmaps=!1,this.needsUpdate=!0}},$l=class extends Tt{constructor(e,t,n,r,s,a,o,u,l,c,d,f){super(null,a,o,u,l,c,r,s,d,f),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}},ES=class extends $l{constructor(e,t,n,r,s,a){super(e,t,n,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Kt}},PS=class extends Tt{constructor(e,t,n,r,s,a,o,u,l){super(e,t,n,r,s,a,o,u,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},Mn=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n=this.getLengths(),r=0,s=n.length,a;t?a=t:a=e*n[s-1];let o=0,u=s-1,l;for(;o<=u;)if(r=Math.floor(o+(u-o)/2),l=n[r]-a,l<0)o=r+1;else if(l>0)u=r-1;else{u=r;break}if(r=u,n[r]===a)return r/(s-1);let c=n[r],f=n[r+1]-c,h=(a-c)/f;return(r+h)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);let a=this.getPoint(r),o=this.getPoint(s),u=t||(a.isVector2?new de:new I);return u.copy(o).sub(a).normalize(),u}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new I,r=[],s=[],a=[],o=new I,u=new Ye;for(let h=0;h<=e;h++){let p=h/e;r[h]=this.getTangentAt(p,new I)}s[0]=new I,a[0]=new I;let l=Number.MAX_VALUE,c=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),f<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),a[h]=a[h-1].clone(),o.crossVectors(r[h-1],r[h]),o.length()>Number.EPSILON){o.normalize();let p=Math.acos(Pt(r[h-1].dot(r[h]),-1,1));s[h].applyMatrix4(u.makeRotationAxis(o,p))}a[h].crossVectors(r[h],s[h])}if(t===!0){let h=Math.acos(Pt(s[0].dot(s[e]),-1,1));h/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(h=-h);for(let p=1;p<=e;p++)s[p].applyMatrix4(u.makeRotationAxis(r[p],h*p)),a[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},Oo=class extends Mn{constructor(e=0,t=0,n=1,r=1,s=0,a=Math.PI*2,o=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=u}getPoint(e,t){let n=t||new de,r=Math.PI*2,s=this.aEndAngle-this.aStartAngle,a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);let o=this.aStartAngle+e*s,u=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){let c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=u-this.aX,h=l-this.aY;u=f*c-h*d+this.aX,l=f*d+h*c+this.aY}return n.set(u,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},O_=class extends Oo{constructor(e,t,n,r,s,a){super(e,t,n,n,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}};function Zw(){let i=0,e=0,t=0,n=0;function r(s,a,o,u){i=s,e=o,t=-3*s+3*a-2*o-u,n=2*s-2*a+o+u}return{initCatmullRom:function(s,a,o,u,l){r(a,o,l*(o-s),l*(u-a))},initNonuniformCatmullRom:function(s,a,o,u,l,c,d){let f=(a-s)/l-(o-s)/(l+c)+(o-a)/c,h=(o-a)/c-(u-a)/(c+d)+(u-o)/d;f*=c,h*=c,r(a,o,f,h)},calc:function(s){let a=s*s,o=a*s;return i+e*s+t*a+n*o}}}var Zv=new I,bM=new Zw,MM=new Zw,SM=new Zw,I_=class extends Mn{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new I){let n=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e,o=Math.floor(a),u=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:u===0&&o===s-1&&(o=s-2,u=1);let l,c;this.closed||o>0?l=r[(o-1)%s]:(Zv.subVectors(r[0],r[1]).add(r[0]),l=Zv);let d=r[o%s],f=r[(o+1)%s];if(this.closed||o+2<s?c=r[(o+2)%s]:(Zv.subVectors(r[s-1],r[s-2]).add(r[s-1]),c=Zv),this.curveType==="centripetal"||this.curveType==="chordal"){let h=this.curveType==="chordal"?.5:.25,p=Math.pow(l.distanceToSquared(d),h),v=Math.pow(d.distanceToSquared(f),h),g=Math.pow(f.distanceToSquared(c),h);v<1e-4&&(v=1),p<1e-4&&(p=v),g<1e-4&&(g=v),bM.initNonuniformCatmullRom(l.x,d.x,f.x,c.x,p,v,g),MM.initNonuniformCatmullRom(l.y,d.y,f.y,c.y,p,v,g),SM.initNonuniformCatmullRom(l.z,d.z,f.z,c.z,p,v,g)}else this.curveType==="catmullrom"&&(bM.initCatmullRom(l.x,d.x,f.x,c.x,this.tension),MM.initCatmullRom(l.y,d.y,f.y,c.y,this.tension),SM.initCatmullRom(l.z,d.z,f.z,c.z,this.tension));return n.set(bM.calc(u),MM.calc(u),SM.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let r=e.points[t];this.points.push(new I().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function B3(i,e,t,n,r){let s=(n-e)*.5,a=(r-t)*.5,o=i*i,u=i*o;return(2*t-2*n+s+a)*u+(-3*t+3*n-2*s-a)*o+s*i+t}function zye(i,e){let t=1-i;return t*t*e}function Hye(i,e){return 2*(1-i)*i*e}function Wye(i,e){return i*i*e}function Al(i,e,t,n){return zye(i,e)+Hye(i,t)+Wye(i,n)}function Vye(i,e){let t=1-i;return t*t*t*e}function Gye(i,e){let t=1-i;return 3*t*t*i*e}function jye(i,e){return 3*(1-i)*i*i*e}function Yye(i,e){return i*i*i*e}function Dl(i,e,t,n,r){return Vye(i,e)+Gye(i,t)+jye(i,n)+Yye(i,r)}var Zl=class extends Mn{constructor(e=new de,t=new de,n=new de,r=new de){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new de){let n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(Dl(e,r.x,s.x,a.x,o.x),Dl(e,r.y,s.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},L_=class extends Mn{constructor(e=new I,t=new I,n=new I,r=new I){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new I){let n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(Dl(e,r.x,s.x,a.x,o.x),Dl(e,r.y,s.y,a.y,o.y),Dl(e,r.z,s.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Io=class extends Mn{constructor(e=new de,t=new de){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new de){let n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new de){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},q_=class extends Mn{constructor(e=new I,t=new I){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new I){let n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new I){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Jl=class extends Mn{constructor(e=new de,t=new de,n=new de){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new de){let n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(Al(e,r.x,s.x,a.x),Al(e,r.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Kl=class extends Mn{constructor(e=new I,t=new I,n=new I){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new I){let n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(Al(e,r.x,s.x,a.x),Al(e,r.y,s.y,a.y),Al(e,r.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Ql=class extends Mn{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new de){let n=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,u=r[a===0?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],d=r[a>r.length-3?r.length-1:a+2];return n.set(B3(o,u.x,l.x,c.x,d.x),B3(o,u.y,l.y,c.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let r=e.points[t];this.points.push(new de().fromArray(r))}return this}},Jw=Object.freeze({__proto__:null,ArcCurve:O_,CatmullRomCurve3:I_,CubicBezierCurve:Zl,CubicBezierCurve3:L_,EllipseCurve:Oo,LineCurve:Io,LineCurve3:q_,QuadraticBezierCurve:Jl,QuadraticBezierCurve3:Kl,SplineCurve:Ql}),N_=class extends Mn{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Io(t,e))}getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),s=0;for(;s<r.length;){if(r[s]>=n){let a=r[s]-n,o=this.curves[s],u=o.getLength(),l=u===0?0:1-a/u;return o.getPointAt(l,t)}s++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],n;for(let r=0,s=this.curves;r<s.length;r++){let a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,u=a.getPoints(o);for(let l=0;l<u.length;l++){let c=u[l];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let r=e.curves[t];this.curves.push(new Jw[r.type]().fromJSON(r))}return this}},Cs=class extends N_{constructor(e){super(),this.type="Path",this.currentPoint=new de,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new Io(this.currentPoint.clone(),new de(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let s=new Jl(this.currentPoint.clone(),new de(e,t),new de(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,a){let o=new Zl(this.currentPoint.clone(),new de(e,t),new de(n,r),new de(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),n=new Ql(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,a){let o=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+o,t+u,n,r,s,a),this}absarc(e,t,n,r,s,a){return this.absellipse(e,t,n,n,r,s,a),this}ellipse(e,t,n,r,s,a,o,u){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,s,a,o,u),this}absellipse(e,t,n,r,s,a,o,u){let l=new Oo(e,t,n,r,s,a,o,u);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Dr=class extends Ze{constructor(e=[new de(0,-.5),new de(.5,0),new de(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Pt(r,0,Math.PI*2);let s=[],a=[],o=[],u=[],l=[],c=1/t,d=new I,f=new de,h=new I,p=new I,v=new I,g=0,m=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:g=e[y+1].x-e[y].x,m=e[y+1].y-e[y].y,h.x=m*1,h.y=-g,h.z=m*0,v.copy(h),h.normalize(),u.push(h.x,h.y,h.z);break;case e.length-1:u.push(v.x,v.y,v.z);break;default:g=e[y+1].x-e[y].x,m=e[y+1].y-e[y].y,h.x=m*1,h.y=-g,h.z=m*0,p.copy(h),h.x+=v.x,h.y+=v.y,h.z+=v.z,h.normalize(),u.push(h.x,h.y,h.z),v.copy(p)}for(let y=0;y<=t;y++){let _=n+y*c*r,b=Math.sin(_),M=Math.cos(_);for(let T=0;T<=e.length-1;T++){d.x=e[T].x*b,d.y=e[T].y,d.z=e[T].x*M,a.push(d.x,d.y,d.z),f.x=y/t,f.y=T/(e.length-1),o.push(f.x,f.y);let P=u[3*T+0]*b,C=u[3*T+1],S=u[3*T+0]*M;l.push(P,C,S)}}for(let y=0;y<t;y++)for(let _=0;_<e.length-1;_++){let b=_+y*e.length,M=b,T=b+e.length,P=b+e.length+1,C=b+1;s.push(M,T,C),s.push(P,C,T)}this.setIndex(s),this.setAttribute("position",new Le(a,3)),this.setAttribute("uv",new Le(o,2)),this.setAttribute("normal",new Le(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dr(e.points,e.segments,e.phiStart,e.phiLength)}},Os=class extends Dr{constructor(e=1,t=1,n=4,r=8){let s=new Cs;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new Os(e.radius,e.length,e.capSegments,e.radialSegments)}},Is=class extends Ze{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);let s=[],a=[],o=[],u=[],l=new I,c=new de;a.push(0,0,0),o.push(0,0,1),u.push(.5,.5);for(let d=0,f=3;d<=t;d++,f+=3){let h=n+d/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),a.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(a[f]/e+1)/2,c.y=(a[f+1]/e+1)/2,u.push(c.x,c.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Le(a,3)),this.setAttribute("normal",new Le(o,3)),this.setAttribute("uv",new Le(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Is(e.radius,e.segments,e.thetaStart,e.thetaLength)}},Hi=class extends Ze{constructor(e=1,t=1,n=1,r=32,s=1,a=!1,o=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:u};let l=this;r=Math.floor(r),s=Math.floor(s);let c=[],d=[],f=[],h=[],p=0,v=[],g=n/2,m=0;y(),a===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new Le(d,3)),this.setAttribute("normal",new Le(f,3)),this.setAttribute("uv",new Le(h,2));function y(){let b=new I,M=new I,T=0,P=(t-e)/n;for(let C=0;C<=s;C++){let S=[],A=C/s,z=A*(t-e)+e;for(let j=0;j<=r;j++){let W=j/r,G=W*u+o,V=Math.sin(G),J=Math.cos(G);M.x=z*V,M.y=-A*n+g,M.z=z*J,d.push(M.x,M.y,M.z),b.set(V,P,J).normalize(),f.push(b.x,b.y,b.z),h.push(W,1-A),S.push(p++)}v.push(S)}for(let C=0;C<r;C++)for(let S=0;S<s;S++){let A=v[S][C],z=v[S+1][C],j=v[S+1][C+1],W=v[S][C+1];c.push(A,z,W),c.push(z,j,W),T+=6}l.addGroup(m,T,0),m+=T}function _(b){let M=p,T=new de,P=new I,C=0,S=b===!0?e:t,A=b===!0?1:-1;for(let j=1;j<=r;j++)d.push(0,g*A,0),f.push(0,A,0),h.push(.5,.5),p++;let z=p;for(let j=0;j<=r;j++){let G=j/r*u+o,V=Math.cos(G),J=Math.sin(G);P.x=S*J,P.y=g*A,P.z=S*V,d.push(P.x,P.y,P.z),f.push(0,A,0),T.x=V*.5+.5,T.y=J*.5*A+.5,h.push(T.x,T.y),p++}for(let j=0;j<r;j++){let W=M+j,G=z+j;b===!0?c.push(G,G+1,W):c.push(G+1,G,W),C+=3}l.addGroup(m,C,b===!0?1:2),m+=C}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hi(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Ls=class extends Hi{constructor(e=1,t=1,n=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,n,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new Ls(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Yn=class extends Ze{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};let s=[],a=[];o(r),l(n),c(),this.setAttribute("position",new Le(s,3)),this.setAttribute("normal",new Le(s.slice(),3)),this.setAttribute("uv",new Le(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(y){let _=new I,b=new I,M=new I;for(let T=0;T<t.length;T+=3)h(t[T+0],_),h(t[T+1],b),h(t[T+2],M),u(_,b,M,y)}function u(y,_,b,M){let T=M+1,P=[];for(let C=0;C<=T;C++){P[C]=[];let S=y.clone().lerp(b,C/T),A=_.clone().lerp(b,C/T),z=T-C;for(let j=0;j<=z;j++)j===0&&C===T?P[C][j]=S:P[C][j]=S.clone().lerp(A,j/z)}for(let C=0;C<T;C++)for(let S=0;S<2*(T-C)-1;S++){let A=Math.floor(S/2);S%2===0?(f(P[C][A+1]),f(P[C+1][A]),f(P[C][A])):(f(P[C][A+1]),f(P[C+1][A+1]),f(P[C+1][A]))}}function l(y){let _=new I;for(let b=0;b<s.length;b+=3)_.x=s[b+0],_.y=s[b+1],_.z=s[b+2],_.normalize().multiplyScalar(y),s[b+0]=_.x,s[b+1]=_.y,s[b+2]=_.z}function c(){let y=new I;for(let _=0;_<s.length;_+=3){y.x=s[_+0],y.y=s[_+1],y.z=s[_+2];let b=g(y)/2/Math.PI+.5,M=m(y)/Math.PI+.5;a.push(b,1-M)}p(),d()}function d(){for(let y=0;y<a.length;y+=6){let _=a[y+0],b=a[y+2],M=a[y+4],T=Math.max(_,b,M),P=Math.min(_,b,M);T>.9&&P<.1&&(_<.2&&(a[y+0]+=1),b<.2&&(a[y+2]+=1),M<.2&&(a[y+4]+=1))}}function f(y){s.push(y.x,y.y,y.z)}function h(y,_){let b=y*3;_.x=e[b+0],_.y=e[b+1],_.z=e[b+2]}function p(){let y=new I,_=new I,b=new I,M=new I,T=new de,P=new de,C=new de;for(let S=0,A=0;S<s.length;S+=9,A+=6){y.set(s[S+0],s[S+1],s[S+2]),_.set(s[S+3],s[S+4],s[S+5]),b.set(s[S+6],s[S+7],s[S+8]),T.set(a[A+0],a[A+1]),P.set(a[A+2],a[A+3]),C.set(a[A+4],a[A+5]),M.copy(y).add(_).add(b).divideScalar(3);let z=g(M);v(T,A+0,y,z),v(P,A+2,_,z),v(C,A+4,b,z)}}function v(y,_,b,M){M<0&&y.x===1&&(a[_]=y.x-1),b.x===0&&b.z===0&&(a[_]=M/2/Math.PI+.5)}function g(y){return Math.atan2(y.z,-y.x)}function m(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yn(e.vertices,e.indices,e.radius,e.details)}},qs=class extends Yn{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qs(e.radius,e.detail)}},Jv=new I,Kv=new I,wM=new I,Qv=new Jt,k_=class extends Ze{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){let r=Math.pow(10,4),s=Math.cos(Es*t),a=e.getIndex(),o=e.getAttribute("position"),u=a?a.count:o.count,l=[0,0,0],c=["a","b","c"],d=new Array(3),f={},h=[];for(let p=0;p<u;p+=3){a?(l[0]=a.getX(p),l[1]=a.getX(p+1),l[2]=a.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);let{a:v,b:g,c:m}=Qv;if(v.fromBufferAttribute(o,l[0]),g.fromBufferAttribute(o,l[1]),m.fromBufferAttribute(o,l[2]),Qv.getNormal(wM),d[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,d[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,d[2]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let y=0;y<3;y++){let _=(y+1)%3,b=d[y],M=d[_],T=Qv[c[y]],P=Qv[c[_]],C=`${b}_${M}`,S=`${M}_${b}`;S in f&&f[S]?(wM.dot(f[S].normal)<=s&&(h.push(T.x,T.y,T.z),h.push(P.x,P.y,P.z)),f[S]=null):C in f||(f[C]={index0:l[y],index1:l[_],normal:wM.clone()})}}for(let p in f)if(f[p]){let{index0:v,index1:g}=f[p];Jv.fromBufferAttribute(o,v),Kv.fromBufferAttribute(o,g),h.push(Jv.x,Jv.y,Jv.z),h.push(Kv.x,Kv.y,Kv.z)}this.setAttribute("position",new Le(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},Ui=class extends Cs{constructor(e){super(e),this.uuid=yn(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let r=e.holes[t];this.holes.push(new Cs().fromJSON(r))}return this}},Xye={triangulate:function(i,e,t=2){let n=e&&e.length,r=n?e[0]*t:i.length,s=bz(i,0,r,t,!0),a=[];if(!s||s.next===s.prev)return a;let o,u,l,c,d,f,h;if(n&&(s=Qye(i,e,s,t)),i.length>80*t){o=l=i[0],u=c=i[1];for(let p=t;p<r;p+=t)d=i[p],f=i[p+1],d<o&&(o=d),f<u&&(u=f),d>l&&(l=d),f>c&&(c=f);h=Math.max(l-o,c-u),h=h!==0?32767/h:0}return ec(s,a,t,o,u,h,0),a}};function bz(i,e,t,n,r){let s,a;if(r===cbe(i,e,t,n)>0)for(s=e;s<t;s+=n)a=z3(s,i[s],i[s+1],a);else for(s=t-n;s>=e;s-=n)a=z3(s,i[s],i[s+1],a);return a&&p0(a,a.next)&&(nc(a),a=a.next),a}function Ns(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(p0(t,t.next)||wt(t.prev,t,t.next)===0)){if(nc(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function ec(i,e,t,n,r,s,a){if(!i)return;!a&&s&&rbe(i,n,r,s);let o=i,u,l;for(;i.prev!==i.next;){if(u=i.prev,l=i.next,s?Zye(i,n,r,s):$ye(i)){e.push(u.i/t|0),e.push(i.i/t|0),e.push(l.i/t|0),nc(i),i=l.next,o=l.next;continue}if(i=l,i===o){a?a===1?(i=Jye(Ns(i),e,t),ec(i,e,t,n,r,s,2)):a===2&&Kye(i,e,t,n,r,s):ec(Ns(i),e,t,n,r,s,1);break}}}function $ye(i){let e=i.prev,t=i,n=i.next;if(wt(e,t,n)>=0)return!1;let r=e.x,s=t.x,a=n.x,o=e.y,u=t.y,l=n.y,c=r<s?r<a?r:a:s<a?s:a,d=o<u?o<l?o:l:u<l?u:l,f=r>s?r>a?r:a:s>a?s:a,h=o>u?o>l?o:l:u>l?u:l,p=n.next;for(;p!==e;){if(p.x>=c&&p.x<=f&&p.y>=d&&p.y<=h&&vo(r,o,s,u,a,l,p.x,p.y)&&wt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Zye(i,e,t,n){let r=i.prev,s=i,a=i.next;if(wt(r,s,a)>=0)return!1;let o=r.x,u=s.x,l=a.x,c=r.y,d=s.y,f=a.y,h=o<u?o<l?o:l:u<l?u:l,p=c<d?c<f?c:f:d<f?d:f,v=o>u?o>l?o:l:u>l?u:l,g=c>d?c>f?c:f:d>f?d:f,m=AS(h,p,e,t,n),y=AS(v,g,e,t,n),_=i.prevZ,b=i.nextZ;for(;_&&_.z>=m&&b&&b.z<=y;){if(_.x>=h&&_.x<=v&&_.y>=p&&_.y<=g&&_!==r&&_!==a&&vo(o,c,u,d,l,f,_.x,_.y)&&wt(_.prev,_,_.next)>=0||(_=_.prevZ,b.x>=h&&b.x<=v&&b.y>=p&&b.y<=g&&b!==r&&b!==a&&vo(o,c,u,d,l,f,b.x,b.y)&&wt(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;_&&_.z>=m;){if(_.x>=h&&_.x<=v&&_.y>=p&&_.y<=g&&_!==r&&_!==a&&vo(o,c,u,d,l,f,_.x,_.y)&&wt(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=y;){if(b.x>=h&&b.x<=v&&b.y>=p&&b.y<=g&&b!==r&&b!==a&&vo(o,c,u,d,l,f,b.x,b.y)&&wt(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Jye(i,e,t){let n=i;do{let r=n.prev,s=n.next.next;!p0(r,s)&&Mz(r,n,n.next,s)&&tc(r,s)&&tc(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),nc(n),nc(n.next),n=i=s),n=n.next}while(n!==i);return Ns(n)}function Kye(i,e,t,n,r,s){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&obe(a,o)){let u=Sz(a,o);a=Ns(a,a.next),u=Ns(u,u.next),ec(a,e,t,n,r,s,0),ec(u,e,t,n,r,s,0);return}o=o.next}a=a.next}while(a!==i)}function Qye(i,e,t,n){let r=[],s,a,o,u,l;for(s=0,a=e.length;s<a;s++)o=e[s]*n,u=s<a-1?e[s+1]*n:i.length,l=bz(i,o,u,n,!1),l===l.next&&(l.steiner=!0),r.push(abe(l));for(r.sort(ebe),s=0;s<r.length;s++)t=tbe(r[s],t);return t}function ebe(i,e){return i.x-e.x}function tbe(i,e){let t=nbe(i,e);if(!t)return e;let n=Sz(t,i);return Ns(n,n.next),Ns(t,t.next)}function nbe(i,e){let t=e,n=-1/0,r,s=i.x,a=i.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){let f=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=s&&f>n&&(n=f,r=t.x<t.next.x?t:t.next,f===s))return r}t=t.next}while(t!==e);if(!r)return null;let o=r,u=r.x,l=r.y,c=1/0,d;t=r;do s>=t.x&&t.x>=u&&s!==t.x&&vo(a<l?s:n,a,u,l,a<l?n:s,a,t.x,t.y)&&(d=Math.abs(a-t.y)/(s-t.x),tc(t,i)&&(d<c||d===c&&(t.x>r.x||t.x===r.x&&ibe(r,t)))&&(r=t,c=d)),t=t.next;while(t!==o);return r}function ibe(i,e){return wt(i.prev,i,e.prev)<0&&wt(e.next,i,i.next)<0}function rbe(i,e,t,n){let r=i;do r.z===0&&(r.z=AS(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,sbe(r)}function sbe(i){let e,t,n,r,s,a,o,u,l=1;do{for(t=i,i=null,s=null,a=0;t;){for(a++,n=t,o=0,e=0;e<l&&(o++,n=n.nextZ,!!n);e++);for(u=l;o>0||u>0&&n;)o!==0&&(u===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,o--):(r=n,n=n.nextZ,u--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,l*=2}while(a>1);return i}function AS(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function abe(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function vo(i,e,t,n,r,s,a,o){return(r-a)*(e-o)>=(i-a)*(s-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(n-o)}function obe(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!ube(i,e)&&(tc(i,e)&&tc(e,i)&&lbe(i,e)&&(wt(i.prev,i,e.prev)||wt(i,e.prev,e))||p0(i,e)&&wt(i.prev,i,i.next)>0&&wt(e.prev,e,e.next)>0)}function wt(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function p0(i,e){return i.x===e.x&&i.y===e.y}function Mz(i,e,t,n){let r=t_(wt(i,e,t)),s=t_(wt(i,e,n)),a=t_(wt(t,n,i)),o=t_(wt(t,n,e));return!!(r!==s&&a!==o||r===0&&e_(i,t,e)||s===0&&e_(i,n,e)||a===0&&e_(t,i,n)||o===0&&e_(t,e,n))}function e_(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function t_(i){return i>0?1:i<0?-1:0}function ube(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&Mz(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function tc(i,e){return wt(i.prev,i,i.next)<0?wt(i,e,i.next)>=0&&wt(i,i.prev,e)>=0:wt(i,e,i.prev)<0||wt(i,i.next,e)<0}function lbe(i,e){let t=i,n=!1,r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function Sz(i,e){let t=new DS(i.i,i.x,i.y),n=new DS(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function z3(i,e,t,n){let r=new DS(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function nc(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function DS(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function cbe(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}var Rn=class{static area(e){let t=e.length,n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return Rn.area(e)<0}static triangulateShape(e,t){let n=[],r=[],s=[];H3(e),W3(n,e);let a=e.length;t.forEach(H3);for(let u=0;u<t.length;u++)r.push(a),a+=t[u].length,W3(n,t[u]);let o=Xye.triangulate(n,r);for(let u=0;u<o.length;u+=3)s.push(o.slice(u,u+3));return s}};function H3(i){let e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function W3(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}var ks=class extends Ze{constructor(e=new Ui([new de(.5,.5),new de(-.5,.5),new de(-.5,-.5),new de(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let n=this,r=[],s=[];for(let o=0,u=e.length;o<u;o++){let l=e[o];a(l)}this.setAttribute("position",new Le(r,3)),this.setAttribute("uv",new Le(s,2)),this.computeVertexNormals();function a(o){let u=[],l=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1,f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:h-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3,m=t.extrudePath,y=t.UVGenerator!==void 0?t.UVGenerator:dbe,_,b=!1,M,T,P,C;m&&(_=m.getSpacedPoints(c),b=!0,f=!1,M=m.computeFrenetFrames(c,!1),T=new I,P=new I,C=new I),f||(g=0,h=0,p=0,v=0);let S=o.extractPoints(l),A=S.shape,z=S.holes;if(!Rn.isClockWise(A)){A=A.reverse();for(let fe=0,L=z.length;fe<L;fe++){let N=z[fe];Rn.isClockWise(N)&&(z[fe]=N.reverse())}}let W=Rn.triangulateShape(A,z),G=A;for(let fe=0,L=z.length;fe<L;fe++){let N=z[fe];A=A.concat(N)}function V(fe,L,N){return L||console.error("THREE.ExtrudeGeometry: vec does not exist"),fe.clone().addScaledVector(L,N)}let J=A.length,Z=W.length;function ne(fe,L,N){let Q,$,pe,ye=fe.x-L.x,Ee=fe.y-L.y,ze=N.x-fe.x,Xe=N.y-fe.y,q=ye*ye+Ee*Ee,D=ye*Xe-Ee*ze;if(Math.abs(D)>Number.EPSILON){let te=Math.sqrt(q),me=Math.sqrt(ze*ze+Xe*Xe),ve=L.x-Ee/te,Pe=L.y+ye/te,Ve=N.x-Xe/me,Oe=N.y+ze/me,oe=((Ve-ve)*Xe-(Oe-Pe)*ze)/(ye*Xe-Ee*ze);Q=ve+ye*oe-fe.x,$=Pe+Ee*oe-fe.y;let Ne=Q*Q+$*$;if(Ne<=2)return new de(Q,$);pe=Math.sqrt(Ne/2)}else{let te=!1;ye>Number.EPSILON?ze>Number.EPSILON&&(te=!0):ye<-Number.EPSILON?ze<-Number.EPSILON&&(te=!0):Math.sign(Ee)===Math.sign(Xe)&&(te=!0),te?(Q=-Ee,$=ye,pe=Math.sqrt(q)):(Q=ye,$=Ee,pe=Math.sqrt(q/2))}return new de(Q/pe,$/pe)}let re=[];for(let fe=0,L=G.length,N=L-1,Q=fe+1;fe<L;fe++,N++,Q++)N===L&&(N=0),Q===L&&(Q=0),re[fe]=ne(G[fe],G[N],G[Q]);let ce=[],Te,xe=re.concat();for(let fe=0,L=z.length;fe<L;fe++){let N=z[fe];Te=[];for(let Q=0,$=N.length,pe=$-1,ye=Q+1;Q<$;Q++,pe++,ye++)pe===$&&(pe=0),ye===$&&(ye=0),Te[Q]=ne(N[Q],N[pe],N[ye]);ce.push(Te),xe=xe.concat(Te)}for(let fe=0;fe<g;fe++){let L=fe/g,N=h*Math.cos(L*Math.PI/2),Q=p*Math.sin(L*Math.PI/2)+v;for(let $=0,pe=G.length;$<pe;$++){let ye=V(G[$],re[$],Q);B(ye.x,ye.y,-N)}for(let $=0,pe=z.length;$<pe;$++){let ye=z[$];Te=ce[$];for(let Ee=0,ze=ye.length;Ee<ze;Ee++){let Xe=V(ye[Ee],Te[Ee],Q);B(Xe.x,Xe.y,-N)}}}let K=p+v;for(let fe=0;fe<J;fe++){let L=f?V(A[fe],xe[fe],K):A[fe];b?(P.copy(M.normals[0]).multiplyScalar(L.x),T.copy(M.binormals[0]).multiplyScalar(L.y),C.copy(_[0]).add(P).add(T),B(C.x,C.y,C.z)):B(L.x,L.y,0)}for(let fe=1;fe<=c;fe++)for(let L=0;L<J;L++){let N=f?V(A[L],xe[L],K):A[L];b?(P.copy(M.normals[fe]).multiplyScalar(N.x),T.copy(M.binormals[fe]).multiplyScalar(N.y),C.copy(_[fe]).add(P).add(T),B(C.x,C.y,C.z)):B(N.x,N.y,d/c*fe)}for(let fe=g-1;fe>=0;fe--){let L=fe/g,N=h*Math.cos(L*Math.PI/2),Q=p*Math.sin(L*Math.PI/2)+v;for(let $=0,pe=G.length;$<pe;$++){let ye=V(G[$],re[$],Q);B(ye.x,ye.y,d+N)}for(let $=0,pe=z.length;$<pe;$++){let ye=z[$];Te=ce[$];for(let Ee=0,ze=ye.length;Ee<ze;Ee++){let Xe=V(ye[Ee],Te[Ee],Q);b?B(Xe.x,Xe.y+_[c-1].y,_[c-1].x+N):B(Xe.x,Xe.y,d+N)}}}ue(),_e();function ue(){let fe=r.length/3;if(f){let L=0,N=J*L;for(let Q=0;Q<Z;Q++){let $=W[Q];De($[2]+N,$[1]+N,$[0]+N)}L=c+g*2,N=J*L;for(let Q=0;Q<Z;Q++){let $=W[Q];De($[0]+N,$[1]+N,$[2]+N)}}else{for(let L=0;L<Z;L++){let N=W[L];De(N[2],N[1],N[0])}for(let L=0;L<Z;L++){let N=W[L];De(N[0]+J*c,N[1]+J*c,N[2]+J*c)}}n.addGroup(fe,r.length/3-fe,0)}function _e(){let fe=r.length/3,L=0;be(G,L),L+=G.length;for(let N=0,Q=z.length;N<Q;N++){let $=z[N];be($,L),L+=$.length}n.addGroup(fe,r.length/3-fe,1)}function be(fe,L){let N=fe.length;for(;--N>=0;){let Q=N,$=N-1;$<0&&($=fe.length-1);for(let pe=0,ye=c+g*2;pe<ye;pe++){let Ee=J*pe,ze=J*(pe+1),Xe=L+Q+Ee,q=L+$+Ee,D=L+$+ze,te=L+Q+ze;Se(Xe,q,D,te)}}}function B(fe,L,N){u.push(fe),u.push(L),u.push(N)}function De(fe,L,N){he(fe),he(L),he(N);let Q=r.length/3,$=y.generateTopUV(n,r,Q-3,Q-2,Q-1);Ce($[0]),Ce($[1]),Ce($[2])}function Se(fe,L,N,Q){he(fe),he(L),he(Q),he(L),he(N),he(Q);let $=r.length/3,pe=y.generateSideWallUV(n,r,$-6,$-3,$-2,$-1);Ce(pe[0]),Ce(pe[1]),Ce(pe[3]),Ce(pe[1]),Ce(pe[2]),Ce(pe[3])}function he(fe){r.push(u[fe*3+0]),r.push(u[fe*3+1]),r.push(u[fe*3+2])}function Ce(fe){s.push(fe.x),s.push(fe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return fbe(t,n,e)}static fromJSON(e,t){let n=[];for(let s=0,a=e.shapes.length;s<a;s++){let o=t[e.shapes[s]];n.push(o)}let r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Jw[r.type]().fromJSON(r)),new ks(n,e.options)}},dbe={generateTopUV:function(i,e,t,n,r){let s=e[t*3],a=e[t*3+1],o=e[n*3],u=e[n*3+1],l=e[r*3],c=e[r*3+1];return[new de(s,a),new de(o,u),new de(l,c)]},generateSideWallUV:function(i,e,t,n,r,s){let a=e[t*3],o=e[t*3+1],u=e[t*3+2],l=e[n*3],c=e[n*3+1],d=e[n*3+2],f=e[r*3],h=e[r*3+1],p=e[r*3+2],v=e[s*3],g=e[s*3+1],m=e[s*3+2];return Math.abs(o-c)<Math.abs(a-l)?[new de(a,1-u),new de(l,1-d),new de(f,1-p),new de(v,1-m)]:[new de(o,1-u),new de(c,1-d),new de(h,1-p),new de(g,1-m)]}};function fbe(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){let s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var Fs=class extends Yn{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fs(e.radius,e.detail)}},Rr=class extends Yn{constructor(e=1,t=0){let n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rr(e.radius,e.detail)}},Us=class extends Ze{constructor(e=.5,t=1,n=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:a},n=Math.max(3,n),r=Math.max(1,r);let o=[],u=[],l=[],c=[],d=e,f=(t-e)/r,h=new I,p=new de;for(let v=0;v<=r;v++){for(let g=0;g<=n;g++){let m=s+g/n*a;h.x=d*Math.cos(m),h.y=d*Math.sin(m),u.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}d+=f}for(let v=0;v<r;v++){let g=v*(n+1);for(let m=0;m<n;m++){let y=m+g,_=y,b=y+n+1,M=y+n+2,T=y+1;o.push(_,b,T),o.push(b,M,T)}}this.setIndex(o),this.setAttribute("position",new Le(u,3)),this.setAttribute("normal",new Le(l,3)),this.setAttribute("uv",new Le(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Us(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}},Bs=class extends Ze{constructor(e=new Ui([new de(0,.5),new de(-.5,-.5),new de(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let n=[],r=[],s=[],a=[],o=0,u=0;if(Array.isArray(e)===!1)l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(o,u,c),o+=u,u=0;this.setIndex(n),this.setAttribute("position",new Le(r,3)),this.setAttribute("normal",new Le(s,3)),this.setAttribute("uv",new Le(a,2));function l(c){let d=r.length/3,f=c.extractPoints(t),h=f.shape,p=f.holes;Rn.isClockWise(h)===!1&&(h=h.reverse());for(let g=0,m=p.length;g<m;g++){let y=p[g];Rn.isClockWise(y)===!0&&(p[g]=y.reverse())}let v=Rn.triangulateShape(h,p);for(let g=0,m=p.length;g<m;g++){let y=p[g];h=h.concat(y)}for(let g=0,m=h.length;g<m;g++){let y=h[g];r.push(y.x,y.y,0),s.push(0,0,1),a.push(y.x,y.y)}for(let g=0,m=v.length;g<m;g++){let y=v[g],_=y[0]+d,b=y[1]+d,M=y[2]+d;n.push(_,b,M),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return hbe(t,e)}static fromJSON(e,t){let n=[];for(let r=0,s=e.shapes.length;r<s;r++){let a=t[e.shapes[r]];n.push(a)}return new Bs(n,e.curveSegments)}};function hbe(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){let r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}var Cr=class extends Ze{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let u=Math.min(a+o,Math.PI),l=0,c=[],d=new I,f=new I,h=[],p=[],v=[],g=[];for(let m=0;m<=n;m++){let y=[],_=m/n,b=0;m===0&&a===0?b=.5/t:m===n&&u===Math.PI&&(b=-.5/t);for(let M=0;M<=t;M++){let T=M/t;d.x=-e*Math.cos(r+T*s)*Math.sin(a+_*o),d.y=e*Math.cos(a+_*o),d.z=e*Math.sin(r+T*s)*Math.sin(a+_*o),p.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),g.push(T+b,1-_),y.push(l++)}c.push(y)}for(let m=0;m<n;m++)for(let y=0;y<t;y++){let _=c[m][y+1],b=c[m][y],M=c[m+1][y],T=c[m+1][y+1];(m!==0||a>0)&&h.push(_,b,T),(m!==n-1||u<Math.PI)&&h.push(b,M,T)}this.setIndex(h),this.setAttribute("position",new Le(p,3)),this.setAttribute("normal",new Le(v,3)),this.setAttribute("uv",new Le(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cr(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},zs=class extends Yn{constructor(e=1,t=0){let n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zs(e.radius,e.detail)}},Hs=class extends Ze{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);let a=[],o=[],u=[],l=[],c=new I,d=new I,f=new I;for(let h=0;h<=n;h++)for(let p=0;p<=r;p++){let v=p/r*s,g=h/n*Math.PI*2;d.x=(e+t*Math.cos(g))*Math.cos(v),d.y=(e+t*Math.cos(g))*Math.sin(v),d.z=t*Math.sin(g),o.push(d.x,d.y,d.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),f.subVectors(d,c).normalize(),u.push(f.x,f.y,f.z),l.push(p/r),l.push(h/n)}for(let h=1;h<=n;h++)for(let p=1;p<=r;p++){let v=(r+1)*h+p-1,g=(r+1)*(h-1)+p-1,m=(r+1)*(h-1)+p,y=(r+1)*h+p;a.push(v,g,y),a.push(g,m,y)}this.setIndex(a),this.setAttribute("position",new Le(o,3)),this.setAttribute("normal",new Le(u,3)),this.setAttribute("uv",new Le(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hs(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},Ws=class extends Ze{constructor(e=1,t=.4,n=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:a},n=Math.floor(n),r=Math.floor(r);let o=[],u=[],l=[],c=[],d=new I,f=new I,h=new I,p=new I,v=new I,g=new I,m=new I;for(let _=0;_<=n;++_){let b=_/n*s*Math.PI*2;y(b,s,a,e,h),y(b+.01,s,a,e,p),g.subVectors(p,h),m.addVectors(p,h),v.crossVectors(g,m),m.crossVectors(v,g),v.normalize(),m.normalize();for(let M=0;M<=r;++M){let T=M/r*Math.PI*2,P=-t*Math.cos(T),C=t*Math.sin(T);d.x=h.x+(P*m.x+C*v.x),d.y=h.y+(P*m.y+C*v.y),d.z=h.z+(P*m.z+C*v.z),u.push(d.x,d.y,d.z),f.subVectors(d,h).normalize(),l.push(f.x,f.y,f.z),c.push(_/n),c.push(M/r)}}for(let _=1;_<=n;_++)for(let b=1;b<=r;b++){let M=(r+1)*(_-1)+(b-1),T=(r+1)*_+(b-1),P=(r+1)*_+b,C=(r+1)*(_-1)+b;o.push(M,T,C),o.push(T,P,C)}this.setIndex(o),this.setAttribute("position",new Le(u,3)),this.setAttribute("normal",new Le(l,3)),this.setAttribute("uv",new Le(c,2));function y(_,b,M,T,P){let C=Math.cos(_),S=Math.sin(_),A=M/b*_,z=Math.cos(A);P.x=T*(2+z)*.5*C,P.y=T*(2+z)*S*.5,P.z=T*Math.sin(A)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ws(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},Vs=class extends Ze{constructor(e=new Kl(new I(-1,-1,0),new I(-1,1,0),new I(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};let a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;let o=new I,u=new I,l=new de,c=new I,d=[],f=[],h=[],p=[];v(),this.setIndex(p),this.setAttribute("position",new Le(d,3)),this.setAttribute("normal",new Le(f,3)),this.setAttribute("uv",new Le(h,2));function v(){for(let _=0;_<t;_++)g(_);g(s===!1?t:0),y(),m()}function g(_){c=e.getPointAt(_/t,c);let b=a.normals[_],M=a.binormals[_];for(let T=0;T<=r;T++){let P=T/r*Math.PI*2,C=Math.sin(P),S=-Math.cos(P);u.x=S*b.x+C*M.x,u.y=S*b.y+C*M.y,u.z=S*b.z+C*M.z,u.normalize(),f.push(u.x,u.y,u.z),o.x=c.x+n*u.x,o.y=c.y+n*u.y,o.z=c.z+n*u.z,d.push(o.x,o.y,o.z)}}function m(){for(let _=1;_<=t;_++)for(let b=1;b<=r;b++){let M=(r+1)*(_-1)+(b-1),T=(r+1)*_+(b-1),P=(r+1)*_+b,C=(r+1)*(_-1)+b;p.push(M,T,C),p.push(T,P,C)}}function y(){for(let _=0;_<=t;_++)for(let b=0;b<=r;b++)l.x=_/t,l.y=b/r,h.push(l.x,l.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Vs(new Jw[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}},F_=class extends Ze{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){let t=[],n=new Set,r=new I,s=new I;if(e.index!==null){let a=e.attributes.position,o=e.index,u=e.groups;u.length===0&&(u=[{start:0,count:o.count,materialIndex:0}]);for(let l=0,c=u.length;l<c;++l){let d=u[l],f=d.start,h=d.count;for(let p=f,v=f+h;p<v;p+=3)for(let g=0;g<3;g++){let m=o.getX(p+g),y=o.getX(p+(g+1)%3);r.fromBufferAttribute(a,m),s.fromBufferAttribute(a,y),V3(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{let a=e.attributes.position;for(let o=0,u=a.count/3;o<u;o++)for(let l=0;l<3;l++){let c=3*o+l,d=3*o+(l+1)%3;r.fromBufferAttribute(a,c),s.fromBufferAttribute(a,d),V3(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Le(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}};function V3(i,e,t){let n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var G3=Object.freeze({__proto__:null,BoxGeometry:fi,CapsuleGeometry:Os,CircleGeometry:Is,ConeGeometry:Ls,CylinderGeometry:Hi,DodecahedronGeometry:qs,EdgesGeometry:k_,ExtrudeGeometry:ks,IcosahedronGeometry:Fs,LatheGeometry:Dr,OctahedronGeometry:Rr,PlaneGeometry:Pr,PolyhedronGeometry:Yn,RingGeometry:Us,ShapeGeometry:Bs,SphereGeometry:Cr,TetrahedronGeometry:zs,TorusGeometry:Hs,TorusKnotGeometry:Ws,TubeGeometry:Vs,WireframeGeometry:F_}),U_=class extends Wt{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ae(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}},B_=class extends In{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},ic=class extends Wt{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ae(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},z_=class extends ic{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new de(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Pt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ae(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ae(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ae(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},H_=class extends Wt{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ae(16777215),this.specular=new Ae(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},W_=class extends Wt{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ae(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},V_=class extends Wt{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}},G_=class extends Wt{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},j_=class extends Wt{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ae(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}},Y_=class extends Gt{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};function Dn(i,e,t){return Kw(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)}function Ss(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function Kw(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function wz(i){function e(r,s){return i[r]-i[s]}let t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function RS(i,e,t){let n=i.length,r=new i.constructor(n);for(let s=0,a=0;a!==n;++s){let o=t[s]*e;for(let u=0;u!==e;++u)r[a++]=i[o+u]}return r}function Qw(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=i[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=i[r++];while(s!==void 0)}function pbe(i,e,t,n,r=30){let s=i.clone();s.name=e;let a=[];for(let u=0;u<s.tracks.length;++u){let l=s.tracks[u],c=l.getValueSize(),d=[],f=[];for(let h=0;h<l.times.length;++h){let p=l.times[h]*r;if(!(p<t||p>=n)){d.push(l.times[h]);for(let v=0;v<c;++v)f.push(l.values[h*c+v])}}d.length!==0&&(l.times=Ss(d,l.times.constructor),l.values=Ss(f,l.values.constructor),a.push(l))}s.tracks=a;let o=1/0;for(let u=0;u<s.tracks.length;++u)o>s.tracks[u].times[0]&&(o=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*o);return s.resetDuration(),s}function mbe(i,e=0,t=i,n=30){n<=0&&(n=30);let r=t.tracks.length,s=e/n;for(let a=0;a<r;++a){let o=t.tracks[a],u=o.ValueTypeName;if(u==="bool"||u==="string")continue;let l=i.tracks.find(function(m){return m.name===o.name&&m.ValueTypeName===u});if(l===void 0)continue;let c=0,d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);let f=0,h=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=h/3);let p=o.times.length-1,v;if(s<=o.times[0]){let m=c,y=d-c;v=Dn(o.values,m,y)}else if(s>=o.times[p]){let m=p*d+c,y=m+d-c;v=Dn(o.values,m,y)}else{let m=o.createInterpolant(),y=c,_=d-c;m.evaluate(s),v=Dn(m.resultBuffer,y,_)}u==="quaternion"&&new Qt().fromArray(v).normalize().conjugate().toArray(v);let g=l.times.length;for(let m=0;m<g;++m){let y=m*h+f;if(u==="quaternion")Qt.multiplyQuaternionsFlat(l.values,y,v,0,l.values,y);else{let _=h-f*2;for(let b=0;b<_;++b)l.values[y+b]-=v[b]}}}return i.blendMode=Gw,i}var gbe={arraySlice:Dn,convertArray:Ss,isTypedArray:Kw,getKeyframeOrder:wz,sortedArray:RS,flattenJSON:Qw,subclip:pbe,makeClipAdditive:mbe},Gs=class{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(s=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=s)){let o=t[1];e<o&&(n=2,s=o);for(let u=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){let o=n+a>>>1;e<t[o]?a=o:n=o+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},X_=class extends Gs{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bs,endingEnd:bs}}intervalChanged_(e,t,n){let r=this.parameterPositions,s=e-2,a=e+1,o=r[s],u=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case Ms:s=e,o=2*t-n;break;case Nl:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=n}if(u===void 0)switch(this.getSettings_().endingEnd){case Ms:a=e,u=2*n-t;break;case Nl:a=1,u=n+r[1]-r[0];break;default:a=e-1,u=t}let l=(n-t)*.5,c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(u-n),this._offsetPrev=s*c,this._offsetNext=a*c}interpolate_(e,t,n,r){let s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,u=e*o,l=u-o,c=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),v=p*p,g=v*p,m=-f*g+2*f*v-f*p,y=(1+f)*g+(-1.5-2*f)*v+(-.5+f)*p+1,_=(-1-h)*g+(1.5+h)*v+.5*p,b=h*g-h*v;for(let M=0;M!==o;++M)s[M]=m*a[c+M]+y*a[l+M]+_*a[u+M]+b*a[d+M];return s}},rc=class extends Gs{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,u=e*o,l=u-o,c=(n-t)/(r-t),d=1-c;for(let f=0;f!==o;++f)s[f]=a[l+f]*d+a[u+f]*c;return s}},$_=class extends Gs{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Sn=class{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ss(t,this.TimeBufferType),this.values=Ss(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Ss(e.times,Array),values:Ss(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new $_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rc(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new X_(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ll:t=this.InterpolantFactoryMethodDiscrete;break;case ql:t=this.InterpolantFactoryMethodLinear;break;case p_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ll;case this.InterpolantFactoryMethodLinear:return ql;case this.InterpolantFactoryMethodSmooth:return p_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,s=0,a=r-1;for(;s!==r&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);let o=this.getValueSize();this.times=Dn(n,s,a),this.values=Dn(this.values,s*o,a*o)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){let u=n[o];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,u),e=!1;break}if(a!==null&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,u,a),e=!1;break}a=u}if(r!==void 0&&Kw(r))for(let o=0,u=r.length;o!==u;++o){let l=r[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}return e}optimize(){let e=Dn(this.times),t=Dn(this.values),n=this.getValueSize(),r=this.getInterpolation()===p_,s=e.length-1,a=1;for(let o=1;o<s;++o){let u=!1,l=e[o],c=e[o+1];if(l!==c&&(o!==1||l!==e[0]))if(r)u=!0;else{let d=o*n,f=d-n,h=d+n;for(let p=0;p!==n;++p){let v=t[d+p];if(v!==t[f+p]||v!==t[h+p]){u=!0;break}}}if(u){if(o!==a){e[a]=e[o];let d=o*n,f=a*n;for(let h=0;h!==n;++h)t[f+h]=t[d+h]}++a}}if(s>0){e[a]=e[s];for(let o=s*n,u=a*n,l=0;l!==n;++l)t[u+l]=t[o+l];++a}return a!==e.length?(this.times=Dn(e,0,a),this.values=Dn(t,0,a*n)):(this.times=e,this.values=t),this}clone(){let e=Dn(this.times,0),t=Dn(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};Sn.prototype.TimeBufferType=Float32Array;Sn.prototype.ValueBufferType=Float32Array;Sn.prototype.DefaultInterpolation=ql;var Wi=class extends Sn{};Wi.prototype.ValueTypeName="bool";Wi.prototype.ValueBufferType=Array;Wi.prototype.DefaultInterpolation=Ll;Wi.prototype.InterpolantFactoryMethodLinear=void 0;Wi.prototype.InterpolantFactoryMethodSmooth=void 0;var sc=class extends Sn{};sc.prototype.ValueTypeName="color";var js=class extends Sn{};js.prototype.ValueTypeName="number";var Z_=class extends Gs{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,u=(n-t)/(r-t),l=e*o;for(let c=l+o;l!==c;l+=4)Qt.slerpFlat(s,0,a,l-o,a,l,u);return s}},Or=class extends Sn{InterpolantFactoryMethodLinear(e){return new Z_(this.times,this.values,this.getValueSize(),e)}};Or.prototype.ValueTypeName="quaternion";Or.prototype.DefaultInterpolation=ql;Or.prototype.InterpolantFactoryMethodSmooth=void 0;var Vi=class extends Sn{};Vi.prototype.ValueTypeName="string";Vi.prototype.ValueBufferType=Array;Vi.prototype.DefaultInterpolation=Ll;Vi.prototype.InterpolantFactoryMethodLinear=void 0;Vi.prototype.InterpolantFactoryMethodSmooth=void 0;var Ys=class extends Sn{};Ys.prototype.ValueTypeName="vector";var Xs=class{constructor(e,t=-1,n,r=f0){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=yn(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],n=e.tracks,r=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(_be(n[a]).scale(r));let s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){let t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(Sn.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){let s=t.length,a=[];for(let o=0;o<s;o++){let u=[],l=[];u.push((o+s-1)%s,o,(o+1)%s),l.push(0,1,0);let c=wz(u);u=RS(u,1,c),l=RS(l,1,c),!r&&u[0]===0&&(u.push(s),l.push(l[0])),a.push(new js(".morphTargetInfluences["+t[o].name+"]",u,l).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){let r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){let r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,u=e.length;o<u;o++){let l=e[o],c=l.name.match(s);if(c&&c.length>1){let d=c[1],f=r[d];f||(r[d]=f=[]),f.push(l)}}let a=[];for(let o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let n=function(d,f,h,p,v){if(h.length!==0){let g=[],m=[];Qw(h,g,m,p),g.length!==0&&v.push(new d(f,g,m))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode,u=e.length||-1,l=e.hierarchy||[];for(let d=0;d<l.length;d++){let f=l[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){let h={},p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let v=0;v<f[p].morphTargets.length;v++)h[f[p].morphTargets[v]]=-1;for(let v in h){let g=[],m=[];for(let y=0;y!==f[p].morphTargets.length;++y){let _=f[p];g.push(_.time),m.push(_.morphTarget===v?1:0)}r.push(new js(".morphTargetInfluence["+v+"]",g,m))}u=h.length*a}else{let h=".bones["+t[d].name+"]";n(Ys,h+".position",f,"pos",r),n(Or,h+".quaternion",f,"rot",r),n(Ys,h+".scale",f,"scl",r)}}return r.length===0?null:new this(s,u,r,o)}resetDuration(){let e=this.tracks,t=0;for(let n=0,r=e.length;n!==r;++n){let s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function vbe(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return js;case"vector":case"vector2":case"vector3":case"vector4":return Ys;case"color":return sc;case"quaternion":return Or;case"bool":case"boolean":return Wi;case"string":return Vi}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function _be(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=vbe(i.type);if(i.times===void 0){let t=[],n=[];Qw(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}var $s={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}},ac=class{constructor(e,t,n){let r=this,s=!1,a=0,o=0,u,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){o++,s===!1&&r.onStart!==void 0&&r.onStart(c,a,o),s=!0},this.itemEnd=function(c){a++,r.onProgress!==void 0&&r.onProgress(c,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return u?u(c):c},this.setURLModifier=function(c){return u=c,this},this.addHandler=function(c,d){return l.push(c,d),this},this.removeHandler=function(c){let d=l.indexOf(c);return d!==-1&&l.splice(d,2),this},this.getHandler=function(c){for(let d=0,f=l.length;d<f;d+=2){let h=l[d],p=l[d+1];if(h.global&&(h.lastIndex=0),h.test(c))return p}return null}}},Tz=new ac,on=class{constructor(e){this.manager=e!==void 0?e:Tz,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Li={},CS=class extends Error{constructor(e,t){super(e),this.response=t}},Xn=class extends on{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=$s.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Li[e]!==void 0){Li[e].push({onLoad:t,onProgress:n,onError:r});return}Li[e]=[],Li[e].push({onLoad:t,onProgress:n,onError:r});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,u=this.responseType;fetch(a).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||l.body===void 0||l.body.getReader===void 0)return l;let c=Li[e],d=l.body.getReader(),f=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),h=f?parseInt(f):0,p=h!==0,v=0,g=new ReadableStream({start(m){y();function y(){d.read().then(({done:_,value:b})=>{if(_)m.close();else{v+=b.byteLength;let M=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:h});for(let T=0,P=c.length;T<P;T++){let C=c[T];C.onProgress&&C.onProgress(M)}m.enqueue(b),y()}})}}});return new Response(g)}else throw new CS(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(u){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return l.json();default:if(o===void 0)return l.text();{let d=/charset="?([^;"\s]*)"?/i.exec(o),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return l.arrayBuffer().then(p=>h.decode(p))}}}).then(l=>{$s.add(e,l);let c=Li[e];delete Li[e];for(let d=0,f=c.length;d<f;d++){let h=c[d];h.onLoad&&h.onLoad(l)}}).catch(l=>{let c=Li[e];if(c===void 0)throw this.manager.itemError(e),l;delete Li[e];for(let d=0,f=c.length;d<f;d++){let h=c[d];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},OS=class extends on{constructor(e){super(e)}load(e,t,n,r){let s=this,a=new Xn(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}parse(e){let t=[];for(let n=0;n<e.length;n++){let r=Xs.parse(e[n]);t.push(r)}return t}},IS=class extends on{constructor(e){super(e)}load(e,t,n,r){let s=this,a=[],o=new $l,u=new Xn(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let l=0;function c(d){u.load(e[d],function(f){let h=s.parse(f,!0);a[d]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},l+=1,l===6&&(h.mipmapCount===1&&(o.minFilter=Lt),o.image=a,o.format=h.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)c(d);else u.load(e,function(d){let f=s.parse(d,!0);if(f.isCubemap){let h=f.mipmaps.length/f.mipmapCount;for(let p=0;p<h;p++){a[p]={mipmaps:[]};for(let v=0;v<f.mipmapCount;v++)a[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+v]),a[p].format=f.format,a[p].width=f.width,a[p].height=f.height}o.image=a}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=Lt),o.format=f.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}},Zs=class extends on{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=this,a=$s.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;let o=Fl("img");function u(){c(),$s.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(d){c(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){o.removeEventListener("load",u,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",u,!1),o.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}},LS=class extends on{constructor(e){super(e)}load(e,t,n,r){let s=new Rs,a=new Zs(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function u(l){a.load(e[l],function(c){s.images[l]=c,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let l=0;l<e.length;++l)u(l);return s}},qS=class extends on{constructor(e){super(e)}load(e,t,n,r){let s=this,a=new Mr,o=new Xn(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(u){let l=s.parse(u);!l||(l.image!==void 0?a.image=l.image:l.data!==void 0&&(a.image.width=l.width,a.image.height=l.height,a.image.data=l.data),a.wrapS=l.wrapS!==void 0?l.wrapS:Kt,a.wrapT=l.wrapT!==void 0?l.wrapT:Kt,a.magFilter=l.magFilter!==void 0?l.magFilter:Lt,a.minFilter=l.minFilter!==void 0?l.minFilter:Lt,a.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.colorSpace!==void 0?a.colorSpace=l.colorSpace:l.encoding!==void 0&&(a.encoding=l.encoding),l.flipY!==void 0&&(a.flipY=l.flipY),l.format!==void 0&&(a.format=l.format),l.type!==void 0&&(a.type=l.type),l.mipmaps!==void 0&&(a.mipmaps=l.mipmaps,a.minFilter=Tr),l.mipmapCount===1&&(a.minFilter=Lt),l.generateMipmaps!==void 0&&(a.generateMipmaps=l.generateMipmaps),a.needsUpdate=!0,t&&t(a,l))},n,r),a}},NS=class extends on{constructor(e){super(e)}load(e,t,n,r){let s=new Tt,a=new Zs(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}},pi=class extends ft{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ae(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},J_=class extends pi{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ft.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ae(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},TM=new Ye,j3=new I,Y3=new I,oc=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new de(512,512),this.map=null,this.mapPass=null,this.matrix=new Ye,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Eo,this._frameExtents=new de(1,1),this._viewportCount=1,this._viewports=[new gt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;j3.setFromMatrixPosition(e.matrixWorld),t.position.copy(j3),Y3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Y3),t.updateMatrixWorld(),TM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TM),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(TM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},kS=class extends oc{constructor(){super(new kt(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=bo*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},K_=class extends pi{constructor(e,t,n=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ft.DEFAULT_UP),this.updateMatrix(),this.target=new ft,this.distance=n,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new kS}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},X3=new Ye,bl=new I,EM=new I,FS=class extends oc{constructor(){super(new kt(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new de(4,2),this._viewportCount=6,this._viewports=[new gt(2,1,1,1),new gt(0,1,1,1),new gt(3,1,1,1),new gt(1,1,1,1),new gt(3,0,1,1),new gt(1,0,1,1)],this._cubeDirections=[new I(1,0,0),new I(-1,0,0),new I(0,0,1),new I(0,0,-1),new I(0,1,0),new I(0,-1,0)],this._cubeUps=[new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,0,1),new I(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),bl.setFromMatrixPosition(e.matrixWorld),n.position.copy(bl),EM.copy(n.position),EM.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(EM),n.updateMatrixWorld(),r.makeTranslation(-bl.x,-bl.y,-bl.z),X3.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(X3)}},Q_=class extends pi{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new FS}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},US=class extends oc{constructor(){super(new Po(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},e0=class extends pi{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ft.DEFAULT_UP),this.updateMatrix(),this.target=new ft,this.shadow=new US}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},t0=class extends pi{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}},n0=class extends pi{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}},i0=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new I)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){let n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){let n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){let n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}},Lo=class extends pi{constructor(e=new i0,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}},qo=class extends on{constructor(e){super(e),this.textures={}}load(e,t,n,r){let s=this,a=new Xn(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}parse(e){let t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}let r=qo.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ae().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(let s in e.uniforms){let a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=n(a.value);break;case"c":r.uniforms[s].value=new Ae().setHex(a.value);break;case"v2":r.uniforms[s].value=new de().fromArray(a.value);break;case"v3":r.uniforms[s].value=new I().fromArray(a.value);break;case"v4":r.uniforms[s].value=new gt().fromArray(a.value);break;case"m3":r.uniforms[s].value=new et().fromArray(a.value);break;case"m4":r.uniforms[s].value=new Ye().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(let s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new de().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new de().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){let t={ShadowMaterial:U_,SpriteMaterial:jl,RawShaderMaterial:B_,ShaderMaterial:In,PointsMaterial:Xl,MeshPhysicalMaterial:z_,MeshStandardMaterial:ic,MeshPhongMaterial:H_,MeshToonMaterial:W_,MeshNormalMaterial:V_,MeshLambertMaterial:G_,MeshDepthMaterial:Vl,MeshDistanceMaterial:Gl,MeshBasicMaterial:di,MeshMatcapMaterial:j_,LineDashedMaterial:Y_,LineBasicMaterial:Gt,Material:Wt};return new t[e]}},uc=class{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}},r0=class extends Ze{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},s0=class extends on{constructor(e){super(e)}load(e,t,n,r){let s=this,a=new Xn(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}parse(e){let t={},n={};function r(h,p){if(t[p]!==void 0)return t[p];let g=h.interleavedBuffers[p],m=s(h,g.buffer),y=mo(g.type,m),_=new Ro(y,g.stride);return _.uuid=g.uuid,t[p]=_,_}function s(h,p){if(n[p]!==void 0)return n[p];let g=h.arrayBuffers[p],m=new Uint32Array(g).buffer;return n[p]=m,m}let a=e.isInstancedBufferGeometry?new r0:new Ze,o=e.data.index;if(o!==void 0){let h=mo(o.type,o.array);a.setIndex(new _t(h,1))}let u=e.data.attributes;for(let h in u){let p=u[h],v;if(p.isInterleavedBufferAttribute){let g=r(e.data,p.data);v=new zi(g,p.itemSize,p.offset,p.normalized)}else{let g=mo(p.type,p.array),m=p.isInstancedBufferAttribute?Ar:_t;v=new m(g,p.itemSize,p.normalized)}p.name!==void 0&&(v.name=p.name),p.usage!==void 0&&v.setUsage(p.usage),p.updateRange!==void 0&&(v.updateRange.offset=p.updateRange.offset,v.updateRange.count=p.updateRange.count),a.setAttribute(h,v)}let l=e.data.morphAttributes;if(l)for(let h in l){let p=l[h],v=[];for(let g=0,m=p.length;g<m;g++){let y=p[g],_;if(y.isInterleavedBufferAttribute){let b=r(e.data,y.data);_=new zi(b,y.itemSize,y.offset,y.normalized)}else{let b=mo(y.type,y.array);_=new _t(b,y.itemSize,y.normalized)}y.name!==void 0&&(_.name=y.name),v.push(_)}a.morphAttributes[h]=v}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);let d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let h=0,p=d.length;h!==p;++h){let v=d[h];a.addGroup(v.start,v.count,v.materialIndex)}let f=e.data.boundingSphere;if(f!==void 0){let h=new I;f.center!==void 0&&h.fromArray(f.center),a.boundingSphere=new On(h,f.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}},BS=class extends on{constructor(e){super(e)}load(e,t,n,r){let s=this,a=this.path===""?uc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;let o=new Xn(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){let l=null;try{l=JSON.parse(u)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}let c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(l,t)},n,r)}loadAsync(e,t){return pn(this,null,function*(){let n=this,r=this.path===""?uc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;let s=new Xn(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);let a=yield s.loadAsync(e,t),o=JSON.parse(a),u=o.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield n.parseAsync(o)})}parse(e,t){let n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(l)}),o=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,s,u,o,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),t!==void 0){let d=!1;for(let f in a)if(a[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(l)}return l}parseAsync(e){return pn(this,null,function*(){let t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=yield this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,r,o,a,t),l=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,l),u})}parseShapes(e){let t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){let s=new Ui().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){let n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){let o=new Co().fromJSON(e[s],r);n[o.uuid]=o}return n}parseGeometries(e,t){let n={};if(e!==void 0){let r=new s0;for(let s=0,a=e.length;s<a;s++){let o,u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(u);break;default:u.type in G3?o=G3[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}o.uuid=u.uuid,u.name!==void 0&&(o.name=u.name),u.userData!==void 0&&(o.userData=u.userData),n[u.uuid]=o}}return n}parseMaterials(e,t){let n={},r={};if(e!==void 0){let s=new qo;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){let u=e[a];n[u.uuid]===void 0&&(n[u.uuid]=s.parse(u)),r[u.uuid]=n[u.uuid]}}return r}parseAnimations(e){let t={};if(e!==void 0)for(let n=0;n<e.length;n++){let r=e[n],s=Xs.parse(r);t[s.uuid]=s}return t}parseImages(e,t){let n=this,r={},s;function a(u){return n.manager.itemStart(u),s.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}function o(u){if(typeof u=="string"){let l=u,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:n.resourcePath+l;return a(c)}else return u.data?{data:mo(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){let u=new ac(t);s=new Zs(u),s.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){let d=e[l],f=d.url;if(Array.isArray(f)){let h=[];for(let p=0,v=f.length;p<v;p++){let g=f[p],m=o(g);m!==null&&(m instanceof HTMLImageElement?h.push(m):h.push(new Mr(m.data,m.width,m.height)))}r[d.uuid]=new ki(h)}else{let h=o(d.url);r[d.uuid]=new ki(h)}}}return r}parseImagesAsync(e){return pn(this,null,function*(){let t=this,n={},r;function s(a){return pn(this,null,function*(){if(typeof a=="string"){let o=a,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return yield r.loadAsync(u)}else return a.data?{data:mo(a.type,a.data),width:a.width,height:a.height}:null})}if(e!==void 0&&e.length>0){r=new Zs(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){let u=e[a],l=u.url;if(Array.isArray(l)){let c=[];for(let d=0,f=l.length;d<f;d++){let h=l[d],p=yield s(h);p!==null&&(p instanceof HTMLImageElement?c.push(p):c.push(new Mr(p.data,p.width,p.height)))}n[u.uuid]=new ki(c)}else{let c=yield s(u.url);n[u.uuid]=new ki(c)}}}return n})}parseTextures(e,t){function n(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}let r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){let o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);let u=t[o.image],l=u.data,c;Array.isArray(l)?(c=new Rs,l.length===6&&(c.needsUpdate=!0)):(l&&l.data?c=new Mr:c=new Tt,l&&(c.needsUpdate=!0)),c.source=u,c.uuid=o.uuid,o.name!==void 0&&(c.name=o.name),o.mapping!==void 0&&(c.mapping=n(o.mapping,xbe)),o.channel!==void 0&&(c.channel=o.channel),o.offset!==void 0&&c.offset.fromArray(o.offset),o.repeat!==void 0&&c.repeat.fromArray(o.repeat),o.center!==void 0&&c.center.fromArray(o.center),o.rotation!==void 0&&(c.rotation=o.rotation),o.wrap!==void 0&&(c.wrapS=n(o.wrap[0],$3),c.wrapT=n(o.wrap[1],$3)),o.format!==void 0&&(c.format=o.format),o.internalFormat!==void 0&&(c.internalFormat=o.internalFormat),o.type!==void 0&&(c.type=o.type),o.colorSpace!==void 0&&(c.colorSpace=o.colorSpace),o.encoding!==void 0&&(c.encoding=o.encoding),o.minFilter!==void 0&&(c.minFilter=n(o.minFilter,Z3)),o.magFilter!==void 0&&(c.magFilter=n(o.magFilter,Z3)),o.anisotropy!==void 0&&(c.anisotropy=o.anisotropy),o.flipY!==void 0&&(c.flipY=o.flipY),o.generateMipmaps!==void 0&&(c.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(c.unpackAlignment=o.unpackAlignment),o.userData!==void 0&&(c.userData=o.userData),r[o.uuid]=c}return r}parseObject(e,t,n,r,s){let a;function o(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function u(f){if(f!==void 0){if(Array.isArray(f)){let h=[];for(let p=0,v=f.length;p<v;p++){let g=f[p];n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),h.push(n[g])}return h}return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),n[f]}}function l(f){return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),r[f]}let c,d;switch(e.type){case"Scene":a=new T_,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Ae(e.background):a.background=l(e.background)),e.environment!==void 0&&(a.environment=l(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Do(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Ao(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new kt(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Po(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new t0(e.color,e.intensity);break;case"DirectionalLight":a=new e0(e.color,e.intensity);break;case"PointLight":a=new Q_(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new n0(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new K_(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new J_(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new Lo().fromJSON(e);break;case"SkinnedMesh":c=o(e.geometry),d=u(e.material),a=new A_(c,d),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":c=o(e.geometry),d=u(e.material),a=new Ft(c,d);break;case"InstancedMesh":c=o(e.geometry),d=u(e.material);let f=e.count,h=e.instanceMatrix,p=e.instanceColor;a=new D_(c,d,f),a.instanceMatrix=new Ar(new Float32Array(h.array),16),p!==void 0&&(a.instanceColor=new Ar(new Float32Array(p.array),p.itemSize));break;case"LOD":a=new P_;break;case"Line":a=new hi(o(e.geometry),u(e.material));break;case"LineLoop":a=new R_(o(e.geometry),u(e.material));break;case"LineSegments":a=new Ln(o(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new C_(o(e.geometry),u(e.material));break;case"Sprite":a=new E_(u(e.material));break;case"Group":a=new _r;break;case"Bone":a=new Yl;break;default:a=new ft}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){let f=e.children;for(let h=0;h<f.length;h++)a.add(this.parseObject(f[h],t,n,r,s))}if(e.animations!==void 0){let f=e.animations;for(let h=0;h<f.length;h++){let p=f[h];a.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);let f=e.levels;for(let h=0;h<f.length;h++){let p=f[h],v=a.getObjectByProperty("uuid",p.object);v!==void 0&&a.addLevel(v,p.distance,p.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){let r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}},xbe={UVMapping:d0,CubeReflectionMapping:Sr,CubeRefractionMapping:wr,EquirectangularReflectionMapping:Rl,EquirectangularRefractionMapping:Cl,CubeUVReflectionMapping:No},$3={RepeatWrapping:Ol,ClampToEdgeWrapping:Kt,MirroredRepeatWrapping:Il},Z3={NearestFilter:It,NearestMipmapNearestFilter:v_,NearestMipmapLinearFilter:wl,LinearFilter:Lt,LinearMipmapNearestFilter:Ww,LinearMipmapLinearFilter:Tr},zS=class extends on{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=this,a=$s.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;let o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){$s.add(e,u),t&&t(u),s.manager.itemEnd(e)}).catch(function(u){r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}},n_,lc=class{static getContext(){return n_===void 0&&(n_=new(window.AudioContext||window.webkitAudioContext)),n_}static setContext(e){n_=e}},HS=class extends on{constructor(e){super(e)}load(e,t,n,r){let s=this,a=new Xn(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){try{let l=u.slice(0);lc.getContext().decodeAudioData(l,function(d){t(d)},o)}catch(l){o(l)}},n,r);function o(u){r?r(u):console.error(u),s.manager.itemError(e)}}},WS=class extends Lo{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;let r=new Ae().set(e),s=new Ae().set(t),a=new I(r.r,r.g,r.b),o=new I(s.r,s.g,s.b),u=Math.sqrt(Math.PI),l=u*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(u),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}},VS=class extends Lo{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;let n=new Ae().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}},J3=new Ye,K3=new Ye,hs=new Ye,GS=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new kt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new kt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,hs.copy(e.projectionMatrix);let r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(Es*t.fov*.5)/t.zoom,o,u;K3.elements[12]=-r,J3.elements[12]=r,o=-a*t.aspect+s,u=a*t.aspect+s,hs.elements[0]=2*t.near/(u-o),hs.elements[8]=(u+o)/(u-o),this.cameraL.projectionMatrix.copy(hs),o=-a*t.aspect-s,u=a*t.aspect-s,hs.elements[0]=2*t.near/(u-o),hs.elements[8]=(u+o)/(u-o),this.cameraR.projectionMatrix.copy(hs)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(K3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(J3)}},a0=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Q3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=Q3();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function Q3(){return(typeof performance=="undefined"?Date:performance).now()}var ps=new I,eB=new Qt,ybe=new I,ms=new I,jS=class extends ft{constructor(){super(),this.type="AudioListener",this.context=lc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new a0}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ps,eB,ybe),ms.set(0,0,-1).applyQuaternion(eB),t.positionX){let r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ps.x,r),t.positionY.linearRampToValueAtTime(ps.y,r),t.positionZ.linearRampToValueAtTime(ps.z,r),t.forwardX.linearRampToValueAtTime(ms.x,r),t.forwardY.linearRampToValueAtTime(ms.y,r),t.forwardZ.linearRampToValueAtTime(ms.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(ps.x,ps.y,ps.z),t.setOrientation(ms.x,ms.y,ms.z,n.x,n.y,n.z)}},o0=class extends ft{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},gs=new I,tB=new Qt,bbe=new I,vs=new I,YS=class extends o0{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(gs,tB,bbe),vs.set(0,0,1).applyQuaternion(tB);let t=this.panner;if(t.positionX){let n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(gs.x,n),t.positionY.linearRampToValueAtTime(gs.y,n),t.positionZ.linearRampToValueAtTime(gs.z,n),t.orientationX.linearRampToValueAtTime(vs.x,n),t.orientationY.linearRampToValueAtTime(vs.y,n),t.orientationZ.linearRampToValueAtTime(vs.z,n)}else t.setPosition(gs.x,gs.y,gs.z),t.setOrientation(vs.x,vs.y,vs.z)}},XS=class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}},u0=class{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let n=this.buffer,r=this.valueSize,s=e*r+r,a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)n[s+o]=n[o];a=t}else{a+=t;let o=t/a;this._mixBufferRegion(n,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){let u=t*this._origIndex;this._mixBufferRegion(n,r,u,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){o.setValue(n,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,a=r;s!==a;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,r){Qt.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){let a=this._workIndex*s;Qt.multiplyQuaternionsFlat(e,a,e,t,e,n),Qt.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,s){let a=1-r;for(let o=0;o!==s;++o){let u=t+o;e[u]=e[u]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,s){for(let a=0;a!==s;++a){let o=t+a;e[o]=e[o]+e[n+a]*r}}},eT="\\[\\]\\.:\\/",Mbe=new RegExp("["+eT+"]","g"),tT="[^"+eT+"]",Sbe="[^"+eT.replace("\\.","")+"]",wbe=/((?:WC+[\/:])*)/.source.replace("WC",tT),Tbe=/(WCOD+)?/.source.replace("WCOD",Sbe),Ebe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tT),Pbe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tT),Abe=new RegExp("^"+wbe+Tbe+Ebe+Pbe+"$"),Dbe=["material","materials","bones","map"],$S=class{constructor(e,t,n){let r=n||st.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},st=class{constructor(e,t,n){this.path=t,this.parsedPath=n||st.parseTrackName(t),this.node=st.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new st.Composite(e,t,n):new st(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Mbe,"")}static parseTrackName(e){let t=Abe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){let s=n.nodeName.substring(r+1);Dbe.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){let n=function(s){for(let a=0;a<s.length;a++){let o=s[a];if(o.name===t||o.uuid===t)return o;let u=n(o.children);if(u)return u}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,s=t.propertyIndex;if(e||(e=st.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let l=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let a=e[r];if(a===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};st.Composite=$S;st.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};st.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};st.prototype.GetterByBindingType=[st.prototype._getValue_direct,st.prototype._getValue_array,st.prototype._getValue_arrayElement,st.prototype._getValue_toArray];st.prototype.SetterByBindingTypeAndVersioning=[[st.prototype._setValue_direct,st.prototype._setValue_direct_setNeedsUpdate,st.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[st.prototype._setValue_array,st.prototype._setValue_array_setNeedsUpdate,st.prototype._setValue_array_setMatrixWorldNeedsUpdate],[st.prototype._setValue_arrayElement,st.prototype._setValue_arrayElement_setNeedsUpdate,st.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[st.prototype._setValue_fromArray,st.prototype._setValue_fromArray_setNeedsUpdate,st.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var ZS=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=yn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){let e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length,o,u=e.length,l=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){let f=arguments[c],h=f.uuid,p=t[h];if(p===void 0){p=u++,t[h]=p,e.push(f);for(let v=0,g=a;v!==g;++v)s[v].push(new st(f,n[v],r[v]))}else if(p<l){o=e[p];let v=--l,g=e[v];t[g.uuid]=p,e[p]=g,t[h]=v,e[v]=f;for(let m=0,y=a;m!==y;++m){let _=s[m],b=_[v],M=_[p];_[p]=b,M===void 0&&(M=new st(f,n[m],r[m])),_[v]=M}}else e[p]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){let u=arguments[a],l=u.uuid,c=t[l];if(c!==void 0&&c>=s){let d=s++,f=e[d];t[f.uuid]=c,e[c]=f,t[l]=d,e[d]=u;for(let h=0,p=r;h!==p;++h){let v=n[h],g=v[d],m=v[c];v[c]=g,v[d]=m}}}this.nCachedObjects_=s}uncache(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,s=this.nCachedObjects_,a=e.length;for(let o=0,u=arguments.length;o!==u;++o){let l=arguments[o],c=l.uuid,d=t[c];if(d!==void 0)if(delete t[c],d<s){let f=--s,h=e[f],p=--a,v=e[p];t[h.uuid]=d,e[d]=h,t[v.uuid]=f,e[f]=v,e.pop();for(let g=0,m=r;g!==m;++g){let y=n[g],_=y[f],b=y[p];y[d]=_,y[f]=b,y.pop()}}else{let f=--a,h=e[f];f>0&&(t[h.uuid]=d),e[d]=h,e.pop();for(let p=0,v=r;p!==v;++p){let g=n[p];g[d]=g[f],g.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){let n=this._bindingsIndicesByPath,r=n[e],s=this._bindings;if(r!==void 0)return s[r];let a=this._paths,o=this._parsedPaths,u=this._objects,l=u.length,c=this.nCachedObjects_,d=new Array(l);r=s.length,n[e]=r,a.push(e),o.push(t),s.push(d);for(let f=c,h=u.length;f!==h;++f){let p=u[f];d[f]=new st(p,e,t)}return d}unsubscribe_(e){let t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){let r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,u=a[o],l=e[o];t[l]=n,a[n]=u,a.pop(),s[n]=s[o],s.pop(),r[n]=r[o],r.pop()}}},l0=class{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;let s=t.tracks,a=s.length,o=new Array(a),u={endingStart:bs,endingEnd:bs};for(let l=0;l!==a;++l){let c=s[l].createInterpolant(null);o[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=nz,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){let r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){let r=this._mixer,s=r.time,a=this.timeScale,o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);let u=o.parameterPositions,l=o.sampleValues;return u[0]=s,u[1]=s+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}let s=this._startTime;if(s!==null){let u=(e-s)*n;u<0||n===0?t=0:(this._startTime=null,t=n*u)}t*=this._updateTimeScale(e);let a=this._updateTime(t),o=this._updateWeight(e);if(o>0){let u=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case Gw:for(let c=0,d=u.length;c!==d;++c)u[c].evaluate(a),l[c].accumulateAdditive(o);break;case f0:default:for(let c=0,d=u.length;c!==d;++c)u[c].evaluate(a),l[c].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let n=this._weightInterpolant;if(n!==null){let r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let n=this._timeScaleInterpolant;if(n!==null){let r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,n=this.loop,r=this.time+e,s=this._loopCount,a=n===iz;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(n===tz){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){let o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);let u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){let l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){let r=this._interpolantSettings;n?(r.endingStart=Ms,r.endingEnd=Ms):(e?r.endingStart=this.zeroSlopeAtStart?Ms:bs:r.endingStart=Nl,t?r.endingEnd=this.zeroSlopeAtEnd?Ms:bs:r.endingEnd=Nl)}_scheduleFading(e,t,n){let r=this._mixer,s=r.time,a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);let o=a.parameterPositions,u=a.sampleValues;return o[0]=s,u[0]=t,o[1]=s+e,u[1]=n,this}},Rbe=new Float32Array(1),JS=class extends jn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,u=n.uuid,l=this._bindingsByRootAndName,c=l[u];c===void 0&&(c={},l[u]=c);for(let d=0;d!==s;++d){let f=r[d],h=f.name,p=c[h];if(p!==void 0)++p.referenceCount,a[d]=p;else{if(p=a[d],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,u,h));continue}let v=t&&t._propertyBindings[d].binding.parsedPath;p=new u0(st.create(n,h,v),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,u,h),a[d]=p}o[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}let t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){let s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){let s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){let r=this._actions,s=this._actionsByClip,a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{let o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){let t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;let s=e._clip.uuid,a=this._actionsByClip,o=a[s],u=o.knownActions,l=u[u.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,u[c]=l,u.pop(),e._byClipCacheIndex=null;let d=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],u.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){let s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){let t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){let t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){let r=this._bindingsByRootAndName,s=this._bindings,a=r[t];a===void 0&&(a={},r[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){let t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,o=a[r],u=t[t.length-1],l=e._cacheIndex;u._cacheIndex=l,t[l]=u,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){let t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){let t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return n===void 0&&(n=new rc(new Float32Array(2),new Float32Array(2),1,Rbe),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){let t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){let r=t||this._root,s=r.uuid,a=typeof e=="string"?Xs.findByName(r,e):e,o=a!==null?a.uuid:e,u=this._actionsByClip[o],l=null;if(n===void 0&&(a!==null?n=a.blendMode:n=f0),u!==void 0){let d=u.actionByRoot[s];if(d!==void 0&&d.blendMode===n)return d;l=u.knownActions[0],a===null&&(a=l._clip)}if(a===null)return null;let c=new l0(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,s),c}existingAction(e,t){let n=t||this._root,r=n.uuid,s=typeof e=="string"?Xs.findByName(n,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;let t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(r,e,s,a);let o=this._bindings,u=this._nActiveBindings;for(let l=0;l!==u;++l)o[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){let a=s.knownActions;for(let o=0,u=a.length;o!==u;++o){let l=a[o];this._deactivateAction(l);let c=l._cacheIndex,d=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=c,t[c]=d,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}}uncacheRoot(e){let t=e.uuid,n=this._actionsByClip;for(let a in n){let o=n[a].actionByRoot,u=o[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}let r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(let a in s){let o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){let n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}},cc=class{constructor(e){this.value=e}clone(){return new cc(this.value.clone===void 0?this.value:this.value.clone())}},Cbe=0,KS=class extends jn{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Cbe++}),this.name="",this.usage=kl,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;let t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}},QS=class extends Ro{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}},ew=class{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},tw=class{constructor(e,t,n=0,r=1/0){this.ray=new As(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new So,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return nw(e,this,n,t),n.sort(nB),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)nw(e[r],this,n,t);return n.sort(nB),n}};function nB(i,e){return i.distance-e.distance}function nw(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),n===!0){let r=i.children;for(let s=0,a=r.length;s<a;s++)nw(r[s],e,t,!0)}}var iw=class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Pt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},rw=class{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}},iB=new de,sw=class{constructor(e=new de(1/0,1/0),t=new de(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=iB.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,iB).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},rB=new I,i_=new I,aw=class{constructor(e=new I,t=new I){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){rB.subVectors(e,this.start),i_.subVectors(this.end,this.start);let n=i_.dot(i_),s=i_.dot(rB)/n;return t&&(s=Pt(s,0,1)),s}closestPointToPoint(e,t,n){let r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},sB=new I,ow=class extends ft{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let n=new Ze,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,u=32;a<u;a++,o++){let l=a/u*Math.PI*2,c=o/u*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new Le(r,3));let s=new Gt({fog:!1,toneMapped:!1});this.cone=new Ln(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),sB.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(sB),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},gr=new I,r_=new Ye,PM=new Ye,uw=class extends Ln{constructor(e){let t=Ez(e),n=new Ze,r=[],s=[],a=new Ae(0,0,1),o=new Ae(0,1,0);for(let l=0;l<t.length;l++){let c=t[l];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}n.setAttribute("position",new Le(r,3)),n.setAttribute("color",new Le(s,3));let u=new Gt({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,n=this.geometry,r=n.getAttribute("position");PM.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){let o=t[s];o.parent&&o.parent.isBone&&(r_.multiplyMatrices(PM,o.matrixWorld),gr.setFromMatrixPosition(r_),r.setXYZ(a,gr.x,gr.y,gr.z),r_.multiplyMatrices(PM,o.parent.matrixWorld),gr.setFromMatrixPosition(r_),r.setXYZ(a+1,gr.x,gr.y,gr.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}};function Ez(i){let e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,Ez(i.children[t]));return e}var lw=class extends Ft{constructor(e,t,n){let r=new Cr(t,4,2),s=new di({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Obe=new I,aB=new Ae,oB=new Ae,cw=class extends ft{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";let r=new Rr(t);r.rotateY(Math.PI*.5),this.material=new di({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);let s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new _t(a,3)),this.add(new Ft(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let t=e.geometry.getAttribute("color");aB.copy(this.light.color),oB.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){let s=n<r/2?aB:oB;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Obe.setFromMatrixPosition(this.light.matrixWorld).negate())}},dw=class extends Ln{constructor(e=10,t=10,n=4473924,r=8947848){n=new Ae(n),r=new Ae(r);let s=t/2,a=e/t,o=e/2,u=[],l=[];for(let f=0,h=0,p=-o;f<=t;f++,p+=a){u.push(-o,0,p,o,0,p),u.push(p,0,-o,p,0,o);let v=f===s?n:r;v.toArray(l,h),h+=3,v.toArray(l,h),h+=3,v.toArray(l,h),h+=3,v.toArray(l,h),h+=3}let c=new Ze;c.setAttribute("position",new Le(u,3)),c.setAttribute("color",new Le(l,3));let d=new Gt({vertexColors:!0,toneMapped:!1});super(c,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},fw=class extends Ln{constructor(e=10,t=16,n=8,r=64,s=4473924,a=8947848){s=new Ae(s),a=new Ae(a);let o=[],u=[];if(t>1)for(let d=0;d<t;d++){let f=d/t*(Math.PI*2),h=Math.sin(f)*e,p=Math.cos(f)*e;o.push(0,0,0),o.push(h,0,p);let v=d&1?s:a;u.push(v.r,v.g,v.b),u.push(v.r,v.g,v.b)}for(let d=0;d<n;d++){let f=d&1?s:a,h=e-e/n*d;for(let p=0;p<r;p++){let v=p/r*(Math.PI*2),g=Math.sin(v)*h,m=Math.cos(v)*h;o.push(g,0,m),u.push(f.r,f.g,f.b),v=(p+1)/r*(Math.PI*2),g=Math.sin(v)*h,m=Math.cos(v)*h,o.push(g,0,m),u.push(f.r,f.g,f.b)}}let l=new Ze;l.setAttribute("position",new Le(o,3)),l.setAttribute("color",new Le(u,3));let c=new Gt({vertexColors:!0,toneMapped:!1});super(l,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},uB=new I,s_=new I,lB=new I,hw=class extends ft{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Ze;r.setAttribute("position",new Le([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let s=new Gt({fog:!1,toneMapped:!1});this.lightPlane=new hi(r,s),this.add(this.lightPlane),r=new Ze,r.setAttribute("position",new Le([0,0,0,0,0,1],3)),this.targetLine=new hi(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),uB.setFromMatrixPosition(this.light.matrixWorld),s_.setFromMatrixPosition(this.light.target.matrixWorld),lB.subVectors(s_,uB),this.lightPlane.lookAt(s_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(s_),this.targetLine.scale.z=lB.length()}},a_=new I,Et=new To,pw=class extends Ln{constructor(e){let t=new Ze,n=new Gt({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(p,v){u(p),u(v)}function u(p){r.push(0,0,0),s.push(0,0,0),a[p]===void 0&&(a[p]=[]),a[p].push(r.length/3-1)}t.setAttribute("position",new Le(r,3)),t.setAttribute("color",new Le(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new Ae(16755200),c=new Ae(16711680),d=new Ae(43775),f=new Ae(16777215),h=new Ae(3355443);this.setColors(l,c,d,f,h)}setColors(e,t,n,r,s){let o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,n=1,r=1;Et.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ot("c",t,e,Et,0,0,-1),Ot("t",t,e,Et,0,0,1),Ot("n1",t,e,Et,-n,-r,-1),Ot("n2",t,e,Et,n,-r,-1),Ot("n3",t,e,Et,-n,r,-1),Ot("n4",t,e,Et,n,r,-1),Ot("f1",t,e,Et,-n,-r,1),Ot("f2",t,e,Et,n,-r,1),Ot("f3",t,e,Et,-n,r,1),Ot("f4",t,e,Et,n,r,1),Ot("u1",t,e,Et,n*.7,r*1.1,-1),Ot("u2",t,e,Et,-n*.7,r*1.1,-1),Ot("u3",t,e,Et,0,r*2,-1),Ot("cf1",t,e,Et,-n,0,1),Ot("cf2",t,e,Et,n,0,1),Ot("cf3",t,e,Et,0,-r,1),Ot("cf4",t,e,Et,0,r,1),Ot("cn1",t,e,Et,-n,0,-1),Ot("cn2",t,e,Et,n,0,-1),Ot("cn3",t,e,Et,0,-r,-1),Ot("cn4",t,e,Et,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Ot(i,e,t,n,r,s,a){a_.set(r,s,a).unproject(n);let o=e[i];if(o!==void 0){let u=t.getAttribute("position");for(let l=0,c=o.length;l<c;l++)u.setXYZ(o[l],a_.x,a_.y,a_.z)}}var o_=new Cn,mw=class extends Ln{constructor(e,t=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Ze;s.setIndex(new _t(n,1)),s.setAttribute("position",new _t(r,3)),super(s,new Gt({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&o_.setFromObject(this.object),o_.isEmpty())return;let t=o_.min,n=o_.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},gw=class extends Ln{constructor(e,t=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ze;s.setIndex(new _t(n,1)),s.setAttribute("position",new Le(r,3)),super(s,new Gt({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},vw=class extends hi{constructor(e,t=1,n=16776960){let r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Ze;a.setAttribute("position",new Le(s,3)),a.computeBoundingSphere(),super(a,new Gt({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;let o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Ze;u.setAttribute("position",new Le(o,3)),u.computeBoundingSphere(),this.add(new Ft(u,new di({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},cB=new I,u_,AM,_w=class extends ft{constructor(e=new I(0,0,1),t=new I(0,0,0),n=1,r=16776960,s=n*.2,a=s*.2){super(),this.type="ArrowHelper",u_===void 0&&(u_=new Ze,u_.setAttribute("position",new Le([0,0,0,0,1,0],3)),AM=new Hi(0,.5,1,5,1),AM.translate(0,-.5,0)),this.position.copy(t),this.line=new hi(u_,new Gt({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ft(AM,new di({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{cB.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(cB,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},xw=class extends Ln{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Ze;r.setAttribute("position",new Le(t,3)),r.setAttribute("color",new Le(n,3));let s=new Gt({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){let r=new Ae,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},yw=class{constructor(){this.type="ShapePath",this.color=new Ae,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Cs,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,a){return this.currentPath.bezierCurveTo(e,t,n,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(m){let y=[];for(let _=0,b=m.length;_<b;_++){let M=m[_],T=new Ui;T.curves=M.curves,y.push(T)}return y}function n(m,y){let _=y.length,b=!1;for(let M=_-1,T=0;T<_;M=T++){let P=y[M],C=y[T],S=C.x-P.x,A=C.y-P.y;if(Math.abs(A)>Number.EPSILON){if(A<0&&(P=y[T],S=-S,C=y[M],A=-A),m.y<P.y||m.y>C.y)continue;if(m.y===P.y){if(m.x===P.x)return!0}else{let z=A*(m.x-P.x)-S*(m.y-P.y);if(z===0)return!0;if(z<0)continue;b=!b}}else{if(m.y!==P.y)continue;if(C.x<=m.x&&m.x<=P.x||P.x<=m.x&&m.x<=C.x)return!0}}return b}let r=Rn.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,u,l=[];if(s.length===1)return o=s[0],u=new Ui,u.curves=o.curves,l.push(u),l;let c=!r(s[0].getPoints());c=e?!c:c;let d=[],f=[],h=[],p=0,v;f[p]=void 0,h[p]=[];for(let m=0,y=s.length;m<y;m++)o=s[m],v=o.getPoints(),a=r(v),a=e?!a:a,a?(!c&&f[p]&&p++,f[p]={s:new Ui,p:v},f[p].s.curves=o.curves,c&&p++,h[p]=[]):h[p].push({h:o,p:v[0]});if(!f[0])return t(s);if(f.length>1){let m=!1,y=0;for(let _=0,b=f.length;_<b;_++)d[_]=[];for(let _=0,b=f.length;_<b;_++){let M=h[_];for(let T=0;T<M.length;T++){let P=M[T],C=!0;for(let S=0;S<f.length;S++)n(P.p,f[S].p)&&(_!==S&&y++,C?(C=!1,d[S].push(P)):m=!0);C&&d[_].push(P)}}y>0&&m===!1&&(h=d)}let g;for(let m=0,y=f.length;m<y;m++){u=f[m].s,l.push(u),g=h[m];for(let _=0,b=g.length;_<b;_++)u.holes.push(g[_].h)}return l}},bw=class extends fi{constructor(e,t,n,r,s,a){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,r,s,a)}},Mw=class extends Os{constructor(e,t,n,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,r)}},Sw=class extends Is{constructor(e,t,n,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,r)}},ww=class extends Ls{constructor(e,t,n,r,s,a,o){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,r,s,a,o)}},Tw=class extends Hi{constructor(e,t,n,r,s,a,o,u){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,r,s,a,o,u)}},Ew=class extends qs{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}},Pw=class extends ks{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}},Aw=class extends Fs{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}},Dw=class extends Dr{constructor(e,t,n,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,r)}},Rw=class extends Rr{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}},Cw=class extends Pr{constructor(e,t,n,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,r)}},Ow=class extends Yn{constructor(e,t,n,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,r)}},Iw=class extends Us{constructor(e,t,n,r,s,a){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,r,s,a)}},Lw=class extends Bs{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}},qw=class extends Cr{constructor(e,t,n,r,s,a,o){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,r,s,a,o)}},Nw=class extends zs{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}},kw=class extends Hs{constructor(e,t,n,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,r,s)}},Fw=class extends Ws{constructor(e,t,n,r,s,a){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,r,s,a)}},Uw=class extends Vs{constructor(e,t,n,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,r,s)}};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:c0}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=c0);w.ACESFilmicToneMapping=FB;w.AddEquation=xs;w.AddOperation=LB;w.AdditiveAnimationBlendMode=Gw;w.AdditiveBlending=RM;w.AlphaFormat=GB;w.AlwaysDepth=PB;w.AlwaysStencilFunc=oz;w.AmbientLight=t0;w.AmbientLightProbe=VS;w.AnimationAction=l0;w.AnimationClip=Xs;w.AnimationLoader=OS;w.AnimationMixer=JS;w.AnimationObjectGroup=ZS;w.AnimationUtils=gbe;w.ArcCurve=O_;w.ArrayCamera=b_;w.ArrowHelper=_w;w.Audio=o0;w.AudioAnalyser=XS;w.AudioContext=lc;w.AudioListener=jS;w.AudioLoader=HS;w.AxesHelper=xw;w.BackSide=an;w.BasicDepthPacking=rz;w.BasicShadowMap=ige;w.Bone=Yl;w.BooleanKeyframeTrack=Wi;w.Box2=sw;w.Box3=Cn;w.Box3Helper=gw;w.BoxBufferGeometry=bw;w.BoxGeometry=fi;w.BoxHelper=mw;w.BufferAttribute=_t;w.BufferGeometry=Ze;w.BufferGeometryLoader=s0;w.ByteType=BB;w.Cache=$s;w.Camera=To;w.CameraHelper=pw;w.CanvasTexture=PS;w.CapsuleBufferGeometry=Mw;w.CapsuleGeometry=Os;w.CatmullRomCurve3=I_;w.CineonToneMapping=kB;w.CircleBufferGeometry=Sw;w.CircleGeometry=Is;w.ClampToEdgeWrapping=Kt;w.Clock=a0;w.Color=Ae;w.ColorKeyframeTrack=sc;w.ColorManagement=An;w.CompressedArrayTexture=ES;w.CompressedTexture=$l;w.CompressedTextureLoader=IS;w.ConeBufferGeometry=ww;w.ConeGeometry=Ls;w.CubeCamera=x_;w.CubeReflectionMapping=Sr;w.CubeRefractionMapping=wr;w.CubeTexture=Rs;w.CubeTextureLoader=LS;w.CubeUVReflectionMapping=No;w.CubicBezierCurve=Zl;w.CubicBezierCurve3=L_;w.CubicInterpolant=X_;w.CullFaceBack=DM;w.CullFaceFront=fB;w.CullFaceFrontBack=nge;w.CullFaceNone=dB;w.Curve=Mn;w.CurvePath=N_;w.CustomBlending=pB;w.CustomToneMapping=UB;w.CylinderBufferGeometry=Tw;w.CylinderGeometry=Hi;w.Cylindrical=rw;w.Data3DTexture=Bl;w.DataArrayTexture=Mo;w.DataTexture=Mr;w.DataTextureLoader=qS;w.DataUtils=fve;w.DecrementStencilOp=mge;w.DecrementWrapStencilOp=vge;w.DefaultLoadingManager=Tz;w.DepthFormat=xr;w.DepthStencilFormat=Ps;w.DepthTexture=M_;w.DirectionalLight=e0;w.DirectionalLightHelper=hw;w.DiscreteInterpolant=$_;w.DisplayP3ColorSpace=Yw;w.DodecahedronBufferGeometry=Ew;w.DodecahedronGeometry=qs;w.DoubleSide=li;w.DstAlphaFactor=bB;w.DstColorFactor=SB;w.DynamicCopyUsage=Oge;w.DynamicDrawUsage=Ege;w.DynamicReadUsage=Dge;w.EdgesGeometry=k_;w.EllipseCurve=Oo;w.EqualDepth=DB;w.EqualStencilFunc=bge;w.EquirectangularReflectionMapping=Rl;w.EquirectangularRefractionMapping=Cl;w.Euler=Ds;w.EventDispatcher=jn;w.ExtrudeBufferGeometry=Pw;w.ExtrudeGeometry=ks;w.FileLoader=Xn;w.Float16BufferAttribute=pS;w.Float32BufferAttribute=Le;w.Float64BufferAttribute=mS;w.FloatType=Ni;w.Fog=Do;w.FogExp2=Ao;w.FramebufferTexture=TS;w.FrontSide=Bi;w.Frustum=Eo;w.GLBufferAttribute=ew;w.GLSL1=Lge;w.GLSL3=rS;w.GreaterDepth=CB;w.GreaterEqualDepth=RB;w.GreaterEqualStencilFunc=Tge;w.GreaterStencilFunc=Sge;w.GridHelper=dw;w.Group=_r;w.HalfFloatType=yo;w.HemisphereLight=J_;w.HemisphereLightHelper=cw;w.HemisphereLightProbe=WS;w.IcosahedronBufferGeometry=Aw;w.IcosahedronGeometry=Fs;w.ImageBitmapLoader=zS;w.ImageLoader=Zs;w.ImageUtils=Ul;w.IncrementStencilOp=pge;w.IncrementWrapStencilOp=gge;w.InstancedBufferAttribute=Ar;w.InstancedBufferGeometry=r0;w.InstancedInterleavedBuffer=QS;w.InstancedMesh=D_;w.Int16BufferAttribute=fS;w.Int32BufferAttribute=hS;w.Int8BufferAttribute=lS;w.IntType=HB;w.InterleavedBuffer=Ro;w.InterleavedBufferAttribute=zi;w.Interpolant=Gs;w.InterpolateDiscrete=Ll;w.InterpolateLinear=ql;w.InterpolateSmooth=p_;w.InvertStencilOp=_ge;w.KeepStencilOp=m_;w.KeyframeTrack=Sn;w.LOD=P_;w.LatheBufferGeometry=Dw;w.LatheGeometry=Dr;w.Layers=So;w.LessDepth=AB;w.LessEqualDepth=g_;w.LessEqualStencilFunc=Mge;w.LessStencilFunc=yge;w.Light=pi;w.LightProbe=Lo;w.Line=hi;w.Line3=aw;w.LineBasicMaterial=Gt;w.LineCurve=Io;w.LineCurve3=q_;w.LineDashedMaterial=Y_;w.LineLoop=R_;w.LineSegments=Ln;w.LinearEncoding=jw;w.LinearFilter=Lt;w.LinearInterpolant=rc;w.LinearMipMapLinearFilter=uge;w.LinearMipMapNearestFilter=oge;w.LinearMipmapLinearFilter=Tr;w.LinearMipmapNearestFilter=Ww;w.LinearSRGBColorSpace=Gn;w.LinearToneMapping=qB;w.Loader=on;w.LoaderUtils=uc;w.LoadingManager=ac;w.LoopOnce=tz;w.LoopPingPong=iz;w.LoopRepeat=nz;w.LuminanceAlphaFormat=YB;w.LuminanceFormat=jB;w.MOUSE=ege;w.Material=Wt;w.MaterialLoader=qo;w.MathUtils=Xge;w.Matrix3=et;w.Matrix4=Ye;w.MaxEquation=LM;w.Mesh=Ft;w.MeshBasicMaterial=di;w.MeshDepthMaterial=Vl;w.MeshDistanceMaterial=Gl;w.MeshLambertMaterial=G_;w.MeshMatcapMaterial=j_;w.MeshNormalMaterial=V_;w.MeshPhongMaterial=H_;w.MeshPhysicalMaterial=z_;w.MeshStandardMaterial=ic;w.MeshToonMaterial=W_;w.MinEquation=IM;w.MirroredRepeatWrapping=Il;w.MixOperation=IB;w.MultiplyBlending=OM;w.MultiplyOperation=dc;w.NearestFilter=It;w.NearestMipMapLinearFilter=age;w.NearestMipMapNearestFilter=sge;w.NearestMipmapLinearFilter=wl;w.NearestMipmapNearestFilter=v_;w.NeverDepth=EB;w.NeverStencilFunc=xge;w.NoBlending=Fi;w.NoColorSpace=br;w.NoToneMapping=ci;w.NormalAnimationBlendMode=f0;w.NormalBlending=ws;w.NotEqualDepth=OB;w.NotEqualStencilFunc=wge;w.NumberKeyframeTrack=js;w.Object3D=ft;w.ObjectLoader=BS;w.ObjectSpaceNormalMap=az;w.OctahedronBufferGeometry=Rw;w.OctahedronGeometry=Rr;w.OneFactor=_B;w.OneMinusDstAlphaFactor=MB;w.OneMinusDstColorFactor=wB;w.OneMinusSrcAlphaFactor=Hw;w.OneMinusSrcColorFactor=yB;w.OrthographicCamera=Po;w.PCFShadowMap=Bw;w.PCFSoftShadowMap=hB;w.PMREMGenerator=Wl;w.Path=Cs;w.PerspectiveCamera=kt;w.Plane=ui;w.PlaneBufferGeometry=Cw;w.PlaneGeometry=Pr;w.PlaneHelper=vw;w.PointLight=Q_;w.PointLightHelper=lw;w.Points=C_;w.PointsMaterial=Xl;w.PolarGridHelper=fw;w.PolyhedronBufferGeometry=Ow;w.PolyhedronGeometry=Yn;w.PositionalAudio=YS;w.PropertyBinding=st;w.PropertyMixer=u0;w.QuadraticBezierCurve=Jl;w.QuadraticBezierCurve3=Kl;w.Quaternion=Qt;w.QuaternionKeyframeTrack=Or;w.QuaternionLinearInterpolant=Z_;w.RED_GREEN_RGTC2_Format=nS;w.RED_RGTC1_Format=ez;w.REVISION=c0;w.RGBADepthPacking=sz;w.RGBAFormat=_n;w.RGBAIntegerFormat=KB;w.RGBA_ASTC_10x10_Format=KM;w.RGBA_ASTC_10x5_Format=$M;w.RGBA_ASTC_10x6_Format=ZM;w.RGBA_ASTC_10x8_Format=JM;w.RGBA_ASTC_12x10_Format=QM;w.RGBA_ASTC_12x12_Format=eS;w.RGBA_ASTC_4x4_Format=zM;w.RGBA_ASTC_5x4_Format=HM;w.RGBA_ASTC_5x5_Format=WM;w.RGBA_ASTC_6x5_Format=VM;w.RGBA_ASTC_6x6_Format=GM;w.RGBA_ASTC_8x5_Format=jM;w.RGBA_ASTC_8x6_Format=YM;w.RGBA_ASTC_8x8_Format=XM;w.RGBA_BPTC_Format=h_;w.RGBA_ETC2_EAC_Format=BM;w.RGBA_PVRTC_2BPPV1_Format=FM;w.RGBA_PVRTC_4BPPV1_Format=kM;w.RGBA_S3TC_DXT1_Format=c_;w.RGBA_S3TC_DXT3_Format=d_;w.RGBA_S3TC_DXT5_Format=f_;w.RGB_ETC1_Format=QB;w.RGB_ETC2_Format=UM;w.RGB_PVRTC_2BPPV1_Format=NM;w.RGB_PVRTC_4BPPV1_Format=qM;w.RGB_S3TC_DXT1_Format=l_;w.RGFormat=ZB;w.RGIntegerFormat=JB;w.RawShaderMaterial=B_;w.Ray=As;w.Raycaster=tw;w.RectAreaLight=n0;w.RedFormat=XB;w.RedIntegerFormat=$B;w.ReinhardToneMapping=NB;w.RepeatWrapping=Ol;w.ReplaceStencilOp=hge;w.ReverseSubtractEquation=gB;w.RingBufferGeometry=Iw;w.RingGeometry=Us;w.SIGNED_RED_GREEN_RGTC2_Format=iS;w.SIGNED_RED_RGTC1_Format=tS;w.SRGBColorSpace=$e;w.Scene=T_;w.ShaderChunk=Je;w.ShaderLib=Vn;w.ShaderMaterial=In;w.ShadowMaterial=U_;w.Shape=Ui;w.ShapeBufferGeometry=Lw;w.ShapeGeometry=Bs;w.ShapePath=yw;w.ShapeUtils=Rn;w.ShortType=zB;w.Skeleton=Co;w.SkeletonHelper=uw;w.SkinnedMesh=A_;w.Source=ki;w.Sphere=On;w.SphereBufferGeometry=qw;w.SphereGeometry=Cr;w.Spherical=iw;w.SphericalHarmonics3=i0;w.SplineCurve=Ql;w.SpotLight=K_;w.SpotLightHelper=ow;w.Sprite=E_;w.SpriteMaterial=jl;w.SrcAlphaFactor=zw;w.SrcAlphaSaturateFactor=TB;w.SrcColorFactor=xB;w.StaticCopyUsage=Cge;w.StaticDrawUsage=kl;w.StaticReadUsage=Age;w.StereoCamera=GS;w.StreamCopyUsage=Ige;w.StreamDrawUsage=Pge;w.StreamReadUsage=Rge;w.StringKeyframeTrack=Vi;w.SubtractEquation=mB;w.SubtractiveBlending=CM;w.TOUCH=tge;w.TangentSpaceNormalMap=Ir;w.TetrahedronBufferGeometry=Nw;w.TetrahedronGeometry=zs;w.Texture=Tt;w.TextureLoader=NS;w.TorusBufferGeometry=kw;w.TorusGeometry=Hs;w.TorusKnotBufferGeometry=Fw;w.TorusKnotGeometry=Ws;w.Triangle=Jt;w.TriangleFanDrawMode=dge;w.TriangleStripDrawMode=cge;w.TrianglesDrawMode=lge;w.TubeBufferGeometry=Uw;w.TubeGeometry=Vs;w.TwoPassDoubleSide=rge;w.UVMapping=d0;w.Uint16BufferAttribute=zl;w.Uint32BufferAttribute=Hl;w.Uint8BufferAttribute=cS;w.Uint8ClampedBufferAttribute=dS;w.Uniform=cc;w.UniformsGroup=KS;w.UniformsLib=we;w.UniformsUtils=hz;w.UnsignedByteType=Er;w.UnsignedInt248Type=Ts;w.UnsignedIntType=vr;w.UnsignedShort4444Type=WB;w.UnsignedShort5551Type=VB;w.UnsignedShortType=Vw;w.VSMShadowMap=oi;w.Vector2=de;w.Vector3=I;w.Vector4=gt;w.VectorKeyframeTrack=Ys;w.VideoTexture=wS;w.WebGL1Renderer=w_;w.WebGL3DRenderTarget=oS;w.WebGLArrayRenderTarget=aS;w.WebGLCubeRenderTarget=y_;w.WebGLMultipleRenderTargets=uS;w.WebGLRenderTarget=bn;w.WebGLRenderer=S_;w.WebGLUtils=xz;w.WireframeGeometry=F_;w.WrapAroundEnding=Nl;w.ZeroCurvatureEnding=bs;w.ZeroFactor=vB;w.ZeroSlopeEnding=Ms;w.ZeroStencilOp=fge;w._SRGBAFormat=__;w.sRGBEncoding=yr});var{format:hc,subMonths:Ibe,subYears:rSe,startOfMonth:sSe,addMonths:rT,isBefore:Lbe}=fk(),{Chart:Rz,LineController:qbe,LineElement:Nbe,PointElement:kbe,CategoryScale:Fbe,LinearScale:Ube,Filler:Bbe}=UU(),{TetrahedronGeometry:aSe}=Pz(),m0,v0,Gi,Bo,_0,Lr,iT,Az,fc=0,Fo=0,g0=0,Cz=0,nT="USD";document.addEventListener("DOMContentLoaded",()=>pn(void 0,null,function*(){let i=document.getElementById("savings-recurring-amounts-txt"),e=document.getElementById("savings-recurring-amount-input");e.addEventListener("change",a=>{Vbe(a)}),e.addEventListener("input",a=>{i.innerText=Uo(a.currentTarget.value)}),_0=e.value,i.innerText=Uo(e.value);let t=document.getElementById("savings-recurring-years-txt"),n=document.getElementById("savings-recurring-years-input");n.addEventListener("change",a=>{Gbe(a)}),n.addEventListener("input",a=>{t.innerText=a.currentTarget.value}),Gi=n.value,t.innerText=n.value;let r=document.getElementById("savings-stock-select");r.addEventListener("change",Wbe),v0=r.value;let s=document.getElementById("initial-amount-input-field");s.addEventListener("keyup",function(a){clearTimeout(Az);let o=a.currentTarget.value,u=Number(o.replace(/[^0-9\.-]+/g,""));Az=setTimeout(()=>pn(this,null,function*(){console.log(u),x0(),yield pc(u);let l=Uo(u);s.value=l}),1500)}),s.addEventListener("focus",a=>{a.currentTarget.value=""}),Rz.register(qbe,Nbe,kbe,Fbe,Ube,Bbe),yield Oz(Gi*12),yield sT(),Hbe(document.getElementById("savingsChart")),pc()}));function pc(i){return pn(this,null,function*(){let e=i===void 0?0:i,t=document.getElementById("savings-investment-amount-txt"),n=document.getElementById("savings-profit-amount-txt"),r=document.getElementById("savings-total-amount-txt"),s=Gi*12,a=[],o=[];for(let c=0;c<s;c++){let d=rT(new Date(Bo.from),c),f=hc(d,"yyyy-MM-dd"),h=m0.find(v=>v.date===f);if(h||(h=m0.filter(g=>Lbe(new Date(g.date),d)).sort((g,m)=>new Date(m.date)-new Date(g.date))[0]),h)if(c===1){let v=e/h.close;fc+=v,Fo+=Dz(iT,v,e)}else{let v=_0/h.close;fc+=v,Fo+=Dz(iT,v,_0)}let p=fc*(h?h.close:0);a.push(p),o.push(Fo)}let u=m0[0].close,l=fc*u;g0=l-Fo,Cz=l,t.innerText=Uo(Fo,nT),n.innerText=Uo(g0,nT),r.innerText=Uo(l,nT),document.getElementById("savings-card-recurring-years-txt").innerHTML=Gi,document.getElementById("savings-card-returns-percent").innerHTML=zbe(g0,l).toFixed(0)+"%",Lr.data.datasets[0].data=a,Lr.data.datasets[1].data=o,Lr.update(),Ybe(Lr)})}function zbe(i,e){return i/e*100}function sT(){return pn(this,null,function*(){try{m0=(yield(yield fetch(`https://financialmodelingprep.com/api/v3/historical-price-full/${v0}?from=${Bo.from}&to=${Bo.to}&apikey=814ec78e2473ac4c01ac84f650c9ce22`)).json()).historical}catch(i){console.error("Error fetching prices:",i)}})}function Oz(i){let e=new Date,t=Ibe(e,i-1);return new Promise((n,r)=>{Bo={from:hc(t,"yyyy-MM-dd"),to:hc(e,"yyyy-MM-dd")},n()})}function Hbe(i){let e=i.getContext("2d"),t=Gi*12,n=e.createLinearGradient(0,0,0,i.height);n.addColorStop(0,"rgba(51,182,160,1)"),n.addColorStop(1,"rgba(51,182,160,0.05)");let r=e.createLinearGradient(0,0,0,i.height);r.addColorStop(0,"rgba(217,108,87,1)"),r.addColorStop(1,"rgba(217,108,87,0.05)");let s={labels:Array.from({length:t},(a,o)=>hc(rT(new Date(Bo.from),o),"MMM yyyy")),datasets:[{label:"Total Value",data:Array.from({length:t},()=>0),borderColor:"rgb(51,182,160)",backgroundColor:n,fill:"origin",tension:.3},{label:"Investment",data:Array.from({length:t},()=>0),borderColor:"rgb(217,108,87)",backgroundColor:r,fill:"origin",tension:.3}]};Lr=new Rz(i,{type:"line",data:s,options:{maintainAspectRatio:!1,plugins:{legend:{display:!0},chartAreaBorder:{borderColor:"red",borderWidth:0,borderDash:[5,5],borderDashOffset:2}},scales:{x:{ticks:{callback:function(a,o,u){let c=u.length-1,d=Math.floor(c/2);return o%4?this.getLabelForValue(a):""}},grid:{display:!1}},y:{ticks:{callback:function(a,o,u){return o===0?"":a}},grid:{display:!0}}}}})}function Wbe(i){return pn(this,null,function*(){x0();let e=i.currentTarget.value;iT=i.currentTarget.options[i.currentTarget.selectedIndex].text.includes("ETF"),v0!==e&&(v0=e),yield sT(),yield pc()})}function Dz(i,e,t){let n=0;return i?e<3e3?n=t-1.8:n=deductPercentage(t,.06):e<500?n=t-2.5:n=t-(2.5+.005)}function Uo(i,e){return formatCurr=e||"USD",new Intl.NumberFormat("en-US",{style:"currency",currency:formatCurr}).format(i)}function Vbe(i){_0=i.currentTarget.value,x0(),pc()}function Gbe(i){return pn(this,null,function*(){let e=parseInt(i.currentTarget.value,10),t=Gi;Gi=e,yield Oz(Gi*12),yield sT(),x0(),pc(),jbe()})}function jbe(){let i=Gi*12;Lr.data.labels=Array.from({length:i},(e,t)=>hc(rT(new Date(Bo.from),t),"MMM yyyy")),Lr.data.datasets.forEach(e=>{let t=e.data;e.data=Array.from({length:i},(n,r)=>t[r]||0)}),Lr.update()}function x0(){fc=0,Fo=0,g0=0,Cz=0}function Ybe(i){let e=i.ctx,t=i.height,n=e.createLinearGradient(0,0,0,t);n.addColorStop(0,"rgba(51,182,160,0.5)"),n.addColorStop(1,"rgba(51,182,160,0.05)"),i.data.datasets[0].backgroundColor=n;let r=e.createLinearGradient(0,0,0,t);r.addColorStop(0,"rgba(217,108,87,0.5)"),r.addColorStop(1,"rgba(217,108,87,0.05)"),i.data.datasets[1].backgroundColor=r}})();
/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */
/*!
 * Chart.js v4.3.3
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
