(()=>{var l=(t,e,r)=>new Promise((a,n)=>{var s=c=>{try{o(r.next(c))}catch(i){n(i)}},p=c=>{try{o(r.throw(c))}catch(i){n(i)}},o=c=>c.done?a(c.value):Promise.resolve(c.value).then(s,p);o((r=r.apply(t,e)).next())});var u;document.addEventListener("DOMContentLoaded",()=>l(void 0,null,function*(){let t=document.querySelector(".w-richtext"),e=t.innerHTML,r=new RegExp("\\{\\{(.*?)\\}\\}","gs"),a=e.match(r);if(a){for(let n of a)if(n.includes("m-tag")){let s=n.replace(/\n/g,"").replace(/\s+/g," "),p=/option="(.*?)"/g,o=/ticker="(.*?)"/g,c=/currency="(.*?)"/g,i=p.exec(s),h=o.exec(s);u=c.exec(s);let m=yield d(i,h);e=e.replace(n,m)}t.innerHTML=e,yield w("http://127.0.0.1:8080/tickerChartTag.js")}}));function d(t,e){return l(this,null,function*(){switch(t[1]){case"analysis":return`<a href="${r}">${tag[1].toUpperCase()}</a>`;case"term":return`<a href="${r}">${tag[1].toUpperCase()}</a>`;case"search":let r="https://www.mexem.com/search?query="+tag[1];return`<a href="${r}">${tag[1].toUpperCase()}</a>`;case"price":let a=u[1],n=yield f(e[1]);return g(n,a);default:break}})}function f(t){return l(this,null,function*(){try{let e=yield fetch(`https://financialmodelingprep.com/api/v3/quote/${t}?apikey=814ec78e2473ac4c01ac84f650c9ce22`);if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return(yield e.json())[0]}catch(e){throw console.error("There was a problem with the fetch operation:",e.message),e}})}function g(t,e){let r=Math.sign(t.changesPercentage)===-1?"down":"up",a=y(t.price,e);return`<button class="tickerchart-btn" data-currency="${e}" data-ticker="${t.symbol}" style="display:inline-flex; align-items:center; justify-content:space-between;">(
          <span class="exchange-ticker" style="margin:0 8px;">${t.exchange}:${t.symbol}</span>
          <span  class="inline-blog-ticker-price ${r}">${a}</span>
          <svg  fill="currentColor" style="${r==="down"?"transform: rotate(180deg);":""}" class="inline-blog-ticker-caret ${r} pulsate" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="display: block;">
            <path d="M6.1018 16.9814C5.02785 16.9814 4.45387 15.7165 5.16108 14.9083L10.6829 8.59762C11.3801 7.80079 12.6197 7.80079 13.3169 8.59762L18.8388 14.9083C19.5459 15.7165 18.972 16.9814 17.898 16.9814H6.1018Z"></path>
          </svg>
          )
        </button>`}function y(t,e){return formatCurr=e||"USD",new Intl.NumberFormat("en-US",{style:"currency",currency:formatCurr}).format(t)}function w(t){return new Promise((e,r)=>{let a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=t,a.onload=()=>{e(`Script ${t} loaded successfully.`)},a.onerror=()=>{r(new Error(`Failed to load script ${t}.`))},document.head.appendChild(a)})}})();
